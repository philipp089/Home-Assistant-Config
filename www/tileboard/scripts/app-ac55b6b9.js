!function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function n(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var r=function(t){return t&&t.Math==Math&&t},i=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof t&&t)||function(){return this}()||Function("return this")(),a={},o=function(t){try{return!!t()}catch(t){return!0}},s=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),l={},u={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,d=c&&!u.call({1:2},1);l.f=d?function(t){var e=c(this,t);return!!e&&e.enumerable}:u;var h,f,p=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},g={}.toString,v=function(t){return g.call(t).slice(8,-1)},m=v,y="".split,b=o((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==m(t)?y.call(t,""):Object(t)}:Object,S=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},E=b,T=S,_=function(t){return E(T(t))},x=function(t){return"object"==typeof t?null!==t:"function"==typeof t},w=i,k=function(t){return"function"==typeof t?t:void 0},A=function(t,e){return arguments.length<2?k(w[t]):w[t]&&w[t][e]},C=A("navigator","userAgent")||"",D=i,L=C,$=D.process,O=D.Deno,M=$&&$.versions||O&&O.version,I=M&&M.v8;I?f=(h=I.split("."))[0]<4?1:h[0]+h[1]:L&&(!(h=L.match(/Edge\/(\d+)/))||h[1]>=74)&&(h=L.match(/Chrome\/(\d+)/))&&(f=h[1]);var R=f&&+f,P=R,F=o,N=!!Object.getOwnPropertySymbols&&!F((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&P&&P<41})),U=N&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,B=A,j=U?function(t){return"symbol"==typeof t}:function(t){var e=B("Symbol");return"function"==typeof e&&Object(t)instanceof e},V=x,H={exports:{}},G=i,W=function(t,e){try{Object.defineProperty(G,t,{value:e,configurable:!0,writable:!0})}catch(n){G[t]=e}return e},z=W,Y="__core-js_shared__",q=i[Y]||z(Y,{}),K=q;(H.exports=function(t,e){return K[t]||(K[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.16.0",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"});var X=S,Z=function(t){return Object(X(t))},J=Z,Q={}.hasOwnProperty,tt=Object.hasOwn||function(t,e){return Q.call(J(t),e)},et=0,nt=Math.random(),rt=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++et+nt).toString(36)},it=i,at=H.exports,ot=tt,st=rt,lt=N,ut=U,ct=at("wks"),dt=it.Symbol,ht=ut?dt:dt&&dt.withoutSetter||st,ft=function(t){return ot(ct,t)&&(lt||"string"==typeof ct[t])||(lt&&ot(dt,t)?ct[t]=dt[t]:ct[t]=ht("Symbol."+t)),ct[t]},pt=x,gt=j,vt=function(t,e){var n,r;if("string"===e&&"function"==typeof(n=t.toString)&&!V(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!V(r=n.call(t)))return r;if("string"!==e&&"function"==typeof(n=t.toString)&&!V(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},mt=ft("toPrimitive"),yt=function(t,e){if(!pt(t)||gt(t))return t;var n,r=t[mt];if(void 0!==r){if(void 0===e&&(e="default"),n=r.call(t,e),!pt(n)||gt(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===e&&(e="number"),vt(t,e)},bt=yt,St=j,Et=function(t){var e=bt(t,"string");return St(e)?e:String(e)},Tt=x,_t=i.document,xt=Tt(_t)&&Tt(_t.createElement),wt=function(t){return xt?_t.createElement(t):{}},kt=wt,At=!s&&!o((function(){return 7!=Object.defineProperty(kt("div"),"a",{get:function(){return 7}}).a})),Ct=s,Dt=l,Lt=p,$t=_,Ot=Et,Mt=tt,It=At,Rt=Object.getOwnPropertyDescriptor;a.f=Ct?Rt:function(t,e){if(t=$t(t),e=Ot(e),It)try{return Rt(t,e)}catch(t){}if(Mt(t,e))return Lt(!Dt.f.call(t,e),t[e])};var Pt={},Ft=x,Nt=function(t){if(!Ft(t))throw TypeError(String(t)+" is not an object");return t},Ut=s,Bt=At,jt=Nt,Vt=Et,Ht=Object.defineProperty;Pt.f=Ut?Ht:function(t,e,n){if(jt(t),e=Vt(e),jt(n),Bt)try{return Ht(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var Gt=Pt,Wt=p,zt=s?function(t,e,n){return Gt.f(t,e,Wt(1,n))}:function(t,e,n){return t[e]=n,t},Yt={exports:{}},qt=q,Kt=Function.toString;"function"!=typeof qt.inspectSource&&(qt.inspectSource=function(t){return Kt.call(t)});var Xt,Zt,Jt,Qt=qt.inspectSource,te=Qt,ee=i.WeakMap,ne="function"==typeof ee&&/native code/.test(te(ee)),re=H.exports,ie=rt,ae=re("keys"),oe=function(t){return ae[t]||(ae[t]=ie(t))},se={},le=ne,ue=x,ce=zt,de=tt,he=q,fe=oe,pe=se,ge="Object already initialized",ve=i.WeakMap;if(le||he.state){var me=he.state||(he.state=new ve),ye=me.get,be=me.has,Se=me.set;Xt=function(t,e){if(be.call(me,t))throw new TypeError(ge);return e.facade=t,Se.call(me,t,e),e},Zt=function(t){return ye.call(me,t)||{}},Jt=function(t){return be.call(me,t)}}else{var Ee=fe("state");pe[Ee]=!0,Xt=function(t,e){if(de(t,Ee))throw new TypeError(ge);return e.facade=t,ce(t,Ee,e),e},Zt=function(t){return de(t,Ee)?t[Ee]:{}},Jt=function(t){return de(t,Ee)}}var Te={set:Xt,get:Zt,has:Jt,enforce:function(t){return Jt(t)?Zt(t):Xt(t,{})},getterFor:function(t){return function(e){var n;if(!ue(e)||(n=Zt(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},_e=i,xe=zt,we=tt,ke=W,Ae=Qt,Ce=Te.get,De=Te.enforce,Le=String(String).split("String");(Yt.exports=function(t,e,n,r){var i,a=!!r&&!!r.unsafe,o=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||we(n,"name")||xe(n,"name",e),(i=De(n)).source||(i.source=Le.join("string"==typeof e?e:""))),t!==_e?(a?!s&&t[e]&&(o=!0):delete t[e],o?t[e]=n:xe(t,e,n)):o?t[e]=n:ke(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&Ce(this).source||Ae(this)}));var $e={},Oe=Math.ceil,Me=Math.floor,Ie=function(t){return isNaN(t=+t)?0:(t>0?Me:Oe)(t)},Re=Ie,Pe=Math.min,Fe=function(t){return t>0?Pe(Re(t),9007199254740991):0},Ne=Ie,Ue=Math.max,Be=Math.min,je=function(t,e){var n=Ne(t);return n<0?Ue(n+e,0):Be(n,e)},Ve=_,He=Fe,Ge=je,We=function(t){return function(e,n,r){var i,a=Ve(e),o=He(a.length),s=Ge(r,o);if(t&&n!=n){for(;o>s;)if((i=a[s++])!=i)return!0}else for(;o>s;s++)if((t||s in a)&&a[s]===n)return t||s||0;return!t&&-1}},ze={includes:We(!0),indexOf:We(!1)},Ye=tt,qe=_,Ke=ze.indexOf,Xe=se,Ze=function(t,e){var n,r=qe(t),i=0,a=[];for(n in r)!Ye(Xe,n)&&Ye(r,n)&&a.push(n);for(;e.length>i;)Ye(r,n=e[i++])&&(~Ke(a,n)||a.push(n));return a},Je=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Qe=Ze,tn=Je.concat("length","prototype");$e.f=Object.getOwnPropertyNames||function(t){return Qe(t,tn)};var en={};en.f=Object.getOwnPropertySymbols;var nn=$e,rn=en,an=Nt,on=A("Reflect","ownKeys")||function(t){var e=nn.f(an(t)),n=rn.f;return n?e.concat(n(t)):e},sn=tt,ln=on,un=a,cn=Pt,dn=o,hn=/#|\.prototype\./,fn=function(t,e){var n=gn[pn(t)];return n==mn||n!=vn&&("function"==typeof e?dn(e):!!e)},pn=fn.normalize=function(t){return String(t).replace(hn,".").toLowerCase()},gn=fn.data={},vn=fn.NATIVE="N",mn=fn.POLYFILL="P",yn=fn,bn=i,Sn=a.f,En=zt,Tn=Yt.exports,_n=W,xn=function(t,e){for(var n=ln(e),r=cn.f,i=un.f,a=0;a<n.length;a++){var o=n[a];sn(t,o)||r(t,o,i(e,o))}},wn=yn,kn=function(t,e){var n,r,i,a,o,s=t.target,l=t.global,u=t.stat;if(n=l?bn:u?bn[s]||_n(s,{}):(bn[s]||{}).prototype)for(r in e){if(a=e[r],i=t.noTargetGet?(o=Sn(n,r))&&o.value:n[r],!wn(l?r:s+(u?".":"#")+r,t.forced)&&void 0!==i){if(typeof a==typeof i)continue;xn(a,i)}(t.sham||i&&i.sham)&&En(a,"sham",!0),Tn(n,r,a,t)}},An=v,Cn=Array.isArray||function(t){return"Array"==An(t)},Dn=Et,Ln=Pt,$n=p,On=function(t,e,n){var r=Dn(e);r in t?Ln.f(t,r,$n(0,n)):t[r]=n},Mn=x,In=Cn,Rn=ft("species"),Pn=function(t){var e;return In(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!In(e.prototype)?Mn(e)&&null===(e=e[Rn])&&(e=void 0):e=void 0),void 0===e?Array:e},Fn=function(t,e){return new(Pn(t))(0===e?0:e)},Nn=o,Un=R,Bn=ft("species"),jn=function(t){return Un>=51||!Nn((function(){var e=[];return(e.constructor={})[Bn]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},Vn=kn,Hn=o,Gn=Cn,Wn=x,zn=Z,Yn=Fe,qn=On,Kn=Fn,Xn=jn,Zn=R,Jn=ft("isConcatSpreadable"),Qn=9007199254740991,tr="Maximum allowed index exceeded",er=Zn>=51||!Hn((function(){var t=[];return t[Jn]=!1,t.concat()[0]!==t})),nr=Xn("concat"),rr=function(t){if(!Wn(t))return!1;var e=t[Jn];return void 0!==e?!!e:Gn(t)};Vn({target:"Array",proto:!0,forced:!er||!nr},{concat:function(t){var e,n,r,i,a,o=zn(this),s=Kn(o,0),l=0;for(e=-1,r=arguments.length;e<r;e++)if(rr(a=-1===e?o:arguments[e])){if(l+(i=Yn(a.length))>Qn)throw TypeError(tr);for(n=0;n<i;n++,l++)n in a&&qn(s,l,a[n])}else{if(l>=Qn)throw TypeError(tr);qn(s,l++,a)}return s.length=l,s}});var ir,ar=Ze,or=Je,sr=Object.keys||function(t){return ar(t,or)},lr=Pt,ur=Nt,cr=sr,dr=s?Object.defineProperties:function(t,e){ur(t);for(var n,r=cr(e),i=r.length,a=0;i>a;)lr.f(t,n=r[a++],e[n]);return t},hr=A("document","documentElement"),fr=Nt,pr=dr,gr=Je,vr=se,mr=hr,yr=wt,br=oe("IE_PROTO"),Sr=function(){},Er=function(t){return"<script>"+t+"</"+"script>"},Tr=function(t){t.write(Er("")),t.close();var e=t.parentWindow.Object;return t=null,e},_r=function(){try{ir=new ActiveXObject("htmlfile")}catch(t){}_r=document.domain&&ir?Tr(ir):function(){var t,e=yr("iframe");if(e.style)return e.style.display="none",mr.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Er("document.F=Object")),t.close(),t.F}()||Tr(ir);for(var t=gr.length;t--;)delete _r.prototype[gr[t]];return _r()};vr[br]=!0;var xr=Object.create||function(t,e){var n;return null!==t?(Sr.prototype=fr(t),n=new Sr,Sr.prototype=null,n[br]=t):n=_r(),void 0===e?n:pr(n,e)},wr=xr,kr=Pt,Ar=ft("unscopables"),Cr=Array.prototype;null==Cr[Ar]&&kr.f(Cr,Ar,{configurable:!0,value:wr(null)});var Dr,Lr,$r,Or=function(t){Cr[Ar][t]=!0},Mr={},Ir=!o((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Rr=tt,Pr=Z,Fr=Ir,Nr=oe("IE_PROTO"),Ur=Object.prototype,Br=Fr?Object.getPrototypeOf:function(t){return t=Pr(t),Rr(t,Nr)?t[Nr]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Ur:null},jr=o,Vr=Br,Hr=zt,Gr=tt,Wr=ft("iterator"),zr=!1;[].keys&&("next"in($r=[].keys())?(Lr=Vr(Vr($r)))!==Object.prototype&&(Dr=Lr):zr=!0),(null==Dr||jr((function(){var t={};return Dr[Wr].call(t)!==t})))&&(Dr={}),Gr(Dr,Wr)||Hr(Dr,Wr,(function(){return this}));var Yr={IteratorPrototype:Dr,BUGGY_SAFARI_ITERATORS:zr},qr=Pt.f,Kr=tt,Xr=ft("toStringTag"),Zr=function(t,e,n){t&&!Kr(t=n?t:t.prototype,Xr)&&qr(t,Xr,{configurable:!0,value:e})},Jr=Yr.IteratorPrototype,Qr=xr,ti=p,ei=Zr,ni=Mr,ri=function(){return this},ii=function(t,e,n){var r=e+" Iterator";return t.prototype=Qr(Jr,{next:ti(1,n)}),ei(t,r,!1),ni[r]=ri,t},ai=x,oi=Nt,si=function(t){if(!ai(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t},li=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return oi(n),si(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),ui=kn,ci=ii,di=Br,hi=li,fi=Zr,pi=zt,gi=Yt.exports,vi=Mr,mi=Yr.IteratorPrototype,yi=Yr.BUGGY_SAFARI_ITERATORS,bi=ft("iterator"),Si="keys",Ei="values",Ti="entries",_i=function(){return this},xi=function(t,e,n,r,i,a,o){ci(n,e,r);var s,l,u,c=function(t){if(t===i&&g)return g;if(!yi&&t in f)return f[t];switch(t){case Si:case Ei:case Ti:return function(){return new n(this,t)}}return function(){return new n(this)}},d=e+" Iterator",h=!1,f=t.prototype,p=f[bi]||f["@@iterator"]||i&&f[i],g=!yi&&p||c(i),v="Array"==e&&f.entries||p;if(v&&(s=di(v.call(new t)),mi!==Object.prototype&&s.next&&(di(s)!==mi&&(hi?hi(s,mi):"function"!=typeof s[bi]&&pi(s,bi,_i)),fi(s,d,!0))),i==Ei&&p&&p.name!==Ei&&(h=!0,g=function(){return p.call(this)}),f[bi]!==g&&pi(f,bi,g),vi[e]=g,i)if(l={values:c(Ei),keys:a?g:c(Si),entries:c(Ti)},o)for(u in l)(yi||h||!(u in f))&&gi(f,u,l[u]);else ui({target:e,proto:!0,forced:yi||h},l);return l},wi=_,ki=Or,Ai=Mr,Ci=Te,Di=xi,Li="Array Iterator",$i=Ci.set,Oi=Ci.getterFor(Li),Mi=Di(Array,"Array",(function(t,e){$i(this,{type:Li,target:wi(t),index:0,kind:e})}),(function(){var t=Oi(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");Ai.Arguments=Ai.Array,ki("keys"),ki("values"),ki("entries");var Ii={};Ii[ft("toStringTag")]="z";var Ri="[object z]"===String(Ii),Pi=Ri,Fi=v,Ni=ft("toStringTag"),Ui="Arguments"==Fi(function(){return arguments}()),Bi=Pi?Fi:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Ni))?n:Ui?Fi(e):"Object"==(r=Fi(e))&&"function"==typeof e.callee?"Arguments":r},ji=Bi,Vi=Ri?{}.toString:function(){return"[object "+ji(this)+"]"},Hi=Ri,Gi=Yt.exports,Wi=Vi;Hi||Gi(Object.prototype,"toString",Wi,{unsafe:!0});var zi=j,Yi=function(t){if(zi(t))throw TypeError("Cannot convert a Symbol value to a string");return String(t)},qi=Ie,Ki=Yi,Xi=S,Zi=function(t){return function(e,n){var r,i,a=Ki(Xi(e)),o=qi(n),s=a.length;return o<0||o>=s?t?"":void 0:(r=a.charCodeAt(o))<55296||r>56319||o+1===s||(i=a.charCodeAt(o+1))<56320||i>57343?t?a.charAt(o):r:t?a.slice(o,o+2):i-56320+(r-55296<<10)+65536}},Ji={codeAt:Zi(!1),charAt:Zi(!0)},Qi=Ji.charAt,ta=Yi,ea=Te,na=xi,ra="String Iterator",ia=ea.set,aa=ea.getterFor(ra);na(String,"String",(function(t){ia(this,{type:ra,string:ta(t),index:0})}),(function(){var t,e=aa(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=Qi(n,r),e.index+=t.length,{value:t,done:!1})}));var oa={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},sa=i,la=oa,ua=Mi,ca=zt,da=ft,ha=da("iterator"),fa=da("toStringTag"),pa=ua.values;for(var ga in la){var va=sa[ga],ma=va&&va.prototype;if(ma){if(ma[ha]!==pa)try{ca(ma,ha,pa)}catch(t){ma[ha]=pa}if(ma[fa]||ca(ma,fa,ga),la[ga])for(var ya in ua)if(ma[ya]!==ua[ya])try{ca(ma,ya,ua[ya])}catch(t){ma[ya]=ua[ya]}}}var ba=o,Sa=ft("iterator"),Ea=!ba((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach((function(t,r){e.delete("b"),n+=r+t})),!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[Sa]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),Ta=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},_a=s,xa=o,wa=sr,ka=en,Aa=l,Ca=Z,Da=b,La=Object.assign,$a=Object.defineProperty,Oa=!La||xa((function(){if(_a&&1!==La({b:1},La($a({},"a",{enumerable:!0,get:function(){$a(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=La({},t)[n]||wa(La({},e)).join("")!=r}))?function(t,e){for(var n=Ca(t),r=arguments.length,i=1,a=ka.f,o=Aa.f;r>i;)for(var s,l=Da(arguments[i++]),u=a?wa(l).concat(a(l)):wa(l),c=u.length,d=0;c>d;)s=u[d++],_a&&!o.call(l,s)||(n[s]=l[s]);return n}:La,Ma=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Ia=Ma,Ra=function(t,e,n){if(Ia(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},Pa=Nt,Fa=function(t){var e=t.return;if(void 0!==e)return Pa(e.call(t)).value},Na=Nt,Ua=Fa,Ba=Mr,ja=ft("iterator"),Va=Array.prototype,Ha=function(t){return void 0!==t&&(Ba.Array===t||Va[ja]===t)},Ga=Bi,Wa=Mr,za=ft("iterator"),Ya=function(t){if(null!=t)return t[za]||t["@@iterator"]||Wa[Ga(t)]},qa=Ra,Ka=Z,Xa=function(t,e,n,r){try{return r?e(Na(n)[0],n[1]):e(n)}catch(e){throw Ua(t),e}},Za=Ha,Ja=Fe,Qa=On,to=Ya,eo=2147483647,no=/[^\0-\u007E]/,ro=/[.\u3002\uFF0E\uFF61]/g,io="Overflow: input needs wider integers to process",ao=Math.floor,oo=String.fromCharCode,so=function(t){return t+22+75*(t<26)},lo=function(t,e,n){var r=0;for(t=n?ao(t/700):t>>1,t+=ao(t/e);t>455;r+=36)t=ao(t/35);return ao(r+36*t/(t+38))},uo=function(t){var e,n,r=[],i=(t=function(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var a=t.charCodeAt(n++);56320==(64512&a)?e.push(((1023&i)<<10)+(1023&a)+65536):(e.push(i),n--)}else e.push(i)}return e}(t)).length,a=128,o=0,s=72;for(e=0;e<t.length;e++)(n=t[e])<128&&r.push(oo(n));var l=r.length,u=l;for(l&&r.push("-");u<i;){var c=eo;for(e=0;e<t.length;e++)(n=t[e])>=a&&n<c&&(c=n);var d=u+1;if(c-a>ao((eo-o)/d))throw RangeError(io);for(o+=(c-a)*d,a=c,e=0;e<t.length;e++){if((n=t[e])<a&&++o>eo)throw RangeError(io);if(n==a){for(var h=o,f=36;;f+=36){var p=f<=s?1:f>=s+26?26:f-s;if(h<p)break;var g=h-p,v=36-p;r.push(oo(so(p+g%v))),h=ao(g/v)}r.push(oo(so(h))),s=lo(o,d,u==l),o=0,++u}}++o,++a}return r.join("")},co=Yt.exports,ho=function(t,e,n){for(var r in e)co(t,r,e[r],n);return t},fo=Nt,po=Ya,go=kn,vo=A,mo=Ea,yo=Yt.exports,bo=ho,So=Zr,Eo=ii,To=Te,_o=Ta,xo=tt,wo=Ra,ko=Bi,Ao=Nt,Co=x,Do=Yi,Lo=xr,$o=p,Oo=function(t){var e=po(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return fo(e.call(t))},Mo=Ya,Io=ft,Ro=vo("fetch"),Po=vo("Request"),Fo=Po&&Po.prototype,No=vo("Headers"),Uo=Io("iterator"),Bo="URLSearchParams",jo="URLSearchParamsIterator",Vo=To.set,Ho=To.getterFor(Bo),Go=To.getterFor(jo),Wo=/\+/g,zo=Array(4),Yo=function(t){return zo[t-1]||(zo[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},qo=function(t){try{return decodeURIComponent(t)}catch(e){return t}},Ko=function(t){var e=t.replace(Wo," "),n=4;try{return decodeURIComponent(e)}catch(t){for(;n;)e=e.replace(Yo(n--),qo);return e}},Xo=/[!'()~]|%20/g,Zo={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Jo=function(t){return Zo[t]},Qo=function(t){return encodeURIComponent(t).replace(Xo,Jo)},ts=function(t,e){if(e)for(var n,r,i=e.split("&"),a=0;a<i.length;)(n=i[a++]).length&&(r=n.split("="),t.push({key:Ko(r.shift()),value:Ko(r.join("="))}))},es=function(t){this.entries.length=0,ts(this.entries,t)},ns=function(t,e){if(t<e)throw TypeError("Not enough arguments")},rs=Eo((function(t,e){Vo(this,{type:jo,iterator:Oo(Ho(t).entries),kind:e})}),"Iterator",(function(){var t=Go(this),e=t.kind,n=t.iterator.next(),r=n.value;return n.done||(n.value="keys"===e?r.key:"values"===e?r.value:[r.key,r.value]),n})),is=function(){_o(this,is,Bo);var t,e,n,r,i,a,o,s,l,u=arguments.length>0?arguments[0]:void 0,c=this,d=[];if(Vo(c,{type:Bo,entries:d,updateURL:function(){},updateSearchParams:es}),void 0!==u)if(Co(u))if("function"==typeof(t=Mo(u)))for(n=(e=t.call(u)).next;!(r=n.call(e)).done;){if((o=(a=(i=Oo(Ao(r.value))).next).call(i)).done||(s=a.call(i)).done||!a.call(i).done)throw TypeError("Expected sequence with length 2");d.push({key:Do(o.value),value:Do(s.value)})}else for(l in u)xo(u,l)&&d.push({key:l,value:Do(u[l])});else ts(d,"string"==typeof u?"?"===u.charAt(0)?u.slice(1):u:Do(u))},as=is.prototype;if(bo(as,{append:function(t,e){ns(arguments.length,2);var n=Ho(this);n.entries.push({key:Do(t),value:Do(e)}),n.updateURL()},delete:function(t){ns(arguments.length,1);for(var e=Ho(this),n=e.entries,r=Do(t),i=0;i<n.length;)n[i].key===r?n.splice(i,1):i++;e.updateURL()},get:function(t){ns(arguments.length,1);for(var e=Ho(this).entries,n=Do(t),r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){ns(arguments.length,1);for(var e=Ho(this).entries,n=Do(t),r=[],i=0;i<e.length;i++)e[i].key===n&&r.push(e[i].value);return r},has:function(t){ns(arguments.length,1);for(var e=Ho(this).entries,n=Do(t),r=0;r<e.length;)if(e[r++].key===n)return!0;return!1},set:function(t,e){ns(arguments.length,1);for(var n,r=Ho(this),i=r.entries,a=!1,o=Do(t),s=Do(e),l=0;l<i.length;l++)(n=i[l]).key===o&&(a?i.splice(l--,1):(a=!0,n.value=s));a||i.push({key:o,value:s}),r.updateURL()},sort:function(){var t,e,n,r=Ho(this),i=r.entries,a=i.slice();for(i.length=0,n=0;n<a.length;n++){for(t=a[n],e=0;e<n;e++)if(i[e].key>t.key){i.splice(e,0,t);break}e===n&&i.push(t)}r.updateURL()},forEach:function(t){for(var e,n=Ho(this).entries,r=wo(t,arguments.length>1?arguments[1]:void 0,3),i=0;i<n.length;)r((e=n[i++]).value,e.key,this)},keys:function(){return new rs(this,"keys")},values:function(){return new rs(this,"values")},entries:function(){return new rs(this,"entries")}},{enumerable:!0}),yo(as,Uo,as.entries),yo(as,"toString",(function(){for(var t,e=Ho(this).entries,n=[],r=0;r<e.length;)t=e[r++],n.push(Qo(t.key)+"="+Qo(t.value));return n.join("&")}),{enumerable:!0}),So(is,Bo),go({global:!0,forced:!mo},{URLSearchParams:is}),!mo&&"function"==typeof No){var os=function(t){if(Co(t)){var e,n=t.body;if(ko(n)===Bo)return(e=t.headers?new No(t.headers):new No).has("content-type")||e.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),Lo(t,{body:$o(0,String(n)),headers:$o(0,e)})}return t};if("function"==typeof Ro&&go({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return Ro(t,arguments.length>1?os(arguments[1]):{})}}),"function"==typeof Po){var ss=function(t){return _o(this,ss,"Request"),new Po(t,arguments.length>1?os(arguments[1]):{})};Fo.constructor=ss,ss.prototype=Fo,go({global:!0,forced:!0},{Request:ss})}}var ls,us={URLSearchParams:is,getState:Ho},cs=kn,ds=s,hs=Ea,fs=i,ps=dr,gs=Yt.exports,vs=Ta,ms=tt,ys=Oa,bs=function(t){var e,n,r,i,a,o,s=Ka(t),l="function"==typeof this?this:Array,u=arguments.length,c=u>1?arguments[1]:void 0,d=void 0!==c,h=to(s),f=0;if(d&&(c=qa(c,u>2?arguments[2]:void 0,2)),null==h||l==Array&&Za(h))for(n=new l(e=Ja(s.length));e>f;f++)o=d?c(s[f],f):s[f],Qa(n,f,o);else for(a=(i=h.call(s)).next,n=new l;!(r=a.call(i)).done;f++)o=d?Xa(i,c,[r.value,f],!0):r.value,Qa(n,f,o);return n.length=f,n},Ss=Ji.codeAt,Es=function(t){var e,n,r=[],i=t.toLowerCase().replace(ro,".").split(".");for(e=0;e<i.length;e++)n=i[e],r.push(no.test(n)?"xn--"+uo(n):n);return r.join(".")},Ts=Yi,_s=Zr,xs=us,ws=Te,ks=fs.URL,As=xs.URLSearchParams,Cs=xs.getState,Ds=ws.set,Ls=ws.getterFor("URL"),$s=Math.floor,Os=Math.pow,Ms="Invalid scheme",Is="Invalid host",Rs="Invalid port",Ps=/[A-Za-z]/,Fs=/[\d+-.A-Za-z]/,Ns=/\d/,Us=/^0x/i,Bs=/^[0-7]+$/,js=/^\d+$/,Vs=/^[\dA-Fa-f]+$/,Hs=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Gs=/[\0\t\n\r #/:<>?@[\\\]^|]/,Ws=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,zs=/[\t\n\r]/g,Ys=function(t,e){var n,r,i;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return Is;if(!(n=Ks(e.slice(1,-1))))return Is;t.host=n}else if(rl(t)){if(e=Es(e),Hs.test(e))return Is;if(null===(n=qs(e)))return Is;t.host=n}else{if(Gs.test(e))return Is;for(n="",r=bs(e),i=0;i<r.length;i++)n+=el(r[i],Zs);t.host=n}},qs=function(t){var e,n,r,i,a,o,s,l=t.split(".");if(l.length&&""==l[l.length-1]&&l.pop(),(e=l.length)>4)return t;for(n=[],r=0;r<e;r++){if(""==(i=l[r]))return t;if(a=10,i.length>1&&"0"==i.charAt(0)&&(a=Us.test(i)?16:8,i=i.slice(8==a?1:2)),""===i)o=0;else{if(!(10==a?js:8==a?Bs:Vs).test(i))return t;o=parseInt(i,a)}n.push(o)}for(r=0;r<e;r++)if(o=n[r],r==e-1){if(o>=Os(256,5-e))return null}else if(o>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*Os(256,3-r);return s},Ks=function(t){var e,n,r,i,a,o,s,l=[0,0,0,0,0,0,0,0],u=0,c=null,d=0,h=function(){return t.charAt(d)};if(":"==h()){if(":"!=t.charAt(1))return;d+=2,c=++u}for(;h();){if(8==u)return;if(":"!=h()){for(e=n=0;n<4&&Vs.test(h());)e=16*e+parseInt(h(),16),d++,n++;if("."==h()){if(0==n)return;if(d-=n,u>6)return;for(r=0;h();){if(i=null,r>0){if(!("."==h()&&r<4))return;d++}if(!Ns.test(h()))return;for(;Ns.test(h());){if(a=parseInt(h(),10),null===i)i=a;else{if(0==i)return;i=10*i+a}if(i>255)return;d++}l[u]=256*l[u]+i,2!=++r&&4!=r||u++}if(4!=r)return;break}if(":"==h()){if(d++,!h())return}else if(h())return;l[u++]=e}else{if(null!==c)return;d++,c=++u}}if(null!==c)for(o=u-c,u=7;0!=u&&o>0;)s=l[u],l[u--]=l[c+o-1],l[c+--o]=s;else if(8!=u)return;return l},Xs=function(t){var e,n,r,i;if("number"==typeof t){for(e=[],n=0;n<4;n++)e.unshift(t%256),t=$s(t/256);return e.join(".")}if("object"==typeof t){for(e="",r=function(t){for(var e=null,n=1,r=null,i=0,a=0;a<8;a++)0!==t[a]?(i>n&&(e=r,n=i),r=null,i=0):(null===r&&(r=a),++i);return i>n&&(e=r,n=i),e}(t),n=0;n<8;n++)i&&0===t[n]||(i&&(i=!1),r===n?(e+=n?":":"::",i=!0):(e+=t[n].toString(16),n<7&&(e+=":")));return"["+e+"]"}return t},Zs={},Js=ys({},Zs,{" ":1,'"':1,"<":1,">":1,"`":1}),Qs=ys({},Js,{"#":1,"?":1,"{":1,"}":1}),tl=ys({},Qs,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),el=function(t,e){var n=Ss(t,0);return n>32&&n<127&&!ms(e,t)?t:encodeURIComponent(t)},nl={ftp:21,file:null,http:80,https:443,ws:80,wss:443},rl=function(t){return ms(nl,t.scheme)},il=function(t){return""!=t.username||""!=t.password},al=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},ol=function(t,e){var n;return 2==t.length&&Ps.test(t.charAt(0))&&(":"==(n=t.charAt(1))||!e&&"|"==n)},sl=function(t){var e;return t.length>1&&ol(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},ll=function(t){var e=t.path,n=e.length;!n||"file"==t.scheme&&1==n&&ol(e[0],!0)||e.pop()},ul=function(t){return"."===t||"%2e"===t.toLowerCase()},cl={},dl={},hl={},fl={},pl={},gl={},vl={},ml={},yl={},bl={},Sl={},El={},Tl={},_l={},xl={},wl={},kl={},Al={},Cl={},Dl={},Ll={},$l=function(t,e,n,r){var i,a,o,s,l,u=n||cl,c=0,d="",h=!1,f=!1,p=!1;for(n||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(Ws,"")),e=e.replace(zs,""),i=bs(e);c<=i.length;){switch(a=i[c],u){case cl:if(!a||!Ps.test(a)){if(n)return Ms;u=hl;continue}d+=a.toLowerCase(),u=dl;break;case dl:if(a&&(Fs.test(a)||"+"==a||"-"==a||"."==a))d+=a.toLowerCase();else{if(":"!=a){if(n)return Ms;d="",u=hl,c=0;continue}if(n&&(rl(t)!=ms(nl,d)||"file"==d&&(il(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=d,n)return void(rl(t)&&nl[t.scheme]==t.port&&(t.port=null));d="","file"==t.scheme?u=_l:rl(t)&&r&&r.scheme==t.scheme?u=fl:rl(t)?u=ml:"/"==i[c+1]?(u=pl,c++):(t.cannotBeABaseURL=!0,t.path.push(""),u=Cl)}break;case hl:if(!r||r.cannotBeABaseURL&&"#"!=a)return Ms;if(r.cannotBeABaseURL&&"#"==a){t.scheme=r.scheme,t.path=r.path.slice(),t.query=r.query,t.fragment="",t.cannotBeABaseURL=!0,u=Ll;break}u="file"==r.scheme?_l:gl;continue;case fl:if("/"!=a||"/"!=i[c+1]){u=gl;continue}u=yl,c++;break;case pl:if("/"==a){u=bl;break}u=Al;continue;case gl:if(t.scheme=r.scheme,a==ls)t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query=r.query;else if("/"==a||"\\"==a&&rl(t))u=vl;else if("?"==a)t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query="",u=Dl;else{if("#"!=a){t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.path.pop(),u=Al;continue}t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query=r.query,t.fragment="",u=Ll}break;case vl:if(!rl(t)||"/"!=a&&"\\"!=a){if("/"!=a){t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,u=Al;continue}u=bl}else u=yl;break;case ml:if(u=yl,"/"!=a||"/"!=d.charAt(c+1))continue;c++;break;case yl:if("/"!=a&&"\\"!=a){u=bl;continue}break;case bl:if("@"==a){h&&(d="%40"+d),h=!0,o=bs(d);for(var g=0;g<o.length;g++){var v=o[g];if(":"!=v||p){var m=el(v,tl);p?t.password+=m:t.username+=m}else p=!0}d=""}else if(a==ls||"/"==a||"?"==a||"#"==a||"\\"==a&&rl(t)){if(h&&""==d)return"Invalid authority";c-=bs(d).length+1,d="",u=Sl}else d+=a;break;case Sl:case El:if(n&&"file"==t.scheme){u=wl;continue}if(":"!=a||f){if(a==ls||"/"==a||"?"==a||"#"==a||"\\"==a&&rl(t)){if(rl(t)&&""==d)return Is;if(n&&""==d&&(il(t)||null!==t.port))return;if(s=Ys(t,d))return s;if(d="",u=kl,n)return;continue}"["==a?f=!0:"]"==a&&(f=!1),d+=a}else{if(""==d)return Is;if(s=Ys(t,d))return s;if(d="",u=Tl,n==El)return}break;case Tl:if(!Ns.test(a)){if(a==ls||"/"==a||"?"==a||"#"==a||"\\"==a&&rl(t)||n){if(""!=d){var y=parseInt(d,10);if(y>65535)return Rs;t.port=rl(t)&&y===nl[t.scheme]?null:y,d=""}if(n)return;u=kl;continue}return Rs}d+=a;break;case _l:if(t.scheme="file","/"==a||"\\"==a)u=xl;else{if(!r||"file"!=r.scheme){u=Al;continue}if(a==ls)t.host=r.host,t.path=r.path.slice(),t.query=r.query;else if("?"==a)t.host=r.host,t.path=r.path.slice(),t.query="",u=Dl;else{if("#"!=a){sl(i.slice(c).join(""))||(t.host=r.host,t.path=r.path.slice(),ll(t)),u=Al;continue}t.host=r.host,t.path=r.path.slice(),t.query=r.query,t.fragment="",u=Ll}}break;case xl:if("/"==a||"\\"==a){u=wl;break}r&&"file"==r.scheme&&!sl(i.slice(c).join(""))&&(ol(r.path[0],!0)?t.path.push(r.path[0]):t.host=r.host),u=Al;continue;case wl:if(a==ls||"/"==a||"\\"==a||"?"==a||"#"==a){if(!n&&ol(d))u=Al;else if(""==d){if(t.host="",n)return;u=kl}else{if(s=Ys(t,d))return s;if("localhost"==t.host&&(t.host=""),n)return;d="",u=kl}continue}d+=a;break;case kl:if(rl(t)){if(u=Al,"/"!=a&&"\\"!=a)continue}else if(n||"?"!=a)if(n||"#"!=a){if(a!=ls&&(u=Al,"/"!=a))continue}else t.fragment="",u=Ll;else t.query="",u=Dl;break;case Al:if(a==ls||"/"==a||"\\"==a&&rl(t)||!n&&("?"==a||"#"==a)){if(".."===(l=(l=d).toLowerCase())||"%2e."===l||".%2e"===l||"%2e%2e"===l?(ll(t),"/"==a||"\\"==a&&rl(t)||t.path.push("")):ul(d)?"/"==a||"\\"==a&&rl(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&ol(d)&&(t.host&&(t.host=""),d=d.charAt(0)+":"),t.path.push(d)),d="","file"==t.scheme&&(a==ls||"?"==a||"#"==a))for(;t.path.length>1&&""===t.path[0];)t.path.shift();"?"==a?(t.query="",u=Dl):"#"==a&&(t.fragment="",u=Ll)}else d+=el(a,Qs);break;case Cl:"?"==a?(t.query="",u=Dl):"#"==a?(t.fragment="",u=Ll):a!=ls&&(t.path[0]+=el(a,Zs));break;case Dl:n||"#"!=a?a!=ls&&("'"==a&&rl(t)?t.query+="%27":t.query+="#"==a?"%23":el(a,Zs)):(t.fragment="",u=Ll);break;case Ll:a!=ls&&(t.fragment+=el(a,Js))}c++}},Ol=function(t){var e,n,r=vs(this,Ol,"URL"),i=arguments.length>1?arguments[1]:void 0,a=Ts(t),o=Ds(r,{type:"URL"});if(void 0!==i)if(i instanceof Ol)e=Ls(i);else if(n=$l(e={},Ts(i)))throw TypeError(n);if(n=$l(o,a,null,e))throw TypeError(n);var s=o.searchParams=new As,l=Cs(s);l.updateSearchParams(o.query),l.updateURL=function(){o.query=String(s)||null},ds||(r.href=Il.call(r),r.origin=Rl.call(r),r.protocol=Pl.call(r),r.username=Fl.call(r),r.password=Nl.call(r),r.host=Ul.call(r),r.hostname=Bl.call(r),r.port=jl.call(r),r.pathname=Vl.call(r),r.search=Hl.call(r),r.searchParams=Gl.call(r),r.hash=Wl.call(r))},Ml=Ol.prototype,Il=function(){var t=Ls(this),e=t.scheme,n=t.username,r=t.password,i=t.host,a=t.port,o=t.path,s=t.query,l=t.fragment,u=e+":";return null!==i?(u+="//",il(t)&&(u+=n+(r?":"+r:"")+"@"),u+=Xs(i),null!==a&&(u+=":"+a)):"file"==e&&(u+="//"),u+=t.cannotBeABaseURL?o[0]:o.length?"/"+o.join("/"):"",null!==s&&(u+="?"+s),null!==l&&(u+="#"+l),u},Rl=function(){var t=Ls(this),e=t.scheme,n=t.port;if("blob"==e)try{return new Ol(e.path[0]).origin}catch(t){return"null"}return"file"!=e&&rl(t)?e+"://"+Xs(t.host)+(null!==n?":"+n:""):"null"},Pl=function(){return Ls(this).scheme+":"},Fl=function(){return Ls(this).username},Nl=function(){return Ls(this).password},Ul=function(){var t=Ls(this),e=t.host,n=t.port;return null===e?"":null===n?Xs(e):Xs(e)+":"+n},Bl=function(){var t=Ls(this).host;return null===t?"":Xs(t)},jl=function(){var t=Ls(this).port;return null===t?"":String(t)},Vl=function(){var t=Ls(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},Hl=function(){var t=Ls(this).query;return t?"?"+t:""},Gl=function(){return Ls(this).searchParams},Wl=function(){var t=Ls(this).fragment;return t?"#"+t:""},zl=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(ds&&ps(Ml,{href:zl(Il,(function(t){var e=Ls(this),n=Ts(t),r=$l(e,n);if(r)throw TypeError(r);Cs(e.searchParams).updateSearchParams(e.query)})),origin:zl(Rl),protocol:zl(Pl,(function(t){var e=Ls(this);$l(e,Ts(t)+":",cl)})),username:zl(Fl,(function(t){var e=Ls(this),n=bs(Ts(t));if(!al(e)){e.username="";for(var r=0;r<n.length;r++)e.username+=el(n[r],tl)}})),password:zl(Nl,(function(t){var e=Ls(this),n=bs(Ts(t));if(!al(e)){e.password="";for(var r=0;r<n.length;r++)e.password+=el(n[r],tl)}})),host:zl(Ul,(function(t){var e=Ls(this);e.cannotBeABaseURL||$l(e,Ts(t),Sl)})),hostname:zl(Bl,(function(t){var e=Ls(this);e.cannotBeABaseURL||$l(e,Ts(t),El)})),port:zl(jl,(function(t){var e=Ls(this);al(e)||(""==(t=Ts(t))?e.port=null:$l(e,t,Tl))})),pathname:zl(Vl,(function(t){var e=Ls(this);e.cannotBeABaseURL||(e.path=[],$l(e,Ts(t),kl))})),search:zl(Hl,(function(t){var e=Ls(this);""==(t=Ts(t))?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",$l(e,t,Dl)),Cs(e.searchParams).updateSearchParams(e.query)})),searchParams:zl(Gl),hash:zl(Wl,(function(t){var e=Ls(this);""!=(t=Ts(t))?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",$l(e,t,Ll)):e.fragment=null}))}),gs(Ml,"toJSON",(function(){return Il.call(this)}),{enumerable:!0}),gs(Ml,"toString",(function(){return Il.call(this)}),{enumerable:!0}),ks){var Yl=ks.createObjectURL,ql=ks.revokeObjectURL;Yl&&gs(Ol,"createObjectURL",(function(t){return Yl.apply(ks,arguments)})),ql&&gs(Ol,"revokeObjectURL",(function(t){return ql.apply(ks,arguments)}))}_s(Ol,"URL"),cs({global:!0,forced:!hs,sham:!ds},{URL:Ol}),kn({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var Kl=Yt.exports,Xl=Date.prototype,Zl="Invalid Date",Jl="toString",Ql=Xl.toString,tu=Xl.getTime;String(new Date(NaN))!=Zl&&Kl(Xl,Jl,(function(){var t=tu.call(this);return t==t?Ql.call(this):Zl}));var eu=o,nu=function(t,e){var n=[][t];return!!n&&eu((function(){n.call(null,e||function(){throw 1},1)}))},ru=kn,iu=_,au=[].join,ou=b!=Object,su=nu("join",",");function lu(t){return(lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cu(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);o=!0);}catch(t){s=!0,i=t}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(t,e)||hu(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function du(t){return function(t){if(Array.isArray(t))return fu(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||hu(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hu(t,e){if(t){if("string"==typeof t)return fu(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fu(t,e):void 0}}function fu(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function pu(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=hu(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}ru({target:"Array",proto:!0,forced:ou||!su},{join:function(t){return au.call(iu(this),void 0===t?",":t)}});var gu=Ra,vu=b,mu=Z,yu=Fe,bu=Fn,Su=[].push,Eu=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,a=6==t,o=7==t,s=5==t||a;return function(l,u,c,d){for(var h,f,p=mu(l),g=vu(p),v=gu(u,c,3),m=yu(g.length),y=0,b=d||bu,S=e?b(l,m):n||o?b(l,0):void 0;m>y;y++)if((s||y in g)&&(f=v(h=g[y],y,p),t))if(e)S[y]=f;else if(f)switch(t){case 3:return!0;case 5:return h;case 6:return y;case 2:Su.call(S,h)}else switch(t){case 4:return!1;case 7:Su.call(S,h)}return a?-1:r||i?i:S}},Tu={forEach:Eu(0),map:Eu(1),filter:Eu(2),some:Eu(3),every:Eu(4),find:Eu(5),findIndex:Eu(6),filterReject:Eu(7)},_u=Tu.some;kn({target:"Array",proto:!0,forced:!nu("some")},{some:function(t){return _u(this,t,arguments.length>1?arguments[1]:void 0)}});var xu=ze.includes,wu=Or;kn({target:"Array",proto:!0},{includes:function(t){return xu(this,t,arguments.length>1?arguments[1]:void 0)}}),wu("includes");var ku=x,Au=v,Cu=ft("match"),Du=function(t){var e;return ku(t)&&(void 0!==(e=t[Cu])?!!e:"RegExp"==Au(t))},Lu=Du,$u=ft("match"),Ou=function(t){if(Lu(t))throw TypeError("The method doesn't accept regular expressions");return t},Mu=S,Iu=Yi;kn({target:"String",proto:!0,forced:!function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[$u]=!1,"/./"[t](e)}catch(t){}}return!1}("includes")},{includes:function(t){return!!~Iu(Mu(this)).indexOf(Iu(Ou(t)),arguments.length>1?arguments[1]:void 0)}});var Ru="\t\n\v\f\r                　\u2028\u2029\ufeff",Pu=S,Fu=Yi,Nu="[\t\n\v\f\r                　\u2028\u2029\ufeff]",Uu=RegExp("^"+Nu+Nu+"*"),Bu=RegExp(Nu+Nu+"*$"),ju=function(t){return function(e){var n=Fu(Pu(e));return 1&t&&(n=n.replace(Uu,"")),2&t&&(n=n.replace(Bu,"")),n}},Vu={start:ju(1),end:ju(2),trim:ju(3)},Hu=Yi,Gu=Vu.trim,Wu=i.parseFloat,zu=1/Wu("\t\n\v\f\r                　\u2028\u2029\ufeff-0")!=-1/0?function(t){var e=Gu(Hu(t)),n=Wu(e);return 0===n&&"-"==e.charAt(0)?-0:n}:Wu;kn({global:!0,forced:parseFloat!=zu},{parseFloat:zu});var Yu=v,qu=Ie,Ku=Yi,Xu=S,Zu=function(t){var e=Ku(Xu(this)),n="",r=qu(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n},Ju=kn,Qu=Ie,tc=function(t){if("number"!=typeof t&&"Number"!=Yu(t))throw TypeError("Incorrect invocation");return+t},ec=Zu,nc=o,rc=1..toFixed,ic=Math.floor,ac=function(t,e,n){return 0===e?n:e%2==1?ac(t,e-1,n*t):ac(t*t,e/2,n)},oc=function(t,e,n){for(var r=-1,i=n;++r<6;)i+=e*t[r],t[r]=i%1e7,i=ic(i/1e7)},sc=function(t,e){for(var n=6,r=0;--n>=0;)r+=t[n],t[n]=ic(r/e),r=r%e*1e7},lc=function(t){for(var e=6,n="";--e>=0;)if(""!==n||0===e||0!==t[e]){var r=String(t[e]);n=""===n?r:n+ec.call("0",7-r.length)+r}return n};Ju({target:"Number",proto:!0,forced:rc&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!nc((function(){rc.call({})}))},{toFixed:function(t){var e,n,r,i,a=tc(this),o=Qu(t),s=[0,0,0,0,0,0],l="",u="0";if(o<0||o>20)throw RangeError("Incorrect fraction digits");if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return String(a);if(a<0&&(l="-",a=-a),a>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(a*ac(2,69,1))-69)<0?a*ac(2,-e,1):a/ac(2,e,1),n*=4503599627370496,(e=52-e)>0){for(oc(s,0,n),r=o;r>=7;)oc(s,1e7,0),r-=7;for(oc(s,ac(10,r,1),0),r=e-1;r>=23;)sc(s,1<<23),r-=23;sc(s,1<<r),oc(s,1,1),sc(s,2),u=lc(s)}else oc(s,0,n),oc(s,1<<-e,0),u=lc(s)+ec.call("0",o);return u=o>0?l+((i=u.length)<=o?"0."+ec.call("0",o-i)+u:u.slice(0,i-o)+"."+u.slice(i-o)):l+u}});var uc=i,cc=[].slice,dc=function(t){return function(e,n){var r=arguments.length>2,i=r?cc.call(arguments,2):void 0;return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,n)}};kn({global:!0,bind:!0,forced:/MSIE .\./.test(C)},{setTimeout:dc(uc.setTimeout),setInterval:dc(uc.setInterval)});var hc=kn,fc=ze.indexOf,pc=nu,gc=[].indexOf,vc=!!gc&&1/[1].indexOf(1,-0)<0,mc=pc("indexOf");hc({target:"Array",proto:!0,forced:vc||!mc},{indexOf:function(t){return vc?gc.apply(this,arguments)||0:fc(this,t,arguments.length>1?arguments[1]:void 0)}});var yc=Nt,bc=function(){var t=yc(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},Sc={},Ec=o,Tc=function(t,e){return RegExp(t,e)};Sc.UNSUPPORTED_Y=Ec((function(){var t=Tc("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),Sc.BROKEN_CARET=Ec((function(){var t=Tc("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));var _c,xc,wc=o((function(){var t=RegExp(".","string".charAt(0));return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),kc=o((function(){var t=RegExp("(?<a>b)","string".charAt(5));return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),Ac=Yi,Cc=bc,Dc=Sc,Lc=H.exports,$c=xr,Oc=Te.get,Mc=wc,Ic=kc,Rc=RegExp.prototype.exec,Pc=Lc("native-string-replace",String.prototype.replace),Fc=Rc,Nc=(_c=/a/,xc=/b*/g,Rc.call(_c,"a"),Rc.call(xc,"a"),0!==_c.lastIndex||0!==xc.lastIndex),Uc=Dc.UNSUPPORTED_Y||Dc.BROKEN_CARET,Bc=void 0!==/()??/.exec("")[1];(Nc||Bc||Uc||Mc||Ic)&&(Fc=function(t){var e,n,r,i,a,o,s,l=this,u=Oc(l),c=Ac(t),d=u.raw;if(d)return d.lastIndex=l.lastIndex,e=Fc.call(d,c),l.lastIndex=d.lastIndex,e;var h=u.groups,f=Uc&&l.sticky,p=Cc.call(l),g=l.source,v=0,m=c;if(f&&(-1===(p=p.replace("y","")).indexOf("g")&&(p+="g"),m=c.slice(l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&"\n"!==c.charAt(l.lastIndex-1))&&(g="(?: "+g+")",m=" "+m,v++),n=new RegExp("^(?:"+g+")",p)),Bc&&(n=new RegExp("^"+g+"$(?!\\s)",p)),Nc&&(r=l.lastIndex),i=Rc.call(f?n:l,m),f?i?(i.input=i.input.slice(v),i[0]=i[0].slice(v),i.index=l.lastIndex,l.lastIndex+=i[0].length):l.lastIndex=0:Nc&&i&&(l.lastIndex=l.global?i.index+i[0].length:r),Bc&&i&&i.length>1&&Pc.call(i[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(i[a]=void 0)})),i&&h)for(i.groups=o=$c(null),a=0;a<h.length;a++)o[(s=h[a])[0]]=i[s[1]];return i});var jc=Fc;kn({target:"RegExp",proto:!0,forced:/./.exec!==jc},{exec:jc});var Vc=Yt.exports,Hc=jc,Gc=o,Wc=ft,zc=zt,Yc=Wc("species"),qc=RegExp.prototype,Kc=function(t,e,n,r){var i=Wc(t),a=!Gc((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),o=a&&!Gc((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[Yc]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return e=!0,null},n[i](""),!e}));if(!a||!o||n){var s=/./[i],l=e(i,""[t],(function(t,e,n,r,i){var o=e.exec;return o===Hc||o===qc.exec?a&&!i?{done:!0,value:s.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}));Vc(String.prototype,t,l[0]),Vc(qc,i,l[1])}r&&zc(qc[i],"sham",!0)},Xc=Ji.charAt,Zc=function(t,e,n){return e+(n?Xc(t,e).length:1)},Jc=Z,Qc=Math.floor,td="".replace,ed=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,nd=/\$([$&'`]|\d{1,2})/g,rd=v,id=jc,ad=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==rd(t))throw TypeError("RegExp#exec called on incompatible receiver");return id.call(t,e)},od=Kc,sd=o,ld=Nt,ud=Ie,cd=Fe,dd=Yi,hd=S,fd=Zc,pd=function(t,e,n,r,i,a){var o=n+t.length,s=r.length,l=nd;return void 0!==i&&(i=Jc(i),l=ed),td.call(a,l,(function(a,l){var u;switch(l.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(o);case"<":u=i[l.slice(1,-1)];break;default:var c=+l;if(0===c)return a;if(c>s){var d=Qc(c/10);return 0===d?a:d<=s?void 0===r[d-1]?l.charAt(1):r[d-1]+l.charAt(1):a}u=r[c-1]}return void 0===u?"":u}))},gd=ad,vd=ft("replace"),md=Math.max,yd=Math.min,bd="$0"==="a".replace(/./,"$0"),Sd=!!/./[vd]&&""===/./[vd]("a","$0");od("replace",(function(t,e,n){var r=Sd?"$":"$0";return[function(t,n){var r=hd(this),i=null==t?void 0:t[vd];return void 0!==i?i.call(t,r,n):e.call(dd(r),t,n)},function(t,i){var a=ld(this),o=dd(t);if("string"==typeof i&&-1===i.indexOf(r)&&-1===i.indexOf("$<")){var s=n(e,a,o,i);if(s.done)return s.value}var l="function"==typeof i;l||(i=dd(i));var u=a.global;if(u){var c=a.unicode;a.lastIndex=0}for(var d=[];;){var h=gd(a,o);if(null===h)break;if(d.push(h),!u)break;""===dd(h[0])&&(a.lastIndex=fd(o,cd(a.lastIndex),c))}for(var f,p="",g=0,v=0;v<d.length;v++){h=d[v];for(var m=dd(h[0]),y=md(yd(ud(h.index),o.length),0),b=[],S=1;S<h.length;S++)b.push(void 0===(f=h[S])?f:String(f));var E=h.groups;if(l){var T=[m].concat(b,y,o);void 0!==E&&T.push(E);var _=dd(i.apply(void 0,T))}else _=pd(m,o,y,b,E,i);y>=g&&(p+=o.slice(g,y)+_,g=y+m.length)}return p+o.slice(g)}]}),!!sd((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!bd||Sd),
/**
	 * @license AngularJS v1.8.2
	 * (c) 2010-2020 Google LLC. http://angularjs.org
	 * License: MIT
	 */
function(t){var e={objectMaxDepth:5,urlErrorParamsEnabled:!0};function n(t){if(!B(t))return e;U(t.objectMaxDepth)&&(e.objectMaxDepth=r(t.objectMaxDepth)?t.objectMaxDepth:NaN),U(t.urlErrorParamsEnabled)&&Z(t.urlErrorParamsEnabled)&&(e.urlErrorParamsEnabled=t.urlErrorParamsEnabled)}function r(t){return H(t)&&t>0}function i(t,n){n=n||Error;var r="https://errors.angularjs.org/1.8.2/",i=r.replace(".","\\.")+"[\\s\\S]*",a=new RegExp(i,"g");return function(){var i,o,s=arguments[0],l=arguments[1],u="["+(t?t+":":"")+s+"] ",c=ht(arguments,2).map((function(t){return Gt(t,e.objectMaxDepth)}));if(u+=l.replace(/\{\d+\}/g,(function(t){var e=+t.slice(1,-1);return e<c.length?c[e].replace(a,""):t})),u+="\n"+r+(t?t+"/":"")+s,e.urlErrorParamsEnabled)for(o=0,i="?";o<c.length;o++,i="&")u+=i+"p"+o+"="+encodeURIComponent(c[o]);return new n(u)}}var a,o,s,l,u=/^\/(.+)\/([a-z]*)$/,c="validity",d=Object.prototype.hasOwnProperty,h=function(t){return V(t)?t.toLowerCase():t},f=function(t){return V(t)?t.toUpperCase():t},p=[].slice,g=[].splice,v=[].push,m=Object.prototype.toString,y=Object.getPrototypeOf,b=i("ng"),S=t.angular||(t.angular={}),E=0;function T(t){if(null==t||K(t))return!1;if(W(t)||V(t)||o&&t instanceof o)return!0;var e="length"in Object(t)&&t.length;return H(e)&&(e>=0&&e-1 in t||"function"==typeof t.item)}function _(t,e,n){var r,i;if(t)if(Y(t))for(r in t)"prototype"!==r&&"length"!==r&&"name"!==r&&t.hasOwnProperty(r)&&e.call(n,t[r],r,t);else if(W(t)||T(t)){var a="object"!=typeof t;for(r=0,i=t.length;r<i;r++)(a||r in t)&&e.call(n,t[r],r,t)}else if(t.forEach&&t.forEach!==_)t.forEach(e,n,t);else if(j(t))for(r in t)e.call(n,t[r],r,t);else if("function"==typeof t.hasOwnProperty)for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t);else for(r in t)d.call(t,r)&&e.call(n,t[r],r,t);return t}function x(t,e,n){for(var r=Object.keys(t).sort(),i=0;i<r.length;i++)e.call(n,t[r[i]],r[i]);return r}function w(t){return function(e,n){t(n,e)}}function k(){return++E}function A(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function C(t,e,n){for(var r=t.$$hashKey,i=0,a=e.length;i<a;++i){var o=e[i];if(B(o)||Y(o))for(var s=Object.keys(o),l=0,u=s.length;l<u;l++){var c=s[l],d=o[c];n&&B(d)?G(d)?t[c]=new Date(d.valueOf()):q(d)?t[c]=new RegExp(d):d.nodeName?t[c]=d.cloneNode(!0):nt(d)?t[c]=d.clone():"__proto__"!==c&&(B(t[c])||(t[c]=W(d)?[]:{}),C(t[c],[d],!0)):t[c]=d}}return A(t,r),t}function D(t){return C(t,p.call(arguments,1),!1)}function L(t){return C(t,p.call(arguments,1),!0)}function $(t){return parseInt(t,10)}a=t.document.documentMode;var O=Number.isNaN||function(t){return t!=t};function M(t,e){return D(Object.create(t),e)}function I(){}function R(t){return t}function P(t){return function(){return t}}function F(t){return Y(t.toString)&&t.toString!==m}function N(t){return void 0===t}function U(t){return void 0!==t}function B(t){return null!==t&&"object"==typeof t}function j(t){return null!==t&&"object"==typeof t&&!y(t)}function V(t){return"string"==typeof t}function H(t){return"number"==typeof t}function G(t){return"[object Date]"===m.call(t)}function W(t){return Array.isArray(t)||t instanceof Array}function z(t){switch(m.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return t instanceof Error}}function Y(t){return"function"==typeof t}function q(t){return"[object RegExp]"===m.call(t)}function K(t){return t&&t.window===t}function X(t){return t&&t.$evalAsync&&t.$watch}function Z(t){return"boolean"==typeof t}function J(t){return t&&Y(t.then)}I.$inject=[],R.$inject=[];var Q=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/;var tt=function(t){return V(t)?t.trim():t},et=function(t){return t.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function nt(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function rt(t){return h(t.nodeName||t[0]&&t[0].nodeName)}function it(t,e){return-1!==Array.prototype.indexOf.call(t,e)}function at(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),n}function ot(t,e,n){var i,a,o=[],s=[];if(n=r(n)?n:NaN,e){if((a=e)&&H(a.length)&&Q.test(m.call(a))||(i=e,"[object ArrayBuffer]"===m.call(i)))throw b("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t===e)throw b("cpi","Can't copy! Source and destination are identical.");return W(e)?e.length=0:_(e,(function(t,n){"$$hashKey"!==n&&delete e[n]})),o.push(t),s.push(e),l(t,e,n)}return u(t,n);function l(t,e,n){if(--n<0)return"...";var r,i=e.$$hashKey;if(W(t))for(var a=0,o=t.length;a<o;a++)e.push(u(t[a],n));else if(j(t))for(r in t)e[r]=u(t[r],n);else if(t&&"function"==typeof t.hasOwnProperty)for(r in t)t.hasOwnProperty(r)&&(e[r]=u(t[r],n));else for(r in t)d.call(t,r)&&(e[r]=u(t[r],n));return A(e,i),e}function u(t,e){if(!B(t))return t;var n=o.indexOf(t);if(-1!==n)return s[n];if(K(t)||X(t))throw b("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var r=!1,i=function(t){switch(m.call(t)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new t.constructor(u(t.buffer),t.byteOffset,t.length);case"[object ArrayBuffer]":if(!t.slice){var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}return t.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new t.constructor(t.valueOf());case"[object RegExp]":var n=new RegExp(t.source,t.toString().match(/[^/]*$/)[0]);return n.lastIndex=t.lastIndex,n;case"[object Blob]":return new t.constructor([t],{type:t.type})}if(Y(t.cloneNode))return t.cloneNode(!0)}(t);return void 0===i&&(i=W(t)?[]:Object.create(y(t)),r=!0),o.push(t),s.push(i),r?l(t,i,e):i}}function st(t,e){return t===e||t!=t&&e!=e}function lt(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n,r,i,a=typeof t;if(a===typeof e&&"object"===a){if(!W(t)){if(G(t))return!!G(e)&&st(t.getTime(),e.getTime());if(q(t))return!!q(e)&&t.toString()===e.toString();if(X(t)||X(e)||K(t)||K(e)||W(e)||G(e)||q(e))return!1;for(r in i=Bt(),t)if("$"!==r.charAt(0)&&!Y(t[r])){if(!lt(t[r],e[r]))return!1;i[r]=!0}for(r in e)if(!(r in i)&&"$"!==r.charAt(0)&&U(e[r])&&!Y(e[r]))return!1;return!0}if(!W(e))return!1;if((n=t.length)===e.length){for(r=0;r<n;r++)if(!lt(t[r],e[r]))return!1;return!0}}return!1}var ut=function(){if(!U(ut.rules)){var e=t.document.querySelector("[ng-csp]")||t.document.querySelector("[data-ng-csp]");if(e){var n=e.getAttribute("ng-csp")||e.getAttribute("data-ng-csp");ut.rules={noUnsafeEval:!n||-1!==n.indexOf("no-unsafe-eval"),noInlineStyle:!n||-1!==n.indexOf("no-inline-style")}}else ut.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(t){return!0}}(),noInlineStyle:!1}}return ut.rules},ct=function(){if(U(ct.name_))return ct.name_;var e,n,r,i,a=kt.length;for(n=0;n<a;++n)if(r=kt[n],e=t.document.querySelector("["+r.replace(":","\\:")+"jq]")){i=e.getAttribute(r+"jq");break}return ct.name_=i};function dt(t,e,n){return t.concat(p.call(e,n))}function ht(t,e){return p.call(t,e||0)}function ft(t,e){var n=arguments.length>2?ht(arguments,2):[];return!Y(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,dt(n,arguments,0)):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function pt(e,n){var r=n;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?r=void 0:K(n)?r="$WINDOW":n&&t.document===n?r="$DOCUMENT":X(n)&&(r="$SCOPE"),r}function gt(t,e){if(!N(t))return H(e)||(e=e?2:null),JSON.stringify(t,pt,e)}function vt(t){return V(t)?JSON.parse(t):t}var mt=/:/g;function yt(t,e){t=t.replace(mt,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return O(n)?e:n}function bt(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}function St(t,e,n){n=n?-1:1;var r=t.getTimezoneOffset();return bt(t,n*(yt(e,r)-r))}function Et(t){t=o(t).clone().empty();var e=o("<div></div>").append(t).html();try{return t[0].nodeType===Vt?h(e):e.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,(function(t,e){return"<"+h(e)}))}catch(t){return h(e)}}function Tt(t){try{return decodeURIComponent(t)}catch(t){}}function _t(t){var e={};return _((t||"").split("&"),(function(t){var n,r,i;t&&(r=t=t.replace(/\+/g,"%20"),-1!==(n=t.indexOf("="))&&(r=t.substring(0,n),i=t.substring(n+1)),U(r=Tt(r))&&(i=!U(i)||Tt(i),d.call(e,r)?W(e[r])?e[r].push(i):e[r]=[e[r],i]:e[r]=i))})),e}function xt(t){return wt(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function wt(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}var kt=["ng-","data-ng-","ng:","x-ng-"];var At=function(e){var n=e.currentScript;if(!n)return!0;if(!(n instanceof t.HTMLScriptElement||n instanceof t.SVGScriptElement))return!1;var r=n.attributes;return[r.getNamedItem("src"),r.getNamedItem("href"),r.getNamedItem("xlink:href")].every((function(t){if(!t)return!0;if(!t.value)return!1;var n=e.createElement("a");if(n.href=t.value,e.location.origin===n.origin)return!0;switch(n.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}}))}(t.document);function Ct(e,n){var r,i,a={};if(_(kt,(function(t){var n=t+"app";!r&&e.hasAttribute&&e.hasAttribute(n)&&(r=e,i=e.getAttribute(n))})),_(kt,(function(t){var n,a=t+"app";!r&&(n=e.querySelector("["+a.replace(":","\\:")+"]"))&&(r=n,i=n.getAttribute(a))})),r){if(!At)return void t.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");a.strictDi=null!==function(t,e){var n,r,i=kt.length;for(r=0;r<i;++r)if(n=kt[r]+e,V(n=t.getAttribute(n)))return n;return null}(r,"strict-di"),n(r,i?[i]:[],a)}}function Dt(e,n,r){B(r)||(r={});r=D({strictDi:!1},r);var i=function(){if((e=o(e)).injector()){var i=e[0]===t.document?"document":Et(e);throw b("btstrpd","App already bootstrapped with this element '{0}'",i.replace(/</,"&lt;").replace(/>/,"&gt;"))}(n=n||[]).unshift(["$provide",function(t){t.value("$rootElement",e)}]),r.debugInfoEnabled&&n.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),n.unshift("ng");var a=Je(n,r.strictDi);return a.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,r){t.$apply((function(){e.data("$injector",r),n(e)(t)}))}]),a},a=/^NG_ENABLE_DEBUG_INFO!/,s=/^NG_DEFER_BOOTSTRAP!/;if(t&&a.test(t.name)&&(r.debugInfoEnabled=!0,t.name=t.name.replace(a,"")),t&&!s.test(t.name))return i();t.name=t.name.replace(s,""),S.resumeBootstrap=function(t){return _(t,(function(t){n.push(t)})),i()},Y(S.resumeDeferredBootstrap)&&S.resumeDeferredBootstrap()}function Lt(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function $t(t){var e=S.element(t).injector();if(!e)throw b("test","no injector found for element argument to getTestability");return e.get("$$testability")}var Ot=/[A-Z]/g;function Mt(t,e){return e=e||"_",t.replace(Ot,(function(t,n){return(n?e:"")+t.toLowerCase()}))}var It=!1;function Rt(){fe.legacyXHTMLReplacement=!0}function Pt(t,e,n){if(!t)throw b("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function Ft(t,e,n){return n&&W(t)&&(t=t[t.length-1]),Pt(Y(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function Nt(t,e){if("hasOwnProperty"===t)throw b("badname","hasOwnProperty is not a valid {0} name",e)}function Ut(t){for(var e,n=t[0],r=t[t.length-1],i=1;n!==r&&(n=n.nextSibling);i++)(e||t[i]!==n)&&(e||(e=o(p.call(t,0,i))),e.push(n));return e||t}function Bt(){return Object.create(null)}function jt(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=!F(t)||W(t)||G(t)?gt(t):t.toString()}return t}var Vt=3;function Ht(t,e){if(W(t)){e=e||[];for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}else if(B(t))for(var i in e=e||{},t)"$"===i.charAt(0)&&"$"===i.charAt(1)||(e[i]=t[i]);return e||t}function Gt(t,e){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):N(t)?"undefined":"string"!=typeof t?function(t,e){var n=[];return r(e)&&(t=S.copy(t,null,e)),JSON.stringify(t,(function(t,e){if(B(e=pt(t,e))){if(n.indexOf(e)>=0)return"...";n.push(e)}return e}))}(t,e):t}var Wt={full:"1.8.2",major:1,minor:8,dot:2,codeName:"meteoric-mining"};fe.expando="ng339";var zt=fe.cache={},Yt=1;fe._data=function(t){return this.cache[t[this.expando]]||{}};var qt=/-([a-z])/g,Kt=/^-ms-/,Xt={mouseleave:"mouseout",mouseenter:"mouseover"},Zt=i("jqLite");function Jt(t,e){return e.toUpperCase()}function Qt(t){return t.replace(qt,Jt)}var te=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,ee=/<|&#?\w+;/,ne=/<([\w:-]+)/,re=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ie={thead:["table"],col:["colgroup","table"],tr:["tbody","table"],td:["tr","tbody","table"]};ie.tbody=ie.tfoot=ie.colgroup=ie.caption=ie.thead,ie.th=ie.td;var ae={option:[1,'<select multiple="multiple">',"</select>"],_default:[0,"",""]};for(var oe in ie){var se=ie[oe],le=se.slice().reverse();ae[oe]=[le.length,"<"+le.join("><")+">","</"+se.join("></")+">"]}function ue(t){return!ee.test(t)}function ce(t){var e=t.nodeType;return 1===e||!e||9===e}function de(e,n){var r,i,o,s,l,u=n.createDocumentFragment(),c=[];if(ue(e))c.push(n.createTextNode(e));else{if(r=u.appendChild(n.createElement("div")),i=(ne.exec(e)||["",""])[1].toLowerCase(),s=fe.legacyXHTMLReplacement?e.replace(re,"<$1></$2>"):e,a<10)for(o=ae[i]||ae._default,r.innerHTML=o[1]+s+o[2],l=o[0];l--;)r=r.firstChild;else{for(l=(o=ie[i]||[]).length;--l>-1;)r.appendChild(t.document.createElement(o[l])),r=r.firstChild;r.innerHTML=s}c=dt(c,r.childNodes),(r=u.firstChild).textContent=""}return u.textContent="",u.innerHTML="",_(c,(function(t){u.appendChild(t)})),u}ae.optgroup=ae.option;var he=t.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))};function fe(e){if(e instanceof fe)return e;var n;if(V(e)&&(e=tt(e),n=!0),!(this instanceof fe)){if(n&&"<"!==e.charAt(0))throw Zt("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new fe(e)}n?we(this,function(e,n){var r;return n=n||t.document,(r=te.exec(e))?[n.createElement(r[1])]:(r=de(e,n))?r.childNodes:[]}(e)):Y(e)?Le(e):we(this,e)}function pe(t){return t.cloneNode(!0)}function ge(t,e){!e&&ce(t)&&o.cleanData([t]),t.querySelectorAll&&o.cleanData(t.querySelectorAll("*"))}function ve(t){var e;for(e in t)return!1;return!0}function me(t){var e=t.ng339,n=e&&zt[e],r=n&&n.events,i=n&&n.data;i&&!ve(i)||r&&!ve(r)||(delete zt[e],t.ng339=void 0)}function ye(t,e,n,r){if(U(r))throw Zt("offargs","jqLite#off() does not support the `selector` argument");var i=Se(t),a=i&&i.events,o=i&&i.handle;if(o){if(e){var s=function(e){var r=a[e];U(n)&&at(r||[],n),U(n)&&r&&r.length>0||(t.removeEventListener(e,o),delete a[e])};_(e.split(" "),(function(t){s(t),Xt[t]&&s(Xt[t])}))}else for(e in a)"$destroy"!==e&&t.removeEventListener(e,o),delete a[e];me(t)}}function be(t,e){var n=t.ng339,r=n&&zt[n];r&&(e?delete r.data[e]:r.data={},me(t))}function Se(t,e){var n=t.ng339,r=n&&zt[n];return e&&!r&&(t.ng339=n=++Yt,r=zt[n]={events:{},data:{},handle:void 0}),r}function Ee(t,e,n){if(ce(t)){var r,i=U(n),a=!i&&e&&!B(e),o=!e,s=Se(t,!a),l=s&&s.data;if(i)l[Qt(e)]=n;else{if(o)return l;if(a)return l&&l[Qt(e)];for(r in e)l[Qt(r)]=e[r]}}}function Te(t,e){return!!t.getAttribute&&(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1}function _e(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=n;_(e.split(" "),(function(t){t=tt(t),r=r.replace(" "+t+" "," ")})),r!==n&&t.setAttribute("class",tt(r))}}function xe(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=n;_(e.split(" "),(function(t){t=tt(t),-1===r.indexOf(" "+t+" ")&&(r+=t+" ")})),r!==n&&t.setAttribute("class",tt(r))}}function we(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var n=e.length;if("number"==typeof n&&e.window!==e){if(n)for(var r=0;r<n;r++)t[t.length++]=e[r]}else t[t.length++]=e}}function ke(t,e){return Ae(t,"$"+(e||"ngController")+"Controller")}function Ae(t,e,n){9===t.nodeType&&(t=t.documentElement);for(var r=W(e)?e:[e];t;){for(var i=0,a=r.length;i<a;i++)if(U(n=o.data(t,r[i])))return n;t=t.parentNode||11===t.nodeType&&t.host}}function Ce(t){for(ge(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function De(t,e){e||ge(t);var n=t.parentNode;n&&n.removeChild(t)}function Le(e){function n(){t.document.removeEventListener("DOMContentLoaded",n),t.removeEventListener("load",n),e()}"complete"===t.document.readyState?t.setTimeout(e):(t.document.addEventListener("DOMContentLoaded",n),t.addEventListener("load",n))}var $e=fe.prototype={ready:Le,toString:function(){var t=[];return _(this,(function(e){t.push(""+e)})),"["+t.join(", ")+"]"},eq:function(t){return o(t>=0?this[t]:this[this.length+t])},length:0,push:v,sort:[].sort,splice:[].splice},Oe={};_("multiple,selected,checked,disabled,readOnly,required,open".split(","),(function(t){Oe[h(t)]=t}));var Me={};_("input,select,option,textarea,button,form,details".split(","),(function(t){Me[t]=!0}));var Ie={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function Re(t,e){var n=Oe[e.toLowerCase()];return n&&Me[rt(t)]&&n}function Pe(t,e,n){n.call(t,e)}function Fe(t,e,n){var r=e.relatedTarget;r&&(r===t||he.call(t,r))||n.call(t,e)}function Ne(){this.$get=function(){return D(fe,{hasClass:function(t,e){return t.attr&&(t=t[0]),Te(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),xe(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),_e(t,e)}})}}function Ue(t,e){var n=t&&t.$$hashKey;if(n)return"function"==typeof n&&(n=t.$$hashKey()),n;var r=typeof t;return n="function"===r||"object"===r&&null!==t?t.$$hashKey=r+":"+(e||k)():r+":"+t}_({data:Ee,removeData:be,hasData:function(t){for(var e in zt[t.ng339])return!0;return!1},cleanData:function(t){for(var e=0,n=t.length;e<n;e++)be(t[e]),ye(t[e])}},(function(t,e){fe[e]=t})),_({data:Ee,inheritedData:Ae,scope:function(t){return o.data(t,"$scope")||Ae(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return o.data(t,"$isolateScope")||o.data(t,"$isolateScopeNoTemplate")},controller:ke,injector:function(t){return Ae(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:Te,css:function(t,e,n){if(e=function(t){return Qt(t.replace(Kt,"ms-"))}(e),!U(n))return t.style[e];t.style[e]=n},attr:function(t,e,n){var r,i=t.nodeType;if(i!==Vt&&2!==i&&8!==i&&t.getAttribute){var a=h(e),o=Oe[a];if(!U(n))return r=t.getAttribute(e),o&&null!==r&&(r=a),null===r?void 0:r;null===n||!1===n&&o?t.removeAttribute(e):t.setAttribute(e,o?a:n)}},prop:function(t,e,n){if(!U(n))return t[e];t[e]=n},text:function(){return t.$dv="",t;function t(t,e){if(N(e)){var n=t.nodeType;return 1===n||n===Vt?t.textContent:""}t.textContent=e}}(),val:function(t,e){if(N(e)){if(t.multiple&&"select"===rt(t)){var n=[];return _(t.options,(function(t){t.selected&&n.push(t.value||t.text)})),n}return t.value}t.value=e},html:function(t,e){if(N(e))return t.innerHTML;ge(t,!0),t.innerHTML=e},empty:Ce},(function(t,e){fe.prototype[e]=function(e,n){var r,i,a=this.length;if(t!==Ce&&N(2===t.length&&t!==Te&&t!==ke?e:n)){if(B(e)){for(r=0;r<a;r++)if(t===Ee)t(this[r],e);else for(i in e)t(this[r],i,e[i]);return this}for(var o=t.$dv,s=N(o)?Math.min(a,1):a,l=0;l<s;l++){var u=t(this[l],e,n);o=o?o+u:u}return o}for(r=0;r<a;r++)t(this[r],e,n);return this}})),_({removeData:be,on:function(t,e,n,r){if(U(r))throw Zt("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(ce(t)){var i=Se(t,!0),a=i.events,o=i.handle;o||(o=i.handle=function(t,e){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=e[r||n.type],a=i?i.length:0;if(a){if(N(n.immediatePropagationStopped)){var o=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),o&&o.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped};var s=i.specialHandlerWrapper||Pe;a>1&&(i=Ht(i));for(var l=0;l<a;l++)n.isImmediatePropagationStopped()||s(t,n,i[l])}};return n.elem=t,n}(t,a));for(var s=e.indexOf(" ")>=0?e.split(" "):[e],l=s.length,u=function(e,r,i){var s=a[e];s||((s=a[e]=[]).specialHandlerWrapper=r,"$destroy"===e||i||t.addEventListener(e,o)),s.push(n)};l--;)e=s[l],Xt[e]?(u(Xt[e],Fe),u(e,void 0,!0)):u(e)}},off:ye,one:function(t,e,n){(t=o(t)).on(e,(function r(){t.off(e,n),t.off(e,r)})),t.on(e,n)},replaceWith:function(t,e){var n,r=t.parentNode;ge(t),_(new fe(e),(function(e){n?r.insertBefore(e,n.nextSibling):r.replaceChild(e,t),n=e}))},children:function(t){var e=[];return _(t.childNodes,(function(t){1===t.nodeType&&e.push(t)})),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var n=t.nodeType;if(1===n||11===n)for(var r=0,i=(e=new fe(e)).length;r<i;r++){var a=e[r];t.appendChild(a)}},prepend:function(t,e){if(1===t.nodeType){var n=t.firstChild;_(new fe(e),(function(e){t.insertBefore(e,n)}))}},wrap:function(t,e){!function(t,e){var n=t.parentNode;n&&n.replaceChild(e,t),e.appendChild(t)}(t,o(e).eq(0).clone()[0])},remove:De,detach:function(t){De(t,!0)},after:function(t,e){var n=t,r=t.parentNode;if(r)for(var i=0,a=(e=new fe(e)).length;i<a;i++){var o=e[i];r.insertBefore(o,n.nextSibling),n=o}},addClass:xe,removeClass:_e,toggleClass:function(t,e,n){e&&_(e.split(" "),(function(e){var r=n;N(r)&&(r=!Te(t,e)),(r?xe:_e)(t,e)}))},parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:pe,triggerHandler:function(t,e,n){var r,i,a,o=e.type||e,s=Se(t),l=s&&s.events,u=l&&l[o];u&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:I,type:o,target:t},e.type&&(r=D(r,e)),i=Ht(u),a=n?[r].concat(n):[r],_(i,(function(e){r.isImmediatePropagationStopped()||e.apply(t,a)})))}},(function(t,e){fe.prototype[e]=function(e,n,r){for(var i,a=0,s=this.length;a<s;a++)N(i)?U(i=t(this[a],e,n,r))&&(i=o(i)):we(i,t(this[a],e,n,r));return U(i)?i:this}})),fe.prototype.bind=fe.prototype.on,fe.prototype.unbind=fe.prototype.off;var Be=Object.create(null);function je(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}je.prototype={_idx:function(t){return t!==this._lastKey&&(this._lastKey=t,this._lastIndex=this._keys.indexOf(t)),this._lastIndex},_transformKey:function(t){return O(t)?Be:t},get:function(t){t=this._transformKey(t);var e=this._idx(t);if(-1!==e)return this._values[e]},has:function(t){return t=this._transformKey(t),-1!==this._idx(t)},set:function(t,e){t=this._transformKey(t);var n=this._idx(t);-1===n&&(n=this._lastIndex=this._keys.length),this._keys[n]=t,this._values[n]=e},delete:function(t){t=this._transformKey(t);var e=this._idx(t);return-1!==e&&(this._keys.splice(e,1),this._values.splice(e,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var Ve=je,He=[function(){this.$get=[function(){return Ve}]}],Ge=/^([^(]+?)=>/,We=/^[^(]*\(\s*([^)]*)\)/m,ze=/,/,Ye=/^\s*(_?)(\S+?)\1\s*$/,qe=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ke=i("$injector");function Xe(t){return Function.prototype.toString.call(t)}function Ze(t){var e=Xe(t).replace(qe,"");return e.match(Ge)||e.match(We)}function Je(t,e){e=!0===e;var n={},r="Provider",i=[],o=new Ve,s={$provide:{provider:p(g),factory:p(m),service:p((function(t,e){return m(t,["$injector",function(t){return t.instantiate(e)}])})),value:p((function(t,e){return m(t,P(e),!1)})),constant:p((function(t,e){Nt(t,"constant"),s[t]=e,c[t]=e})),decorator:function(t,e){var n=u.get(t+r),i=n.$get;n.$get=function(){var t=h.invoke(i,n);return h.invoke(e,null,{$delegate:t})}}}},u=s.$injector=b(s,(function(t,e){throw S.isString(e)&&i.push(e),Ke("unpr","Unknown provider: {0}",i.join(" <- "))})),c={},d=b(c,(function(t,e){var n=u.get(t+r,e);return h.invoke(n.$get,n,void 0,t)})),h=d;s.$injectorProvider={$get:P(d)},h.modules=u.modules=Bt();var f=y(t);return(h=d.get("$injector")).strictDi=e,_(f,(function(t){t&&h.invoke(t)})),h.loadNewModules=function(t){_(y(t),(function(t){t&&h.invoke(t)}))},h;function p(t){return function(e,n){if(!B(e))return t(e,n);_(e,w(t))}}function g(t,e){if(Nt(t,"service"),(Y(e)||W(e))&&(e=u.instantiate(e)),!e.$get)throw Ke("pget","Provider '{0}' must define $get factory method.",t);return s[t+r]=e}function v(t,e){return function(){var n=h.invoke(e,this);if(N(n))throw Ke("undef","Provider '{0}' must return a value from $get factory method.",t);return n}}function m(t,e,n){return g(t,{$get:!1!==n?v(t,e):e})}function y(t){Pt(N(t)||W(t),"modulesToLoad","not an array");var e,n=[];return _(t,(function(t){if(!o.get(t)){o.set(t,!0);try{V(t)?(e=l(t),h.modules[t]=e,n=n.concat(y(e.requires)).concat(e._runBlocks),r(e._invokeQueue),r(e._configBlocks)):Y(t)||W(t)?n.push(u.invoke(t)):Ft(t,"module")}catch(e){throw W(t)&&(t=t[t.length-1]),e.message&&e.stack&&-1===e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Ke("modulerr","Failed to instantiate module {0} due to:\n{1}",t,e.stack||e.message||e)}}function r(t){var e,n;for(e=0,n=t.length;e<n;e++){var r=t[e],i=u.get(r[0]);i[r[1]].apply(i,r[2])}}})),n}function b(t,o){function l(e,r){if(t.hasOwnProperty(e)){if(t[e]===n)throw Ke("cdep","Circular dependency found: {0}",e+" <- "+i.join(" <- "));return t[e]}try{return i.unshift(e),t[e]=n,t[e]=o(e,r),t[e]}catch(r){throw t[e]===n&&delete t[e],r}finally{i.shift()}}function u(t,n,r){for(var i=[],a=Je.$$annotate(t,e,r),o=0,s=a.length;o<s;o++){var u=a[o];if("string"!=typeof u)throw Ke("itkn","Incorrect injection token! Expected service name as string, got {0}",u);i.push(n&&n.hasOwnProperty(u)?n[u]:l(u,r))}return i}return{invoke:function(t,e,n,r){"string"==typeof n&&(r=n,n=null);var i=u(t,n,r);return W(t)&&(t=t[t.length-1]),function(t){if(a||"function"!=typeof t)return!1;var e=t.$$ngIsClass;return Z(e)||(e=t.$$ngIsClass=/^class\b/.test(Xe(t))),e}(t)?(i.unshift(null),new(Function.prototype.bind.apply(t,i))):t.apply(e,i)},instantiate:function(t,e,n){var r=W(t)?t[t.length-1]:t,i=u(t,e,n);return i.unshift(null),new(Function.prototype.bind.apply(r,i))},get:l,annotate:Je.$$annotate,has:function(e){return s.hasOwnProperty(e+r)||t.hasOwnProperty(e)}}}}function Qe(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(n,r,i){var a=n.document;function s(t){if(t){t.scrollIntoView();var e=function(){var t=l.yOffset;if(Y(t))t=t();else if(nt(t)){var e=t[0];t="fixed"!==n.getComputedStyle(e).position?0:e.getBoundingClientRect().bottom}else H(t)||(t=0);return t}();if(e){var r=t.getBoundingClientRect().top;n.scrollBy(0,r-e)}}else n.scrollTo(0,0)}function l(t){var e,n,i;(t=V(t)?t:H(t)?t.toString():r.hash())?(e=a.getElementById(t))?s(e):(n=a.getElementsByName(t),i=null,Array.prototype.some.call(n,(function(t){if("a"===rt(t))return i=t,!0})),(e=i)?s(e):"top"===t&&s(null)):s(null)}return e&&i.$watch((function(){return r.hash()}),(function(e,n){var r,a;e===n&&""===e||(r=function(){i.$evalAsync(l)},"complete"===(a=a||t).document.readyState?a.setTimeout(r):o(a).on("load",r))})),l}]}Je.$$annotate=function(t,e,n){var r,i;if("function"==typeof t){if(!(r=t.$inject)){if(r=[],t.length){if(e)throw V(n)&&n||(n=t.name||function(t){var e=Ze(t);return e?"function("+(e[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}(t)),Ke("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);_(Ze(t)[1].split(ze),(function(t){t.replace(Ye,(function(t,e,n){r.push(n)}))}))}t.$inject=r}}else W(t)?(Ft(t[i=t.length-1],"fn"),r=t.slice(0,i)):Ft(t,"fn",!0);return r};var tn=i("$animate"),en="ng-animate";function nn(t,e){return t||e?t?e?(W(t)&&(t=t.join(" ")),W(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function rn(t){return B(t)?t:{}}var an=function(){this.$get=I},on=function(){var t=new Ve,e=[];this.$get=["$$AnimateRunner","$rootScope",function(n,r){return{enabled:I,on:I,off:I,pin:I,push:function(o,s,l,u){u&&u(),(l=l||{}).from&&o.css(l.from),l.to&&o.css(l.to),(l.addClass||l.removeClass)&&function(n,o,s){var l=t.get(n)||{},u=i(l,o,!0),c=i(l,s,!1);(u||c)&&(t.set(n,l),e.push(n),1===e.length&&r.$$postDigest(a))}(o,l.addClass,l.removeClass);var c=new n;return c.complete(),c}};function i(t,e,n){var r=!1;return e&&_(e=V(e)?e.split(" "):W(e)?e:[],(function(e){e&&(r=!0,t[e]=n)})),r}function a(){_(e,(function(e){var n=t.get(e);if(n){var r=function(t){V(t)&&(t=t.split(" "));var e=Bt();return _(t,(function(t){t.length&&(e[t]=!0)})),e}(e.attr("class")),i="",a="";_(n,(function(t,e){t!==!!r[e]&&(t?i+=(i.length?" ":"")+e:a+=(a.length?" ":"")+e)})),_(e,(function(t){i&&xe(t,i),a&&_e(t,a)})),t.delete(e)}})),e.length=0}}]},sn=["$provide",function(t){var e=this,n=null,r=null;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw tn("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var i=n+"-animation";e.$$registeredAnimations[n.substr(1)]=i,t.factory(i,r)},this.customFilter=function(t){return 1===arguments.length&&(r=Y(t)?t:null),r},this.classNameFilter=function(t){if(1===arguments.length&&(n=t instanceof RegExp?t:null)){var e=new RegExp("[(\\s|\\/)]ng-animate[(\\s|\\/)]");if(e.test(n.toString()))throw n=null,tn("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',en)}return n},this.$get=["$$animateQueue",function(t){function e(t,e,n){if(n){var r=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(1===n.nodeType)return n}}(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(t):e.prepend(t)}return{on:t.on,off:t.off,pin:t.pin,enabled:t.enabled,cancel:function(t){t.cancel&&t.cancel()},enter:function(n,r,i,a){return r=r&&o(r),i=i&&o(i),e(n,r=r||i.parent(),i),t.push(n,"enter",rn(a))},move:function(n,r,i,a){return r=r&&o(r),i=i&&o(i),e(n,r=r||i.parent(),i),t.push(n,"move",rn(a))},leave:function(e,n){return t.push(e,"leave",rn(n),(function(){e.remove()}))},addClass:function(e,n,r){return(r=rn(r)).addClass=nn(r.addclass,n),t.push(e,"addClass",r)},removeClass:function(e,n,r){return(r=rn(r)).removeClass=nn(r.removeClass,n),t.push(e,"removeClass",r)},setClass:function(e,n,r,i){return(i=rn(i)).addClass=nn(i.addClass,n),i.removeClass=nn(i.removeClass,r),t.push(e,"setClass",i)},animate:function(e,n,r,i,a){return(a=rn(a)).from=a.from?D(a.from,n):n,a.to=a.to?D(a.to,r):r,i=i||"ng-inline-animate",a.tempClasses=nn(a.tempClasses,i),t.push(e,"animate",a)}}}]}],ln=function(){this.$get=["$$rAF",function(t){var e=[];function n(n){e.push(n),e.length>1||t((function(){for(var t=0;t<e.length;t++)e[t]();e=[]}))}return function(){var t=!1;return n((function(){t=!0})),function(e){t?e():n(e)}}}]},un=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(t,e,n,r,i){function a(t){this.setHost(t);var e=n();this._doneCallbacks=[],this._tick=function(t){r()?function(t){i(t,0,!1)}(t):e(t)},this._state=0}return a.chain=function(t,e){var n=0;!function r(){if(n===t.length)return void e(!0);t[n]((function(t){!1!==t?(n++,r()):e(!1)}))}()},a.all=function(t,e){var n=0,r=!0;function i(i){r=r&&i,++n===t.length&&e(r)}_(t,(function(t){t.done(i)}))},a.prototype={setHost:function(t){this.host=t||{}},done:function(t){2===this._state?t():this._doneCallbacks.push(t)},progress:I,getPromise:function(){if(!this.promise){var e=this;this.promise=t((function(t,n){e.done((function(e){!1===e?n():t()}))}))}return this.promise},then:function(t,e){return this.getPromise().then(t,e)},catch:function(t){return this.getPromise().catch(t)},finally:function(t){return this.getPromise().finally(t)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(t){var e=this;0===e._state&&(e._state=1,e._tick((function(){e._resolve(t)})))},_resolve:function(t){2!==this._state&&(_(this._doneCallbacks,(function(e){e(t)})),this._doneCallbacks.length=0,this._state=2)}},a}]},cn=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(t,e,n){return function(e,r){var i=r||{};i.$$prepared||(i=ot(i)),i.cleanupStyles&&(i.from=i.to=null),i.from&&(e.css(i.from),i.from=null);var a,o=new n;return{start:s,end:s};function s(){return t((function(){!function(){i.addClass&&(e.addClass(i.addClass),i.addClass=null);i.removeClass&&(e.removeClass(i.removeClass),i.removeClass=null);i.to&&(e.css(i.to),i.to=null)}(),a||o.complete(),a=!0})),o}}}]};function dn(t,e,n,r,i){var a=this,s=t.location,l=t.history,u=t.setTimeout,c=t.clearTimeout,d={},h=i(n);a.isMock=!1,a.$$completeOutstandingRequest=h.completeTask,a.$$incOutstandingRequestCount=h.incTaskCount,a.notifyWhenNoOutstandingRequests=h.notifyWhenNoPendingTasks;var f,p,g=s.href,v=e.find("base"),m=null,y=r.history?function(){try{return l.state}catch(t){}}:I;x(),a.url=function(e,n,i){if(N(i)&&(i=null),s!==t.location&&(s=t.location),l!==t.history&&(l=t.history),e){var o=p===i;if(e=di(e).href,g===e&&(!r.history||o))return a;var u=g&&cr(g)===cr(e);return g=e,p=i,!r.history||u&&o?(u||(m=e),n?s.replace(e):u?s.hash=function(t){var e=t.indexOf("#");return-1===e?"":t.substr(e)}(e):s.href=e,s.href!==e&&(m=e)):(l[n?"replaceState":"pushState"](i,"",e),x()),m&&(m=e),a}return function(t){return t.replace(/#$/,"")}(m||s.href)},a.state=function(){return f};var b=[],S=!1;function E(){m=null,w()}var T=null;function x(){lt(f=N(f=y())?null:f,T)&&(f=T),T=f,p=f}function w(){var t=p;x(),g===a.url()&&t===f||(g=a.url(),p=f,_(b,(function(t){t(a.url(),f)})))}a.onUrlChange=function(e){return S||(r.history&&o(t).on("popstate",E),o(t).on("hashchange",E),S=!0),b.push(e),e},a.$$applicationDestroyed=function(){o(t).off("hashchange popstate",E)},a.$$checkUrlChange=w,a.baseHref=function(){var t=v.attr("href");return t?t.replace(/^(https?:)?\/\/[^/]*/,""):""},a.defer=function(t,e,n){var r;return e=e||0,n=n||h.DEFAULT_TASK_TYPE,h.incTaskCount(n),r=u((function(){delete d[r],h.completeTask(t,n)}),e),d[r]=n,r},a.defer.cancel=function(t){if(d.hasOwnProperty(t)){var e=d[t];return delete d[t],c(t),h.completeTask(I,e),!0}return!1}}function hn(){this.$get=["$window","$log","$sniffer","$document","$$taskTrackerFactory",function(t,e,n,r,i){return new dn(t,r,e,n,i)}]}function fn(){this.$get=function(){var t={};function e(e,n){if(e in t)throw i("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var r=0,a=D({},n,{id:e}),o=Bt(),s=n&&n.capacity||Number.MAX_VALUE,l=Bt(),u=null,c=null;return t[e]={put:function(t,e){if(!N(e)){if(s<Number.MAX_VALUE)d(l[t]||(l[t]={key:t}));return t in o||r++,o[t]=e,r>s&&this.remove(c.key),e}},get:function(t){if(s<Number.MAX_VALUE){var e=l[t];if(!e)return;d(e)}return o[t]},remove:function(t){if(s<Number.MAX_VALUE){var e=l[t];if(!e)return;e===u&&(u=e.p),e===c&&(c=e.n),h(e.n,e.p),delete l[t]}t in o&&(delete o[t],r--)},removeAll:function(){o=Bt(),r=0,l=Bt(),u=c=null},destroy:function(){o=null,a=null,l=null,delete t[e]},info:function(){return D({},a,{size:r})}};function d(t){t!==u&&(c?c===t&&(c=t.n):c=t,h(t.n,t.p),h(t,u),(u=t).n=null)}function h(t,e){t!==e&&(t&&(t.p=e),e&&(e.n=t))}}return e.info=function(){var e={};return _(t,(function(t,n){e[n]=t.info()})),e},e.get=function(e){return t[e]},e}}function pn(){this.$get=["$cacheFactory",function(t){return t("templates")}]}var gn=i("$compile");var vn=new function(){};function mn(e,n){var r={},i="Directive",s=/^\s*directive:\s*([\w-]+)\s+(.*)$/,l=/(([\w-]+)(?::([^;]+))?;?)/,u=function(t){var e,n={},r=t.split(",");for(e=0;e<r.length;e++)n[r[e]]=!0;return n}("ngSrc,ngSrcset,src,srcset"),c=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,f=/^(on[a-z]+|formaction)$/,p=Bt();function g(t,e,n){var r=/^([@&]|[=<](\*?))(\??)\s*([\w$]*)$/,i=Bt();return _(t,(function(t,a){if((t=t.trim())in p)i[a]=p[t];else{var o=t.match(r);if(!o)throw gn("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",e,a,t,n?"controller bindings definition":"isolate scope definition");i[a]={mode:o[1][0],collection:"*"===o[2],optional:"?"===o[3],attrName:o[4]||a},o[4]&&(p[t]=i[a])}})),i}function v(t,e){var n={isolateScope:null,bindToController:null};if(B(t.scope)&&(!0===t.bindToController?(n.bindToController=g(t.scope,e,!0),n.isolateScope={}):n.isolateScope=g(t.scope,e,!1)),B(t.bindToController)&&(n.bindToController=g(t.bindToController,e,!0)),n.bindToController&&!t.controller)throw gn("noctrl","Cannot bind to controller without directive '{0}'s controller.",e);return n}this.directive=function t(n,a){return Pt(n,"name"),Nt(n,"directive"),V(n)?(!function(t){var e=t.charAt(0);if(!e||e!==h(e))throw gn("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",t);if(t!==t.trim())throw gn("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",t)}(n),Pt(a,"directiveFactory"),r.hasOwnProperty(n)||(r[n]=[],e.factory(n+i,["$injector","$exceptionHandler",function(t,e){var i=[];return _(r[n],(function(r,a){try{var o=t.invoke(r);Y(o)?o={compile:P(o)}:!o.compile&&o.link&&(o.compile=P(o.link)),o.priority=o.priority||0,o.index=a,o.name=o.name||n,o.require=function(t){var e=t.require||t.controller&&t.name;return!W(e)&&B(e)&&_(e,(function(t,n){var r=t.match(c);t.substring(r[0].length)||(e[n]=r[0]+n)})),e}(o),o.restrict=function(t,e){if(t&&(!V(t)||!/[EACM]/.test(t)))throw gn("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",t,e);return t||"EA"}(o.restrict,n),o.$$moduleName=r.$$moduleName,i.push(o)}catch(t){e(t)}})),i}])),r[n].push(a)):_(n,w(t)),this},this.component=function t(e,n){if(!V(e))return _(e,w(ft(this,t))),this;var r=n.controller||function(){};function i(t){function e(e){return Y(e)||W(e)?function(n,r){return t.invoke(e,this,{$element:n,$attrs:r})}:e}var i=n.template||n.templateUrl?n.template:"",a={controller:r,controllerAs:kn(n.controller)||n.controllerAs||"$ctrl",template:e(i),templateUrl:e(n.templateUrl),transclude:n.transclude,scope:{},bindToController:n.bindings||{},restrict:"E",require:n.require};return _(n,(function(t,e){"$"===e.charAt(0)&&(a[e]=t)})),a}return _(n,(function(t,e){"$"===e.charAt(0)&&(i[e]=t,Y(r)&&(r[e]=t))})),i.$inject=["$injector"],this.directive(e,i)},this.aHrefSanitizationTrustedUrlList=function(t){return U(t)?(n.aHrefSanitizationTrustedUrlList(t),this):n.aHrefSanitizationTrustedUrlList()},Object.defineProperty(this,"aHrefSanitizationWhitelist",{get:function(){return this.aHrefSanitizationTrustedUrlList},set:function(t){this.aHrefSanitizationTrustedUrlList=t}}),this.imgSrcSanitizationTrustedUrlList=function(t){return U(t)?(n.imgSrcSanitizationTrustedUrlList(t),this):n.imgSrcSanitizationTrustedUrlList()},Object.defineProperty(this,"imgSrcSanitizationWhitelist",{get:function(){return this.imgSrcSanitizationTrustedUrlList},set:function(t){this.imgSrcSanitizationTrustedUrlList=t}});var y=!0;this.debugInfoEnabled=function(t){return U(t)?(y=t,this):y};var b=!1;this.strictComponentBindingsEnabled=function(t){return U(t)?(b=t,this):b};var S=10;this.onChangesTtl=function(t){return arguments.length?(S=t,this):S};var E=!0;this.commentDirectivesEnabled=function(t){return arguments.length?(E=t,this):E};var T=!0;this.cssClassDirectivesEnabled=function(t){return arguments.length?(T=t,this):T};var x=Bt();this.addPropertySecurityContext=function(t,e,n){var r=t.toLowerCase()+"|"+e.toLowerCase();if(r in x&&x[r]!==n)throw gn("ctxoverride","Property context '{0}.{1}' already set to '{2}', cannot override to '{3}'.",t,e,x[r],n);return x[r]=n,this},function(){function t(t,e){_(e,(function(e){x[e.toLowerCase()]=t}))}t(Yr.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),t(Yr.CSS,["*|style"]),t(Yr.URL,["area|href","area|ping","a|href","a|ping","blockquote|cite","body|background","del|cite","input|src","ins|cite","q|cite"]),t(Yr.MEDIA_URL,["audio|src","img|src","img|srcset","source|src","source|srcset","track|src","video|src","video|poster"]),t(Yr.RESOURCE_URL,["*|formAction","applet|code","applet|codebase","base|href","embed|src","frame|src","form|action","head|profile","html|manifest","iframe|src","link|href","media|src","object|codebase","object|data","script|src"])}(),this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate",function(e,n,p,g,w,k,A,C,L){var $,O=/^\w/,P=t.document.createElement("div"),F=E,U=T,j=S;function H(){try{if(!--j)throw $=void 0,gn("infchng","{0} $onChanges() iterations reached. Aborting!\n",S);A.$apply((function(){for(var t=0,e=$.length;t<e;++t)try{$[t]()}catch(t){p(t)}$=void 0}))}finally{j++}}function G(t,e){if(!t)return t;if(!V(t))throw gn("srcset",'Can\'t pass trusted values to `{0}`: "{1}"',e,t.toString());for(var n="",r=tt(t),i=/\s/.test(r)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,a=r.split(i),o=Math.floor(a.length/2),s=0;s<o;s++){var l=2*s;n+=C.getTrustedMediaUrl(tt(a[l])),n+=" "+tt(a[l+1])}var u=tt(a[2*s]).split(/\s/);return n+=C.getTrustedMediaUrl(tt(u[0])),2===u.length&&(n+=" "+tt(u[1])),n}function q(t,e){if(e){var n,r,i,a=Object.keys(e);for(n=0,r=a.length;n<r;n++)this[i=a[n]]=e[i]}else this.$attr={};this.$$element=t}function K(t,e){try{t.addClass(e)}catch(t){}}q.prototype={$normalize:En,$addClass:function(t){t&&t.length>0&&L.addClass(this.$$element,t)},$removeClass:function(t){t&&t.length>0&&L.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=Tn(t,e);n&&n.length&&L.addClass(this.$$element,n);var r=Tn(e,t);r&&r.length&&L.removeClass(this.$$element,r)},$set:function(t,e,n,r){var i=Re(this.$$element[0],t),a=Ie[t],o=t;i?(this.$$element.prop(t,e),r=i):a&&(this[a]=e,o=a),this[t]=e,r?this.$attr[t]=r:(r=this.$attr[t])||(this.$attr[t]=r=Mt(t,"-")),"img"===rt(this.$$element)&&"srcset"===t&&(this[t]=e=G(e,"$set('srcset', value)")),!1!==n&&(null===e||N(e)?this.$$element.removeAttr(r):O.test(r)?i&&!1===e?this.$$element.removeAttr(r):this.$$element.attr(r,e):function(t,e,n){P.innerHTML="<span "+e+">";var r=P.firstChild.attributes,i=r[0];r.removeNamedItem(i.name),i.value=n,t.attributes.setNamedItem(i)}(this.$$element[0],r,e));var s=this.$$observers;s&&_(s[o],(function(t){try{t(e)}catch(t){p(t)}}))},$observe:function(t,e){var n=this,r=n.$$observers||(n.$$observers=Bt()),i=r[t]||(r[t]=[]);return i.push(e),A.$evalAsync((function(){i.$$inter||!n.hasOwnProperty(t)||N(n[t])||e(n[t])})),function(){at(i,e)}}};var J=n.startSymbol(),Q=n.endSymbol(),et="{{"===J&&"}}"===Q?R:function(t){return t.replace(/\{\{/g,J).replace(/}}/g,Q)},nt=/^ng(Attr|Prop|On)([A-Z].*)$/,it=/^(.+)Start$/;return ot.$$addBindingInfo=y?function(t,e){var n=t.data("$binding")||[];W(e)?n=n.concat(e):n.push(e),t.data("$binding",n)}:I,ot.$$addBindingClass=y?function(t){K(t,"ng-binding")}:I,ot.$$addScopeInfo=y?function(t,e,n,r){var i=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(i,e)}:I,ot.$$addScopeClass=y?function(t,e){K(t,e?"ng-isolate-scope":"ng-scope")}:I,ot.$$createComment=function(e,n){var r="";return y&&(r=" "+(e||"")+": ",n&&(r+=n+" ")),t.document.createComment(r)},ot;function ot(t,e,n,r,i){t instanceof o||(t=o(t));var a=ut(t,e,t,n,r,i);ot.$$addScopeClass(t);var s=null;return function(e,n,r){if(!t)throw gn("multilink","This element has already been linked.");Pt(e,"scope"),i&&i.needsNewScope&&(e=e.$parent.$new());var l,u=(r=r||{}).parentBoundTranscludeFn,c=r.transcludeControllers,d=r.futureParentElement;if(u&&u.$$boundTransclude&&(u=u.$$boundTransclude),s||(s=function(t){var e=t&&t[0];return e&&"foreignobject"!==rt(e)&&m.call(e).match(/SVG/)?"svg":"html"}(d)),l="html"!==s?o(Ct(s,o("<div></div>").append(t).html())):n?$e.clone.call(t):t,c)for(var h in c)l.data("$"+h+"Controller",c[h].instance);return ot.$$addScopeInfo(l,e),n&&n(l,e),a&&a(e,l,l,u),n||(t=a=null),l}}function ut(t,e,n,r,i,s){for(var l,u,c,d,h,f,p,g=[],v=W(t)||t instanceof o,m=0;m<t.length;m++)l=new q,11===a&&ct(t,m,v),(c=(u=pt(t[m],[],l,0===m?r:void 0,i)).length?yt(u,t[m],l,e,n,null,[],[],s):null)&&c.scope&&ot.$$addScopeClass(l.$$element),h=c&&c.terminal||!(d=t[m].childNodes)||!d.length?null:ut(d,c?(c.transcludeOnThisElement||!c.templateOnThisElement)&&c.transclude:e),(c||h)&&(g.push(m,c,h),f=!0,p=p||c),s=null;return f?function(t,n,r,i){var a,s,l,u,c,d,h,f,v;if(p){var m=n.length;for(v=new Array(m),c=0;c<g.length;c+=3)h=g[c],v[h]=n[h]}else v=n;for(c=0,d=g.length;c<d;)l=v[g[c++]],a=g[c++],s=g[c++],a?(a.scope?(u=t.$new(),ot.$$addScopeInfo(o(l),u)):u=t,f=a.transcludeOnThisElement?dt(t,a.transclude,i):!a.templateOnThisElement&&i?i:!i&&e?dt(t,e):null,a(s,u,l,r,f)):s&&s(t,l.childNodes,void 0,i)}:null}function ct(t,e,n){var r,i=t[e],a=i.parentNode;if(i.nodeType===Vt)for(;(r=a?i.nextSibling:t[e+1])&&r.nodeType===Vt;)i.nodeValue=i.nodeValue+r.nodeValue,r.parentNode&&r.parentNode.removeChild(r),n&&r===t[e+1]&&t.splice(e+1,1)}function dt(t,e,n){function r(r,i,a,o,s){return r||((r=t.$new(!1,s)).$$transcluded=!0),e(r,i,{parentBoundTranscludeFn:n,transcludeControllers:a,futureParentElement:o})}var i=r.$$slots=Bt();for(var a in e.$$slots)e.$$slots[a]?i[a]=dt(t,e.$$slots[a],n):i[a]=null;return r}function pt(t,e,r,i,a){var o,u,c,d=t.nodeType,h=r.$attr;switch(d){case 1:Tt(e,En(u=rt(t)),"E",i,a);for(var f,p,g,v,m,y=t.attributes,b=0,S=y&&y.length;b<S;b++){var E,T=!1,_=!1,x=!1,w=!1,k=!1;p=(f=y[b]).name,v=f.value,(m=(g=En(p.toLowerCase())).match(nt))?(x="Attr"===m[1],w="Prop"===m[1],k="On"===m[1],p=p.replace(bn,"").toLowerCase().substr(4+m[1].length).replace(/_(.)/g,(function(t,e){return e.toUpperCase()}))):(E=g.match(it))&&_t(E[1])&&(T=p,_=p.substr(0,p.length-5)+"end",p=p.substr(0,p.length-6)),w||k?(r[g]=v,h[g]=f.name,w?Lt(t,e,g,p):$t(e,g,p)):(h[g=En(p.toLowerCase())]=p,!x&&r.hasOwnProperty(g)||(r[g]=v,Re(t,g)&&(r[g]=!0)),Ot(t,e,v,g,x),Tt(e,g,"A",i,a,T,_))}if("input"===u&&"hidden"===t.getAttribute("type")&&t.setAttribute("autocomplete","off"),!U)break;if(B(c=t.className)&&(c=c.animVal),V(c)&&""!==c)for(;o=l.exec(c);)Tt(e,g=En(o[2]),"C",i,a)&&(r[g]=tt(o[3])),c=c.substr(o.index+o[0].length);break;case Vt:!function(t,e){var r=n(e,!0);r&&t.push({priority:0,compile:function(t){var e=t.parent(),n=!!e.length;return n&&ot.$$addBindingClass(e),function(t,e){var i=e.parent();n||ot.$$addBindingClass(i),ot.$$addBindingInfo(i,r.expressions),t.$watch(r,(function(t){e[0].nodeValue=t}))}}})}(e,t.nodeValue);break;case 8:if(!F)break;!function(t,e,n,r,i){try{var a=s.exec(t.nodeValue);if(a){var o=En(a[1]);Tt(e,o,"M",r,i)&&(n[o]=tt(a[2]))}}catch(t){}}(t,e,r,i,a)}return e.sort(kt),e}function gt(t,e,n){var r=[],i=0;if(e&&t.hasAttribute&&t.hasAttribute(e))do{if(!t)throw gn("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,n);1===t.nodeType&&(t.hasAttribute(e)&&i++,t.hasAttribute(n)&&i--),r.push(t),t=t.nextSibling}while(i>0);else r.push(t);return o(r)}function vt(t,e,n){return function(r,i,a,o,s){return i=gt(i[0],e,n),t(r,i,a,o,s)}}function mt(t,e,n,r,i,a){var o;return t?ot(e,n,r,i,a):function(){return o||(o=ot(e,n,r,i,a),e=n=a=null),o.apply(this,arguments)}}function yt(e,n,r,i,a,s,l,u,c){c=c||{};for(var d,h,f,g,v,m=-Number.MAX_VALUE,y=c.newScopeDirective,b=c.controllerDirectives,S=c.newIsolateScopeDirective,E=c.templateDirective,T=c.nonTlbTranscludeDirective,x=!1,w=!1,A=c.hasElementTranscludeDirective,C=r.$$element=o(n),L=s,$=i,O=!1,M=!1,I=0,R=e.length;I<R;I++){var P=(d=e[I]).$$start,F=d.$$end;if(P&&(C=gt(n,P,F)),f=void 0,m>d.priority)break;if((v=d.scope)&&(d.templateUrl||(B(v)?(At("new/isolated scope",S||y,d,C),S=d):At("new/isolated scope",S,d,C)),y=y||d),h=d.name,!O&&(d.replace&&(d.templateUrl||d.template)||d.transclude&&!d.$$tlb)){for(var U,j=I+1;U=e[j++];)if(U.transclude&&!U.$$tlb||U.replace&&(U.templateUrl||U.template)){M=!0;break}O=!0}if(!d.templateUrl&&d.controller&&(b=b||Bt(),At("'"+h+"' controller",b[h],d,C),b[h]=d),v=d.transclude)if(x=!0,d.$$tlb||(At("transclusion",T,d,C),T=d),"element"===v)A=!0,m=d.priority,f=C,C=r.$$element=o(ot.$$createComment(h,r[h])),n=C[0],It(a,ht(f),n),$=mt(M,f,i,m,L&&L.name,{nonTlbTranscludeDirective:T});else{var V=Bt();if(B(v)){f=t.document.createDocumentFragment();var H=Bt(),G=Bt();for(var z in _(v,(function(t,e){var n="?"===t.charAt(0);t=n?t.substring(1):t,H[t]=e,V[e]=null,G[e]=n})),_(C.contents(),(function(e){var n=H[En(rt(e))];n?(G[n]=!0,V[n]=V[n]||t.document.createDocumentFragment(),V[n].appendChild(e)):f.appendChild(e)})),_(G,(function(t,e){if(!t)throw gn("reqslot","Required transclusion slot `{0}` was not filled.",e)})),V)if(V[z]){var K=o(V[z].childNodes);V[z]=mt(M,K,i)}f=o(f.childNodes)}else f=o(pe(n)).contents();C.empty(),($=mt(M,f,i,void 0,void 0,{needsNewScope:d.$$isolateScope||d.$$newScope})).$$slots=V}if(d.template)if(w=!0,At("template",E,d,C),E=d,v=Y(d.template)?d.template(C,r):d.template,v=et(v),d.replace){if(L=d,f=ue(v)?[]:_n(Ct(d.templateNamespace,tt(v))),n=f[0],1!==f.length||1!==n.nodeType)throw gn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",h,"");It(a,C,n);var Z={$attr:{}},J=pt(n,[],Z),Q=e.splice(I+1,e.length-(I+1));(S||y)&&St(J,S,y),e=e.concat(J).concat(Q),xt(r,Z),R=e.length}else C.html(v);if(d.templateUrl)w=!0,At("template",E,d,C),E=d,d.replace&&(L=d),at=wt(e.splice(I,e.length-I),C,r,a,x&&$,l,u,{controllerDirectives:b,newScopeDirective:y!==d&&y,newIsolateScopeDirective:S,templateDirective:E,nonTlbTranscludeDirective:T}),R=e.length;else if(d.compile)try{g=d.compile(C,r,$);var nt=d.$$originalDirective||d;Y(g)?it(null,ft(nt,g),P,F):g&&it(ft(nt,g.pre),ft(nt,g.post),P,F)}catch(t){p(t,Et(C))}d.terminal&&(at.terminal=!0,m=Math.max(m,d.priority))}return at.scope=y&&!0===y.scope,at.transcludeOnThisElement=x,at.templateOnThisElement=w,at.transclude=$,c.hasElementTranscludeDirective=A,at;function it(t,e,n,r){t&&(n&&(t=vt(t,n,r)),t.require=d.require,t.directiveName=h,(S===d||d.$$isolateScope)&&(t=Rt(t,{isolateScope:!0})),l.push(t)),e&&(n&&(e=vt(e,n,r)),e.require=d.require,e.directiveName=h,(S===d||d.$$isolateScope)&&(e=Rt(e,{isolateScope:!0})),u.push(e))}function at(t,e,i,a,s){var c,d,h,f,g,v,m,T,x,w;for(var C in n===i?(x=r,T=r.$$element):x=new q(T=o(i),r),g=e,S?f=e.$new(!0):y&&(g=e.$parent),s&&((m=function(t,e,n,r){var i;X(t)||(r=n,n=e,e=t,t=void 0);A&&(i=v);n||(n=A?T.parent():T);if(!r)return s(t,e,i,n,M);var a=s.$$slots[r];if(a)return a(t,e,i,n,M);if(N(a))throw gn("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',r,Et(T))}).$$boundTransclude=s,m.isSlotFilled=function(t){return!!s.$$slots[t]}),b&&(v=function(t,e,n,r,i,a,o){var s=Bt();for(var l in r){var u=r[l],c={$scope:u===o||u.$$isolateScope?i:a,$element:t,$attrs:e,$transclude:n},d=u.controller;"@"===d&&(d=e[u.name]);var h=k(d,c,!0,u.controllerAs);s[u.name]=h,t.data("$"+u.name+"Controller",h.instance)}return s}(T,x,m,b,f,e,S)),S&&(ot.$$addScopeInfo(T,f,!0,!(E&&(E===S||E===S.$$originalDirective))),ot.$$addScopeClass(T,!0),f.$$isolateBindings=S.$$isolateBindings,(w=Ut(e,x,f,f.$$isolateBindings,S)).removeWatches&&f.$on("$destroy",w.removeWatches)),v){var L=b[C],$=v[C],O=L.$$bindings.bindToController;$.instance=$(),T.data("$"+L.name+"Controller",$.instance),$.bindingInfo=Ut(g,x,$.instance,O,L)}for(_(b,(function(t,e){var n=t.require;t.bindToController&&!W(n)&&B(n)&&D(v[e].instance,bt(e,n,T,v))})),_(v,(function(t){var e=t.instance;if(Y(e.$onChanges))try{e.$onChanges(t.bindingInfo.initialChanges)}catch(t){p(t)}if(Y(e.$onInit))try{e.$onInit()}catch(t){p(t)}Y(e.$doCheck)&&(g.$watch((function(){e.$doCheck()})),e.$doCheck()),Y(e.$onDestroy)&&g.$on("$destroy",(function(){e.$onDestroy()}))})),c=0,d=l.length;c<d;c++)Ft(h=l[c],h.isolateScope?f:e,T,x,h.require&&bt(h.directiveName,h.require,T,v),m);var M=e;for(S&&(S.template||null===S.templateUrl)&&(M=f),t&&t(M,i.childNodes,void 0,s),c=u.length-1;c>=0;c--)Ft(h=u[c],h.isolateScope?f:e,T,x,h.require&&bt(h.directiveName,h.require,T,v),m);_(v,(function(t){var e=t.instance;Y(e.$postLink)&&e.$postLink()}))}}function bt(t,e,n,r){var i;if(V(e)){var a=e.match(c),o=e.substring(a[0].length),s=a[1]||a[3],l="?"===a[2];if("^^"===s?n=n.parent():i=(i=r&&r[o])&&i.instance,!i){var u="$"+o+"Controller";i="^^"===s&&n[0]&&9===n[0].nodeType?null:s?n.inheritedData(u):n.data(u)}if(!i&&!l)throw gn("ctreq","Controller '{0}', required by directive '{1}', can't be found!",o,t)}else if(W(e)){i=[];for(var d=0,h=e.length;d<h;d++)i[d]=bt(t,e[d],n,r)}else B(e)&&(i={},_(e,(function(e,a){i[a]=bt(t,e,n,r)})));return i||null}function St(t,e,n){for(var r=0,i=t.length;r<i;r++)t[r]=M(t[r],{$$isolateScope:e,$$newScope:n})}function Tt(t,n,a,o,s,l,u){if(n===s)return null;var c=null;if(r.hasOwnProperty(n))for(var d,h=e.get(n+i),f=0,p=h.length;f<p;f++)if(d=h[f],(N(o)||o>d.priority)&&-1!==d.restrict.indexOf(a)){if(l&&(d=M(d,{$$start:l,$$end:u})),!d.$$bindings){var g=d.$$bindings=v(d,d.name);B(g.isolateScope)&&(d.$$isolateBindings=g.isolateScope)}t.push(d),c=d}return c}function _t(t){if(r.hasOwnProperty(t))for(var n=e.get(t+i),a=0,o=n.length;a<o;a++)if(n[a].multiElement)return!0;return!1}function xt(t,e){var n=e.$attr,r=t.$attr;_(t,(function(r,i){"$"!==i.charAt(0)&&(e[i]&&e[i]!==r&&(r.length?r+=("style"===i?";":" ")+e[i]:r=e[i]),t.$set(i,r,!0,n[i]))})),_(e,(function(e,i){t.hasOwnProperty(i)||"$"===i.charAt(0)||(t[i]=e,"class"!==i&&"style"!==i&&(r[i]=n[i]))}))}function wt(t,e,n,r,i,a,s,l){var u,c,d=[],h=e[0],f=t.shift(),v=M(f,{templateUrl:null,transclude:null,replace:null,$$originalDirective:f}),m=Y(f.templateUrl)?f.templateUrl(e,n):f.templateUrl,y=f.templateNamespace;return e.empty(),g(m).then((function(p){var g,b,S,E;if(p=et(p),f.replace){if(S=ue(p)?[]:_n(Ct(y,tt(p))),g=S[0],1!==S.length||1!==g.nodeType)throw gn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",f.name,m);b={$attr:{}},It(r,e,g);var T=pt(g,[],b);B(f.scope)&&St(T,!0),t=T.concat(t),xt(n,b)}else g=h,e.html(p);for(t.unshift(v),u=yt(t,g,n,i,e,f,a,s,l),_(r,(function(t,n){t===g&&(r[n]=e[0])})),c=ut(e[0].childNodes,i);d.length;){var x=d.shift(),w=d.shift(),k=d.shift(),A=d.shift(),C=e[0];if(!x.$$destroyed){if(w!==h){var D=w.className;l.hasElementTranscludeDirective&&f.replace||(C=pe(g)),It(k,o(w),C),K(o(C),D)}E=u.transcludeOnThisElement?dt(x,u.transclude,A):A,u(c,x,C,r,E)}}d=null})).catch((function(t){z(t)&&p(t)})),function(t,e,n,r,i){var a=i;e.$$destroyed||(d?d.push(e,n,r,a):(u.transcludeOnThisElement&&(a=dt(e,u.transclude,i)),u(c,e,n,r,a)))}}function kt(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function At(t,e,n,r){function i(t){return t?" (module: "+t+")":""}if(e)throw gn("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",e.name,i(e.$$moduleName),n.name,i(n.$$moduleName),t,Et(r))}function Ct(e,n){switch(e=h(e||"html")){case"svg":case"math":var r=t.document.createElement("div");return r.innerHTML="<"+e+">"+n+"</"+e+">",r.childNodes[0].childNodes;default:return n}}function Dt(t){return G(C.valueOf(t),"ng-prop-srcset")}function Lt(t,e,n,r){if(f.test(r))throw gn("nodomevents","Property bindings for HTML DOM event properties are disallowed");var i=rt(t),a=function(t,e){var n=e.toLowerCase();return x[t+"|"+n]||x["*|"+n]}(i,r),o=R;"srcset"!==r||"img"!==i&&"source"!==i?a&&(o=C.getTrusted.bind(C,a)):o=Dt,e.push({priority:100,compile:function(t,e){var i=w(e[n]),a=w(e[n],(function(t){return C.valueOf(t)}));return{pre:function(t,e){function n(){var n=i(t);e[0][r]=o(n)}n(),t.$watch(a,n)}}}})}function $t(t,e,n){t.push(Pa(w,A,p,e,n,!1))}function Ot(t,e,r,i,a){var o=rt(t),s=function(t,e){return"srcdoc"===e?C.HTML:"src"===e||"ngSrc"===e?-1===["img","video","audio","source","track"].indexOf(t)?C.RESOURCE_URL:C.MEDIA_URL:"xlinkHref"===e?"image"===t?C.MEDIA_URL:"a"===t?C.URL:C.RESOURCE_URL:"form"===t&&"action"===e||"base"===t&&"href"===e||"link"===t&&"href"===e?C.RESOURCE_URL:"a"!==t||"href"!==e&&"ngHref"!==e?void 0:C.URL}(o,i),l=!a,c=u[i]||a,d=n(r,l,s,c);if(d){if("multiple"===i&&"select"===o)throw gn("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",Et(t));if(f.test(i))throw gn("nodomevents","Interpolations for HTML DOM event attributes are disallowed");e.push({priority:100,compile:function(){return{pre:function(t,e,a){var o=a.$$observers||(a.$$observers=Bt()),l=a[i];l!==r&&(d=l&&n(l,!0,s,c),r=l),d&&(a[i]=d(t),(o[i]||(o[i]=[])).$$inter=!0,(a.$$observers&&a.$$observers[i].$$scope||t).$watch(d,(function(t,e){"class"===i&&t!==e?a.$updateClass(t,e):a.$set(i,t)})))}}}})}}function It(e,n,r){var i,a,s=n[0],l=n.length,u=s.parentNode;if(e)for(i=0,a=e.length;i<a;i++)if(e[i]===s){e[i++]=r;for(var c=i,d=c+l-1,h=e.length;c<h;c++,d++)d<h?e[c]=e[d]:delete e[c];e.length-=l-1,e.context===s&&(e.context=r);break}u&&u.replaceChild(r,s);var f=t.document.createDocumentFragment();for(i=0;i<l;i++)f.appendChild(n[i]);for(o.hasData(s)&&(o.data(r,o.data(s)),o(s).off("$destroy")),o.cleanData(f.querySelectorAll("*")),i=1;i<l;i++)delete n[i];n[0]=r,n.length=1}function Rt(t,e){return D((function(){return t.apply(null,arguments)}),t,e)}function Ft(t,e,n,r,i,a){try{t(e,n,r,i,a)}catch(t){p(t,Et(n))}}function Nt(t,e){if(b)throw gn("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",t,e)}function Ut(t,e,r,i,a){var o,s=[],l={};function u(e,n,i){Y(r.$onChanges)&&!st(n,i)&&($||(t.$$postDigest(H),$=[]),o||(o={},$.push(c)),o[e]&&(i=o[e].previousValue),o[e]=new yn(i,n))}function c(){r.$onChanges(o),o=void 0}return _(i,(function(i,o){var c,h,f,p,g,v=i.attrName,m=i.optional;switch(i.mode){case"@":m||d.call(e,v)||(Nt(v,a.name),r[o]=e[v]=void 0),g=e.$observe(v,(function(t){if(V(t)||Z(t)){var e=r[o];u(o,t,e),r[o]=t}})),e.$$observers[v].$$scope=t,V(c=e[v])?r[o]=n(c)(t):Z(c)&&(r[o]=c),l[o]=new yn(vn,r[o]),s.push(g);break;case"=":if(!d.call(e,v)){if(m)break;Nt(v,a.name),e[v]=void 0}if(m&&!e[v])break;h=w(e[v]),p=h.literal?lt:st,f=h.assign||function(){throw c=r[o]=h(t),gn("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",e[v],v,a.name)},c=r[o]=h(t);var y=function(e){return p(e,r[o])||(p(e,c)?f(t,e=r[o]):r[o]=e),c=e};y.$stateful=!0,g=i.collection?t.$watchCollection(e[v],y):t.$watch(w(e[v],y),null,h.literal),s.push(g);break;case"<":if(!d.call(e,v)){if(m)break;Nt(v,a.name),e[v]=void 0}if(m&&!e[v])break;var b=(h=w(e[v])).literal,S=r[o]=h(t);l[o]=new yn(vn,r[o]),g=t[i.collection?"$watchCollection":"$watch"](h,(function(t,e){if(e===t){if(e===S||b&&lt(e,S))return;e=S}u(o,t,e),r[o]=t})),s.push(g);break;case"&":if(m||d.call(e,v)||Nt(v,a.name),(h=e.hasOwnProperty(v)?w(e[v]):I)===I&&m)break;r[o]=function(e){return h(t,e)}}})),{initialChanges:l,removeWatches:s.length&&function(){for(var t=0,e=s.length;t<e;++t)s[t]()}}}}]}function yn(t,e){this.previousValue=t,this.currentValue=e}mn.$inject=["$provide","$$sanitizeUriProvider"],yn.prototype.isFirstChange=function(){return this.previousValue===vn};var bn=/^((?:x|data)[:\-_])/i,Sn=/[:\-_]+(.)/g;function En(t){return t.replace(bn,"").replace(Sn,(function(t,e,n){return n?e.toUpperCase():e}))}function Tn(t,e){var n="",r=t.split(/\s+/),i=e.split(/\s+/);t:for(var a=0;a<r.length;a++){for(var o=r[a],s=0;s<i.length;s++)if(o===i[s])continue t;n+=(n.length>0?" ":"")+o}return n}function _n(t){var e=(t=o(t)).length;if(e<=1)return t;for(;e--;){var n=t[e];(8===n.nodeType||n.nodeType===Vt&&""===n.nodeValue.trim())&&g.call(t,e,1)}return t}var xn=i("$controller"),wn=/^(\S+)(\s+as\s+([\w$]+))?$/;function kn(t,e){if(e&&V(e))return e;if(V(t)){var n=wn.exec(t);if(n)return n[3]}}function An(){var t={};this.has=function(e){return t.hasOwnProperty(e)},this.register=function(e,n){Nt(e,"controller"),B(e)?D(t,e):t[e]=n},this.$get=["$injector",function(e){return function(r,i,a,o){var s,l,u,c;if(a=!0===a,o&&V(o)&&(c=o),V(r)){if(!(l=r.match(wn)))throw xn("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",r);if(u=l[1],c=c||l[3],!(r=t.hasOwnProperty(u)?t[u]:function(t,e,n){if(!e)return t;for(var r,i=e.split("."),a=t,o=i.length,s=0;s<o;s++)r=i[s],t&&(t=(a=t)[r]);return!n&&Y(t)?ft(a,t):t}(i.$scope,u,!0)))throw xn("ctrlreg","The controller with the name '{0}' is not registered.",u);Ft(r,u,!0)}if(a){var d=(W(r)?r[r.length-1]:r).prototype;return s=Object.create(d||null),c&&n(i,c,s,u||r.name),D((function(){var t=e.invoke(r,s,i,u);return t!==s&&(B(t)||Y(t))&&(s=t,c&&n(i,c,s,u||r.name)),s}),{instance:s,identifier:c})}return s=e.instantiate(r,i,u),c&&n(i,c,s,u||r.name),s};function n(t,e,n,r){if(!t||!B(t.$scope))throw i("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",r,e);t.$scope[e]=n}}]}function Cn(){this.$get=["$window",function(t){return o(t.document)}]}function Dn(){this.$get=["$document","$rootScope",function(t,e){var n=t[0],r=n&&n.hidden;function i(){r=n.hidden}return t.on("visibilitychange",i),e.$on("$destroy",(function(){t.off("visibilitychange",i)})),function(){return r}}]}function Ln(){this.$get=["$log",function(t){return function(e,n){t.error.apply(t,arguments)}}]}var $n=function(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof o&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]},On="application/json",Mn={"Content-Type":"application/json;charset=utf-8"},In=/^\[|^\{(?!\{)/,Rn={"[":/]$/,"{":/}$/},Pn=/^\)]\}',?\n/,Fn=i("$http");function Nn(t){return B(t)?G(t)?t.toISOString():gt(t):t}function Un(){this.$get=function(){return function(t){if(!t)return"";var e=[];return x(t,(function(t,n){null===t||N(t)||Y(t)||(W(t)?_(t,(function(t){e.push(wt(n)+"="+wt(Nn(t)))})):e.push(wt(n)+"="+wt(Nn(t))))})),e.join("&")}}}function Bn(){this.$get=function(){return function(t){if(!t)return"";var e=[];return function t(n,r,i){W(n)?_(n,(function(e,n){t(e,r+"["+(B(e)?n:"")+"]")})):B(n)&&!G(n)?x(n,(function(e,n){t(e,r+(i?"":"[")+n+(i?"":"]"))})):(Y(n)&&(n=n()),e.push(wt(r)+"="+(null==n?"":wt(Nn(n)))))}(t,"",!0),e.join("&")}}}function jn(t,e){if(V(t)){var n=t.replace(Pn,"").trim();if(n){var r=e("Content-Type"),i=r&&0===r.indexOf(On);if(i||(o=(a=n).match(In))&&Rn[o[0]].test(a))try{t=vt(n)}catch(e){if(!i)return t;throw Fn("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',t,e)}}}var a,o;return t}function Vn(t){var e,n=Bt();function r(t,e){t&&(n[t]=n[t]?n[t]+", "+e:e)}return V(t)?_(t.split("\n"),(function(t){e=t.indexOf(":"),r(h(tt(t.substr(0,e))),tt(t.substr(e+1)))})):B(t)&&_(t,(function(t,e){r(h(e),tt(t))})),n}function Hn(t){var e;return function(n){if(e||(e=Vn(t)),n){var r=e[h(n)];return void 0===r&&(r=null),r}return e}}function Gn(t,e,n,r){return Y(r)?r(t,e,n):(_(r,(function(r){t=r(t,e,n)})),t)}function Wn(t){return 200<=t&&t<300}function zn(){var t=this.defaults={transformResponse:[jn],transformRequest:[function(t){return!B(t)||(e=t,"[object File]"===m.call(e))||function(t){return"[object Blob]"===m.call(t)}(t)||function(t){return"[object FormData]"===m.call(t)}(t)?t:gt(t);var e}],headers:{common:{Accept:"application/json, text/plain, */*"},post:Ht(Mn),put:Ht(Mn),patch:Ht(Mn)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},e=!1;this.useApplyAsync=function(t){return U(t)?(e=!!t,this):e};var n=this.interceptors=[],r=this.xsrfTrustedOrigins=[];Object.defineProperty(this,"xsrfWhitelistedOrigins",{get:function(){return this.xsrfTrustedOrigins},set:function(t){this.xsrfTrustedOrigins=t}}),this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(a,o,s,l,u,c,d,p){var g=l("$http");t.paramSerializer=V(t.paramSerializer)?d.get(t.paramSerializer):t.paramSerializer;var v=[];_(n,(function(t){v.unshift(V(t)?d.get(t):d.invoke(t))}));var m,y=(m=[ui].concat(r.map(di)),function(t){var e=di(t);return m.some(hi.bind(null,e))});function b(n){if(!B(n))throw i("$http")("badreq","Http request configuration must be an object.  Received: {0}",n);if(!V(p.valueOf(n.url)))throw i("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",n.url);var r=D({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse,paramSerializer:t.paramSerializer,jsonpCallbackParam:t.jsonpCallbackParam},n);r.headers=function(e){var n,r,i,a=t.headers,o=D({},e.headers);a=D({},a.common,a[h(e.method)]);t:for(n in a){for(i in r=h(n),o)if(h(i)===r)continue t;o[n]=a[n]}return function(t,e){var n,r={};return _(t,(function(t,i){Y(t)?null!=(n=t(e))&&(r[i]=n):r[i]=t})),r}(o,Ht(e))}(n),r.method=f(r.method),r.paramSerializer=V(r.paramSerializer)?d.get(r.paramSerializer):r.paramSerializer,a.$$incOutstandingRequestCount("$http");var l=[],m=[],S=c.resolve(r);return _(v,(function(t){(t.request||t.requestError)&&l.unshift(t.request,t.requestError),(t.response||t.responseError)&&m.push(t.response,t.responseError)})),S=E(S,l),S=(S=E(S=S.then((function(n){var r=n.headers,i=Gn(n.data,Hn(r),void 0,n.transformRequest);N(i)&&_(r,(function(t,e){"content-type"===h(e)&&delete r[e]}));N(n.withCredentials)&&!N(t.withCredentials)&&(n.withCredentials=t.withCredentials);return function(n,r){var i,a,l=c.defer(),d=l.promise,f=n.headers,v="jsonp"===h(n.method),m=n.url;v?m=p.getTrustedResourceUrl(m):V(m)||(m=p.valueOf(m));m=function(t,e){e.length>0&&(t+=(-1===t.indexOf("?")?"?":"&")+e);return t}(m,n.paramSerializer(n.params)),v&&(m=function(t,e){var n=t.split("?");if(n.length>2)throw Fn("badjsonp",'Illegal use more than one "?", in url, "{1}"',t);return _(_t(n[1]),(function(n,r){if("JSON_CALLBACK"===n)throw Fn("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',t);if(r===e)throw Fn("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',e,t)})),t+=(-1===t.indexOf("?")?"?":"&")+e+"=JSON_CALLBACK"}(m,n.jsonpCallbackParam));b.pendingRequests.push(n),d.then(k,k),!n.cache&&!t.cache||!1===n.cache||"GET"!==n.method&&"JSONP"!==n.method||(i=B(n.cache)?n.cache:B(t.cache)?t.cache:g);i&&(U(a=i.get(m))?J(a)?a.then(w,w):W(a)?x(a[1],a[0],Ht(a[2]),a[3],a[4]):x(a,200,{},"OK","complete"):i.put(m,d));if(N(a)){var S=y(n.url)?s()[n.xsrfCookieName||t.xsrfCookieName]:void 0;S&&(f[n.xsrfHeaderName||t.xsrfHeaderName]=S),o(n.method,m,r,T,f,n.timeout,n.withCredentials,n.responseType,E(n.eventHandlers),E(n.uploadEventHandlers))}return d;function E(t){if(t){var n={};return _(t,(function(t,r){n[r]=function(n){function r(){t(n)}e?u.$applyAsync(r):u.$$phase?r():u.$apply(r)}})),n}}function T(t,n,r,a,o){function s(){x(n,t,r,a,o)}i&&(Wn(t)?i.put(m,[t,n,Vn(r),a,o]):i.remove(m)),e?u.$applyAsync(s):(s(),u.$$phase||u.$apply())}function x(t,e,r,i,a){(Wn(e=e>=-1?e:0)?l.resolve:l.reject)({data:t,status:e,headers:Hn(r),config:n,statusText:i,xhrStatus:a})}function w(t){x(t.data,t.status,Ht(t.headers()),t.statusText,t.xhrStatus)}function k(){var t=b.pendingRequests.indexOf(n);-1!==t&&b.pendingRequests.splice(t,1)}}(n,i).then(T,T)})),m)).finally((function(){a.$$completeOutstandingRequest(I,"$http")}));function E(t,e){for(var n=0,r=e.length;n<r;){var i=e[n++],a=e[n++];t=t.then(i,a)}return e.length=0,t}function T(t){var e=D({},t);return e.data=Gn(t.data,t.headers,t.status,r.transformResponse),Wn(t.status)?e:c.reject(e)}}return b.pendingRequests=[],function(t){_(arguments,(function(t){b[t]=function(e,n){return b(D({},n||{},{method:t,url:e}))}}))}("get","delete","head","jsonp"),function(t){_(arguments,(function(t){b[t]=function(e,n,r){return b(D({},r||{},{method:t,url:e,data:n}))}}))}("post","put","patch"),b.defaults=t,b}]}function Yn(){this.$get=function(){return function(){return new t.XMLHttpRequest}}}function qn(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(t,e,n,r){return function(t,e,n,r,i){return function(i,o,s,l,u,c,d,f,p,g){if(o=o||t.url(),"jsonp"===h(i))var v=r.createCallback(o),m=a(o,v,(function(t,e){var n=200===t&&r.getResponse(v);k(l,t,n,"",e,"complete"),r.removeCallback(v)}));else{var y=e(i,o),b=!1;y.open(i,o,!0),_(u,(function(t,e){U(t)&&y.setRequestHeader(e,t)})),y.onload=function(){var t=y.statusText||"",e="response"in y?y.response:y.responseText,n=1223===y.status?204:y.status;0===n&&(n=e?200:"file"===di(o).protocol?404:0),k(l,n,e,y.getAllResponseHeaders(),t,"complete")};var S=function(){k(l,-1,null,null,"","error")},E=function(){k(l,-1,null,null,"",b?"timeout":"abort")},T=function(){k(l,-1,null,null,"","timeout")};if(y.onerror=S,y.ontimeout=T,y.onabort=E,_(p,(function(t,e){y.addEventListener(e,t)})),_(g,(function(t,e){y.upload.addEventListener(e,t)})),d&&(y.withCredentials=!0),f)try{y.responseType=f}catch(t){if("json"!==f)throw t}y.send(N(s)?null:s)}if(c>0)var x=n((function(){w("timeout")}),c);else J(c)&&c.then((function(){w(U(c.$$timeoutId)?"timeout":"abort")}));function w(t){b="timeout"===t,m&&m(),y&&y.abort()}function k(t,e,r,i,a,o){U(x)&&n.cancel(x),m=y=null,t(e,r,i,a,o)}};function a(t,e,n){t=t.replace("JSON_CALLBACK",e);var a=i.createElement("script"),o=null;return a.type="text/javascript",a.src=t,a.async=!0,o=function(t){a.removeEventListener("load",o),a.removeEventListener("error",o),i.body.removeChild(a),a=null;var s=-1,l="unknown";t&&("load"!==t.type||r.wasCalled(e)||(t={type:"error"}),l=t.type,s="error"===t.type?404:200),n&&n(s,l)},a.addEventListener("load",o),a.addEventListener("error",o),i.body.appendChild(a),o}}(t,r,t.defer,e,n[0])}]}var Kn=S.$interpolateMinErr=i("$interpolate");function Xn(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){var a=t.length,o=e.length,s=new RegExp(t.replace(/./g,u),"g"),l=new RegExp(e.replace(/./g,u),"g");function u(t){return"\\\\\\"+t}function c(n){return n.replace(s,t).replace(l,e)}function d(t,e,n,r){var i=t.$watch((function(t){return i(),r(t)}),e,n);return i}function h(s,l,u,h){var f=u===i.URL||u===i.MEDIA_URL;if(!s.length||-1===s.indexOf(t)){if(l)return;var p=c(s);f&&(p=i.getTrusted(u,p));var g=P(p);return g.exp=s,g.expressions=[],g.$$watchDelegate=d,g}h=!!h;for(var v,m,y,b,S,E=0,T=[],_=s.length,x=[],w=[];E<_;){if(-1===(v=s.indexOf(t,E))||-1===(m=s.indexOf(e,v+a))){E!==_&&x.push(c(s.substring(E)));break}E!==v&&x.push(c(s.substring(E,v))),b=s.substring(v+a,m),T.push(b),E=m+o,w.push(x.length),x.push("")}S=1===x.length&&1===w.length;var k=f&&S?void 0:function(t){try{return t=u&&!f?i.getTrusted(u,t):i.valueOf(t),h&&!U(t)?t:jt(t)}catch(t){r(Kn.interr(s,t))}};if(y=T.map((function(t){return n(t,k)})),!l||T.length){var A=function(t){for(var e=0,n=T.length;e<n;e++){if(h&&N(t[e]))return;x[w[e]]=t[e]}return f?i.getTrusted(u,S?x[0]:x.join("")):(u&&x.length>1&&Kn.throwNoconcat(s),x.join(""))};return D((function(t){var e=0,n=T.length,i=new Array(n);try{for(;e<n;e++)i[e]=y[e](t);return A(i)}catch(t){r(Kn.interr(s,t))}}),{exp:s,expressions:T,$$watchDelegate:function(t,e){var n;return t.$watchGroup(y,(function(r,i){var a=A(r);e.call(this,a,r!==i?n:a,t),n=a}))}})}}return h.startSymbol=function(){return t},h.endSymbol=function(){return e},h}]}Kn.throwNoconcat=function(t){throw Kn("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",t)},Kn.interr=function(t,e){return Kn("interr","Can't interpolate: {0}\n{1}",t,e.toString())};var Zn=i("$interval");function Jn(){this.$get=["$$intervalFactory","$window",function(t,e){var n={},r=function(t){e.clearInterval(t),delete n[t]},i=t((function(t,r,i){var a=e.setInterval(t,r);return n[a]=i,a}),r);return i.cancel=function(t){if(!t)return!1;if(!t.hasOwnProperty("$$intervalId"))throw Zn("badprom","`$interval.cancel()` called with a promise that was not generated by `$interval()`.");if(!n.hasOwnProperty(t.$$intervalId))return!1;var e=t.$$intervalId,i=n[e];return Vr(i.promise),i.reject("canceled"),r(e),!0},i}]}function Qn(){this.$get=["$browser","$q","$$q","$rootScope",function(t,e,n,r){return function(i,a){return function(o,s,l,u){var c=arguments.length>4,d=c?ht(arguments,4):[],h=0,f=U(u)&&!u,p=(f?n:e).defer(),g=p.promise;function v(){c?o.apply(null,d):o(h)}function m(){f?t.defer(v):r.$evalAsync(v),p.notify(h++),l>0&&h>=l&&(p.resolve(h),a(g.$$intervalId)),f||r.$apply()}return l=U(l)?l:0,g.$$intervalId=i(m,s,p,f),g}}}]}var tr=function(){this.$get=function(){var t=S.callbacks,e={};return{createCallback:function(n){var r="_"+(t.$$counter++).toString(36),i="angular.callbacks."+r,a=function(t){var e=function(t){e.data=t,e.called=!0};return e.id=t,e}(r);return e[i]=t[r]=a,i},wasCalled:function(t){return e[t].called},getResponse:function(t){return e[t].data},removeCallback:function(n){var r=e[n];delete t[r.id],delete e[n]}}}},er=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,nr={http:80,https:443,ftp:21},rr=i("$location");function ir(t,e,n){var r,i=(r=[],_(e,(function(t,e){W(t)?_(t,(function(t){r.push(wt(e,!0)+(!0===t?"":"="+wt(t,!0)))})):r.push(wt(e,!0)+(!0===t?"":"="+wt(t,!0)))})),r.length?r.join("&"):""),a=n?"#"+xt(n):"";return function(t){for(var e=t.split("/"),n=e.length;n--;)e[n]=xt(e[n].replace(/%2F/g,"/"));return e.join("/")}(t)+(i?"?"+i:"")+a}function ar(t,e){var n=di(t);e.$$protocol=n.protocol,e.$$host=n.hostname,e.$$port=$(n.port)||nr[n.protocol]||null}var or=/^\s*[\\/]{2,}/;function sr(t,e,n){if(or.test(t))throw rr("badpath",'Invalid url "{0}".',t);var r="/"!==t.charAt(0);r&&(t="/"+t);var i=di(t),a=r&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname;e.$$path=function(t,e){for(var n=t.split("/"),r=n.length;r--;)n[r]=decodeURIComponent(n[r]),e&&(n[r]=n[r].replace(/\//g,"%2F"));return n.join("/")}(a,n),e.$$search=_t(i.search),e.$$hash=decodeURIComponent(i.hash),e.$$path&&"/"!==e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function lr(t,e){return t.slice(0,e.length)===e}function ur(t,e){if(lr(e,t))return e.substr(t.length)}function cr(t){var e=t.indexOf("#");return-1===e?t:t.substr(0,e)}function dr(t,e,n){this.$$html5=!0,n=n||"",ar(t,this),this.$$parse=function(t){var n=ur(e,t);if(!V(n))throw rr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,e);sr(n,this,!0),this.$$path||(this.$$path="/"),this.$$compose()},this.$$normalizeUrl=function(t){return e+t.substr(1)},this.$$parseLinkUrl=function(r,i){return i&&"#"===i[0]?(this.hash(i.slice(1)),!0):(U(a=ur(t,r))?(o=a,s=n&&U(a=ur(n,a))?e+(ur("/",a)||a):t+o):U(a=ur(e,r))?s=e+a:e===r+"/"&&(s=e),s&&this.$$parse(s),!!s);var a,o,s}}function hr(t,e,n){ar(t,this),this.$$parse=function(r){var i,a=ur(t,r)||ur(e,r);N(a)||"#"!==a.charAt(0)?this.$$html5?i=a:(i="",N(a)&&(t=r,this.replace())):N(i=ur(n,a))&&(i=a),sr(i,this,!1),this.$$path=function(t,e,n){var r,i=/^\/[A-Z]:(\/.*)/;lr(e,n)&&(e=e.replace(n,""));if(i.exec(e))return t;return(r=i.exec(t))?r[1]:t}(this.$$path,i,t),this.$$compose()},this.$$normalizeUrl=function(e){return t+(e?n+e:"")},this.$$parseLinkUrl=function(e,n){return cr(t)===cr(e)&&(this.$$parse(e),!0)}}function fr(t,e,n){this.$$html5=!0,hr.apply(this,arguments),this.$$parseLinkUrl=function(r,i){return i&&"#"===i[0]?(this.hash(i.slice(1)),!0):(t===cr(r)?a=r:(o=ur(e,r))?a=t+n+o:e===r+"/"&&(a=e),a&&this.$$parse(a),!!a);var a,o},this.$$normalizeUrl=function(e){return t+n+e}}var pr={$$absUrl:"",$$html5:!1,$$replace:!1,$$compose:function(){this.$$url=ir(this.$$path,this.$$search,this.$$hash),this.$$absUrl=this.$$normalizeUrl(this.$$url),this.$$urlUpdatedByLocation=!0},absUrl:gr("$$absUrl"),url:function(t){if(N(t))return this.$$url;var e=er.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:gr("$$protocol"),host:gr("$$host"),port:gr("$$port"),path:vr("$$path",(function(t){return"/"===(t=null!==t?t.toString():"").charAt(0)?t:"/"+t})),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(V(t)||H(t))t=t.toString(),this.$$search=_t(t);else{if(!B(t))throw rr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");_(t=ot(t,{}),(function(e,n){null==e&&delete t[n]})),this.$$search=t}break;default:N(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:vr("$$hash",(function(t){return null!==t?t.toString():""})),replace:function(){return this.$$replace=!0,this}};function gr(t){return function(){return this[t]}}function vr(t,e){return function(n){return N(n)?this[t]:(this[t]=e(n),this.$$compose(),this)}}function mr(){var t="!",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return U(e)?(t=e,this):t},this.html5Mode=function(t){return Z(t)?(e.enabled=t,this):B(t)?(Z(t.enabled)&&(e.enabled=t.enabled),Z(t.requireBase)&&(e.requireBase=t.requireBase),(Z(t.rewriteLinks)||V(t.rewriteLinks))&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,a,s){var l,u,c,d=r.baseHref(),h=r.url();if(e.enabled){if(!d&&e.requireBase)throw rr("nobase","$location in HTML5 mode requires a <base> tag to be present!");c=function(t){return t.substring(0,t.indexOf("/",t.indexOf("//")+2))}(h)+(d||"/"),u=i.history?dr:fr}else c=cr(h),u=hr;var f=function(t){return t.substr(0,cr(t).lastIndexOf("/")+1)}(c);(l=new u(c,f,"#"+t)).$$parseLinkUrl(h,h),l.$$state=r.state();var p=/^\s*(javascript|mailto):/i;function g(t,e,n){var i=l.url(),a=l.$$state;try{r.url(t,e,n),l.$$state=r.state()}catch(t){throw l.url(i),l.$$state=a,t}}a.on("click",(function(t){var i=e.rewriteLinks;if(i&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!==t.which&&2!==t.button){for(var s=o(t.target);"a"!==rt(s[0]);)if(s[0]===a[0]||!(s=s.parent())[0])return;if(!V(i)||!N(s.attr(i))){var u=s.prop("href"),c=s.attr("href")||s.attr("xlink:href");B(u)&&"[object SVGAnimatedString]"===u.toString()&&(u=di(u.animVal).href),p.test(u)||!u||s.attr("target")||t.isDefaultPrevented()||l.$$parseLinkUrl(u,c)&&(t.preventDefault(),l.absUrl()!==r.url()&&n.$apply())}}})),l.absUrl()!==h&&r.url(l.absUrl(),!0);var v=!0;return r.onUrlChange((function(t,e){lr(t,f)?(n.$evalAsync((function(){var r,i=l.absUrl(),a=l.$$state;l.$$parse(t),l.$$state=e,r=n.$broadcast("$locationChangeStart",t,i,e,a).defaultPrevented,l.absUrl()===t&&(r?(l.$$parse(i),l.$$state=a,g(i,!1,a)):(v=!1,m(i,a)))})),n.$$phase||n.$digest()):s.location.href=t})),n.$watch((function(){if(v||l.$$urlUpdatedByLocation){l.$$urlUpdatedByLocation=!1;var t=r.url(),e=l.absUrl(),a=r.state(),o=l.$$replace,s=!((u=t)===(c=e)||di(u).href===di(c).href)||l.$$html5&&i.history&&a!==l.$$state;(v||s)&&(v=!1,n.$evalAsync((function(){var e=l.absUrl(),r=n.$broadcast("$locationChangeStart",e,t,l.$$state,a).defaultPrevented;l.absUrl()===e&&(r?(l.$$parse(t),l.$$state=a):(s&&g(e,o,a===l.$$state?null:l.$$state),m(t,a)))})))}var u,c;l.$$replace=!1})),l;function m(t,e){n.$broadcast("$locationChangeSuccess",l.absUrl(),t,l.$$state,e)}}]}function yr(){var t=!0,e=this;this.debugEnabled=function(e){return U(e)?(t=e,this):t},this.$get=["$window",function(n){var r,i=a||/\bEdge\//.test(n.navigator&&n.navigator.userAgent);return{log:s("log"),info:s("info"),warn:s("warn"),error:s("error"),debug:(r=s("debug"),function(){t&&r.apply(e,arguments)})};function o(t){return z(t)&&(t.stack&&i?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}function s(t){var e=n.console||{},r=e[t]||e.log||I;return function(){var t=[];return _(arguments,(function(e){t.push(o(e))})),Function.prototype.apply.call(r,e,t)}}}]}_([fr,hr,dr],(function(t){t.prototype=Object.create(pr),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==dr||!this.$$html5)throw rr("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=N(e)?null:e,this.$$urlUpdatedByLocation=!0,this}}));var br=i("$parse"),Sr={}.constructor.prototype.valueOf;function Er(t){return t+""}var Tr=Bt();_("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),(function(t){Tr[t]=!0}));var _r={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},xr=function(t){this.options=t};xr.prototype={constructor:xr,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var n=e+this.peek(),r=n+this.peek(2),i=Tr[e],a=Tr[n],o=Tr[r];if(i||a||o){var s=o?r:a?n:e;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){var e=t||1;return this.index+e<this.text.length&&this.text.charAt(this.index+e)},isNumber:function(t){return"0"<=t&&t<="9"&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||" "===t},isIdentifierStart:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t},isIdentifierContinue:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},codePointAt:function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var n=t.charCodeAt(0),r=e.charCodeAt(0);return n>=55296&&n<=56319&&r>=56320&&r<=57343?t+e:t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){n=n||this.index;var r=U(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw br("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,r,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=h(this.text.charAt(this.index));if("."===n||this.isNumber(n))t+=n;else{var r=this.peek();if("e"===n&&this.isExpOperator(r))t+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"===t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!==t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var n="",r=t,i=!1;this.index<this.text.length;){var a=this.text.charAt(this.index);if(r+=a,i){if("u"===a){var o=this.text.substring(this.index+1,this.index+5);o.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+o+"]"),this.index+=4,n+=String.fromCharCode(parseInt(o,16))}else{n+=_r[a]||a}i=!1}else if("\\"===a)i=!0;else{if(a===t)return this.index++,void this.tokens.push({index:e,text:r,constant:!0,value:n});n+=a}this.index++}this.throwError("Unterminated quote",e)}};var wr=function(t,e){this.lexer=t,this.options=e};function kr(t,e){return void 0!==t?t:e}function Ar(t,e){return void 0===t?e:void 0===e?t:t+e}wr.Program="Program",wr.ExpressionStatement="ExpressionStatement",wr.AssignmentExpression="AssignmentExpression",wr.ConditionalExpression="ConditionalExpression",wr.LogicalExpression="LogicalExpression",wr.BinaryExpression="BinaryExpression",wr.UnaryExpression="UnaryExpression",wr.CallExpression="CallExpression",wr.MemberExpression="MemberExpression",wr.Identifier="Identifier",wr.Literal="Literal",wr.ArrayExpression="ArrayExpression",wr.Property="Property",wr.ObjectExpression="ObjectExpression",wr.ThisExpression="ThisExpression",wr.LocalsExpression="LocalsExpression",wr.NGValueParameter="NGValueParameter",wr.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:wr.Program,body:t}},expressionStatement:function(){return{type:wr.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();if(this.expect("=")){if(!Lr(t))throw br("lval","Trying to assign a value to a non l-value");t={type:wr.AssignmentExpression,left:t,right:this.assignment(),operator:"="}}return t},ternary:function(){var t,e,n=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:wr.ConditionalExpression,test:n,alternate:t,consequent:e}):n},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:wr.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:wr.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:wr.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:wr.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:wr.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:wr.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:wr.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t,e;for(this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=ot(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?t={type:wr.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());e=this.expect("(","[",".");)"("===e.text?(t={type:wr.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:wr.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:wr.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],n={type:wr.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return n},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)do{t.push(this.filterChain())}while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:wr.Identifier,name:t.text}},constant:function(){return{type:wr.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:wr.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:wr.Property,kind:"init"},this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),e.push(t)}while(this.expect(","));return this.consume("}"),{type:wr.ObjectExpression,properties:e}},throwError:function(t,e){throw br("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw br("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw br("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,n,r){return this.peekAhead(0,t,e,n,r)},peekAhead:function(t,e,n,r,i){if(this.tokens.length>t){var a=this.tokens[t],o=a.text;if(o===e||o===n||o===r||o===i||!e&&!n&&!r&&!i)return a}return!1},expect:function(t,e,n,r){var i=this.peek(t,e,n,r);return!!i&&(this.tokens.shift(),i)},selfReferential:{this:{type:wr.ThisExpression},$locals:{type:wr.LocalsExpression}}};function Cr(t,e,n){var r,i,a,o=t.isPure=function(t,e){switch(t.type){case wr.MemberExpression:if(t.computed)return!1;break;case wr.UnaryExpression:return 1;case wr.BinaryExpression:return"+"!==t.operator&&1;case wr.CallExpression:return!1}return void 0===e?2:e}(t,n);switch(t.type){case wr.Program:r=!0,_(t.body,(function(t){Cr(t.expression,e,o),r=r&&t.expression.constant})),t.constant=r;break;case wr.Literal:t.constant=!0,t.toWatch=[];break;case wr.UnaryExpression:Cr(t.argument,e,o),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case wr.BinaryExpression:Cr(t.left,e,o),Cr(t.right,e,o),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case wr.LogicalExpression:Cr(t.left,e,o),Cr(t.right,e,o),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case wr.ConditionalExpression:Cr(t.test,e,o),Cr(t.alternate,e,o),Cr(t.consequent,e,o),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case wr.Identifier:t.constant=!1,t.toWatch=[t];break;case wr.MemberExpression:Cr(t.object,e,o),t.computed&&Cr(t.property,e,o),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=t.constant?[]:[t];break;case wr.CallExpression:a=!!t.filter&&function(t,e){return!t(e).$stateful}(e,t.callee.name),r=a,i=[],_(t.arguments,(function(t){Cr(t,e,o),r=r&&t.constant,i.push.apply(i,t.toWatch)})),t.constant=r,t.toWatch=a?i:[t];break;case wr.AssignmentExpression:Cr(t.left,e,o),Cr(t.right,e,o),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case wr.ArrayExpression:r=!0,i=[],_(t.elements,(function(t){Cr(t,e,o),r=r&&t.constant,i.push.apply(i,t.toWatch)})),t.constant=r,t.toWatch=i;break;case wr.ObjectExpression:r=!0,i=[],_(t.properties,(function(t){Cr(t.value,e,o),r=r&&t.value.constant,i.push.apply(i,t.value.toWatch),t.computed&&(Cr(t.key,e,!1),r=r&&t.key.constant,i.push.apply(i,t.key.toWatch))})),t.constant=r,t.toWatch=i;break;case wr.ThisExpression:case wr.LocalsExpression:t.constant=!1,t.toWatch=[]}}function Dr(t){if(1===t.length){var e=t[0].expression,n=e.toWatch;return 1!==n.length||n[0]!==e?n:void 0}}function Lr(t){return t.type===wr.Identifier||t.type===wr.MemberExpression}function $r(t){if(1===t.body.length&&Lr(t.body[0].expression))return{type:wr.AssignmentExpression,left:t.body[0].expression,right:{type:wr.NGValueParameter},operator:"="}}function Or(t){this.$filter=t}function Mr(t){this.$filter=t}function Ir(t,e,n){this.ast=new wr(t,n),this.astCompiler=n.csp?new Mr(e):new Or(e)}function Rr(t){return Y(t.valueOf)?t.valueOf():Sr.call(t)}function Pr(){var t,e,n=Bt(),r={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(t,e){r[t]=e},this.setIdentifierFns=function(n,r){return t=n,e=r,this},this.$get=["$filter",function(i){var a={csp:ut().noUnsafeEval,literals:ot(r),isIdentifierStart:Y(t)&&t,isIdentifierContinue:Y(e)&&e};return o.$$getAst=function(t){return new Ir(new xr(a),i,a).getAst(t).ast},o;function o(t,e){var r,o;switch(typeof t){case"string":if(t=t.trim(),!(r=n[o=t]))r=new Ir(new xr(a),i,a).parse(t),n[o]=h(r);return f(r,e);case"function":return f(t,e);default:return f(I,e)}}function s(t,e,n){return null==t||null==e?t===e:!("object"==typeof t&&"object"==typeof(t=Rr(t))&&!n)&&(t===e||t!=t&&e!=e)}function l(t,e,n,r,i){var a,o=r.inputs;if(1===o.length){var l=s;return o=o[0],t.$watch((function(t){var e=o(t);return s(e,l,o.isPure)||(a=r(t,void 0,void 0,[e]),l=e&&Rr(e)),a}),e,n,i)}for(var u=[],c=[],d=0,h=o.length;d<h;d++)u[d]=s,c[d]=null;return t.$watch((function(t){for(var e=!1,n=0,i=o.length;n<i;n++){var l=o[n](t);(e||(e=!s(l,u[n],o[n].isPure)))&&(c[n]=l,u[n]=l&&Rr(l))}return e&&(a=r(t,void 0,void 0,c)),a}),e,n,i)}function u(t,e,n,r,i){var a,o,s=r.literal?c:U,l=r.$$intercepted||r,u=r.$$interceptor||R,d=r.inputs&&!l.inputs;return p.literal=r.literal,p.constant=r.constant,p.inputs=r.inputs,h(p),a=t.$watch(p,e,n,i);function f(){s(o)&&a()}function p(t,e,n,r){return o=d&&r?r[0]:l(t,e,n,r),s(o)&&t.$$postDigest(f),u(o)}}function c(t){var e=!0;return _(t,(function(t){U(t)||(e=!1)})),e}function d(t,e,n,r){var i=t.$watch((function(t){return i(),r(t)}),e,n);return i}function h(t){return t.constant?t.$$watchDelegate=d:t.oneTime?t.$$watchDelegate=u:t.inputs&&(t.$$watchDelegate=l),t}function f(t,e){if(!e)return t;t.$$interceptor&&(e=function(t,e){function n(n){return e(t(n))}return n.$stateful=t.$stateful||e.$stateful,n.$$pure=t.$$pure&&e.$$pure,n}(t.$$interceptor,e),t=t.$$intercepted);var n=!1,r=function(r,i,a,o){var s=n&&o?o[0]:t(r,i,a,o);return e(s)};return r.$$intercepted=t,r.$$interceptor=e,r.literal=t.literal,r.oneTime=t.oneTime,r.constant=t.constant,e.$stateful||(n=!t.inputs,r.inputs=t.inputs?t.inputs:[t],e.$$pure||(r.inputs=r.inputs.map((function(t){return 2===t.isPure?function(e){return t(e)}:t})))),h(r)}}]}function Fr(){var t=!0;this.$get=["$rootScope","$exceptionHandler",function(e,n){return Ur((function(t){e.$evalAsync(t)}),n,t)}],this.errorOnUnhandledRejections=function(e){return U(e)?(t=e,this):t}}function Nr(){var t=!0;this.$get=["$browser","$exceptionHandler",function(e,n){return Ur((function(t){e.defer(t)}),n,t)}],this.errorOnUnhandledRejections=function(e){return U(e)?(t=e,this):t}}function Ur(t,e,n){var r=i("$q",TypeError),a=0,o=[];function s(){return new l}function l(){var t=this.promise=new u;this.resolve=function(e){h(t,e)},this.reject=function(e){p(t,e)},this.notify=function(e){v(t,e)}}function u(){this.$$state={status:0}}function c(){for(;!a&&o.length;){var t=o.shift();if(!Br(t)){jr(t);var n="Possibly unhandled rejection: "+Gt(t.value);z(t.value)?e(t.value,n):e(n)}}}function d(r){!n||r.pending||2!==r.status||Br(r)||(0===a&&0===o.length&&t(c),o.push(r)),!r.processScheduled&&r.pending&&(r.processScheduled=!0,++a,t((function(){!function(r){var i,o,s;s=r.pending,r.processScheduled=!1,r.pending=void 0;try{for(var l=0,u=s.length;l<u;++l){jr(r),o=s[l][0],i=s[l][r.status];try{Y(i)?h(o,i(r.value)):1===r.status?h(o,r.value):p(o,r.value)}catch(t){p(o,t),t&&!0===t.$$passToExceptionHandler&&e(t)}}}finally{--a,n&&0===a&&t(c)}}(r)})))}function h(t,e){t.$$state.status||(e===t?g(t,r("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):f(t,e))}function f(t,e){var n,r=!1;try{(B(e)||Y(e))&&(n=e.then),Y(n)?(t.$$state.status=-1,n.call(e,(function(e){if(r)return;r=!0,f(t,e)}),i,(function(e){v(t,e)}))):(t.$$state.value=e,t.$$state.status=1,d(t.$$state))}catch(t){i(t)}function i(e){r||(r=!0,g(t,e))}}function p(t,e){t.$$state.status||g(t,e)}function g(t,e){t.$$state.value=e,t.$$state.status=2,d(t.$$state)}function v(n,r){var i=n.$$state.pending;n.$$state.status<=0&&i&&i.length&&t((function(){for(var t,n,a=0,o=i.length;a<o;a++){n=i[a][0],t=i[a][3];try{v(n,Y(t)?t(r):r)}catch(t){e(t)}}}))}function m(t){var e=new u;return p(e,t),e}function y(t,e,n){var r=null;try{Y(n)&&(r=n())}catch(t){return m(t)}return J(r)?r.then((function(){return e(t)}),m):e(t)}function b(t,e,n,r){var i=new u;return h(i,t),i.then(e,n,r)}D(u.prototype,{then:function(t,e,n){if(N(t)&&N(e)&&N(n))return this;var r=new u;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,t,e,n]),this.$$state.status>0&&d(this.$$state),r},catch:function(t){return this.then(null,t)},finally:function(t,e){return this.then((function(e){return y(e,S,t)}),(function(e){return y(e,m,t)}),e)}});var S=b;function E(t){if(!Y(t))throw r("norslvr","Expected resolverFn, got '{0}'",t);var e=new u;return t((function(t){h(e,t)}),(function(t){p(e,t)})),e}return E.prototype=u.prototype,E.defer=s,E.reject=m,E.when=b,E.resolve=S,E.all=function(t){var e=new u,n=0,r=W(t)?[]:{};return _(t,(function(t,i){n++,b(t).then((function(t){r[i]=t,--n||h(e,r)}),(function(t){p(e,t)}))})),0===n&&h(e,r),e},E.race=function(t){var e=s();return _(t,(function(t){b(t).then(e.resolve,e.reject)})),e.promise},E}function Br(t){return!!t.pur}function jr(t){t.pur=!0}function Vr(t){t.$$state&&jr(t.$$state)}function Hr(){this.$get=["$window","$timeout",function(t,e){var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame,r=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,i=!!n,a=i?function(t){var e=n(t);return function(){r(e)}}:function(t){var n=e(t,16.66,!1);return function(){e.cancel(n)}};return a.supported=i,a}]}function Gr(){var t=10,e=i("$rootScope"),n=null,r=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$exceptionHandler","$parse","$browser",function(i,o,s){function l(t){t.currentScope.$$destroyed=!0}function u(t){9===a&&(t.$$childHead&&u(t.$$childHead),t.$$nextSibling&&u(t.$$nextSibling)),t.$parent=t.$$nextSibling=t.$$prevSibling=t.$$childHead=t.$$childTail=t.$root=t.$$watchers=null}function c(){this.$id=k(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$suspended=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}c.prototype={constructor:c,$new:function(t,e){var n;return e=e||this,t?(n=new c).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=k(),this.$$ChildScope=null,this.$$suspended=!1}return e.prototype=t,e}(this)),n=new this.$$ChildScope),n.$parent=e,n.$$prevSibling=e.$$childTail,e.$$childHead?(e.$$childTail.$$nextSibling=n,e.$$childTail=n):e.$$childHead=e.$$childTail=n,(t||e!==this)&&n.$on("$destroy",l),n},$watch:function(t,e,r,i){var a=o(t),s=Y(e)?e:I;if(a.$$watchDelegate)return a.$$watchDelegate(this,s,r,a,t);var l=this,u=l.$$watchers,c={fn:s,last:E,get:a,exp:i||t,eq:!!r};return n=null,u||((u=l.$$watchers=[]).$$digestWatchIndex=-1),u.unshift(c),u.$$digestWatchIndex++,b(this,1),function(){var t=at(u,c);t>=0&&(b(l,-1),t<u.$$digestWatchIndex&&u.$$digestWatchIndex--),n=null}},$watchGroup:function(t,e){var n=new Array(t.length),r=new Array(t.length),i=[],a=this,o=!1,s=!0;if(!t.length){var l=!0;return a.$evalAsync((function(){l&&e(r,r,a)})),function(){l=!1}}if(1===t.length)return this.$watch(t[0],(function(t,i,a){r[0]=t,n[0]=i,e(r,t===i?r:n,a)}));function u(){o=!1;try{s?(s=!1,e(r,r,a)):e(r,n,a)}finally{for(var i=0;i<t.length;i++)n[i]=r[i]}}return _(t,(function(t,e){var n=a.$watch(t,(function(t){r[e]=t,o||(o=!0,a.$evalAsync(u))}));i.push(n)})),function(){for(;i.length;)i.shift()()}},$watchCollection:function(t,e){g.$$pure=o(t).literal,g.$stateful=!g.$$pure;var n,r,i,a=this,s=e.length>1,l=0,u=o(t,g),c=[],h={},f=!0,p=0;function g(t){var e,i,a,o;if(!N(n=t)){if(B(n))if(T(n)){r!==c&&(p=(r=c).length=0,l++),e=n.length,p!==e&&(l++,r.length=p=e);for(var s=0;s<e;s++)o=r[s],a=n[s],o!=o&&a!=a||o===a||(l++,r[s]=a)}else{for(i in r!==h&&(r=h={},p=0,l++),e=0,n)d.call(n,i)&&(e++,a=n[i],o=r[i],i in r?o!=o&&a!=a||o===a||(l++,r[i]=a):(p++,r[i]=a,l++));if(p>e)for(i in l++,r)d.call(n,i)||(p--,delete r[i])}else r!==n&&(r=n,l++);return l}}return this.$watch(u,(function(){if(f?(f=!1,e(n,n,a)):e(n,i,a),s)if(B(n))if(T(n)){i=new Array(n.length);for(var t=0;t<n.length;t++)i[t]=n[t]}else for(var r in i={},n)d.call(n,r)&&(i[r]=n[r]);else i=n}))},$digest:function(){var a,o,l,u,c,d,g,b,S,T=t,_=f.length?h:this,w=[];m("$digest"),s.$$checkUrlChange(),this===h&&null!==r&&(s.defer.cancel(r),x()),n=null;do{c=!1,g=_;for(var k=0;k<f.length;k++){try{(0,(S=f[k]).fn)(S.scope,S.locals)}catch(t){i(t)}n=null}f.length=0;t:do{if(u=!g.$$suspended&&g.$$watchers)for(u.$$digestWatchIndex=u.length;u.$$digestWatchIndex--;)try{if(a=u[u.$$digestWatchIndex])if((o=(0,a.get)(g))===(l=a.last)||(a.eq?lt(o,l):O(o)&&O(l))){if(a===n){c=!1;break t}}else c=!0,n=a,a.last=a.eq?ot(o,null):o,(0,a.fn)(o,l===E?o:l,g),T<5&&(w[b=4-T]||(w[b]=[]),w[b].push({msg:Y(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):a.exp,newVal:o,oldVal:l}))}catch(t){i(t)}if(!(d=!g.$$suspended&&g.$$watchersCount&&g.$$childHead||g!==_&&g.$$nextSibling))for(;g!==_&&!(d=g.$$nextSibling);)g=g.$parent}while(g=d);if((c||f.length)&&!T--)throw y(),e("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",t,w)}while(c||f.length);for(y();v<p.length;)try{p[v++]()}catch(t){i(t)}p.length=v=0,s.$$checkUrlChange()},$suspend:function(){this.$$suspended=!0},$isSuspended:function(){return this.$$suspended},$resume:function(){this.$$suspended=!1},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;for(var e in this.$broadcast("$destroy"),this.$$destroyed=!0,this===h&&s.$$applicationDestroyed(),b(this,-this.$$watchersCount),this.$$listenerCount)S(this,this.$$listenerCount[e],e);t&&t.$$childHead===this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail===this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=I,this.$on=this.$watch=this.$watchGroup=function(){return I},this.$$listeners={},this.$$nextSibling=null,u(this)}},$eval:function(t,e){return o(t)(this,e)},$evalAsync:function(t,e){h.$$phase||f.length||s.defer((function(){f.length&&h.$digest()}),null,"$evalAsync"),f.push({scope:this,fn:o(t),locals:e})},$$postDigest:function(t){p.push(t)},$apply:function(t){try{m("$apply");try{return this.$eval(t)}finally{y()}}catch(t){i(t)}finally{try{h.$digest()}catch(t){throw i(t),t}}},$applyAsync:function(t){var e=this;t&&g.push((function(){e.$eval(t)})),t=o(t),null===r&&(r=s.defer((function(){h.$apply(x)}),null,"$applyAsync"))},$on:function(t,e){var n=this.$$listeners[t];n||(this.$$listeners[t]=n=[]),n.push(e);var r=this;do{r.$$listenerCount[t]||(r.$$listenerCount[t]=0),r.$$listenerCount[t]++}while(r=r.$parent);var i=this;return function(){var r=n.indexOf(e);-1!==r&&(delete n[r],S(i,1,t))}},$emit:function(t,e){var n,r,a,o=[],s=this,l=!1,u={name:t,targetScope:s,stopPropagation:function(){l=!0},preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},c=dt([u],arguments,1);do{for(n=s.$$listeners[t]||o,u.currentScope=s,r=0,a=n.length;r<a;r++)if(n[r])try{n[r].apply(null,c)}catch(t){i(t)}else n.splice(r,1),r--,a--;if(l)break;s=s.$parent}while(s);return u.currentScope=null,u},$broadcast:function(t,e){var n=this,r=n,a=n,o={name:t,targetScope:n,preventDefault:function(){o.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[t])return o;for(var s,l,u,c=dt([o],arguments,1);r=a;){for(o.currentScope=r,l=0,u=(s=r.$$listeners[t]||[]).length;l<u;l++)if(s[l])try{s[l].apply(null,c)}catch(t){i(t)}else s.splice(l,1),l--,u--;if(!(a=r.$$listenerCount[t]&&r.$$childHead||r!==n&&r.$$nextSibling))for(;r!==n&&!(a=r.$$nextSibling);)r=r.$parent}return o.currentScope=null,o}};var h=new c,f=h.$$asyncQueue=[],p=h.$$postDigestQueue=[],g=h.$$applyAsyncQueue=[],v=0;return h;function m(t){if(h.$$phase)throw e("inprog","{0} already in progress",h.$$phase);h.$$phase=t}function y(){h.$$phase=null}function b(t,e){do{t.$$watchersCount+=e}while(t=t.$parent)}function S(t,e,n){do{t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n]}while(t=t.$parent)}function E(){}function x(){for(;g.length;)try{g.shift()()}catch(t){i(t)}r=null}}]}function Wr(){var t=/^\s*(https?|s?ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationTrustedUrlList=function(e){return U(e)?(t=e,this):t},this.imgSrcSanitizationTrustedUrlList=function(t){return U(t)?(e=t,this):e},this.$get=function(){return function(n,r){var i=r?e:t,a=di(n&&n.trim()).href;return""===a||a.match(i)?n:"unsafe:"+a}}}Or.prototype={compile:function(t){var e=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Cr(t,e.$filter);var n,r="";if(this.stage="assign",n=$r(t)){this.state.computing="assign";var i=this.nextId();this.recurse(n,i),this.return_(i),r="fn.assign="+this.generateFunction("assign","s,v,l")}var a=Dr(t.body);e.stage="inputs",_(a,(function(t,n){var r="fn"+n;e.state[r]={vars:[],body:[],own:{}},e.state.computing=r;var i=e.nextId();e.recurse(t,i),e.return_(i),e.state.inputs.push({name:r,isPure:t.isPure}),t.watchId=n})),this.state.computing="fn",this.stage="main",this.recurse(t);var o='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+r+this.watchFns()+"return fn;",s=new Function("$filter","getStringValue","ifDefined","plus",o)(this.$filter,Er,kr,Ar);return this.state=this.stage=void 0,s},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,n=this;return _(e,(function(e){t.push("var "+e.name+"="+n.generateFunction(e.name,"s")),e.isPure&&t.push(e.name,".isPure="+JSON.stringify(e.isPure)+";")})),e.length&&t.push("fn.inputs=["+e.map((function(t){return t.name})).join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return _(this.state.filters,(function(n,r){t.push(n+"=$filter("+e.escape(r)+")")})),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,n,r,i,a){var o,s,l,u,c,d=this;if(r=r||I,!a&&U(t.watchId))return e=e||this.nextId(),void this.if_("i",this.lazyAssign(e,this.computedMember("i",t.watchId)),this.lazyRecurse(t,e,n,r,i,!0));switch(t.type){case wr.Program:_(t.body,(function(e,n){d.recurse(e.expression,void 0,void 0,(function(t){s=t})),n!==t.body.length-1?d.current().body.push(s,";"):d.return_(s)}));break;case wr.Literal:u=this.escape(t.value),this.assign(e,u),r(e||u);break;case wr.UnaryExpression:this.recurse(t.argument,void 0,void 0,(function(t){s=t})),u=t.operator+"("+this.ifDefined(s,0)+")",this.assign(e,u),r(u);break;case wr.BinaryExpression:this.recurse(t.left,void 0,void 0,(function(t){o=t})),this.recurse(t.right,void 0,void 0,(function(t){s=t})),u="+"===t.operator?this.plus(o,s):"-"===t.operator?this.ifDefined(o,0)+t.operator+this.ifDefined(s,0):"("+o+")"+t.operator+"("+s+")",this.assign(e,u),r(u);break;case wr.LogicalExpression:e=e||this.nextId(),d.recurse(t.left,e),d.if_("&&"===t.operator?e:d.not(e),d.lazyRecurse(t.right,e)),r(e);break;case wr.ConditionalExpression:e=e||this.nextId(),d.recurse(t.test,e),d.if_(e,d.lazyRecurse(t.alternate,e),d.lazyRecurse(t.consequent,e)),r(e);break;case wr.Identifier:e=e||this.nextId(),n&&(n.context="inputs"===d.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),n.computed=!1,n.name=t.name),d.if_("inputs"===d.stage||d.not(d.getHasOwnProperty("l",t.name)),(function(){d.if_("inputs"===d.stage||"s",(function(){i&&1!==i&&d.if_(d.isNull(d.nonComputedMember("s",t.name)),d.lazyAssign(d.nonComputedMember("s",t.name),"{}")),d.assign(e,d.nonComputedMember("s",t.name))}))}),e&&d.lazyAssign(e,d.nonComputedMember("l",t.name))),r(e);break;case wr.MemberExpression:o=n&&(n.context=this.nextId())||this.nextId(),e=e||this.nextId(),d.recurse(t.object,o,void 0,(function(){d.if_(d.notNull(o),(function(){t.computed?(s=d.nextId(),d.recurse(t.property,s),d.getStringValue(s),i&&1!==i&&d.if_(d.not(d.computedMember(o,s)),d.lazyAssign(d.computedMember(o,s),"{}")),u=d.computedMember(o,s),d.assign(e,u),n&&(n.computed=!0,n.name=s)):(i&&1!==i&&d.if_(d.isNull(d.nonComputedMember(o,t.property.name)),d.lazyAssign(d.nonComputedMember(o,t.property.name),"{}")),u=d.nonComputedMember(o,t.property.name),d.assign(e,u),n&&(n.computed=!1,n.name=t.property.name))}),(function(){d.assign(e,"undefined")})),r(e)}),!!i);break;case wr.CallExpression:e=e||this.nextId(),t.filter?(s=d.filter(t.callee.name),l=[],_(t.arguments,(function(t){var e=d.nextId();d.recurse(t,e),l.push(e)})),u=s+"("+l.join(",")+")",d.assign(e,u),r(e)):(s=d.nextId(),o={},l=[],d.recurse(t.callee,s,o,(function(){d.if_(d.notNull(s),(function(){_(t.arguments,(function(e){d.recurse(e,t.constant?void 0:d.nextId(),void 0,(function(t){l.push(t)}))})),u=o.name?d.member(o.context,o.name,o.computed)+"("+l.join(",")+")":s+"("+l.join(",")+")",d.assign(e,u)}),(function(){d.assign(e,"undefined")})),r(e)})));break;case wr.AssignmentExpression:s=this.nextId(),o={},this.recurse(t.left,void 0,o,(function(){d.if_(d.notNull(o.context),(function(){d.recurse(t.right,s),u=d.member(o.context,o.name,o.computed)+t.operator+s,d.assign(e,u),r(e||u)}))}),1);break;case wr.ArrayExpression:l=[],_(t.elements,(function(e){d.recurse(e,t.constant?void 0:d.nextId(),void 0,(function(t){l.push(t)}))})),u="["+l.join(",")+"]",this.assign(e,u),r(e||u);break;case wr.ObjectExpression:l=[],c=!1,_(t.properties,(function(t){t.computed&&(c=!0)})),c?(e=e||this.nextId(),this.assign(e,"{}"),_(t.properties,(function(t){t.computed?(o=d.nextId(),d.recurse(t.key,o)):o=t.key.type===wr.Identifier?t.key.name:""+t.key.value,s=d.nextId(),d.recurse(t.value,s),d.assign(d.member(e,o,t.computed),s)}))):(_(t.properties,(function(e){d.recurse(e.value,t.constant?void 0:d.nextId(),void 0,(function(t){l.push(d.escape(e.key.type===wr.Identifier?e.key.name:""+e.key.value)+":"+t)}))})),u="{"+l.join(",")+"}",this.assign(e,u)),r(e||u);break;case wr.ThisExpression:this.assign(e,"s"),r(e||"s");break;case wr.LocalsExpression:this.assign(e,"l"),r(e||"l");break;case wr.NGValueParameter:this.assign(e,"v"),r(e||"v")}},getHasOwnProperty:function(t,e){var n=t+"."+e,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),r[n]},assign:function(t,e){if(t)return this.current().body.push(t,"=",e,";"),t},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,n){if(!0===t)e();else{var r=this.current().body;r.push("if(",t,"){"),e(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(t){return"!("+t+")"},isNull:function(t){return t+"==null"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(e)?t+"."+e:t+'["'+e.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,n){return n?this.computedMember(t,e):this.nonComputedMember(t,e)},getStringValue:function(t){this.assign(t,"getStringValue("+t+")")},lazyRecurse:function(t,e,n,r,i,a){var o=this;return function(){o.recurse(t,e,n,r,i,a)}},lazyAssign:function(t,e){var n=this;return function(){n.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(V(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(H(t))return t.toString();if(!0===t)return"true";if(!1===t)return"false";if(null===t)return"null";if(void 0===t)return"undefined";throw br("esc","IMPOSSIBLE")},nextId:function(t,e){var n="v"+this.state.nextId++;return t||this.current().vars.push(n+(e?"="+e:"")),n},current:function(){return this.state[this.state.computing]}},Mr.prototype={compile:function(t){var e,n,r=this;Cr(t,r.$filter),(e=$r(t))&&(n=this.recurse(e));var i,a=Dr(t.body);a&&(i=[],_(a,(function(t,e){var n=r.recurse(t);n.isPure=t.isPure,t.input=n,i.push(n),t.watchId=e})));var o=[];_(t.body,(function(t){o.push(r.recurse(t.expression))}));var s=0===t.body.length?I:1===t.body.length?o[0]:function(t,e){var n;return _(o,(function(r){n=r(t,e)})),n};return n&&(s.assign=function(t,e,r){return n(t,r,e)}),i&&(s.inputs=i),s},recurse:function(t,e,n){var r,i,a,o=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case wr.Literal:return this.value(t.value,e);case wr.UnaryExpression:return i=this.recurse(t.argument),this["unary"+t.operator](i,e);case wr.BinaryExpression:case wr.LogicalExpression:return r=this.recurse(t.left),i=this.recurse(t.right),this["binary"+t.operator](r,i,e);case wr.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case wr.Identifier:return o.identifier(t.name,e,n);case wr.MemberExpression:return r=this.recurse(t.object,!1,!!n),t.computed||(i=t.property.name),t.computed&&(i=this.recurse(t.property)),t.computed?this.computedMember(r,i,e,n):this.nonComputedMember(r,i,e,n);case wr.CallExpression:return a=[],_(t.arguments,(function(t){a.push(o.recurse(t))})),t.filter&&(i=this.$filter(t.callee.name)),t.filter||(i=this.recurse(t.callee,!0)),t.filter?function(t,n,r,o){for(var s=[],l=0;l<a.length;++l)s.push(a[l](t,n,r,o));var u=i.apply(void 0,s,o);return e?{context:void 0,name:void 0,value:u}:u}:function(t,n,r,o){var s,l=i(t,n,r,o);if(null!=l.value){for(var u=[],c=0;c<a.length;++c)u.push(a[c](t,n,r,o));s=l.value.apply(l.context,u)}return e?{value:s}:s};case wr.AssignmentExpression:return r=this.recurse(t.left,!0,1),i=this.recurse(t.right),function(t,n,a,o){var s=r(t,n,a,o),l=i(t,n,a,o);return s.context[s.name]=l,e?{value:l}:l};case wr.ArrayExpression:return a=[],_(t.elements,(function(t){a.push(o.recurse(t))})),function(t,n,r,i){for(var o=[],s=0;s<a.length;++s)o.push(a[s](t,n,r,i));return e?{value:o}:o};case wr.ObjectExpression:return a=[],_(t.properties,(function(t){t.computed?a.push({key:o.recurse(t.key),computed:!0,value:o.recurse(t.value)}):a.push({key:t.key.type===wr.Identifier?t.key.name:""+t.key.value,computed:!1,value:o.recurse(t.value)})})),function(t,n,r,i){for(var o={},s=0;s<a.length;++s)a[s].computed?o[a[s].key(t,n,r,i)]=a[s].value(t,n,r,i):o[a[s].key]=a[s].value(t,n,r,i);return e?{value:o}:o};case wr.ThisExpression:return function(t){return e?{value:t}:t};case wr.LocalsExpression:return function(t,n){return e?{value:n}:n};case wr.NGValueParameter:return function(t,n,r){return e?{value:r}:r}}},"unary+":function(t,e){return function(n,r,i,a){var o=t(n,r,i,a);return o=U(o)?+o:0,e?{value:o}:o}},"unary-":function(t,e){return function(n,r,i,a){var o=t(n,r,i,a);return o=U(o)?-o:-0,e?{value:o}:o}},"unary!":function(t,e){return function(n,r,i,a){var o=!t(n,r,i,a);return e?{value:o}:o}},"binary+":function(t,e,n){return function(r,i,a,o){var s=Ar(t(r,i,a,o),e(r,i,a,o));return n?{value:s}:s}},"binary-":function(t,e,n){return function(r,i,a,o){var s=t(r,i,a,o),l=e(r,i,a,o),u=(U(s)?s:0)-(U(l)?l:0);return n?{value:u}:u}},"binary*":function(t,e,n){return function(r,i,a,o){var s=t(r,i,a,o)*e(r,i,a,o);return n?{value:s}:s}},"binary/":function(t,e,n){return function(r,i,a,o){var s=t(r,i,a,o)/e(r,i,a,o);return n?{value:s}:s}},"binary%":function(t,e,n){return function(r,i,a,o){var s=t(r,i,a,o)%e(r,i,a,o);return n?{value:s}:s}},"binary===":function(t,e,n){return function(r,i,a,o){var s=t(r,i,a,o)===e(r,i,a,o);return n?{value:s}:s}},"binary!==":function(t,e,n){return function(r,i,a,o){var s=t(r,i,a,o)!==e(r,i,a,o);return n?{value:s}:s}},"binary==":function(t,e,n){return function(r,i,a,o){var s=t(r,i,a,o)==e(r,i,a,o);return n?{value:s}:s}},"binary!=":function(t,e,n){return function(r,i,a,o){var s=t(r,i,a,o)!=e(r,i,a,o);return n?{value:s}:s}},"binary<":function(t,e,n){return function(r,i,a,o){var s=t(r,i,a,o)<e(r,i,a,o);return n?{value:s}:s}},"binary>":function(t,e,n){return function(r,i,a,o){var s=t(r,i,a,o)>e(r,i,a,o);return n?{value:s}:s}},"binary<=":function(t,e,n){return function(r,i,a,o){var s=t(r,i,a,o)<=e(r,i,a,o);return n?{value:s}:s}},"binary>=":function(t,e,n){return function(r,i,a,o){var s=t(r,i,a,o)>=e(r,i,a,o);return n?{value:s}:s}},"binary&&":function(t,e,n){return function(r,i,a,o){var s=t(r,i,a,o)&&e(r,i,a,o);return n?{value:s}:s}},"binary||":function(t,e,n){return function(r,i,a,o){var s=t(r,i,a,o)||e(r,i,a,o);return n?{value:s}:s}},"ternary?:":function(t,e,n,r){return function(i,a,o,s){var l=t(i,a,o,s)?e(i,a,o,s):n(i,a,o,s);return r?{value:l}:l}},value:function(t,e){return function(){return e?{context:void 0,name:void 0,value:t}:t}},identifier:function(t,e,n){return function(r,i,a,o){var s=i&&t in i?i:r;n&&1!==n&&s&&null==s[t]&&(s[t]={});var l=s?s[t]:void 0;return e?{context:s,name:t,value:l}:l}},computedMember:function(t,e,n,r){return function(i,a,o,s){var l,u,c=t(i,a,o,s);return null!=c&&(l=Er(l=e(i,a,o,s)),r&&1!==r&&c&&!c[l]&&(c[l]={}),u=c[l]),n?{context:c,name:l,value:u}:u}},nonComputedMember:function(t,e,n,r){return function(i,a,o,s){var l=t(i,a,o,s);r&&1!==r&&l&&null==l[e]&&(l[e]={});var u=null!=l?l[e]:void 0;return n?{context:l,name:e,value:u}:u}},inputs:function(t,e){return function(n,r,i,a){return a?a[e]:t(n,r,i)}}},Ir.prototype={constructor:Ir,parse:function(t){var e=this.getAst(t),n=this.astCompiler.compile(e.ast);return n.literal=function(t){return 0===t.body.length||1===t.body.length&&(t.body[0].expression.type===wr.Literal||t.body[0].expression.type===wr.ArrayExpression||t.body[0].expression.type===wr.ObjectExpression)}(e.ast),n.constant=function(t){return t.constant}(e.ast),n.oneTime=e.oneTime,n},getAst:function(t){var e=!1;return":"===(t=t.trim()).charAt(0)&&":"===t.charAt(1)&&(e=!0,t=t.substring(2)),{ast:this.ast.ast(t),oneTime:e}}};var zr=i("$sce"),Yr={HTML:"html",CSS:"css",MEDIA_URL:"mediaUrl",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},qr=/_([a-z])/g;function Kr(t){return t.replace(qr,Jt)}function Xr(t){var e=[];return U(t)&&_(t,(function(t){e.push(function(t){if("self"===t)return t;if(V(t)){if(t.indexOf("***")>-1)throw zr("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=et(t).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+t+"$")}if(q(t))return new RegExp("^"+t.source+"$");throw zr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(t))})),e}function Zr(){this.SCE_CONTEXTS=Yr;var e=["self"],n=[];this.trustedResourceUrlList=function(t){return arguments.length&&(e=Xr(t)),e},Object.defineProperty(this,"resourceUrlWhitelist",{get:function(){return this.trustedResourceUrlList},set:function(t){this.trustedResourceUrlList=t}}),this.bannedResourceUrlList=function(t){return arguments.length&&(n=Xr(t)),n},Object.defineProperty(this,"resourceUrlBlacklist",{get:function(){return this.bannedResourceUrlList},set:function(t){this.bannedResourceUrlList=t}}),this.$get=["$injector","$$sanitizeUri",function(r,i){var a=function(t){throw zr("unsafe","Attempting to use an unsafe value in a safe context.")};function o(e,n){return"self"===e?hi(n,ui)||function(e){return hi(e,function(){if(t.document.baseURI)return t.document.baseURI;si||((si=t.document.createElement("a")).href=".",si=si.cloneNode(!1));return si.href}())}(n):!!e.exec(n.href)}function s(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}r.has("$sanitize")&&(a=r.get("$sanitize"));var l=s(),u={};return u[Yr.HTML]=s(l),u[Yr.CSS]=s(l),u[Yr.MEDIA_URL]=s(l),u[Yr.URL]=s(u[Yr.MEDIA_URL]),u[Yr.JS]=s(l),u[Yr.RESOURCE_URL]=s(u[Yr.URL]),{trustAs:function(t,e){var n=u.hasOwnProperty(t)?u[t]:null;if(!n)throw zr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||N(e)||""===e)return e;if("string"!=typeof e)throw zr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new n(e)},getTrusted:function(t,r){if(null===r||N(r)||""===r)return r;var s=u.hasOwnProperty(t)?u[t]:null;if(s&&r instanceof s)return r.$$unwrapTrustedValue();if(Y(r.$$unwrapTrustedValue)&&(r=r.$$unwrapTrustedValue()),t===Yr.MEDIA_URL||t===Yr.URL)return i(r.toString(),t===Yr.MEDIA_URL);if(t===Yr.RESOURCE_URL){if(function(t){var r,i,a=di(t.toString()),s=!1;for(r=0,i=e.length;r<i;r++)if(o(e[r],a)){s=!0;break}if(s)for(r=0,i=n.length;r<i;r++)if(o(n[r],a)){s=!1;break}return s}(r))return r;throw zr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",r.toString())}if(t===Yr.HTML)return a(r);throw zr("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(t){return t instanceof l?t.$$unwrapTrustedValue():t}}}]}function Jr(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,n){if(t&&a<8)throw zr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=Ht(Yr);r.isEnabled=function(){return t},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,t||(r.trustAs=r.getTrusted=function(t,e){return e},r.valueOf=R),r.parseAs=function(t,n){var i=e(n);return i.literal&&i.constant?i:e(n,(function(e){return r.getTrusted(t,e)}))};var i=r.parseAs,o=r.getTrusted,s=r.trustAs;return _(Yr,(function(t,e){var n=h(e);r[Kr("parse_as_"+n)]=function(e){return i(t,e)},r[Kr("get_trusted_"+n)]=function(e){return o(t,e)},r[Kr("trust_as_"+n)]=function(e){return s(t,e)}})),r}]}function Qr(){this.$get=["$window","$document",function(t,e){var n={},r=!(!(t.nw&&t.nw.process)&&t.chrome&&(t.chrome.app&&t.chrome.app.runtime||!t.chrome.app&&t.chrome.runtime&&t.chrome.runtime.id))&&t.history&&t.history.pushState,i=$((/android (\d+)/.exec(h((t.navigator||{}).userAgent))||[])[1]),o=/Boxee/i.test((t.navigator||{}).userAgent),s=e[0]||{},l=s.body&&s.body.style,u=!1,c=!1;return l&&(u=!(!("transition"in l)&&!("webkitTransition"in l)),c=!(!("animation"in l)&&!("webkitAnimation"in l))),{history:!(!r||i<4||o),hasEvent:function(t){if("input"===t&&a)return!1;if(N(n[t])){var e=s.createElement("div");n[t]="on"+t in e}return n[t]},csp:ut(),transitions:u,animations:c,android:i}}]}function ti(){this.$get=P((function(t){return new ei(t)}))}function ei(t){var e=this,n={},r=[],i=e.ALL_TASKS_TYPE="$$all$$",a=e.DEFAULT_TASK_TYPE="$$default$$";function o(){var t=r.pop();return t&&t.cb}function s(t){for(var e=r.length-1;e>=0;--e){var n=r[e];if(n.type===t)return r.splice(e,1),n.cb}}e.completeTask=function(e,r){r=r||a;try{e()}finally{!function(t){n[t=t||a]&&(n[t]--,n[i]--)}(r);var l=n[r],u=n[i];if(!u||!l)for(var c,d=u?s:o;c=d(r);)try{c()}catch(e){t.error(e)}}},e.incTaskCount=function(t){n[t=t||a]=(n[t]||0)+1,n[i]=(n[i]||0)+1},e.notifyWhenNoPendingTasks=function(t,e){n[e=e||i]?r.push({type:e,cb:t}):t()}}var ni=i("$templateRequest");function ri(){var t;this.httpOptions=function(e){return e?(t=e,this):t},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(e,n,r,i,a){function o(s,l){o.totalPendingRequests++,V(s)&&!N(n.get(s))||(s=a.getTrustedResourceUrl(s));var u=r.defaults&&r.defaults.transformResponse;return W(u)?u=u.filter((function(t){return t!==jn})):u===jn&&(u=null),r.get(s,D({cache:n,transformResponse:u},t)).finally((function(){o.totalPendingRequests--})).then((function(t){return n.put(s,t.data)}),(function(t){l||(t=ni("tpload","Failed to load template: {0} (HTTP status: {1} {2})",s,t.status,t.statusText),e(t));return i.reject(t)}))}return o.totalPendingRequests=0,o}]}function ii(){this.$get=["$rootScope","$browser","$location",function(t,e,n){var r={findBindings:function(t,e,n){var r=t.getElementsByClassName("ng-binding"),i=[];return _(r,(function(t){var r=S.element(t).data("$binding");r&&_(r,(function(r){n?new RegExp("(^|\\s)"+et(e)+"(\\s|\\||$)").test(r)&&i.push(t):-1!==r.indexOf(e)&&i.push(t)}))})),i},findModels:function(t,e,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var a="["+r[i]+"model"+(n?"=":"*=")+'"'+e+'"]',o=t.querySelectorAll(a);if(o.length)return o}},getLocation:function(){return n.url()},setLocation:function(e){e!==n.url()&&(n.url(e),t.$digest())},whenStable:function(t){e.notifyWhenNoOutstandingRequests(t)}};return r}]}var ai=i("$timeout");function oi(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,n,r,i){var a={};function o(o,s,l){Y(o)||(l=s,s=o,o=I);var u,c=ht(arguments,3),d=U(l)&&!l,h=(d?r:n).defer(),f=h.promise;return u=e.defer((function(){try{h.resolve(o.apply(null,c))}catch(t){h.reject(t),i(t)}finally{delete a[f.$$timeoutId]}d||t.$apply()}),s,"$timeout"),f.$$timeoutId=u,a[u]=h,f}return o.cancel=function(t){if(!t)return!1;if(!t.hasOwnProperty("$$timeoutId"))throw ai("badprom","`$timeout.cancel()` called with a promise that was not generated by `$timeout()`.");if(!a.hasOwnProperty(t.$$timeoutId))return!1;var n=t.$$timeoutId,r=a[n];return Vr(r.promise),r.reject("canceled"),delete a[n],e.defer.cancel(n)},o}]}var si,li=t.document.createElement("a"),ui=di(t.location.href);li.href="http://[::1]";var ci="[::1]"===li.hostname;function di(t){if(!V(t))return t;var e=t;a&&(li.setAttribute("href",e),e=li.href),li.setAttribute("href",e);var n=li.hostname;return!ci&&n.indexOf(":")>-1&&(n="["+n+"]"),{href:li.href,protocol:li.protocol?li.protocol.replace(/:$/,""):"",host:li.host,search:li.search?li.search.replace(/^\?/,""):"",hash:li.hash?li.hash.replace(/^#/,""):"",hostname:n,port:li.port,pathname:"/"===li.pathname.charAt(0)?li.pathname:"/"+li.pathname}}function hi(t,e){return t=di(t),e=di(e),t.protocol===e.protocol&&t.host===e.host}function fi(){this.$get=P(t)}function pi(t){var e=t[0]||{},n={},r="";function i(t){try{return decodeURIComponent(t)}catch(e){return t}}return function(){var t,a,o,s,l,u=function(t){try{return t.cookie||""}catch(t){return""}}(e);if(u!==r)for(t=(r=u).split("; "),n={},o=0;o<t.length;o++)(s=(a=t[o]).indexOf("="))>0&&(l=i(a.substring(0,s)),N(n[l])&&(n[l]=i(a.substring(s+1))));return n}}function gi(){this.$get=pi}function vi(t){var e="Filter";function n(r,i){if(B(r)){var a={};return _(r,(function(t,e){a[e]=n(e,t)})),a}return t.factory(r+e,i)}this.register=n,this.$get=["$injector",function(t){return function(n){return t.get(n+e)}}],n("currency",Si),n("date",Oi),n("filter",mi),n("json",Mi),n("limitTo",Pi),n("lowercase",Ii),n("number",Ei),n("orderBy",Ni),n("uppercase",Ri)}function mi(){return function(t,e,n,r){if(!T(t)){if(null==t)return t;throw i("filter")("notarray","Expected array but received: {0}",t)}var a,o;switch(r=r||"$",bi(e)){case"function":a=e;break;case"boolean":case"null":case"number":case"string":o=!0;case"object":a=function(t,e,n,r){var i=B(t)&&n in t;!0===e?e=lt:Y(e)||(e=function(t,e){return!N(t)&&(null===t||null===e?t===e:!(B(e)||B(t)&&!F(t))&&(t=h(""+t),e=h(""+e),-1!==t.indexOf(e)))});return function(a){return i&&!B(a)?yi(a,t[n],e,n,!1):yi(a,t,e,n,r)}}(e,n,r,o);break;default:return t}return Array.prototype.filter.call(t,a)}}function yi(t,e,n,r,i,a){var o=bi(t),s=bi(e);if("string"===s&&"!"===e.charAt(0))return!yi(t,e.substring(1),n,r,i);if(W(t))return t.some((function(t){return yi(t,e,n,r,i)}));switch(o){case"object":var l;if(i){for(l in t)if(l.charAt&&"$"!==l.charAt(0)&&yi(t[l],e,n,r,!0))return!0;return!a&&yi(t,e,n,r,!1)}if("object"===s){for(l in e){var u=e[l];if(!Y(u)&&!N(u)){var c=l===r;if(!yi(c?t:t[l],u,n,r,c,c))return!1}}return!0}return n(t,e);case"function":return!1;default:return n(t,e)}}function bi(t){return null===t?"null":typeof t}pi.$inject=["$document"],vi.$inject=["$provide"];function Si(t){var e=t.NUMBER_FORMATS;return function(t,n,r){N(n)&&(n=e.CURRENCY_SYM),N(r)&&(r=e.PATTERNS[1].maxFrac);var i=n?/\u00A4/g:/\s*\u00A4\s*/g;return null==t?t:Ti(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,r).replace(i,n)}}function Ei(t){var e=t.NUMBER_FORMATS;return function(t,n){return null==t?t:Ti(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function Ti(t,e,n,r,i){if(!V(t)&&!H(t)||isNaN(t))return"";var a,o=!isFinite(t),s=!1,l=Math.abs(t)+"",u="";if(o)u="∞";else{(function(t,e,n,r){var i=t.d,a=i.length-t.i,o=(e=N(e)?Math.min(Math.max(n,a),r):+e)+t.i,s=i[o];if(o>0){i.splice(Math.max(t.i,o));for(var l=o;l<i.length;l++)i[l]=0}else{a=Math.max(0,a),t.i=1,i.length=Math.max(1,o=e+1),i[0]=0;for(var u=1;u<o;u++)i[u]=0}if(s>=5)if(o-1<0){for(var c=0;c>o;c--)i.unshift(0),t.i++;i.unshift(1),t.i++}else i[o-1]++;for(;a<Math.max(0,e);a++)i.push(0);var d=i.reduceRight((function(t,e,n,r){return e+=t,r[n]=e%10,Math.floor(e/10)}),0);d&&(i.unshift(d),t.i++)})(a=function(t){var e,n,r,i,a,o=0;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;"0"===t.charAt(r);r++);if(r===(a=t.length))e=[0],n=1;else{for(a--;"0"===t.charAt(a);)a--;for(n-=r,e=[],i=0;r<=a;r++,i++)e[i]=+t.charAt(r)}return n>22&&(e=e.splice(0,21),o=n-1,n=1),{d:e,e:o,i:n}}(l),i,e.minFrac,e.maxFrac);var c=a.d,d=a.i,h=a.e,f=[];for(s=c.reduce((function(t,e){return t&&!e}),!0);d<0;)c.unshift(0),d++;d>0?f=c.splice(d,c.length):(f=c,c=[0]);var p=[];for(c.length>=e.lgSize&&p.unshift(c.splice(-e.lgSize,c.length).join(""));c.length>e.gSize;)p.unshift(c.splice(-e.gSize,c.length).join(""));c.length&&p.unshift(c.join("")),u=p.join(n),f.length&&(u+=r+f.join("")),h&&(u+="e+"+h)}return t<0&&!s?e.negPre+u+e.negSuf:e.posPre+u+e.posSuf}function _i(t,e,n,r){var i="";for((t<0||r&&t<=0)&&(r?t=1-t:(t=-t,i="-")),t=""+t;t.length<e;)t="0"+t;return n&&(t=t.substr(t.length-e)),i+t}function xi(t,e,n,r,i){return n=n||0,function(a){var o=a["get"+t]();return(n>0||o>-n)&&(o+=n),0===o&&-12===n&&(o=12),_i(o,e,r,i)}}function wi(t,e,n){return function(r,i){var a=r["get"+t]();return i[f((n?"STANDALONE":"")+(e?"SHORT":"")+t)][a]}}function ki(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(e<=4?5:12)-e)}function Ai(t){return function(e){var n,r=ki(e.getFullYear()),i=+(n=e,new Date(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay())))-+r;return _i(1+Math.round(i/6048e5),t)}}function Ci(t,e){return t.getFullYear()<=0?e.ERAS[0]:e.ERAS[1]}Si.$inject=["$locale"],Ei.$inject=["$locale"];var Di={yyyy:xi("FullYear",4,0,!1,!0),yy:xi("FullYear",2,0,!0,!0),y:xi("FullYear",1,0,!1,!0),MMMM:wi("Month"),MMM:wi("Month",!0),MM:xi("Month",2,1),M:xi("Month",1,1),LLLL:wi("Month",!1,!0),dd:xi("Date",2),d:xi("Date",1),HH:xi("Hours",2),H:xi("Hours",1),hh:xi("Hours",2,-12),h:xi("Hours",1,-12),mm:xi("Minutes",2),m:xi("Minutes",1),ss:xi("Seconds",2),s:xi("Seconds",1),sss:xi("Milliseconds",3),EEEE:wi("Day"),EEE:wi("Day",!0),a:function(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]},Z:function(t,e,n){var r=-1*n,i=r>=0?"+":"";return i+=_i(Math[r>0?"floor":"ceil"](r/60),2)+_i(Math.abs(r%60),2)},ww:Ai(2),w:Ai(1),G:Ci,GG:Ci,GGG:Ci,GGGG:function(t,e){return t.getFullYear()<=0?e.ERANAMES[0]:e.ERANAMES[1]}},Li=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,$i=/^-?\d+$/;function Oi(t){var e=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,i){var a,o,s="",l=[];if(r=r||"mediumDate",r=t.DATETIME_FORMATS[r]||r,V(n)&&(n=$i.test(n)?$(n):function(t){var n;if(n=t.match(e)){var r=new Date(0),i=0,a=0,o=n[8]?r.setUTCFullYear:r.setFullYear,s=n[8]?r.setUTCHours:r.setHours;n[9]&&(i=$(n[9]+n[10]),a=$(n[9]+n[11])),o.call(r,$(n[1]),$(n[2])-1,$(n[3]));var l=$(n[4]||0)-i,u=$(n[5]||0)-a,c=$(n[6]||0),d=Math.round(1e3*parseFloat("0."+(n[7]||0)));return s.call(r,l,u,c,d),r}return t}(n)),H(n)&&(n=new Date(n)),!G(n)||!isFinite(n.getTime()))return n;for(;r;)(o=Li.exec(r))?r=(l=dt(l,o,1)).pop():(l.push(r),r=null);var u=n.getTimezoneOffset();return i&&(u=yt(i,u),n=St(n,i,!0)),_(l,(function(e){s+=(a=Di[e])?a(n,t.DATETIME_FORMATS,u):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")})),s}}function Mi(){return function(t,e){return N(e)&&(e=2),gt(t,e)}}Oi.$inject=["$locale"];var Ii=P(h),Ri=P(f);function Pi(){return function(t,e,n){return e=Math.abs(Number(e))===1/0?Number(e):$(e),O(e)?t:(H(t)&&(t=t.toString()),T(t)?(n=(n=!n||isNaN(n)?0:$(n))<0?Math.max(0,t.length+n):n,e>=0?Fi(t,n,n+e):0===n?Fi(t,e,t.length):Fi(t,Math.max(0,n+e),n)):t)}}function Fi(t,e,n){return V(t)?t.slice(e,n):p.call(t,e,n)}function Ni(t){return function(r,a,o,s){if(null==r)return r;if(!T(r))throw i("orderBy")("notarray","Expected array but received: {0}",r);W(a)||(a=[a]),0===a.length&&(a=["+"]);var l=a.map((function(e){var n=1,r=R;if(Y(e))r=e;else if(V(e)&&("+"!==e.charAt(0)&&"-"!==e.charAt(0)||(n="-"===e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(r=t(e)).constant)){var i=r();r=function(t){return t[i]}}return{get:r,descending:n}})),u=o?-1:1,c=Y(s)?s:n,d=Array.prototype.map.call(r,(function(t,n){return{value:t,tieBreaker:{value:n,type:"number",index:n},predicateValues:l.map((function(r){return function(t,n){var r=typeof t;null===t?r="null":"object"===r&&(t=function(t){if(Y(t.valueOf)&&e(t=t.valueOf()))return t;if(F(t)&&e(t=t.toString()))return t;return t}(t));return{value:t,type:r,index:n}}(r.get(t),n)}))}}));return d.sort((function(t,e){for(var r=0,i=l.length;r<i;r++){var a=c(t.predicateValues[r],e.predicateValues[r]);if(a)return a*l[r].descending*u}return(c(t.tieBreaker,e.tieBreaker)||n(t.tieBreaker,e.tieBreaker))*u})),r=d.map((function(t){return t.value}))};function e(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function n(t,e){var n=0,r=t.type,i=e.type;if(r===i){var a=t.value,o=e.value;"string"===r?(a=a.toLowerCase(),o=o.toLowerCase()):"object"===r&&(B(a)&&(a=t.index),B(o)&&(o=e.index)),a!==o&&(n=a<o?-1:1)}else n="undefined"===r?1:"undefined"===i?-1:"null"===r?1:"null"===i||r<i?-1:1;return n}}function Ui(t){return Y(t)&&(t={link:t}),t.restrict=t.restrict||"AC",P(t)}Ni.$inject=["$parse"];var Bi=P({restrict:"E",compile:function(t,e){if(!e.href&&!e.xlinkHref)return function(t,e){if("a"===e[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===m.call(e.prop("href"))?"xlink:href":"href";e.on("click",(function(t){e.attr(n)||t.preventDefault()}))}}}}),ji={};_(Oe,(function(t,e){if("multiple"!==t){var n=En("ng-"+e),r=i;"checked"===t&&(r=function(t,e,r){r.ngModel!==r[n]&&i(t,0,r)}),ji[n]=function(){return{restrict:"A",priority:100,link:r}}}function i(t,r,i){t.$watch(i[n],(function(t){i.$set(e,!!t)}))}})),_(Ie,(function(t,e){ji[e]=function(){return{priority:100,link:function(t,n,r){if("ngPattern"===e&&"/"===r.ngPattern.charAt(0)){var i=r.ngPattern.match(u);if(i)return void r.$set("ngPattern",new RegExp(i[1],i[2]))}t.$watch(r[e],(function(t){r.$set(e,t)}))}}}})),_(["src","srcset","href"],(function(t){var e=En("ng-"+t);ji[e]=["$sce",function(n){return{priority:99,link:function(r,i,o){var s=t,l=t;"href"===t&&"[object SVGAnimatedString]"===m.call(i.prop("href"))&&(l="xlinkHref",o.$attr[l]="xlink:href",s=null),o.$set(e,n.getTrustedMediaUrl(o[e])),o.$observe(e,(function(e){e?(o.$set(l,e),a&&s&&i.prop(s,o[l])):"href"===t&&o.$set(l,null)}))}}}]}));var Vi={$addControl:I,$getControls:P([]),$$renameControl:function(t,e){t.$name=e},$removeControl:I,$setValidity:I,$setDirty:I,$setPristine:I,$setSubmitted:I,$$setSubmitted:I},Hi="ng-pending",Gi="ng-submitted";function Wi(t,e,n,r,i){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=i(e.name||e.ngForm||"")(n),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=Vi,this.$$element=t,this.$$animate=r,Ki(this)}Wi.$inject=["$element","$attrs","$scope","$animate","$interpolate"],Wi.prototype={$rollbackViewValue:function(){_(this.$$controls,(function(t){t.$rollbackViewValue()}))},$commitViewValue:function(){_(this.$$controls,(function(t){t.$commitViewValue()}))},$addControl:function(t){Nt(t.$name,"input"),this.$$controls.push(t),t.$name&&(this[t.$name]=t),t.$$parentForm=this},$getControls:function(){return Ht(this.$$controls)},$$renameControl:function(t,e){var n=t.$name;this[n]===t&&delete this[n],this[e]=t,t.$name=e},$removeControl:function(t){t.$name&&this[t.$name]===t&&delete this[t.$name],_(this.$pending,(function(e,n){this.$setValidity(n,null,t)}),this),_(this.$error,(function(e,n){this.$setValidity(n,null,t)}),this),_(this.$$success,(function(e,n){this.$setValidity(n,null,t)}),this),at(this.$$controls,t),t.$$parentForm=Vi},$setDirty:function(){this.$$animate.removeClass(this.$$element,Ga),this.$$animate.addClass(this.$$element,Wa),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Ga,Wa+" "+Gi),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,_(this.$$controls,(function(t){t.$setPristine()}))},$setUntouched:function(){_(this.$$controls,(function(t){t.$setUntouched()}))},$setSubmitted:function(){for(var t=this;t.$$parentForm&&t.$$parentForm!==Vi;)t=t.$$parentForm;t.$$setSubmitted()},$$setSubmitted:function(){this.$$animate.addClass(this.$$element,Gi),this.$submitted=!0,_(this.$$controls,(function(t){t.$$setSubmitted&&t.$$setSubmitted()}))}},Xi({clazz:Wi,set:function(t,e,n){var r=t[e];r?-1===r.indexOf(n)&&r.push(n):t[e]=[n]},unset:function(t,e,n){var r=t[e];r&&(at(r,n),0===r.length&&delete t[e])}});var zi=function(t){return["$timeout","$parse",function(e,n){return{name:"form",restrict:t?"EAC":"E",require:["form","^^?form"],controller:Wi,compile:function(n,i){n.addClass(Ga).addClass(Va);var a=i.name?"name":!(!t||!i.ngForm)&&"ngForm";return{pre:function(t,n,i,o){var s=o[0];if(!("action"in i)){var l=function(e){t.$apply((function(){s.$commitViewValue(),s.$setSubmitted()})),e.preventDefault()};n[0].addEventListener("submit",l),n.on("$destroy",(function(){e((function(){n[0].removeEventListener("submit",l)}),0,!1)}))}(o[1]||s.$$parentForm).$addControl(s);var u=a?r(s.$name):I;a&&(u(t,s),i.$observe(a,(function(e){s.$name!==e&&(u(t,void 0),s.$$parentForm.$$renameControl(s,e),(u=r(s.$name))(t,s))}))),n.on("$destroy",(function(){s.$$parentForm.$removeControl(s),u(t,void 0),D(s,Vi)}))}}}};function r(t){return""===t?n('this[""]').assign:n(t).assign||I}}]},Yi=zi(),qi=zi(!0);function Ki(t){t.$$classCache={},t.$$classCache[Ha]=!(t.$$classCache[Va]=t.$$element.hasClass(Va))}function Xi(t){var e=t.clazz,n=t.set,r=t.unset;function i(t,e,n){n&&!t.$$classCache[e]?(t.$$animate.addClass(t.$$element,e),t.$$classCache[e]=!0):!n&&t.$$classCache[e]&&(t.$$animate.removeClass(t.$$element,e),t.$$classCache[e]=!1)}function a(t,e,n){e=e?"-"+Mt(e,"-"):"",i(t,Va+e,!0===n),i(t,Ha+e,!1===n)}e.prototype.$setValidity=function(t,e,o){var s;N(e)?function(t,e,r,i){t[e]||(t[e]={});n(t[e],r,i)}(this,"$pending",t,o):function(t,e,n,i){t[e]&&r(t[e],n,i);Zi(t[e])&&(t[e]=void 0)}(this,"$pending",t,o),Z(e)?e?(r(this.$error,t,o),n(this.$$success,t,o)):(n(this.$error,t,o),r(this.$$success,t,o)):(r(this.$error,t,o),r(this.$$success,t,o)),this.$pending?(i(this,Hi,!0),this.$valid=this.$invalid=void 0,a(this,"",null)):(i(this,Hi,!1),this.$valid=Zi(this.$error),this.$invalid=!this.$valid,a(this,"",this.$valid)),a(this,t,s=this.$pending&&this.$pending[t]?void 0:!this.$error[t]&&(!!this.$$success[t]||null)),this.$$parentForm.$setValidity(t,s,this)}}function Zi(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}var Ji=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,Qi=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,ta=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,ea=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,na=/^(\d{4,})-(\d{2})-(\d{2})$/,ra=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ia=/^(\d{4,})-W(\d\d)$/,aa=/^(\d{4,})-(\d\d)$/,oa=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,sa=Bt();_("date,datetime-local,month,time,week".split(","),(function(t){sa[t]=!0}));var la={text:function(t,e,n,r,i,a){ca(t,e,n,r,i,a),ua(r)},date:ha("date",na,da(na,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":ha("datetimelocal",ra,da(ra,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:ha("time",oa,da(oa,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:ha("week",ia,(function(t,e){if(G(t))return t;if(V(t)){ia.lastIndex=0;var n=ia.exec(t);if(n){var r=+n[1],i=+n[2],a=0,o=0,s=0,l=0,u=ki(r),c=7*(i-1);return e&&(a=e.getHours(),o=e.getMinutes(),s=e.getSeconds(),l=e.getMilliseconds()),new Date(r,0,u.getDate()+c,a,o,s,l)}}return NaN}),"yyyy-Www"),month:ha("month",aa,da(aa,["yyyy","MM"]),"yyyy-MM"),number:function(t,e,n,r,i,a,o,s){var l;if(fa(t,e,n,r,"number"),pa(r),ca(t,e,n,r,i,a),U(n.min)||n.ngMin){var u=n.min||s(n.ngMin)(t);l=ga(u),r.$validators.min=function(t,e){return r.$isEmpty(e)||N(l)||e>=l},n.$observe("min",(function(t){t!==u&&(l=ga(t),u=t,r.$validate())}))}if(U(n.max)||n.ngMax){var c=n.max||s(n.ngMax)(t),d=ga(c);r.$validators.max=function(t,e){return r.$isEmpty(e)||N(d)||e<=d},n.$observe("max",(function(t){t!==c&&(d=ga(t),c=t,r.$validate())}))}if(U(n.step)||n.ngStep){var h=n.step||s(n.ngStep)(t),f=ga(h);r.$validators.step=function(t,e){return r.$isEmpty(e)||N(f)||ya(e,l||0,f)},n.$observe("step",(function(t){t!==h&&(f=ga(t),h=t,r.$validate())}))}},url:function(t,e,n,r,i,a){ca(t,e,n,r,i,a),ua(r),r.$validators.url=function(t,e){var n=t||e;return r.$isEmpty(n)||Qi.test(n)}},email:function(t,e,n,r,i,a){ca(t,e,n,r,i,a),ua(r),r.$validators.email=function(t,e){var n=t||e;return r.$isEmpty(n)||ta.test(n)}},radio:function(t,e,n,r){var i=!n.ngTrim||"false"!==tt(n.ngTrim);N(n.name)&&e.attr("name",k());e.on("change",(function(t){var a;e[0].checked&&(a=n.value,i&&(a=tt(a)),r.$setViewValue(a,t&&t.type))})),r.$render=function(){var t=n.value;i&&(t=tt(t)),e[0].checked=t===r.$viewValue},n.$observe("value",r.$render)},range:function(t,e,n,r,i,a){fa(t,e,n,r,"range"),pa(r),ca(t,e,n,r,i,a);var o=r.$$hasNativeValidators&&"range"===e[0].type,s=o?0:void 0,l=o?100:void 0,u=o?1:void 0,c=e[0].validity,d=U(n.min),h=U(n.max),f=U(n.step),p=r.$render;r.$render=o&&U(c.rangeUnderflow)&&U(c.rangeOverflow)?function(){p(),r.$setViewValue(e.val())}:p,d&&(s=ga(n.min),r.$validators.min=o?function(){return!0}:function(t,e){return r.$isEmpty(e)||N(s)||e>=s},g("min",(function(t){if(s=ga(t),O(r.$modelValue))return;if(o){var n=e.val();s>n&&(n=s,e.val(n)),r.$setViewValue(n)}else r.$validate()})));h&&(l=ga(n.max),r.$validators.max=o?function(){return!0}:function(t,e){return r.$isEmpty(e)||N(l)||e<=l},g("max",(function(t){if(l=ga(t),O(r.$modelValue))return;if(o){var n=e.val();l<n&&(e.val(l),n=l<s?s:l),r.$setViewValue(n)}else r.$validate()})));f&&(u=ga(n.step),r.$validators.step=o?function(){return!c.stepMismatch}:function(t,e){return r.$isEmpty(e)||N(u)||ya(e,s||0,u)},g("step",(function(t){if(u=ga(t),O(r.$modelValue))return;o?r.$viewValue!==e.val()&&r.$setViewValue(e.val()):r.$validate()})));function g(t,r){e.attr(t,n[t]);var i=n[t];n.$observe(t,(function(t){t!==i&&(i=t,r(t))}))}},checkbox:function(t,e,n,r,i,a,o,s){var l=ba(s,t,"ngTrueValue",n.ngTrueValue,!0),u=ba(s,t,"ngFalseValue",n.ngFalseValue,!1);e.on("change",(function(t){r.$setViewValue(e[0].checked,t&&t.type)})),r.$render=function(){e[0].checked=r.$viewValue},r.$isEmpty=function(t){return!1===t},r.$formatters.push((function(t){return lt(t,l)})),r.$parsers.push((function(t){return t?l:u}))},hidden:I,button:I,submit:I,reset:I,file:I};function ua(t){t.$formatters.push((function(e){return t.$isEmpty(e)?e:e.toString()}))}function ca(t,e,n,r,i,a){var o,s=h(e[0].type);if(!i.android){var l=!1;e.on("compositionstart",(function(){l=!0})),e.on("compositionupdate",(function(t){(N(t.data)||""===t.data)&&(l=!1)})),e.on("compositionend",(function(){l=!1,u()}))}var u=function(t){if(o&&(a.defer.cancel(o),o=null),!l){var i=e.val(),u=t&&t.type;"password"===s||n.ngTrim&&"false"===n.ngTrim||(i=tt(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,u)}};if(i.hasEvent("input"))e.on("input",u);else{var c=function(t,e,n){o||(o=a.defer((function(){o=null,e&&e.value===n||u(t)})))};e.on("keydown",(function(t){var e=t.keyCode;91===e||15<e&&e<19||37<=e&&e<=40||c(t,this,this.value)})),i.hasEvent("paste")&&e.on("paste cut drop",c)}e.on("change",u),sa[s]&&r.$$hasNativeValidators&&s===n.type&&e.on("keydown wheel mousedown",(function(t){if(!o){var e=this.validity,n=e.badInput,r=e.typeMismatch;o=a.defer((function(){o=null,e.badInput===n&&e.typeMismatch===r||u(t)}))}})),r.$render=function(){var t=r.$isEmpty(r.$viewValue)?"":r.$viewValue;e.val()!==t&&e.val(t)}}function da(t,e){return function(n,r){var i,a;if(G(n))return n;if(V(n)){if('"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Ji.test(n))return new Date(n);if(t.lastIndex=0,i=t.exec(n)){i.shift(),a=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},_(i,(function(t,n){n<e.length&&(a[e[n]]=+t)}));var o=new Date(a.yyyy,a.MM-1,a.dd,a.HH,a.mm,a.ss||0,1e3*a.sss||0);return a.yyyy<100&&o.setFullYear(a.yyyy),o}}return NaN}}function ha(t,e,n,r){return function(i,a,o,s,l,u,c,d){fa(i,a,o,s,t),ca(0,a,o,s,l,u);var h,f,p="time"===t||"datetimelocal"===t;if(s.$parsers.push((function(n){return s.$isEmpty(n)?null:e.test(n)?E(n,h):void(s.$$parserName=t)})),s.$formatters.push((function(t){if(t&&!G(t))throw Xa("datefmt","Expected `{0}` to be a date",t);if(b(t)){h=t;var e=s.$options.getOption("timezone");return e&&(f=e,h=St(h,e,!0)),function(t,e){var n=r;p&&V(s.$options.getOption("timeSecondsFormat"))&&(n=r.replace("ss.sss",s.$options.getOption("timeSecondsFormat")).replace(/:$/,""));var i=c("date")(t,n,e);p&&s.$options.getOption("timeStripZeroSeconds")&&(i=i.replace(/(?::00)?(?:\.000)?$/,""));return i}(t,e)}return h=null,f=null,""})),U(o.min)||o.ngMin){var g=o.min||d(o.ngMin)(i),v=S(g);s.$validators.min=function(t){return!b(t)||N(v)||n(t)>=v},o.$observe("min",(function(t){t!==g&&(v=S(t),g=t,s.$validate())}))}if(U(o.max)||o.ngMax){var m=o.max||d(o.ngMax)(i),y=S(m);s.$validators.max=function(t){return!b(t)||N(y)||n(t)<=y},o.$observe("max",(function(t){t!==m&&(y=S(t),m=t,s.$validate())}))}function b(t){return t&&!(t.getTime&&t.getTime()!=t.getTime())}function S(t){return U(t)&&!G(t)?E(t)||void 0:t}function E(t,e){var r=s.$options.getOption("timezone");f&&f!==r&&(e=bt(e,yt(f)));var i=n(t,e);return!isNaN(i)&&r&&(i=St(i,r)),i}}}function fa(t,e,n,r,i){var a=e[0];(r.$$hasNativeValidators=B(a.validity))&&r.$parsers.push((function(t){var n=e.prop(c)||{};if(!n.badInput&&!n.typeMismatch)return t;r.$$parserName=i}))}function pa(t){t.$parsers.push((function(e){return t.$isEmpty(e)?null:ea.test(e)?parseFloat(e):void(t.$$parserName="number")})),t.$formatters.push((function(e){if(!t.$isEmpty(e)){if(!H(e))throw Xa("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e}))}function ga(t){return U(t)&&!H(t)&&(t=parseFloat(t)),O(t)?void 0:t}function va(t){return(0|t)===t}function ma(t){var e=t.toString(),n=e.indexOf(".");if(-1===n){if(-1<t&&t<1){var r=/e-(\d+)$/.exec(e);if(r)return Number(r[1])}return 0}return e.length-n-1}function ya(t,e,n){var r=Number(t),i=!va(r),a=!va(e),o=!va(n);if(i||a||o){var s=i?ma(r):0,l=a?ma(e):0,u=o?ma(n):0,c=Math.max(s,l,u),d=Math.pow(10,c);r*=d,e*=d,n*=d,i&&(r=Math.round(r)),a&&(e=Math.round(e)),o&&(n=Math.round(n))}return(r-e)%n==0}function ba(t,e,n,r,i){var a;if(U(r)){if(!(a=t(r)).constant)throw Xa("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return a(e)}return i}var Sa=["$browser","$sniffer","$filter","$parse",function(t,e,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,a,o,s){s[0]&&(la[h(o.type)]||la.text)(i,a,o,s[0],e,t,n,r)}}}}],Ea=function(){var t={configurable:!0,enumerable:!1,get:function(){return this.getAttribute("value")||""},set:function(t){this.setAttribute("value",t)}};return{restrict:"E",priority:200,compile:function(e,n){if("hidden"===h(n.type))return{pre:function(e,n,r,i){var a=n[0];a.parentNode&&a.parentNode.insertBefore(a,a.nextSibling),Object.defineProperty&&Object.defineProperty(a,"value",t)}}}}},Ta=/^(true|false|\d+)$/,_a=function(){function t(t,e,n){var r=U(n)?n:9===a?"":null;t.prop("value",r),e.$set("value",n)}return{restrict:"A",priority:100,compile:function(e,n){return Ta.test(n.ngValue)?function(e,n,r){t(n,r,e.$eval(r.ngValue))}:function(e,n,r){e.$watch(r.ngValue,(function(e){t(n,r,e)}))}}}},xa=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,n,r){t.$$addBindingInfo(n,r.ngBind),n=n[0],e.$watch(r.ngBind,(function(t){n.textContent=jt(t)}))}}}}],wa=["$interpolate","$compile",function(t,e){return{compile:function(n){return e.$$addBindingClass(n),function(n,r,i){var a=t(r.attr(i.$attr.ngBindTemplate));e.$$addBindingInfo(r,a.expressions),r=r[0],i.$observe("ngBindTemplate",(function(t){r.textContent=N(t)?"":t}))}}}}],ka=["$sce","$parse","$compile",function(t,e,n){return{restrict:"A",compile:function(r,i){var a=e(i.ngBindHtml),o=e(i.ngBindHtml,(function(e){return t.valueOf(e)}));return n.$$addBindingClass(r),function(e,r,i){n.$$addBindingInfo(r,i.ngBindHtml),e.$watch(o,(function(){var n=a(e);r.html(t.getTrustedHtml(n)||"")}))}}}}],Aa=P({restrict:"A",require:"ngModel",link:function(t,e,n,r){r.$viewChangeListeners.push((function(){t.$eval(n.ngChange)}))}});function Ca(t,e){var n;return t="ngClass"+t,["$parse",function(o){return{restrict:"AC",link:function(s,l,u){var c,d=l.data("$classCounts"),h=!0;function f(t,e){var n=[];return _(t,(function(t){(e>0||d[t])&&(d[t]=(d[t]||0)+e,d[t]===+(e>0)&&n.push(t))})),n.join(" ")}d||(d=Bt(),l.data("$classCounts",d)),"ngClass"!==t&&(n||(n=o("$index",(function(t){return 1&t}))),s.$watch(n,(function(t){t===e?(n=f(i(n=c),1),u.$addClass(n)):function(t){t=f(i(t),-1),u.$removeClass(t)}(c);var n;h=t}))),s.$watch(o(u[t],a),(function(t){h===e&&function(t,e){var n=i(t),a=i(e),o=r(n,a),s=r(a,n),l=f(o,-1),c=f(s,1);u.$addClass(c),u.$removeClass(l)}(c,t);c=t}))}}}];function r(t,e){if(!t||!t.length)return[];if(!e||!e.length)return t;var n=[];t:for(var r=0;r<t.length;r++){for(var i=t[r],a=0;a<e.length;a++)if(i===e[a])continue t;n.push(i)}return n}function i(t){return t&&t.split(" ")}function a(t){if(!t)return t;var e=t;return W(t)?e=t.map(a).join(" "):B(t)?e=Object.keys(t).filter((function(e){return t[e]})).join(" "):V(t)||(e=t+""),e}}var Da=Ca("",!0),La=Ca("Odd",0),$a=Ca("Even",1),Oa=Ui({compile:function(t,e){e.$set("ngCloak",void 0),t.removeClass("ng-cloak")}}),Ma=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Ia={},Ra={blur:!0,focus:!0};function Pa(t,e,n,r,i,a){return{restrict:"A",compile:function(o,s){var l=t(s[r]);return function(t,r){r.on(i,(function(r){var i=function(){l(t,{$event:r})};if(e.$$phase)if(a)t.$evalAsync(i);else try{i()}catch(t){n(t)}else t.$apply(i)}))}}}}_("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),(function(t){var e=En("ng-"+t);Ia[e]=["$parse","$rootScope","$exceptionHandler",function(n,r,i){return Pa(n,r,i,e,t,Ra[t])}]}));var Fa=["$animate","$compile",function(t,e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,a,o){var s,l,u;n.$watch(i.ngIf,(function(n){n?l||o((function(n,a){l=a,n[n.length++]=e.$$createComment("end ngIf",i.ngIf),s={clone:n},t.enter(n,r.parent(),r)})):(u&&(u.remove(),u=null),l&&(l.$destroy(),l=null),s&&(u=Ut(s.clone),t.leave(u).done((function(t){!1!==t&&(u=null)})),s=null))}))}}}],Na=["$templateRequest","$anchorScroll","$animate",function(t,e,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:S.noop,compile:function(r,i){var a=i.ngInclude||i.src,o=i.onload||"",s=i.autoscroll;return function(r,i,l,u,c){var d,h,f,p=0,g=function(){h&&(h.remove(),h=null),d&&(d.$destroy(),d=null),f&&(n.leave(f).done((function(t){!1!==t&&(h=null)})),h=f,f=null)};r.$watch(a,(function(a){var l=function(t){!1===t||!U(s)||s&&!r.$eval(s)||e()},h=++p;a?(t(a,!0).then((function(t){if(!r.$$destroyed&&h===p){var e=r.$new();u.template=t;var s=c(e,(function(t){g(),n.enter(t,null,i).done(l)}));f=s,(d=e).$emit("$includeContentLoaded",a),r.$eval(o)}}),(function(){r.$$destroyed||h===p&&(g(),r.$emit("$includeContentError",a))})),r.$emit("$includeContentRequested",a)):(g(),u.template=null)}))}}}}],Ua=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,a){if(m.call(r[0]).match(/SVG/))return r.empty(),void e(de(a.template,t.document).childNodes)(n,(function(t){r.append(t)}),{futureParentElement:r});r.html(a.template),e(r.contents())(n)}}}],Ba=Ui({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),ja=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,n,r){var i=n.ngList||", ",a="false"!==n.ngTrim,o=a?tt(i):i;r.$parsers.push((function(t){if(!N(t)){var e=[];return t&&_(t.split(o),(function(t){t&&e.push(a?tt(t):t)})),e}})),r.$formatters.push((function(t){if(W(t))return t.join(i)})),r.$isEmpty=function(t){return!t||!t.length}}}},Va="ng-valid",Ha="ng-invalid",Ga="ng-pristine",Wa="ng-dirty",za="ng-untouched",Ya="ng-touched",qa="ng-empty",Ka="ng-not-empty",Xa=i("ngModel");function Za(t,e,n,r,i,a,o,s,l){var u;this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=l(n.name||"",!1)(t),this.$$parentForm=Vi,this.$options=Ja,this.$$updateEvents="",this.$$updateEventHandler=this.$$updateEventHandler.bind(this),this.$$parsedNgModel=i(n.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$parserName="parse",this.$$currentValidationRunId=0,this.$$scope=t,this.$$rootScope=t.$root,this.$$attr=n,this.$$element=r,this.$$animate=a,this.$$timeout=o,this.$$parse=i,this.$$q=s,this.$$exceptionHandler=e,Ki(this),(u=this).$$scope.$watch((function(t){var e=u.$$ngModelGet(t);return e===u.$modelValue||u.$modelValue!=u.$modelValue&&e!=e||u.$$setModelValue(e),e}))}Za.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],Za.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var t=this.$$parse(this.$$attr.ngModel+"()"),e=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(e){var n=this.$$parsedNgModel(e);return Y(n)&&(n=t(e)),n},this.$$ngModelSet=function(t,n){Y(this.$$parsedNgModel(t))?e(t,{$$$p:n}):this.$$parsedNgModelAssign(t,n)}}else if(!this.$$parsedNgModel.assign)throw Xa("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,Et(this.$$element))},$render:I,$isEmpty:function(t){return N(t)||""===t||null===t||t!=t},$$updateEmptyClasses:function(t){this.$isEmpty(t)?(this.$$animate.removeClass(this.$$element,Ka),this.$$animate.addClass(this.$$element,qa)):(this.$$animate.removeClass(this.$$element,qa),this.$$animate.addClass(this.$$element,Ka))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,Wa),this.$$animate.addClass(this.$$element,Ga)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Ga),this.$$animate.addClass(this.$$element,Wa),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,za,Ya)},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,Ya,za)},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!O(this.$modelValue)){var t=this.$$lastCommittedViewValue,e=this.$$rawModelValue,n=this.$valid,r=this.$modelValue,i=this.$options.getOption("allowInvalid"),a=this;this.$$runValidators(e,t,(function(t){i||n===t||(a.$modelValue=t?e:void 0,a.$modelValue!==r&&a.$$writeModelToScope())}))}},$$runValidators:function(t,e,n){this.$$currentValidationRunId++;var r,i,a=this.$$currentValidationRunId,o=this;(function(){var t=o.$$parserName;if(!N(o.$$parserValid))return o.$$parserValid||(_(o.$validators,(function(t,e){s(e,null)})),_(o.$asyncValidators,(function(t,e){s(e,null)}))),s(t,o.$$parserValid),o.$$parserValid;s(t,null);return!0})()?!function(){var n=!0;if(_(o.$validators,(function(r,i){var a=Boolean(r(t,e));n=n&&a,s(i,a)})),!n)return _(o.$asyncValidators,(function(t,e){s(e,null)})),!1;return!0}()?l(!1):(r=[],i=!0,_(o.$asyncValidators,(function(n,a){var o=n(t,e);if(!J(o))throw Xa("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",o);s(a,void 0),r.push(o.then((function(){s(a,!0)}),(function(){i=!1,s(a,!1)})))})),r.length?o.$$q.all(r).then((function(){l(i)}),I):l(!0)):l(!1);function s(t,e){a===o.$$currentValidationRunId&&o.$setValidity(t,e)}function l(t){a===o.$$currentValidationRunId&&n(t)}},$commitViewValue:function(){var t=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==t||""===t&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(t),this.$$lastCommittedViewValue=t,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){var t=this.$$lastCommittedViewValue,e=this;if(this.$$parserValid=!N(t)||void 0,this.$setValidity(this.$$parserName,null),this.$$parserName="parse",this.$$parserValid)for(var n=0;n<this.$parsers.length;n++)if(N(t=this.$parsers[n](t))){this.$$parserValid=!1;break}O(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var r=this.$modelValue,i=this.$options.getOption("allowInvalid");function a(){e.$modelValue!==r&&e.$$writeModelToScope()}this.$$rawModelValue=t,i&&(this.$modelValue=t,a()),this.$$runValidators(t,this.$$lastCommittedViewValue,(function(n){i||(e.$modelValue=n?t:void 0,a())}))},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),_(this.$viewChangeListeners,(function(t){try{t()}catch(t){this.$$exceptionHandler(t)}}),this)},$setViewValue:function(t,e){this.$viewValue=t,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(e)},$$debounceViewValueCommit:function(t){var e=this.$options.getOption("debounce");H(e[t])?e=e[t]:H(e.default)&&-1===this.$options.getOption("updateOn").indexOf(t)?e=e.default:H(e["*"])&&(e=e["*"]),this.$$timeout.cancel(this.$$pendingDebounce);var n=this;e>0?this.$$pendingDebounce=this.$$timeout((function(){n.$commitViewValue()}),e):this.$$rootScope.$$phase?this.$commitViewValue():this.$$scope.$apply((function(){n.$commitViewValue()}))},$overrideModelOptions:function(t){this.$options=this.$options.createChild(t),this.$$setUpdateOnEvents()},$processModelValue:function(){var t=this.$$format();this.$viewValue!==t&&(this.$$updateEmptyClasses(t),this.$viewValue=this.$$lastCommittedViewValue=t,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,I))},$$format:function(){for(var t=this.$formatters,e=t.length,n=this.$modelValue;e--;)n=t[e](n);return n},$$setModelValue:function(t){this.$modelValue=this.$$rawModelValue=t,this.$$parserValid=void 0,this.$processModelValue()},$$setUpdateOnEvents:function(){this.$$updateEvents&&this.$$element.off(this.$$updateEvents,this.$$updateEventHandler),this.$$updateEvents=this.$options.getOption("updateOn"),this.$$updateEvents&&this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)},$$updateEventHandler:function(t){this.$$debounceViewValueCommit(t&&t.type)}},Xi({clazz:Za,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]}});var Ja,Qa=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Za,priority:1,compile:function(e){return e.addClass(Ga).addClass(za).addClass(Va),{pre:function(t,e,n,r){var i=r[0],a=r[1]||i.$$parentForm,o=r[2];o&&(i.$options=o.$options),i.$$initGetterSetters(),a.$addControl(i),n.$observe("name",(function(t){i.$name!==t&&i.$$parentForm.$$renameControl(i,t)})),t.$on("$destroy",(function(){i.$$parentForm.$removeControl(i)}))},post:function(e,n,r,i){var a=i[0];function o(){a.$setTouched()}a.$$setUpdateOnEvents(),n.on("blur",(function(){a.$touched||(t.$$phase?e.$evalAsync(o):e.$apply(o))}))}}}}}],to=/(\s+|^)default(\s+|$)/;function eo(t){this.$$options=t}eo.prototype={getOption:function(t){return this.$$options[t]},createChild:function(t){var e=!1;return _(t=D({},t),(function(n,r){"$inherit"===n?"*"===r?e=!0:(t[r]=this.$$options[r],"updateOn"===r&&(t.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===r&&(t.updateOnDefault=!1,t[r]=tt(n.replace(to,(function(){return t.updateOnDefault=!0," "}))))}),this),e&&(delete t["*"],ro(t,this.$$options)),ro(t,Ja.$$options),new eo(t)}},Ja=new eo({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var no=function(){function t(t,e){this.$$attrs=t,this.$$scope=e}return t.$inject=["$attrs","$scope"],t.prototype={$onInit:function(){var t=this.parentCtrl?this.parentCtrl.$options:Ja,e=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=t.createChild(e)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:t}};function ro(t,e){_(e,(function(e,n){U(t[n])||(t[n]=e)}))}var io=Ui({terminal:!0,priority:1e3}),ao=i("ngOptions"),oo=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,so=["$compile","$document","$parse",function(e,n,r){var i=t.document.createElement("option"),a=t.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(t,e,n,r){r[0].registerOption=I},post:function(t,s,l,u){for(var c=u[0],d=u[1],h=l.multiple,f=0,p=s.children(),g=p.length;f<g;f++)if(""===p[f].value){c.hasEmptyOption=!0,c.emptyOption=p.eq(f);break}s.empty();var v,m=!!c.emptyOption;o(i.cloneNode(!1)).val("?");var y=function(t,e,n){var i=t.match(oo);if(!i)throw ao("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,Et(e));var a=i[5]||i[7],o=i[6],s=/ as /.test(i[0])&&i[1],l=i[9],u=r(i[2]?i[1]:a),c=s&&r(s)||u,d=l&&r(l),h=l?function(t,e){return d(n,e)}:function(t){return Ue(t)},f=function(t,e){return h(t,b(t,e))},p=r(i[2]||i[1]),g=r(i[3]||""),v=r(i[4]||""),m=r(i[8]),y={},b=o?function(t,e){return y[o]=e,y[a]=t,y}:function(t){return y[a]=t,y};function S(t,e,n,r,i){this.selectValue=t,this.viewValue=e,this.label=n,this.group=r,this.disabled=i}function E(t){var e;if(!o&&T(t))e=t;else for(var n in e=[],t)t.hasOwnProperty(n)&&"$"!==n.charAt(0)&&e.push(n);return e}return{trackBy:l,getTrackByValue:f,getWatchables:r(m,(function(t){for(var e=[],r=E(t=t||[]),a=r.length,o=0;o<a;o++){var s=t===r?o:r[o],l=t[s],u=b(l,s),c=h(l,u);if(e.push(c),i[2]||i[1]){var d=p(n,u);e.push(d)}if(i[4]){var f=v(n,u);e.push(f)}}return e})),getOptions:function(){for(var t=[],e={},r=m(n)||[],i=E(r),a=i.length,o=0;o<a;o++){var s=r===i?o:i[o],u=r[s],d=b(u,s),y=c(n,d),T=h(y,d),_=new S(T,y,p(n,d),g(n,d),v(n,d));t.push(_),e[T]=_}return{items:t,selectValueMap:e,getOptionFromViewValue:function(t){return e[f(t)]},getViewValueFromOption:function(t){return l?ot(t.viewValue):t.viewValue}}}}}(l.ngOptions,s,t),b=n[0].createDocumentFragment();function S(t,e){var n=i.cloneNode(!1);e.appendChild(n),function(t,e){t.element=e,e.disabled=t.disabled,t.label!==e.label&&(e.label=t.label,e.textContent=t.label);e.value=t.selectValue}(t,n)}function E(t){var e=v.getOptionFromViewValue(t),n=e&&e.element;return n&&!n.selected&&(n.selected=!0),e}c.generateUnknownOptionValue=function(t){return"?"},h?(c.writeValue=function(t){if(v){var e=t&&t.map(E)||[];v.items.forEach((function(t){t.element.selected&&!it(e,t)&&(t.element.selected=!1)}))}},c.readValue=function(){var t=s.val()||[],e=[];return _(t,(function(t){var n=v.selectValueMap[t];n&&!n.disabled&&e.push(v.getViewValueFromOption(n))})),e},y.trackBy&&t.$watchCollection((function(){if(W(d.$viewValue))return d.$viewValue.map((function(t){return y.getTrackByValue(t)}))}),(function(){d.$render()}))):(c.writeValue=function(t){if(v){var e=s[0].options[s[0].selectedIndex],n=v.getOptionFromViewValue(t);e&&e.removeAttribute("selected"),n?(s[0].value!==n.selectValue&&(c.removeUnknownOption(),s[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):c.selectUnknownOrEmptyOption(t)}},c.readValue=function(){var t=v.selectValueMap[s.val()];return t&&!t.disabled?(c.unselectEmptyOption(),c.removeUnknownOption(),v.getViewValueFromOption(t)):null},y.trackBy&&t.$watch((function(){return y.getTrackByValue(d.$viewValue)}),(function(){d.$render()}))),m&&(e(c.emptyOption)(t),s.prepend(c.emptyOption),8===c.emptyOption[0].nodeType?(c.hasEmptyOption=!1,c.registerOption=function(t,e){""===e.val()&&(c.hasEmptyOption=!0,c.emptyOption=e,c.emptyOption.removeClass("ng-scope"),d.$render(),e.on("$destroy",(function(){var t=c.$isEmptyOptionSelected();c.hasEmptyOption=!1,c.emptyOption=void 0,t&&d.$render()})))}):c.emptyOption.removeClass("ng-scope")),t.$watchCollection(y.getWatchables,(function(){var t=v&&c.readValue();if(v)for(var e=v.items.length-1;e>=0;e--){var n=v.items[e];U(n.group)?De(n.element.parentNode):De(n.element)}v=y.getOptions();var r={};if(v.items.forEach((function(t){var e;U(t.group)?((e=r[t.group])||(e=a.cloneNode(!1),b.appendChild(e),e.label=null===t.group?"null":t.group,r[t.group]=e),S(t,e)):S(t,b)})),s[0].appendChild(b),d.$render(),!d.$isEmpty(t)){var i=c.readValue();(y.trackBy||h?lt(t,i):t===i)||(d.$setViewValue(i),d.$render())}}))}}}}],lo=["$locale","$interpolate","$log",function(t,e,n){var r=/{}/g,i=/^when(Minus)?(.+)$/;return{link:function(a,o,s){var l,u=s.count,c=s.$attr.when&&o.attr(s.$attr.when),d=s.offset||0,f=a.$eval(c)||{},p={},g=e.startSymbol(),v=e.endSymbol(),m=g+u+"-"+d+v,y=S.noop;function b(t){o.text(t||"")}_(s,(function(t,e){var n=i.exec(e);if(n){var r=(n[1]?"-":"")+h(n[2]);f[r]=o.attr(s.$attr[e])}})),_(f,(function(t,n){p[n]=e(t.replace(r,m))})),a.$watch(u,(function(e){var r=parseFloat(e),i=O(r);if(i||r in f||(r=t.pluralCat(r-d)),!(r===l||i&&O(l))){y();var o=p[r];N(o)?(null!=e&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+c),y=I,b()):y=a.$watch(o,b),l=r}}))}}}],uo=i("ngRef"),co=["$parse",function(t){return{priority:-1,restrict:"A",compile:function(e,n){var r=En(rt(e)),i=t(n.ngRef),a=i.assign||function(){throw uo("nonassign",'Expression in ngRef="{0}" is non-assignable!',n.ngRef)};return function(t,e,o){var s;if(o.hasOwnProperty("ngRefRead")){if("$element"===o.ngRefRead)s=e;else if(!(s=e.data("$"+o.ngRefRead+"Controller")))throw uo("noctrl",'The controller for ngRefRead="{0}" could not be found on ngRef="{1}"',o.ngRefRead,n.ngRef)}else s=e.data("$"+r+"Controller");a(t,s=s||e),e.on("$destroy",(function(){i(t)===s&&a(t,null)}))}}}}],ho=["$parse","$animate","$compile",function(t,e,n){var r="$$NG_REMOVED",a=i("ngRepeat"),o=function(t,e,n,r,i,a,o){t[n]=r,i&&(t[i]=a),t.$index=e,t.$first=0===e,t.$last=e===o-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0==(1&e))},s=function(t){return t.clone[0]},l=function(t){return t.clone[t.clone.length-1]},u=function(t,e,n){return Ue(n)},c=function(t,e){return e};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(i,h){var f=h.ngRepeat,p=n.$$createComment("end ngRepeat",f),g=f.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!g)throw a("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",f);var v=g[1],m=g[2],y=g[3],b=g[4];if(!(g=v.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw a("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",v);var S,E=g[3]||g[1],x=g[2];if(y&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(y)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(y)))throw a("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",y);if(b){var w={$id:Ue},k=t(b);S=function(t,e,n,r){return x&&(w[x]=e),w[E]=n,w.$index=r,k(t,w)}}return function(t,n,i,h,g){var v=Bt();t.$watchCollection(m,(function(i){var h,m,b,k,A,C,D,L,$,O,M,I,R=n[0],P=Bt();if(y&&(t[y]=i),T(i))$=i,L=S||u;else for(var F in L=S||c,$=[],i)d.call(i,F)&&"$"!==F.charAt(0)&&$.push(F);for(k=$.length,M=new Array(k),h=0;h<k;h++)if(A=i===$?h:$[h],C=i[A],D=L(t,A,C,h),v[D])O=v[D],delete v[D],P[D]=O,M[h]=O;else{if(P[D])throw _(M,(function(t){t&&t.scope&&(v[t.id]=t)})),a("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",f,D,C);M[h]={id:D,scope:void 0,clone:void 0},P[D]=!0}for(var N in w&&(w[E]=void 0),v){if(I=Ut((O=v[N]).clone),e.leave(I),I[0].parentNode)for(h=0,m=I.length;h<m;h++)I[h][r]=!0;O.scope.$destroy()}for(h=0;h<k;h++)if(A=i===$?h:$[h],C=i[A],(O=M[h]).scope){b=R;do{b=b.nextSibling}while(b&&b[r]);s(O)!==b&&e.move(Ut(O.clone),null,R),R=l(O),o(O.scope,h,E,C,x,A,k)}else g((function(t,n){O.scope=n;var r=p.cloneNode(!1);t[t.length++]=r,e.enter(t,null,R),R=r,O.clone=t,P[O.id]=O,o(O.scope,h,E,C,x,A,k)}));v=P}))}}}}],fo="ng-hide",po="ng-hide-animate",go=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngShow,(function(e){t[e?"removeClass":"addClass"](n,fo,{tempClasses:po})}))}}}],vo=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngHide,(function(e){t[e?"addClass":"removeClass"](n,fo,{tempClasses:po})}))}}}],mo=Ui((function(t,e,n){t.$watchCollection(n.ngStyle,(function(t,n){n&&t!==n&&_(n,(function(t,n){e.css(n,"")})),t&&e.css(t)}))})),yo=["$animate","$compile",function(t,e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,i,a){var o=i.ngSwitch||i.on,s=[],l=[],u=[],c=[],d=function(t,e){return function(n){!1!==n&&t.splice(e,1)}};n.$watch(o,(function(n){for(var r,i;u.length;)t.cancel(u.pop());for(r=0,i=c.length;r<i;++r){var o=Ut(l[r].clone);c[r].$destroy(),(u[r]=t.leave(o)).done(d(u,r))}l.length=0,c.length=0,(s=a.cases["!"+n]||a.cases["?"])&&_(s,(function(n){n.transclude((function(r,i){c.push(i);var a=n.element;r[r.length++]=e.$$createComment("end ngSwitchWhen");var o={clone:r};l.push(o),t.enter(r,a.parent(),a)}))}))}))}}}],bo=Ui({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){_(n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter((function(t,e,n){return n[e-1]!==t})),(function(t){r.cases["!"+t]=r.cases["!"+t]||[],r.cases["!"+t].push({transclude:i,element:e})}))}}),So=Ui({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:e})}}),Eo=i("ngTransclude"),To=["$compile",function(t){return{restrict:"EAC",compile:function(e){var n=t(e.contents());return e.empty(),function(t,e,r,i,a){if(!a)throw Eo("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",Et(e));r.ngTransclude===r.$attr.ngTransclude&&(r.ngTransclude="");var o=r.ngTransclude||r.ngTranscludeSlot;function s(){n(t,(function(t){e.append(t)}))}a((function(t,n){t.length&&function(t){for(var e=0,n=t.length;e<n;e++){var r=t[e];if(r.nodeType!==Vt||r.nodeValue.trim())return!0}}(t)?e.append(t):(s(),n.$destroy())}),null,o),o&&!a.isSlotFilled(o)&&s()}}}}],_o=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,n){if("text/ng-template"===n.type){var r=n.id,i=e[0].text;t.put(r,i)}}}}],xo={$setViewValue:I,$render:I};function wo(t,e){t.prop("selected",e),t.attr("selected",e)}var ko=["$element","$scope",function(e,n){var r=this,i=new Ve;r.selectValueMap={},r.ngModelCtrl=xo,r.multiple=!1,r.unknownOption=o(t.document.createElement("option")),r.hasEmptyOption=!1,r.emptyOption=void 0,r.renderUnknownOption=function(t){var n=r.generateUnknownOptionValue(t);r.unknownOption.val(n),e.prepend(r.unknownOption),wo(r.unknownOption,!0),e.val(n)},r.updateUnknownOption=function(t){var n=r.generateUnknownOptionValue(t);r.unknownOption.val(n),wo(r.unknownOption,!0),e.val(n)},r.generateUnknownOptionValue=function(t){return"? "+Ue(t)+" ?"},r.removeUnknownOption=function(){r.unknownOption.parent()&&r.unknownOption.remove()},r.selectEmptyOption=function(){r.emptyOption&&(e.val(""),wo(r.emptyOption,!0))},r.unselectEmptyOption=function(){r.hasEmptyOption&&wo(r.emptyOption,!1)},n.$on("$destroy",(function(){r.renderUnknownOption=I})),r.readValue=function(){var t=e.val(),n=t in r.selectValueMap?r.selectValueMap[t]:t;return r.hasOption(n)?n:null},r.writeValue=function(t){var n=e[0].options[e[0].selectedIndex];if(n&&wo(o(n),!1),r.hasOption(t)){r.removeUnknownOption();var i=Ue(t);e.val(i in r.selectValueMap?i:t);var a=e[0].options[e[0].selectedIndex];wo(o(a),!0)}else r.selectUnknownOrEmptyOption(t)},r.addOption=function(t,e){if(8!==e[0].nodeType){Nt(t,'"option value"'),""===t&&(r.hasEmptyOption=!0,r.emptyOption=e);var n=i.get(t)||0;i.set(t,n+1),s()}},r.removeOption=function(t){var e=i.get(t);e&&(1===e?(i.delete(t),""===t&&(r.hasEmptyOption=!1,r.emptyOption=void 0)):i.set(t,e-1))},r.hasOption=function(t){return!!i.get(t)},r.$hasEmptyOption=function(){return r.hasEmptyOption},r.$isUnknownOptionSelected=function(){return e[0].options[0]===r.unknownOption[0]},r.$isEmptyOptionSelected=function(){return r.hasEmptyOption&&e[0].options[e[0].selectedIndex]===r.emptyOption[0]},r.selectUnknownOrEmptyOption=function(t){null==t&&r.emptyOption?(r.removeUnknownOption(),r.selectEmptyOption()):r.unknownOption.parent().length?r.updateUnknownOption(t):r.renderUnknownOption(t)};var a=!1;function s(){a||(a=!0,n.$$postDigest((function(){a=!1,r.ngModelCtrl.$render()})))}var l=!1;function u(t){l||(l=!0,n.$$postDigest((function(){n.$$destroyed||(l=!1,r.ngModelCtrl.$setViewValue(r.readValue()),t&&r.ngModelCtrl.$render())})))}r.registerOption=function(t,e,n,i,a){var o,l;n.$attr.ngValue?n.$observe("value",(function(t){var n,i=e.prop("selected");U(l)&&(r.removeOption(o),delete r.selectValueMap[l],n=!0),l=Ue(t),o=t,r.selectValueMap[l]=t,r.addOption(t,e),e.attr("value",l),n&&i&&u()})):i?n.$observe("value",(function(t){var n;r.readValue();var i=e.prop("selected");U(o)&&(r.removeOption(o),n=!0),o=t,r.addOption(t,e),n&&i&&u()})):a?t.$watch(a,(function(t,i){n.$set("value",t);var a=e.prop("selected");i!==t&&r.removeOption(i),r.addOption(t,e),i&&a&&u()})):r.addOption(n.value,e);n.$observe("disabled",(function(t){("true"===t||t&&e.prop("selected"))&&(r.multiple?u(!0):(r.ngModelCtrl.$setViewValue(null),r.ngModelCtrl.$render()))})),e.on("$destroy",(function(){var t=r.readValue(),e=n.value;r.removeOption(e),s(),(r.multiple&&t&&-1!==t.indexOf(e)||t===e)&&u(!0)}))}}],Ao=function(){return{restrict:"E",require:["select","?ngModel"],controller:ko,priority:1,link:{pre:function(t,e,n,r){var i=r[0],a=r[1];if(!a)return void(i.registerOption=I);if(i.ngModelCtrl=a,e.on("change",(function(){i.removeUnknownOption(),t.$apply((function(){a.$setViewValue(i.readValue())}))})),n.multiple){i.multiple=!0,i.readValue=function(){var t=[];return _(e.find("option"),(function(e){if(e.selected&&!e.disabled){var n=e.value;t.push(n in i.selectValueMap?i.selectValueMap[n]:n)}})),t},i.writeValue=function(t){_(e.find("option"),(function(e){var n=!!t&&(it(t,e.value)||it(t,i.selectValueMap[e.value]));n!==e.selected&&wo(o(e),n)}))};var s,l=NaN;t.$watch((function(){l!==a.$viewValue||lt(s,a.$viewValue)||(s=Ht(a.$viewValue),a.$render()),l=a.$viewValue})),a.$isEmpty=function(t){return!t||0===t.length}}},post:function(t,e,n,r){var i=r[1];if(!i)return;var a=r[0];i.$render=function(){a.writeValue(i.$viewValue)}}}}},Co=["$interpolate",function(t){return{restrict:"E",priority:100,compile:function(e,n){var r,i;return U(n.ngValue)||(U(n.value)?r=t(n.value,!0):(i=t(e.text(),!0))||n.$set("value",e.text())),function(t,e,n){var a="$selectController",o=e.parent(),s=o.data(a)||o.parent().data(a);s&&s.registerOption(t,e,n,r,i)}}}}],Do=["$parse",function(t){return{restrict:"A",require:"?ngModel",link:function(e,n,r,i){if(i){var a=r.hasOwnProperty("required")||t(r.ngRequired)(e);r.ngRequired||(r.required=!0),i.$validators.required=function(t,e){return!a||!i.$isEmpty(e)},r.$observe("required",(function(t){a!==t&&(a=t,i.$validate())}))}}}}],Lo=["$parse",function(t){return{restrict:"A",require:"?ngModel",compile:function(e,n){var r,i;return n.ngPattern&&(r=n.ngPattern,i="/"===n.ngPattern.charAt(0)&&u.test(n.ngPattern)?function(){return n.ngPattern}:t(n.ngPattern)),function(t,e,n,a){if(a){var o=n.pattern;n.ngPattern?o=i(t):r=n.pattern;var s=Mo(o,r,e);n.$observe("pattern",(function(t){var n=s;s=Mo(t,r,e),(n&&n.toString())!==(s&&s.toString())&&a.$validate()})),a.$validators.pattern=function(t,e){return a.$isEmpty(e)||N(s)||s.test(e)}}}}}}],$o=["$parse",function(t){return{restrict:"A",require:"?ngModel",link:function(e,n,r,i){if(i){var a=r.maxlength||t(r.ngMaxlength)(e),o=Io(a);r.$observe("maxlength",(function(t){a!==t&&(o=Io(t),a=t,i.$validate())})),i.$validators.maxlength=function(t,e){return o<0||i.$isEmpty(e)||e.length<=o}}}}}],Oo=["$parse",function(t){return{restrict:"A",require:"?ngModel",link:function(e,n,r,i){if(i){var a=r.minlength||t(r.ngMinlength)(e),o=Io(a)||-1;r.$observe("minlength",(function(t){a!==t&&(o=Io(t)||-1,a=t,i.$validate())})),i.$validators.minlength=function(t,e){return i.$isEmpty(e)||e.length>=o}}}}}];function Mo(t,e,n){if(t){if(V(t)&&(t=new RegExp("^"+t+"$")),!t.test)throw i("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",e,t,Et(n));return t}}function Io(t){var e=$(t);return O(e)?-1:e}t.angular.bootstrap?t.console&&console.log("WARNING: Tried to load AngularJS more than once."):(!function(){var e;if(!It){var n=ct();(s=N(n)?t.jQuery:n?t[n]:void 0)&&s.fn.on?(o=s,D(s.fn,{scope:$e.scope,isolateScope:$e.isolateScope,controller:$e.controller,injector:$e.injector,inheritedData:$e.inheritedData})):o=fe,e=o.cleanData,o.cleanData=function(t){for(var n,r,i=0;null!=(r=t[i]);i++)(n=(o._data(r)||{}).events)&&n.$destroy&&o(r).triggerHandler("$destroy");e(t)},S.element=o,It=!0}}(),function(e){D(e,{errorHandlingConfig:n,bootstrap:Dt,copy:ot,extend:D,merge:L,equals:lt,element:o,forEach:_,injector:Je,noop:I,bind:ft,toJson:gt,fromJson:vt,identity:R,isUndefined:N,isDefined:U,isString:V,isFunction:Y,isObject:B,isNumber:H,isElement:nt,isArray:W,version:Wt,isDate:G,callbacks:{$$counter:0},getTestability:$t,reloadWithDebugInfo:Lt,UNSAFE_restoreLegacyJqLiteXHTMLReplacement:Rt,$$minErr:i,$$csp:ut,$$encodeUriSegment:xt,$$encodeUriQuery:wt,$$lowercase:h,$$stringify:jt,$$uppercase:f}),(l=function(t){var e=i("$injector"),n=i("ng");function r(t,e,n){return t[e]||(t[e]=n())}var a=r(t,"angular",Object);return a.$$minErr=a.$$minErr||i,r(a,"module",(function(){var t={};return function(i,a,o){var s={};return function(t,e){if("hasOwnProperty"===t)throw n("badname","hasOwnProperty is not a valid {0} name","module")}(i),a&&t.hasOwnProperty(i)&&(t[i]=null),r(t,i,(function(){if(!a)throw e("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",i);var t=[],r=[],l=[],u=d("$injector","invoke","push",r),c={_invokeQueue:t,_configBlocks:r,_runBlocks:l,info:function(t){if(U(t)){if(!B(t))throw n("aobj","Argument '{0}' must be an object","value");return s=t,this}return s},requires:a,name:i,provider:h("$provide","provider"),factory:h("$provide","factory"),service:h("$provide","service"),value:d("$provide","value"),constant:d("$provide","constant","unshift"),decorator:h("$provide","decorator",r),animation:h("$animateProvider","register"),filter:h("$filterProvider","register"),controller:h("$controllerProvider","register"),directive:h("$compileProvider","directive"),component:h("$compileProvider","component"),config:u,run:function(t){return l.push(t),this}};return o&&u(o),c;function d(e,n,r,i){return i||(i=t),function(){return i[r||"push"]([e,n,arguments]),c}}function h(e,n,r){return r||(r=t),function(t,a){return a&&Y(a)&&(a.$$moduleName=i),r.push([e,n,arguments]),c}}}))}}))}(t))("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:Wr}),t.provider("$compile",mn).directive({a:Bi,input:Sa,textarea:Sa,form:Yi,script:_o,select:Ao,option:Co,ngBind:xa,ngBindHtml:ka,ngBindTemplate:wa,ngClass:Da,ngClassEven:$a,ngClassOdd:La,ngCloak:Oa,ngController:Ma,ngForm:qi,ngHide:vo,ngIf:Fa,ngInclude:Na,ngInit:Ba,ngNonBindable:io,ngPluralize:lo,ngRef:co,ngRepeat:ho,ngShow:go,ngStyle:mo,ngSwitch:yo,ngSwitchWhen:bo,ngSwitchDefault:So,ngOptions:so,ngTransclude:To,ngModel:Qa,ngList:ja,ngChange:Aa,pattern:Lo,ngPattern:Lo,required:Do,ngRequired:Do,minlength:Oo,ngMinlength:Oo,maxlength:$o,ngMaxlength:$o,ngValue:_a,ngModelOptions:no}).directive({ngInclude:Ua,input:Ea}).directive(ji).directive(Ia),t.provider({$anchorScroll:Qe,$animate:sn,$animateCss:cn,$$animateJs:an,$$animateQueue:on,$$AnimateRunner:un,$$animateAsyncRun:ln,$browser:hn,$cacheFactory:fn,$controller:An,$document:Cn,$$isDocumentHidden:Dn,$exceptionHandler:Ln,$filter:vi,$$forceReflow:$n,$interpolate:Xn,$interval:Jn,$$intervalFactory:Qn,$http:zn,$httpParamSerializer:Un,$httpParamSerializerJQLike:Bn,$httpBackend:qn,$xhrFactory:Yn,$jsonpCallbacks:tr,$location:mr,$log:yr,$parse:Pr,$rootScope:Gr,$q:Fr,$$q:Nr,$sce:Jr,$sceDelegate:Zr,$sniffer:Qr,$$taskTrackerFactory:ti,$templateCache:pn,$templateRequest:ri,$$testability:ii,$timeout:oi,$window:fi,$$rAF:Hr,$$jqLite:Ne,$$Map:He,$$cookieReader:gi})}]).info({angularVersion:"1.8.2"})}(S),S.module("ngLocale",[],["$provide",function(t){var e="one",n="other";t.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(t,r){var i=0|t,a=function(t,e){var n=e;void 0===n&&(n=Math.min(function(t){var e=(t+="").indexOf(".");return-1==e?0:t.length-e-1}(t),3));var r=Math.pow(10,n);return{v:n,f:(t*r|0)%r}}(t,r);return 1==i&&0==a.v?e:n}})}]),o((function(){Ct(t.document,Dt)})))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend(window.angular.element("<style>").text('@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}'));var Ed,Td=angular,_d={exports:{}};(Ed=_d).exports=function(){var t,e;function r(){return t.apply(null,arguments)}function i(e){t=e}function a(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function o(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function s(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function l(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(s(t,e))return!1;return!0}function u(t){return void 0===t}function c(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function d(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function h(t,e){var n,r=[];for(n=0;n<t.length;++n)r.push(e(t[n],n));return r}function f(t,e){for(var n in e)s(e,n)&&(t[n]=e[n]);return s(e,"toString")&&(t.toString=e.toString),s(e,"valueOf")&&(t.valueOf=e.valueOf),t}function p(t,e,n,r){return Yn(t,e,n,r,!0).utc()}function g(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function v(t){return null==t._pf&&(t._pf=g()),t._pf}function m(t){if(null==t._isValid){var n=v(t),r=e.call(n.parsedDateParts,(function(t){return null!=t})),i=!isNaN(t._d.getTime())&&n.overflow<0&&!n.empty&&!n.invalidEra&&!n.invalidMonth&&!n.invalidWeekday&&!n.weekdayMismatch&&!n.nullInput&&!n.invalidFormat&&!n.userInvalidated&&(!n.meridiem||n.meridiem&&r);if(t._strict&&(i=i&&0===n.charsLeftOver&&0===n.unusedTokens.length&&void 0===n.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return i;t._isValid=i}return t._isValid}function y(t){var e=p(NaN);return null!=t?f(v(e),t):v(e).userInvalidated=!0,e}e=Array.prototype.some?Array.prototype.some:function(t){var e,n=Object(this),r=n.length>>>0;for(e=0;e<r;e++)if(e in n&&t.call(this,n[e],e,n))return!0;return!1};var b=r.momentProperties=[],S=!1;function E(t,e){var n,r,i;if(u(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),u(e._i)||(t._i=e._i),u(e._f)||(t._f=e._f),u(e._l)||(t._l=e._l),u(e._strict)||(t._strict=e._strict),u(e._tzm)||(t._tzm=e._tzm),u(e._isUTC)||(t._isUTC=e._isUTC),u(e._offset)||(t._offset=e._offset),u(e._pf)||(t._pf=v(e)),u(e._locale)||(t._locale=e._locale),b.length>0)for(n=0;n<b.length;n++)u(i=e[r=b[n]])||(t[r]=i);return t}function T(t){E(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===S&&(S=!0,r.updateOffset(this),S=!1)}function _(t){return t instanceof T||null!=t&&null!=t._isAMomentObject}function x(t){!1===r.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function w(t,e){var n=!0;return f((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,t),n){var i,a,o,l=[];for(a=0;a<arguments.length;a++){if(i="","object"==typeof arguments[a]){for(o in i+="\n["+a+"] ",arguments[0])s(arguments[0],o)&&(i+=o+": "+arguments[0][o]+", ");i=i.slice(0,-2)}else i=arguments[a];l.push(i)}x(t+"\nArguments: "+Array.prototype.slice.call(l).join("")+"\n"+(new Error).stack),n=!1}return e.apply(this,arguments)}),e)}var k,A={};function C(t,e){null!=r.deprecationHandler&&r.deprecationHandler(t,e),A[t]||(x(e),A[t]=!0)}function D(t){return"undefined"!=typeof Function&&t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function L(t){var e,n;for(n in t)s(t,n)&&(D(e=t[n])?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function $(t,e){var n,r=f({},t);for(n in e)s(e,n)&&(o(t[n])&&o(e[n])?(r[n]={},f(r[n],t[n]),f(r[n],e[n])):null!=e[n]?r[n]=e[n]:delete r[n]);for(n in t)s(t,n)&&!s(e,n)&&o(t[n])&&(r[n]=f({},r[n]));return r}function O(t){null!=t&&this.set(t)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,k=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)s(t,e)&&n.push(e);return n};var M={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function I(t,e,n){var r=this._calendar[t]||this._calendar.sameElse;return D(r)?r.call(e,n):r}function R(t,e,n){var r=""+Math.abs(t),i=e-r.length;return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var P=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,F=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,N={},U={};function B(t,e,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),t&&(U[t]=i),e&&(U[e[0]]=function(){return R(i.apply(this,arguments),e[1],e[2])}),n&&(U[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function j(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function V(t){var e,n,r=t.match(P);for(e=0,n=r.length;e<n;e++)U[r[e]]?r[e]=U[r[e]]:r[e]=j(r[e]);return function(e){var i,a="";for(i=0;i<n;i++)a+=D(r[i])?r[i].call(e,t):r[i];return a}}function H(t,e){return t.isValid()?(e=G(e,t.localeData()),N[e]=N[e]||V(e),N[e](t)):t.localeData().invalidDate()}function G(t,e){var n=5;function r(t){return e.longDateFormat(t)||t}for(F.lastIndex=0;n>=0&&F.test(t);)t=t.replace(F,r),F.lastIndex=0,n-=1;return t}var W={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function z(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(P).map((function(t){return"MMMM"===t||"MM"===t||"DD"===t||"dddd"===t?t.slice(1):t})).join(""),this._longDateFormat[t])}var Y="Invalid date";function q(){return this._invalidDate}var K="%d",X=/\d{1,2}/;function Z(t){return this._ordinal.replace("%d",t)}var J={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Q(t,e,n,r){var i=this._relativeTime[n];return D(i)?i(t,e,n,r):i.replace(/%d/i,t)}function tt(t,e){var n=this._relativeTime[t>0?"future":"past"];return D(n)?n(e):n.replace(/%s/i,e)}var et={};function nt(t,e){var n=t.toLowerCase();et[n]=et[n+"s"]=et[e]=t}function rt(t){return"string"==typeof t?et[t]||et[t.toLowerCase()]:void 0}function it(t){var e,n,r={};for(n in t)s(t,n)&&(e=rt(n))&&(r[e]=t[n]);return r}var at={};function ot(t,e){at[t]=e}function st(t){var e,n=[];for(e in t)s(t,e)&&n.push({unit:e,priority:at[e]});return n.sort((function(t,e){return t.priority-e.priority})),n}function lt(t){return t%4==0&&t%100!=0||t%400==0}function ut(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function ct(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=ut(e)),n}function dt(t,e){return function(n){return null!=n?(ft(this,t,n),r.updateOffset(this,e),this):ht(this,t)}}function ht(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function ft(t,e,n){t.isValid()&&!isNaN(n)&&("FullYear"===e&&lt(t.year())&&1===t.month()&&29===t.date()?(n=ct(n),t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),Qt(n,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+e](n))}function pt(t){return D(this[t=rt(t)])?this[t]():this}function gt(t,e){if("object"==typeof t){var n,r=st(t=it(t));for(n=0;n<r.length;n++)this[r[n].unit](t[r[n].unit])}else if(D(this[t=rt(t)]))return this[t](e);return this}var vt,mt=/\d/,yt=/\d\d/,bt=/\d{3}/,St=/\d{4}/,Et=/[+-]?\d{6}/,Tt=/\d\d?/,_t=/\d\d\d\d?/,xt=/\d\d\d\d\d\d?/,wt=/\d{1,3}/,kt=/\d{1,4}/,At=/[+-]?\d{1,6}/,Ct=/\d+/,Dt=/[+-]?\d+/,Lt=/Z|[+-]\d\d:?\d\d/gi,$t=/Z|[+-]\d\d(?::?\d\d)?/gi,Ot=/[+-]?\d+(\.\d{1,3})?/,Mt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function It(t,e,n){vt[t]=D(e)?e:function(t,r){return t&&n?n:e}}function Rt(t,e){return s(vt,t)?vt[t](e._strict,e._locale):new RegExp(Pt(t))}function Pt(t){return Ft(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,n,r,i){return e||n||r||i})))}function Ft(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}vt={};var Nt={};function Ut(t,e){var n,r=e;for("string"==typeof t&&(t=[t]),c(e)&&(r=function(t,n){n[e]=ct(t)}),n=0;n<t.length;n++)Nt[t[n]]=r}function Bt(t,e){Ut(t,(function(t,n,r,i){r._w=r._w||{},e(t,r._w,r,i)}))}function jt(t,e,n){null!=e&&s(Nt,t)&&Nt[t](e,n._a,n,t)}var Vt,Ht=0,Gt=1,Wt=2,zt=3,Yt=4,qt=5,Kt=6,Xt=7,Zt=8;function Jt(t,e){return(t%e+e)%e}function Qt(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=Jt(e,12);return t+=(e-n)/12,1===n?lt(t)?29:28:31-n%7%2}Vt=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},B("M",["MM",2],"Mo",(function(){return this.month()+1})),B("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),B("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),nt("month","M"),ot("month",8),It("M",Tt),It("MM",Tt,yt),It("MMM",(function(t,e){return e.monthsShortRegex(t)})),It("MMMM",(function(t,e){return e.monthsRegex(t)})),Ut(["M","MM"],(function(t,e){e[Gt]=ct(t)-1})),Ut(["MMM","MMMM"],(function(t,e,n,r){var i=n._locale.monthsParse(t,r,n._strict);null!=i?e[Gt]=i:v(n).invalidMonth=t}));var te="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ee="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ne=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,re=Mt,ie=Mt;function ae(t,e){return t?a(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||ne).test(e)?"format":"standalone"][t.month()]:a(this._months)?this._months:this._months.standalone}function oe(t,e){return t?a(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[ne.test(e)?"format":"standalone"][t.month()]:a(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function se(t,e,n){var r,i,a,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)a=p([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(a,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(i=Vt.call(this._shortMonthsParse,o))?i:null:-1!==(i=Vt.call(this._longMonthsParse,o))?i:null:"MMM"===e?-1!==(i=Vt.call(this._shortMonthsParse,o))||-1!==(i=Vt.call(this._longMonthsParse,o))?i:null:-1!==(i=Vt.call(this._longMonthsParse,o))||-1!==(i=Vt.call(this._shortMonthsParse,o))?i:null}function le(t,e,n){var r,i,a;if(this._monthsParseExact)return se.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=p([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(a="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[r].test(t))return r;if(n&&"MMM"===e&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}}function ue(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=ct(e);else if(!c(e=t.localeData().monthsParse(e)))return t;return n=Math.min(t.date(),Qt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function ce(t){return null!=t?(ue(this,t),r.updateOffset(this,!0),this):ht(this,"Month")}function de(){return Qt(this.year(),this.month())}function he(t){return this._monthsParseExact?(s(this,"_monthsRegex")||pe.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=re),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function fe(t){return this._monthsParseExact?(s(this,"_monthsRegex")||pe.call(this),t?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=ie),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function pe(){function t(t,e){return e.length-t.length}var e,n,r=[],i=[],a=[];for(e=0;e<12;e++)n=p([2e3,e]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),a.push(this.months(n,"")),a.push(this.monthsShort(n,""));for(r.sort(t),i.sort(t),a.sort(t),e=0;e<12;e++)r[e]=Ft(r[e]),i[e]=Ft(i[e]);for(e=0;e<24;e++)a[e]=Ft(a[e]);this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function ge(t){return lt(t)?366:365}B("Y",0,0,(function(){var t=this.year();return t<=9999?R(t,4):"+"+t})),B(0,["YY",2],0,(function(){return this.year()%100})),B(0,["YYYY",4],0,"year"),B(0,["YYYYY",5],0,"year"),B(0,["YYYYYY",6,!0],0,"year"),nt("year","y"),ot("year",1),It("Y",Dt),It("YY",Tt,yt),It("YYYY",kt,St),It("YYYYY",At,Et),It("YYYYYY",At,Et),Ut(["YYYYY","YYYYYY"],Ht),Ut("YYYY",(function(t,e){e[Ht]=2===t.length?r.parseTwoDigitYear(t):ct(t)})),Ut("YY",(function(t,e){e[Ht]=r.parseTwoDigitYear(t)})),Ut("Y",(function(t,e){e[Ht]=parseInt(t,10)})),r.parseTwoDigitYear=function(t){return ct(t)+(ct(t)>68?1900:2e3)};var ve=dt("FullYear",!0);function me(){return lt(this.year())}function ye(t,e,n,r,i,a,o){var s;return t<100&&t>=0?(s=new Date(t+400,e,n,r,i,a,o),isFinite(s.getFullYear())&&s.setFullYear(t)):s=new Date(t,e,n,r,i,a,o),s}function be(t){var e,n;return t<100&&t>=0?((n=Array.prototype.slice.call(arguments))[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function Se(t,e,n){var r=7+e-n;return-(7+be(t,0,r).getUTCDay()-e)%7+r-1}function Ee(t,e,n,r,i){var a,o,s=1+7*(e-1)+(7+n-r)%7+Se(t,r,i);return s<=0?o=ge(a=t-1)+s:s>ge(t)?(a=t+1,o=s-ge(t)):(a=t,o=s),{year:a,dayOfYear:o}}function Te(t,e,n){var r,i,a=Se(t.year(),e,n),o=Math.floor((t.dayOfYear()-a-1)/7)+1;return o<1?r=o+_e(i=t.year()-1,e,n):o>_e(t.year(),e,n)?(r=o-_e(t.year(),e,n),i=t.year()+1):(i=t.year(),r=o),{week:r,year:i}}function _e(t,e,n){var r=Se(t,e,n),i=Se(t+1,e,n);return(ge(t)-r+i)/7}function xe(t){return Te(t,this._week.dow,this._week.doy).week}B("w",["ww",2],"wo","week"),B("W",["WW",2],"Wo","isoWeek"),nt("week","w"),nt("isoWeek","W"),ot("week",5),ot("isoWeek",5),It("w",Tt),It("ww",Tt,yt),It("W",Tt),It("WW",Tt,yt),Bt(["w","ww","W","WW"],(function(t,e,n,r){e[r.substr(0,1)]=ct(t)}));var we={dow:0,doy:6};function ke(){return this._week.dow}function Ae(){return this._week.doy}function Ce(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function De(t){var e=Te(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function Le(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}function $e(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Oe(t,e){return t.slice(e,7).concat(t.slice(0,e))}B("d",0,"do","day"),B("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),B("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),B("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),B("e",0,0,"weekday"),B("E",0,0,"isoWeekday"),nt("day","d"),nt("weekday","e"),nt("isoWeekday","E"),ot("day",11),ot("weekday",11),ot("isoWeekday",11),It("d",Tt),It("e",Tt),It("E",Tt),It("dd",(function(t,e){return e.weekdaysMinRegex(t)})),It("ddd",(function(t,e){return e.weekdaysShortRegex(t)})),It("dddd",(function(t,e){return e.weekdaysRegex(t)})),Bt(["dd","ddd","dddd"],(function(t,e,n,r){var i=n._locale.weekdaysParse(t,r,n._strict);null!=i?e.d=i:v(n).invalidWeekday=t})),Bt(["d","e","E"],(function(t,e,n,r){e[r]=ct(t)}));var Me="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ie="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Re="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Pe=Mt,Fe=Mt,Ne=Mt;function Ue(t,e){var n=a(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?Oe(n,this._week.dow):t?n[t.day()]:n}function Be(t){return!0===t?Oe(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function je(t){return!0===t?Oe(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Ve(t,e,n){var r,i,a,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)a=p([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(a,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(i=Vt.call(this._weekdaysParse,o))?i:null:"ddd"===e?-1!==(i=Vt.call(this._shortWeekdaysParse,o))?i:null:-1!==(i=Vt.call(this._minWeekdaysParse,o))?i:null:"dddd"===e?-1!==(i=Vt.call(this._weekdaysParse,o))||-1!==(i=Vt.call(this._shortWeekdaysParse,o))||-1!==(i=Vt.call(this._minWeekdaysParse,o))?i:null:"ddd"===e?-1!==(i=Vt.call(this._shortWeekdaysParse,o))||-1!==(i=Vt.call(this._weekdaysParse,o))||-1!==(i=Vt.call(this._minWeekdaysParse,o))?i:null:-1!==(i=Vt.call(this._minWeekdaysParse,o))||-1!==(i=Vt.call(this._weekdaysParse,o))||-1!==(i=Vt.call(this._shortWeekdaysParse,o))?i:null}function He(t,e,n){var r,i,a;if(this._weekdaysParseExact)return Ve.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=p([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(a="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(a.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[r].test(t))return r;if(n&&"ddd"===e&&this._shortWeekdaysParse[r].test(t))return r;if(n&&"dd"===e&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}}function Ge(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Le(t,this.localeData()),this.add(t-e,"d")):e}function We(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function ze(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=$e(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7}function Ye(t){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Xe.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=Pe),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function qe(t){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Xe.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Fe),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Ke(t){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Xe.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ne),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Xe(){function t(t,e){return e.length-t.length}var e,n,r,i,a,o=[],s=[],l=[],u=[];for(e=0;e<7;e++)n=p([2e3,1]).day(e),r=Ft(this.weekdaysMin(n,"")),i=Ft(this.weekdaysShort(n,"")),a=Ft(this.weekdays(n,"")),o.push(r),s.push(i),l.push(a),u.push(r),u.push(i),u.push(a);o.sort(t),s.sort(t),l.sort(t),u.sort(t),this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function Ze(){return this.hours()%12||12}function Je(){return this.hours()||24}function Qe(t,e){B(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function tn(t,e){return e._meridiemParse}function en(t){return"p"===(t+"").toLowerCase().charAt(0)}B("H",["HH",2],0,"hour"),B("h",["hh",2],0,Ze),B("k",["kk",2],0,Je),B("hmm",0,0,(function(){return""+Ze.apply(this)+R(this.minutes(),2)})),B("hmmss",0,0,(function(){return""+Ze.apply(this)+R(this.minutes(),2)+R(this.seconds(),2)})),B("Hmm",0,0,(function(){return""+this.hours()+R(this.minutes(),2)})),B("Hmmss",0,0,(function(){return""+this.hours()+R(this.minutes(),2)+R(this.seconds(),2)})),Qe("a",!0),Qe("A",!1),nt("hour","h"),ot("hour",13),It("a",tn),It("A",tn),It("H",Tt),It("h",Tt),It("k",Tt),It("HH",Tt,yt),It("hh",Tt,yt),It("kk",Tt,yt),It("hmm",_t),It("hmmss",xt),It("Hmm",_t),It("Hmmss",xt),Ut(["H","HH"],zt),Ut(["k","kk"],(function(t,e,n){var r=ct(t);e[zt]=24===r?0:r})),Ut(["a","A"],(function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t})),Ut(["h","hh"],(function(t,e,n){e[zt]=ct(t),v(n).bigHour=!0})),Ut("hmm",(function(t,e,n){var r=t.length-2;e[zt]=ct(t.substr(0,r)),e[Yt]=ct(t.substr(r)),v(n).bigHour=!0})),Ut("hmmss",(function(t,e,n){var r=t.length-4,i=t.length-2;e[zt]=ct(t.substr(0,r)),e[Yt]=ct(t.substr(r,2)),e[qt]=ct(t.substr(i)),v(n).bigHour=!0})),Ut("Hmm",(function(t,e,n){var r=t.length-2;e[zt]=ct(t.substr(0,r)),e[Yt]=ct(t.substr(r))})),Ut("Hmmss",(function(t,e,n){var r=t.length-4,i=t.length-2;e[zt]=ct(t.substr(0,r)),e[Yt]=ct(t.substr(r,2)),e[qt]=ct(t.substr(i))}));var nn=/[ap]\.?m?\.?/i,rn=dt("Hours",!0);function an(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}var on,sn={calendar:M,longDateFormat:W,invalidDate:Y,ordinal:K,dayOfMonthOrdinalParse:X,relativeTime:J,months:te,monthsShort:ee,week:we,weekdays:Me,weekdaysMin:Re,weekdaysShort:Ie,meridiemParse:nn},ln={},un={};function cn(t,e){var n,r=Math.min(t.length,e.length);for(n=0;n<r;n+=1)if(t[n]!==e[n])return n;return r}function dn(t){return t?t.toLowerCase().replace("_","-"):t}function hn(t){for(var e,n,r,i,a=0;a<t.length;){for(e=(i=dn(t[a]).split("-")).length,n=(n=dn(t[a+1]))?n.split("-"):null;e>0;){if(r=fn(i.slice(0,e).join("-")))return r;if(n&&n.length>=e&&cn(i,n)>=e-1)break;e--}a++}return on}function fn(t){var e=null;if(void 0===ln[t]&&Ed&&Ed.exports)try{e=on._abbr,n("./locale/"+t),pn(e)}catch(e){ln[t]=null}return ln[t]}function pn(t,e){var n;return t&&((n=u(e)?mn(t):gn(t,e))?on=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),on._abbr}function gn(t,e){if(null!==e){var n,r=sn;if(e.abbr=t,null!=ln[t])C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=ln[t]._config;else if(null!=e.parentLocale)if(null!=ln[e.parentLocale])r=ln[e.parentLocale]._config;else{if(null==(n=fn(e.parentLocale)))return un[e.parentLocale]||(un[e.parentLocale]=[]),un[e.parentLocale].push({name:t,config:e}),null;r=n._config}return ln[t]=new O($(r,e)),un[t]&&un[t].forEach((function(t){gn(t.name,t.config)})),pn(t),ln[t]}return delete ln[t],null}function vn(t,e){if(null!=e){var n,r,i=sn;null!=ln[t]&&null!=ln[t].parentLocale?ln[t].set($(ln[t]._config,e)):(null!=(r=fn(t))&&(i=r._config),e=$(i,e),null==r&&(e.abbr=t),(n=new O(e)).parentLocale=ln[t],ln[t]=n),pn(t)}else null!=ln[t]&&(null!=ln[t].parentLocale?(ln[t]=ln[t].parentLocale,t===pn()&&pn(t)):null!=ln[t]&&delete ln[t]);return ln[t]}function mn(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return on;if(!a(t)){if(e=fn(t))return e;t=[t]}return hn(t)}function yn(){return k(ln)}function bn(t){var e,n=t._a;return n&&-2===v(t).overflow&&(e=n[Gt]<0||n[Gt]>11?Gt:n[Wt]<1||n[Wt]>Qt(n[Ht],n[Gt])?Wt:n[zt]<0||n[zt]>24||24===n[zt]&&(0!==n[Yt]||0!==n[qt]||0!==n[Kt])?zt:n[Yt]<0||n[Yt]>59?Yt:n[qt]<0||n[qt]>59?qt:n[Kt]<0||n[Kt]>999?Kt:-1,v(t)._overflowDayOfYear&&(e<Ht||e>Wt)&&(e=Wt),v(t)._overflowWeeks&&-1===e&&(e=Xt),v(t)._overflowWeekday&&-1===e&&(e=Zt),v(t).overflow=e),t}var Sn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,En=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Tn=/Z|[+-]\d\d(?::?\d\d)?/,_n=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],xn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],wn=/^\/?Date\((-?\d+)/i,kn=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,An={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Cn(t){var e,n,r,i,a,o,s=t._i,l=Sn.exec(s)||En.exec(s);if(l){for(v(t).iso=!0,e=0,n=_n.length;e<n;e++)if(_n[e][1].exec(l[1])){i=_n[e][0],r=!1!==_n[e][2];break}if(null==i)return void(t._isValid=!1);if(l[3]){for(e=0,n=xn.length;e<n;e++)if(xn[e][1].exec(l[3])){a=(l[2]||" ")+xn[e][0];break}if(null==a)return void(t._isValid=!1)}if(!r&&null!=a)return void(t._isValid=!1);if(l[4]){if(!Tn.exec(l[4]))return void(t._isValid=!1);o="Z"}t._f=i+(a||"")+(o||""),Bn(t)}else t._isValid=!1}function Dn(t,e,n,r,i,a){var o=[Ln(t),ee.indexOf(e),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return a&&o.push(parseInt(a,10)),o}function Ln(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function $n(t){return t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function On(t,e,n){return!t||Ie.indexOf(t)===new Date(e[0],e[1],e[2]).getDay()||(v(n).weekdayMismatch=!0,n._isValid=!1,!1)}function Mn(t,e,n){if(t)return An[t];if(e)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}function In(t){var e,n=kn.exec($n(t._i));if(n){if(e=Dn(n[4],n[3],n[2],n[5],n[6],n[7]),!On(n[1],e,t))return;t._a=e,t._tzm=Mn(n[8],n[9],n[10]),t._d=be.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),v(t).rfc2822=!0}else t._isValid=!1}function Rn(t){var e=wn.exec(t._i);null===e?(Cn(t),!1===t._isValid&&(delete t._isValid,In(t),!1===t._isValid&&(delete t._isValid,t._strict?t._isValid=!1:r.createFromInputFallback(t)))):t._d=new Date(+e[1])}function Pn(t,e,n){return null!=t?t:null!=e?e:n}function Fn(t){var e=new Date(r.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Nn(t){var e,n,r,i,a,o=[];if(!t._d){for(r=Fn(t),t._w&&null==t._a[Wt]&&null==t._a[Gt]&&Un(t),null!=t._dayOfYear&&(a=Pn(t._a[Ht],r[Ht]),(t._dayOfYear>ge(a)||0===t._dayOfYear)&&(v(t)._overflowDayOfYear=!0),n=be(a,0,t._dayOfYear),t._a[Gt]=n.getUTCMonth(),t._a[Wt]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=o[e]=r[e];for(;e<7;e++)t._a[e]=o[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[zt]&&0===t._a[Yt]&&0===t._a[qt]&&0===t._a[Kt]&&(t._nextDay=!0,t._a[zt]=0),t._d=(t._useUTC?be:ye).apply(null,o),i=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[zt]=24),t._w&&void 0!==t._w.d&&t._w.d!==i&&(v(t).weekdayMismatch=!0)}}function Un(t){var e,n,r,i,a,o,s,l,u;null!=(e=t._w).GG||null!=e.W||null!=e.E?(a=1,o=4,n=Pn(e.GG,t._a[Ht],Te(qn(),1,4).year),r=Pn(e.W,1),((i=Pn(e.E,1))<1||i>7)&&(l=!0)):(a=t._locale._week.dow,o=t._locale._week.doy,u=Te(qn(),a,o),n=Pn(e.gg,t._a[Ht],u.year),r=Pn(e.w,u.week),null!=e.d?((i=e.d)<0||i>6)&&(l=!0):null!=e.e?(i=e.e+a,(e.e<0||e.e>6)&&(l=!0)):i=a),r<1||r>_e(n,a,o)?v(t)._overflowWeeks=!0:null!=l?v(t)._overflowWeekday=!0:(s=Ee(n,r,i,a,o),t._a[Ht]=s.year,t._dayOfYear=s.dayOfYear)}function Bn(t){if(t._f!==r.ISO_8601)if(t._f!==r.RFC_2822){t._a=[],v(t).empty=!0;var e,n,i,a,o,s,l=""+t._i,u=l.length,c=0;for(i=G(t._f,t._locale).match(P)||[],e=0;e<i.length;e++)a=i[e],(n=(l.match(Rt(a,t))||[])[0])&&((o=l.substr(0,l.indexOf(n))).length>0&&v(t).unusedInput.push(o),l=l.slice(l.indexOf(n)+n.length),c+=n.length),U[a]?(n?v(t).empty=!1:v(t).unusedTokens.push(a),jt(a,n,t)):t._strict&&!n&&v(t).unusedTokens.push(a);v(t).charsLeftOver=u-c,l.length>0&&v(t).unusedInput.push(l),t._a[zt]<=12&&!0===v(t).bigHour&&t._a[zt]>0&&(v(t).bigHour=void 0),v(t).parsedDateParts=t._a.slice(0),v(t).meridiem=t._meridiem,t._a[zt]=jn(t._locale,t._a[zt],t._meridiem),null!==(s=v(t).era)&&(t._a[Ht]=t._locale.erasConvertYear(s,t._a[Ht])),Nn(t),bn(t)}else In(t);else Cn(t)}function jn(t,e,n){var r;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?((r=t.isPM(n))&&e<12&&(e+=12),r||12!==e||(e=0),e):e}function Vn(t){var e,n,r,i,a,o,s=!1;if(0===t._f.length)return v(t).invalidFormat=!0,void(t._d=new Date(NaN));for(i=0;i<t._f.length;i++)a=0,o=!1,e=E({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[i],Bn(e),m(e)&&(o=!0),a+=v(e).charsLeftOver,a+=10*v(e).unusedTokens.length,v(e).score=a,s?a<r&&(r=a,n=e):(null==r||a<r||o)&&(r=a,n=e,o&&(s=!0));f(t,n||e)}function Hn(t){if(!t._d){var e=it(t._i),n=void 0===e.day?e.date:e.day;t._a=h([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],(function(t){return t&&parseInt(t,10)})),Nn(t)}}function Gn(t){var e=new T(bn(Wn(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Wn(t){var e=t._i,n=t._f;return t._locale=t._locale||mn(t._l),null===e||void 0===n&&""===e?y({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),_(e)?new T(bn(e)):(d(e)?t._d=e:a(n)?Vn(t):n?Bn(t):zn(t),m(t)||(t._d=null),t))}function zn(t){var e=t._i;u(e)?t._d=new Date(r.now()):d(e)?t._d=new Date(e.valueOf()):"string"==typeof e?Rn(t):a(e)?(t._a=h(e.slice(0),(function(t){return parseInt(t,10)})),Nn(t)):o(e)?Hn(t):c(e)?t._d=new Date(e):r.createFromInputFallback(t)}function Yn(t,e,n,r,i){var s={};return!0!==e&&!1!==e||(r=e,e=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(o(t)&&l(t)||a(t)&&0===t.length)&&(t=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=i,s._l=n,s._i=t,s._f=e,s._strict=r,Gn(s)}function qn(t,e,n,r){return Yn(t,e,n,r,!1)}r.createFromInputFallback=w("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var Kn=w("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=qn.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:y()})),Xn=w("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=qn.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:y()}));function Zn(t,e){var n,r;if(1===e.length&&a(e[0])&&(e=e[0]),!e.length)return qn();for(n=e[0],r=1;r<e.length;++r)e[r].isValid()&&!e[r][t](n)||(n=e[r]);return n}function Jn(){return Zn("isBefore",[].slice.call(arguments,0))}function Qn(){return Zn("isAfter",[].slice.call(arguments,0))}var tr=function(){return Date.now?Date.now():+new Date},er=["year","quarter","month","week","day","hour","minute","second","millisecond"];function nr(t){var e,n,r=!1;for(e in t)if(s(t,e)&&(-1===Vt.call(er,e)||null!=t[e]&&isNaN(t[e])))return!1;for(n=0;n<er.length;++n)if(t[er[n]]){if(r)return!1;parseFloat(t[er[n]])!==ct(t[er[n]])&&(r=!0)}return!0}function rr(){return this._isValid}function ir(){return Ar(NaN)}function ar(t){var e=it(t),n=e.year||0,r=e.quarter||0,i=e.month||0,a=e.week||e.isoWeek||0,o=e.day||0,s=e.hour||0,l=e.minute||0,u=e.second||0,c=e.millisecond||0;this._isValid=nr(e),this._milliseconds=+c+1e3*u+6e4*l+1e3*s*60*60,this._days=+o+7*a,this._months=+i+3*r+12*n,this._data={},this._locale=mn(),this._bubble()}function or(t){return t instanceof ar}function sr(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function lr(t,e,n){var r,i=Math.min(t.length,e.length),a=Math.abs(t.length-e.length),o=0;for(r=0;r<i;r++)(n&&t[r]!==e[r]||!n&&ct(t[r])!==ct(e[r]))&&o++;return o+a}function ur(t,e){B(t,0,0,(function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+R(~~(t/60),2)+e+R(~~t%60,2)}))}ur("Z",":"),ur("ZZ",""),It("Z",$t),It("ZZ",$t),Ut(["Z","ZZ"],(function(t,e,n){n._useUTC=!0,n._tzm=dr($t,t)}));var cr=/([\+\-]|\d\d)/gi;function dr(t,e){var n,r,i=(e||"").match(t);return null===i?null:0===(r=60*(n=((i[i.length-1]||[])+"").match(cr)||["-",0,0])[1]+ct(n[2]))?0:"+"===n[0]?r:-r}function hr(t,e){var n,i;return e._isUTC?(n=e.clone(),i=(_(t)||d(t)?t.valueOf():qn(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):qn(t).local()}function fr(t){return-Math.round(t._d.getTimezoneOffset())}function pr(t,e,n){var i,a=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=dr($t,t)))return this}else Math.abs(t)<16&&!n&&(t*=60);return!this._isUTC&&e&&(i=fr(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),a!==t&&(!e||this._changeInProgress?Or(this,Ar(t-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?a:fr(this)}function gr(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function vr(t){return this.utcOffset(0,t)}function mr(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(fr(this),"m")),this}function yr(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=dr(Lt,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this}function br(t){return!!this.isValid()&&(t=t?qn(t).utcOffset():0,(this.utcOffset()-t)%60==0)}function Sr(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Er(){if(!u(this._isDSTShifted))return this._isDSTShifted;var t,e={};return E(e,this),(e=Wn(e))._a?(t=e._isUTC?p(e._a):qn(e._a),this._isDSTShifted=this.isValid()&&lr(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Tr(){return!!this.isValid()&&!this._isUTC}function _r(){return!!this.isValid()&&this._isUTC}function xr(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var wr=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,kr=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ar(t,e){var n,r,i,a=t,o=null;return or(t)?a={ms:t._milliseconds,d:t._days,M:t._months}:c(t)||!isNaN(+t)?(a={},e?a[e]=+t:a.milliseconds=+t):(o=wr.exec(t))?(n="-"===o[1]?-1:1,a={y:0,d:ct(o[Wt])*n,h:ct(o[zt])*n,m:ct(o[Yt])*n,s:ct(o[qt])*n,ms:ct(sr(1e3*o[Kt]))*n}):(o=kr.exec(t))?(n="-"===o[1]?-1:1,a={y:Cr(o[2],n),M:Cr(o[3],n),w:Cr(o[4],n),d:Cr(o[5],n),h:Cr(o[6],n),m:Cr(o[7],n),s:Cr(o[8],n)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(i=Lr(qn(a.from),qn(a.to)),(a={}).ms=i.milliseconds,a.M=i.months),r=new ar(a),or(t)&&s(t,"_locale")&&(r._locale=t._locale),or(t)&&s(t,"_isValid")&&(r._isValid=t._isValid),r}function Cr(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Dr(t,e){var n={};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Lr(t,e){var n;return t.isValid()&&e.isValid()?(e=hr(e,t),t.isBefore(e)?n=Dr(t,e):((n=Dr(e,t)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function $r(t,e){return function(n,r){var i;return null===r||isNaN(+r)||(C(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),Or(this,Ar(n,r),t),this}}function Or(t,e,n,i){var a=e._milliseconds,o=sr(e._days),s=sr(e._months);t.isValid()&&(i=null==i||i,s&&ue(t,ht(t,"Month")+s*n),o&&ft(t,"Date",ht(t,"Date")+o*n),a&&t._d.setTime(t._d.valueOf()+a*n),i&&r.updateOffset(t,o||s))}Ar.fn=ar.prototype,Ar.invalid=ir;var Mr=$r(1,"add"),Ir=$r(-1,"subtract");function Rr(t){return"string"==typeof t||t instanceof String}function Pr(t){return _(t)||d(t)||Rr(t)||c(t)||Nr(t)||Fr(t)||null==t}function Fr(t){var e,n,r=o(t)&&!l(t),i=!1,a=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(e=0;e<a.length;e+=1)n=a[e],i=i||s(t,n);return r&&i}function Nr(t){var e=a(t),n=!1;return e&&(n=0===t.filter((function(e){return!c(e)&&Rr(t)})).length),e&&n}function Ur(t){var e,n,r=o(t)&&!l(t),i=!1,a=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(e=0;e<a.length;e+=1)n=a[e],i=i||s(t,n);return r&&i}function Br(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function jr(t,e){1===arguments.length&&(arguments[0]?Pr(arguments[0])?(t=arguments[0],e=void 0):Ur(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var n=t||qn(),i=hr(n,this).startOf("day"),a=r.calendarFormat(this,i)||"sameElse",o=e&&(D(e[a])?e[a].call(this,n):e[a]);return this.format(o||this.localeData().calendar(a,this,qn(n)))}function Vr(){return new T(this)}function Hr(t,e){var n=_(t)?t:qn(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=rt(e)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())}function Gr(t,e){var n=_(t)?t:qn(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=rt(e)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())}function Wr(t,e,n,r){var i=_(t)?t:qn(t),a=_(e)?e:qn(e);return!!(this.isValid()&&i.isValid()&&a.isValid())&&("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(a,n):!this.isAfter(a,n))}function zr(t,e){var n,r=_(t)?t:qn(t);return!(!this.isValid()||!r.isValid())&&("millisecond"===(e=rt(e)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))}function Yr(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function qr(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function Kr(t,e,n){var r,i,a;if(!this.isValid())return NaN;if(!(r=hr(t,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),e=rt(e)){case"year":a=Xr(this,r)/12;break;case"month":a=Xr(this,r);break;case"quarter":a=Xr(this,r)/3;break;case"second":a=(this-r)/1e3;break;case"minute":a=(this-r)/6e4;break;case"hour":a=(this-r)/36e5;break;case"day":a=(this-r-i)/864e5;break;case"week":a=(this-r-i)/6048e5;break;default:a=this-r}return n?a:ut(a)}function Xr(t,e){if(t.date()<e.date())return-Xr(e,t);var n=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(n,"months");return-(n+(e-r<0?(e-r)/(r-t.clone().add(n-1,"months")):(e-r)/(t.clone().add(n+1,"months")-r)))||0}function Zr(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Jr(t){if(!this.isValid())return null;var e=!0!==t,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?H(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):D(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",H(n,"Z")):H(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Qr(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,e,n,r,i="moment",a="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",a="Z"),t="["+i+'("]',e=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",r=a+'[")]',this.format(t+e+n+r)}function ti(t){t||(t=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var e=H(this,t);return this.localeData().postformat(e)}function ei(t,e){return this.isValid()&&(_(t)&&t.isValid()||qn(t).isValid())?Ar({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ni(t){return this.from(qn(),t)}function ri(t,e){return this.isValid()&&(_(t)&&t.isValid()||qn(t).isValid())?Ar({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ii(t){return this.to(qn(),t)}function ai(t){var e;return void 0===t?this._locale._abbr:(null!=(e=mn(t))&&(this._locale=e),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var oi=w("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));function si(){return this._locale}var li=1e3,ui=60*li,ci=60*ui,di=3506328*ci;function hi(t,e){return(t%e+e)%e}function fi(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-di:new Date(t,e,n).valueOf()}function pi(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-di:Date.UTC(t,e,n)}function gi(t){var e,n;if(void 0===(t=rt(t))||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?pi:fi,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=hi(e+(this._isUTC?0:this.utcOffset()*ui),ci);break;case"minute":e=this._d.valueOf(),e-=hi(e,ui);break;case"second":e=this._d.valueOf(),e-=hi(e,li)}return this._d.setTime(e),r.updateOffset(this,!0),this}function vi(t){var e,n;if(void 0===(t=rt(t))||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?pi:fi,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=ci-hi(e+(this._isUTC?0:this.utcOffset()*ui),ci)-1;break;case"minute":e=this._d.valueOf(),e+=ui-hi(e,ui)-1;break;case"second":e=this._d.valueOf(),e+=li-hi(e,li)-1}return this._d.setTime(e),r.updateOffset(this,!0),this}function mi(){return this._d.valueOf()-6e4*(this._offset||0)}function yi(){return Math.floor(this.valueOf()/1e3)}function bi(){return new Date(this.valueOf())}function Si(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Ei(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Ti(){return this.isValid()?this.toISOString():null}function _i(){return m(this)}function xi(){return f({},v(this))}function wi(){return v(this).overflow}function ki(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ai(t,e){var n,i,a,o=this._eras||mn("en")._eras;for(n=0,i=o.length;n<i;++n){switch(typeof o[n].since){case"string":a=r(o[n].since).startOf("day"),o[n].since=a.valueOf()}switch(typeof o[n].until){case"undefined":o[n].until=1/0;break;case"string":a=r(o[n].until).startOf("day").valueOf(),o[n].until=a.valueOf()}}return o}function Ci(t,e,n){var r,i,a,o,s,l=this.eras();for(t=t.toUpperCase(),r=0,i=l.length;r<i;++r)if(a=l[r].name.toUpperCase(),o=l[r].abbr.toUpperCase(),s=l[r].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(o===t)return l[r];break;case"NNNN":if(a===t)return l[r];break;case"NNNNN":if(s===t)return l[r]}else if([a,o,s].indexOf(t)>=0)return l[r]}function Di(t,e){var n=t.since<=t.until?1:-1;return void 0===e?r(t.since).year():r(t.since).year()+(e-t.offset)*n}function Li(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until)return r[t].name;if(r[t].until<=n&&n<=r[t].since)return r[t].name}return""}function $i(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until)return r[t].narrow;if(r[t].until<=n&&n<=r[t].since)return r[t].narrow}return""}function Oi(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until)return r[t].abbr;if(r[t].until<=n&&n<=r[t].since)return r[t].abbr}return""}function Mi(){var t,e,n,i,a=this.localeData().eras();for(t=0,e=a.length;t<e;++t)if(n=a[t].since<=a[t].until?1:-1,i=this.clone().startOf("day").valueOf(),a[t].since<=i&&i<=a[t].until||a[t].until<=i&&i<=a[t].since)return(this.year()-r(a[t].since).year())*n+a[t].offset;return this.year()}function Ii(t){return s(this,"_erasNameRegex")||ji.call(this),t?this._erasNameRegex:this._erasRegex}function Ri(t){return s(this,"_erasAbbrRegex")||ji.call(this),t?this._erasAbbrRegex:this._erasRegex}function Pi(t){return s(this,"_erasNarrowRegex")||ji.call(this),t?this._erasNarrowRegex:this._erasRegex}function Fi(t,e){return e.erasAbbrRegex(t)}function Ni(t,e){return e.erasNameRegex(t)}function Ui(t,e){return e.erasNarrowRegex(t)}function Bi(t,e){return e._eraYearOrdinalRegex||Ct}function ji(){var t,e,n=[],r=[],i=[],a=[],o=this.eras();for(t=0,e=o.length;t<e;++t)r.push(Ft(o[t].name)),n.push(Ft(o[t].abbr)),i.push(Ft(o[t].narrow)),a.push(Ft(o[t].name)),a.push(Ft(o[t].abbr)),a.push(Ft(o[t].narrow));this._erasRegex=new RegExp("^("+a.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}function Vi(t,e){B(0,[t,t.length],0,e)}function Hi(t){return Ki.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Gi(t){return Ki.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Wi(){return _e(this.year(),1,4)}function zi(){return _e(this.isoWeekYear(),1,4)}function Yi(){var t=this.localeData()._week;return _e(this.year(),t.dow,t.doy)}function qi(){var t=this.localeData()._week;return _e(this.weekYear(),t.dow,t.doy)}function Ki(t,e,n,r,i){var a;return null==t?Te(this,r,i).year:(e>(a=_e(t,r,i))&&(e=a),Xi.call(this,t,e,n,r,i))}function Xi(t,e,n,r,i){var a=Ee(t,e,n,r,i),o=be(a.year,0,a.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function Zi(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}B("N",0,0,"eraAbbr"),B("NN",0,0,"eraAbbr"),B("NNN",0,0,"eraAbbr"),B("NNNN",0,0,"eraName"),B("NNNNN",0,0,"eraNarrow"),B("y",["y",1],"yo","eraYear"),B("y",["yy",2],0,"eraYear"),B("y",["yyy",3],0,"eraYear"),B("y",["yyyy",4],0,"eraYear"),It("N",Fi),It("NN",Fi),It("NNN",Fi),It("NNNN",Ni),It("NNNNN",Ui),Ut(["N","NN","NNN","NNNN","NNNNN"],(function(t,e,n,r){var i=n._locale.erasParse(t,r,n._strict);i?v(n).era=i:v(n).invalidEra=t})),It("y",Ct),It("yy",Ct),It("yyy",Ct),It("yyyy",Ct),It("yo",Bi),Ut(["y","yy","yyy","yyyy"],Ht),Ut(["yo"],(function(t,e,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[Ht]=n._locale.eraYearOrdinalParse(t,i):e[Ht]=parseInt(t,10)})),B(0,["gg",2],0,(function(){return this.weekYear()%100})),B(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),Vi("gggg","weekYear"),Vi("ggggg","weekYear"),Vi("GGGG","isoWeekYear"),Vi("GGGGG","isoWeekYear"),nt("weekYear","gg"),nt("isoWeekYear","GG"),ot("weekYear",1),ot("isoWeekYear",1),It("G",Dt),It("g",Dt),It("GG",Tt,yt),It("gg",Tt,yt),It("GGGG",kt,St),It("gggg",kt,St),It("GGGGG",At,Et),It("ggggg",At,Et),Bt(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,n,r){e[r.substr(0,2)]=ct(t)})),Bt(["gg","GG"],(function(t,e,n,i){e[i]=r.parseTwoDigitYear(t)})),B("Q",0,"Qo","quarter"),nt("quarter","Q"),ot("quarter",7),It("Q",mt),Ut("Q",(function(t,e){e[Gt]=3*(ct(t)-1)})),B("D",["DD",2],"Do","date"),nt("date","D"),ot("date",9),It("D",Tt),It("DD",Tt,yt),It("Do",(function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient})),Ut(["D","DD"],Wt),Ut("Do",(function(t,e){e[Wt]=ct(t.match(Tt)[0])}));var Ji=dt("Date",!0);function Qi(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}B("DDD",["DDDD",3],"DDDo","dayOfYear"),nt("dayOfYear","DDD"),ot("dayOfYear",4),It("DDD",wt),It("DDDD",bt),Ut(["DDD","DDDD"],(function(t,e,n){n._dayOfYear=ct(t)})),B("m",["mm",2],0,"minute"),nt("minute","m"),ot("minute",14),It("m",Tt),It("mm",Tt,yt),Ut(["m","mm"],Yt);var ta=dt("Minutes",!1);B("s",["ss",2],0,"second"),nt("second","s"),ot("second",15),It("s",Tt),It("ss",Tt,yt),Ut(["s","ss"],qt);var ea,na,ra=dt("Seconds",!1);for(B("S",0,0,(function(){return~~(this.millisecond()/100)})),B(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),B(0,["SSS",3],0,"millisecond"),B(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),B(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),B(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),B(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),B(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),B(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),nt("millisecond","ms"),ot("millisecond",16),It("S",wt,mt),It("SS",wt,yt),It("SSS",wt,bt),ea="SSSS";ea.length<=9;ea+="S")It(ea,Ct);function ia(t,e){e[Kt]=ct(1e3*("0."+t))}for(ea="S";ea.length<=9;ea+="S")Ut(ea,ia);function aa(){return this._isUTC?"UTC":""}function oa(){return this._isUTC?"Coordinated Universal Time":""}na=dt("Milliseconds",!1),B("z",0,0,"zoneAbbr"),B("zz",0,0,"zoneName");var sa=T.prototype;function la(t){return qn(1e3*t)}function ua(){return qn.apply(null,arguments).parseZone()}function ca(t){return t}sa.add=Mr,sa.calendar=jr,sa.clone=Vr,sa.diff=Kr,sa.endOf=vi,sa.format=ti,sa.from=ei,sa.fromNow=ni,sa.to=ri,sa.toNow=ii,sa.get=pt,sa.invalidAt=wi,sa.isAfter=Hr,sa.isBefore=Gr,sa.isBetween=Wr,sa.isSame=zr,sa.isSameOrAfter=Yr,sa.isSameOrBefore=qr,sa.isValid=_i,sa.lang=oi,sa.locale=ai,sa.localeData=si,sa.max=Xn,sa.min=Kn,sa.parsingFlags=xi,sa.set=gt,sa.startOf=gi,sa.subtract=Ir,sa.toArray=Si,sa.toObject=Ei,sa.toDate=bi,sa.toISOString=Jr,sa.inspect=Qr,"undefined"!=typeof Symbol&&null!=Symbol.for&&(sa[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),sa.toJSON=Ti,sa.toString=Zr,sa.unix=yi,sa.valueOf=mi,sa.creationData=ki,sa.eraName=Li,sa.eraNarrow=$i,sa.eraAbbr=Oi,sa.eraYear=Mi,sa.year=ve,sa.isLeapYear=me,sa.weekYear=Hi,sa.isoWeekYear=Gi,sa.quarter=sa.quarters=Zi,sa.month=ce,sa.daysInMonth=de,sa.week=sa.weeks=Ce,sa.isoWeek=sa.isoWeeks=De,sa.weeksInYear=Yi,sa.weeksInWeekYear=qi,sa.isoWeeksInYear=Wi,sa.isoWeeksInISOWeekYear=zi,sa.date=Ji,sa.day=sa.days=Ge,sa.weekday=We,sa.isoWeekday=ze,sa.dayOfYear=Qi,sa.hour=sa.hours=rn,sa.minute=sa.minutes=ta,sa.second=sa.seconds=ra,sa.millisecond=sa.milliseconds=na,sa.utcOffset=pr,sa.utc=vr,sa.local=mr,sa.parseZone=yr,sa.hasAlignedHourOffset=br,sa.isDST=Sr,sa.isLocal=Tr,sa.isUtcOffset=_r,sa.isUtc=xr,sa.isUTC=xr,sa.zoneAbbr=aa,sa.zoneName=oa,sa.dates=w("dates accessor is deprecated. Use date instead.",Ji),sa.months=w("months accessor is deprecated. Use month instead",ce),sa.years=w("years accessor is deprecated. Use year instead",ve),sa.zone=w("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",gr),sa.isDSTShifted=w("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Er);var da=O.prototype;function ha(t,e,n,r){var i=mn(),a=p().set(r,e);return i[n](a,t)}function fa(t,e,n){if(c(t)&&(e=t,t=void 0),t=t||"",null!=e)return ha(t,e,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=ha(t,r,n,"month");return i}function pa(t,e,n,r){"boolean"==typeof t?(c(e)&&(n=e,e=void 0),e=e||""):(n=e=t,t=!1,c(e)&&(n=e,e=void 0),e=e||"");var i,a=mn(),o=t?a._week.dow:0,s=[];if(null!=n)return ha(e,(n+o)%7,r,"day");for(i=0;i<7;i++)s[i]=ha(e,(i+o)%7,r,"day");return s}function ga(t,e){return fa(t,e,"months")}function va(t,e){return fa(t,e,"monthsShort")}function ma(t,e,n){return pa(t,e,n,"weekdays")}function ya(t,e,n){return pa(t,e,n,"weekdaysShort")}function ba(t,e,n){return pa(t,e,n,"weekdaysMin")}da.calendar=I,da.longDateFormat=z,da.invalidDate=q,da.ordinal=Z,da.preparse=ca,da.postformat=ca,da.relativeTime=Q,da.pastFuture=tt,da.set=L,da.eras=Ai,da.erasParse=Ci,da.erasConvertYear=Di,da.erasAbbrRegex=Ri,da.erasNameRegex=Ii,da.erasNarrowRegex=Pi,da.months=ae,da.monthsShort=oe,da.monthsParse=le,da.monthsRegex=fe,da.monthsShortRegex=he,da.week=xe,da.firstDayOfYear=Ae,da.firstDayOfWeek=ke,da.weekdays=Ue,da.weekdaysMin=je,da.weekdaysShort=Be,da.weekdaysParse=He,da.weekdaysRegex=Ye,da.weekdaysShortRegex=qe,da.weekdaysMinRegex=Ke,da.isPM=en,da.meridiem=an,pn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===ct(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),r.lang=w("moment.lang is deprecated. Use moment.locale instead.",pn),r.langData=w("moment.langData is deprecated. Use moment.localeData instead.",mn);var Sa=Math.abs;function Ea(){var t=this._data;return this._milliseconds=Sa(this._milliseconds),this._days=Sa(this._days),this._months=Sa(this._months),t.milliseconds=Sa(t.milliseconds),t.seconds=Sa(t.seconds),t.minutes=Sa(t.minutes),t.hours=Sa(t.hours),t.months=Sa(t.months),t.years=Sa(t.years),this}function Ta(t,e,n,r){var i=Ar(e,n);return t._milliseconds+=r*i._milliseconds,t._days+=r*i._days,t._months+=r*i._months,t._bubble()}function _a(t,e){return Ta(this,t,e,1)}function xa(t,e){return Ta(this,t,e,-1)}function wa(t){return t<0?Math.floor(t):Math.ceil(t)}function ka(){var t,e,n,r,i,a=this._milliseconds,o=this._days,s=this._months,l=this._data;return a>=0&&o>=0&&s>=0||a<=0&&o<=0&&s<=0||(a+=864e5*wa(Ca(s)+o),o=0,s=0),l.milliseconds=a%1e3,t=ut(a/1e3),l.seconds=t%60,e=ut(t/60),l.minutes=e%60,n=ut(e/60),l.hours=n%24,o+=ut(n/24),s+=i=ut(Aa(o)),o-=wa(Ca(i)),r=ut(s/12),s%=12,l.days=o,l.months=s,l.years=r,this}function Aa(t){return 4800*t/146097}function Ca(t){return 146097*t/4800}function Da(t){if(!this.isValid())return NaN;var e,n,r=this._milliseconds;if("month"===(t=rt(t))||"quarter"===t||"year"===t)switch(e=this._days+r/864e5,n=this._months+Aa(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(Ca(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return 24*e+r/36e5;case"minute":return 1440*e+r/6e4;case"second":return 86400*e+r/1e3;case"millisecond":return Math.floor(864e5*e)+r;default:throw new Error("Unknown unit "+t)}}function La(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*ct(this._months/12):NaN}function $a(t){return function(){return this.as(t)}}var Oa=$a("ms"),Ma=$a("s"),Ia=$a("m"),Ra=$a("h"),Pa=$a("d"),Fa=$a("w"),Na=$a("M"),Ua=$a("Q"),Ba=$a("y");function ja(){return Ar(this)}function Va(t){return t=rt(t),this.isValid()?this[t+"s"]():NaN}function Ha(t){return function(){return this.isValid()?this._data[t]:NaN}}var Ga=Ha("milliseconds"),Wa=Ha("seconds"),za=Ha("minutes"),Ya=Ha("hours"),qa=Ha("days"),Ka=Ha("months"),Xa=Ha("years");function Za(){return ut(this.days()/7)}var Ja=Math.round,Qa={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function to(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}function eo(t,e,n,r){var i=Ar(t).abs(),a=Ja(i.as("s")),o=Ja(i.as("m")),s=Ja(i.as("h")),l=Ja(i.as("d")),u=Ja(i.as("M")),c=Ja(i.as("w")),d=Ja(i.as("y")),h=a<=n.ss&&["s",a]||a<n.s&&["ss",a]||o<=1&&["m"]||o<n.m&&["mm",o]||s<=1&&["h"]||s<n.h&&["hh",s]||l<=1&&["d"]||l<n.d&&["dd",l];return null!=n.w&&(h=h||c<=1&&["w"]||c<n.w&&["ww",c]),(h=h||u<=1&&["M"]||u<n.M&&["MM",u]||d<=1&&["y"]||["yy",d])[2]=e,h[3]=+t>0,h[4]=r,to.apply(null,h)}function no(t){return void 0===t?Ja:"function"==typeof t&&(Ja=t,!0)}function ro(t,e){return void 0!==Qa[t]&&(void 0===e?Qa[t]:(Qa[t]=e,"s"===t&&(Qa.ss=e-1),!0))}function io(t,e){if(!this.isValid())return this.localeData().invalidDate();var n,r,i=!1,a=Qa;return"object"==typeof t&&(e=t,t=!1),"boolean"==typeof t&&(i=t),"object"==typeof e&&(a=Object.assign({},Qa,e),null!=e.s&&null==e.ss&&(a.ss=e.s-1)),r=eo(this,!i,a,n=this.localeData()),i&&(r=n.pastFuture(+this,r)),n.postformat(r)}var ao=Math.abs;function oo(t){return(t>0)-(t<0)||+t}function so(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n,r,i,a,o,s,l=ao(this._milliseconds)/1e3,u=ao(this._days),c=ao(this._months),d=this.asSeconds();return d?(t=ut(l/60),e=ut(t/60),l%=60,t%=60,n=ut(c/12),c%=12,r=l?l.toFixed(3).replace(/\.?0+$/,""):"",i=d<0?"-":"",a=oo(this._months)!==oo(d)?"-":"",o=oo(this._days)!==oo(d)?"-":"",s=oo(this._milliseconds)!==oo(d)?"-":"",i+"P"+(n?a+n+"Y":"")+(c?a+c+"M":"")+(u?o+u+"D":"")+(e||t||l?"T":"")+(e?s+e+"H":"")+(t?s+t+"M":"")+(l?s+r+"S":"")):"P0D"}var lo=ar.prototype;return lo.isValid=rr,lo.abs=Ea,lo.add=_a,lo.subtract=xa,lo.as=Da,lo.asMilliseconds=Oa,lo.asSeconds=Ma,lo.asMinutes=Ia,lo.asHours=Ra,lo.asDays=Pa,lo.asWeeks=Fa,lo.asMonths=Na,lo.asQuarters=Ua,lo.asYears=Ba,lo.valueOf=La,lo._bubble=ka,lo.clone=ja,lo.get=Va,lo.milliseconds=Ga,lo.seconds=Wa,lo.minutes=za,lo.hours=Ya,lo.days=qa,lo.weeks=Za,lo.months=Ka,lo.years=Xa,lo.humanize=io,lo.toISOString=so,lo.toString=so,lo.toJSON=so,lo.locale=ai,lo.localeData=si,lo.toIsoString=w("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",so),lo.lang=oi,B("X",0,0,"unix"),B("x",0,0,"valueOf"),It("x",Dt),It("X",Ot),Ut("X",(function(t,e,n){n._d=new Date(1e3*parseFloat(t))})),Ut("x",(function(t,e,n){n._d=new Date(ct(t))})),
//! moment.js
r.version="2.29.1",i(qn),r.fn=sa,r.min=Jn,r.max=Qn,r.now=tr,r.utc=p,r.unix=la,r.months=ga,r.isDate=d,r.locale=pn,r.invalid=y,r.duration=Ar,r.isMoment=_,r.weekdays=ma,r.parseZone=ua,r.localeData=mn,r.isDuration=or,r.monthsShort=va,r.weekdaysMin=ba,r.defineLocale=gn,r.updateLocale=vn,r.locales=yn,r.weekdaysShort=ya,r.normalizeUnits=rt,r.relativeTimeRounding=no,r.relativeTimeThreshold=ro,r.calendarFormat=Br,r.prototype=sa,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}();var xd=_d.exports,wd=Td.merge,kd=function(t){return t>=0&&t<10?"0"+t:t},Ad=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=xd(new Date(t));return n.fromNow(e)},Cd=function(t,e,n){var r;return function(){var i=this,a=arguments,o=function(){r=null,n||t.apply(i,a)},s=n&&!r;clearTimeout(r),r=setTimeout(o,e),s&&t.apply(i,a)}},Dd=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0===t.indexOf("http"),r=n?t:(e||window.SERVER_URL_OVERRIDE||window.CONFIG.serverUrl)+"/"+t;return r.replace(/([^:])\/+/g,"$1/")};function Ld(t,e){return"supported_features"in e.attributes&&0!=(e.attributes.supported_features&t)}var $d,Od=Object.freeze({__proto__:null,moment:xd,mergeObjects:wd,leadZero:kd,numberFilter:function(t){return function(e){var n=parseFloat(e);return n&&!isNaN(n)?n.toFixed(t):e}},switchPercents:function(t,e,n){return n=n||!1,e=e||100,function(r,i){var a=t in i.attributes?i.attributes[t]:null;return a=parseFloat(a),isNaN(a)?(a=i.state,r.states&&a in r.states?r.states[a]:a):(a=Math.round(a/e*100),n&&(a=10*Math.round(a/10)),a+"%")}},playSound:function(t){var e=new Audio(t);e.loop=!1,e.play()},timeAgo:Ad,debounce:Cd,toAbsoluteServerURL:Dd,supportsFeature:Ld}),Md="yandex",Id="mapbox",Rd={ANIMATED:"animated",ANIMATED_GPU:"animated_gpu",SIMPLE:"simple"},Pd={TRANSPARENT:"transparent",MATERIAL:"material",WIN95:"win95",WINPHONE:"winphone",MOBILE:"mobile",COMPACT:"compact",HOMEKIT:"homekit",FRESH_AIR:"fresh-air",WHITE_PAPER:"white-paper"},Fd={DEVICE_TRACKER:"device_tracker",SCRIPT:"script",AUTOMATION:"automation",SENSOR:"sensor",SENSOR_ICON:"sensor_icon",SWITCH:"switch",LOCK:"lock",COVER:"cover",COVER_TOGGLE:"cover_toggle",FAN:"fan",INPUT_BOOLEAN:"input_boolean",LIGHT:"light",TEXT_LIST:"text_list",INPUT_NUMBER:"input_number",INPUT_SELECT:"input_select",INPUT_DATETIME:"input_datetime",CAMERA:"camera",CAMERA_THUMBNAIL:"camera_thumbnail",CAMERA_STREAM:"camera_stream",SCENE:"scene",SLIDER:"slider",IFRAME:"iframe",DOOR_ENTRY:"door_entry",WEATHER:"weather",CLIMATE:"climate",MEDIA_PLAYER:"media_player",CUSTOM:"custom",ALARM:"alarm",WEATHER_LIST:"weather_list",VACUUM:"vacuum",POPUP_IFRAME:"popup_iframe",POPUP:"popup",DIMMER_SWITCH:"dimmer_switch",GAUGE:"gauge",IMAGE:"image",HISTORY:"history"},Nd={TIME:"time",DATE:"date",DATETIME:"datetime",WEATHER:"weather",CUSTOM_HTML:"custom_html"},Ud=Nd,Bd={ALARM:{ARM_HOME:1,ARM_AWAY:2,ARM_NIGHT:4,TRIGGER:8,ARM_CUSTOM_BYPASS:16},LIGHT:{BRIGHTNESS:1,COLOR_TEMP:2,EFFECT:4,FLASH:8,COLOR:16,TRANSITION:32,WHITE_VALUE:128,COLOR_MODES_BRIGHTNESS:["brightness","color_temp","hs","xy","rgb","rgbw","rgbww","white"],supportsBrightness:function(t){var e=t.attributes,n=e.supported_color_modes,r=e.supported_features;return void 0===n&&(n=[],r&Bd.LIGHT.COLOR_TEMP&&n.push("color_temp"),r&Bd.LIGHT.COLOR&&n.push("hs"),r&Bd.LIGHT.WHITE_VALUE&&n.push("rgbw"),r&Bd.LIGHT.BRIGHTNESS&&0===n.length&&(n=["brightness"])),n.some((function(t){return Bd.LIGHT.COLOR_MODES_BRIGHTNESS.includes(t)}))}},MEDIA_PLAYER:{PAUSE:1,SEEK:2,VOLUME_SET:4,VOLUME_STEP:1024,VOLUME_MUTE:8,PREVIOUS_TRACK:16,NEXT_TRACK:32,YOUTUBE:64,TURN_ON:128,TURN_OFF:256,STOP:4096},VACUUM:{TURN_ON:1,TURN_OFF:2,PAUSE:4,STOP:8,RETURN_HOME:16,FAN_SPEED:32,BATTERY:64,STATUS:128,SEND_COMMAND:256,LOCATE:512,CLEAN_SPOT:1024,MAP:2048,STATE:4096,START:8192}},jd={LEFT:"left",BOTTOM:"bottom"},Vd={VERTICALLY:"vertically",HORIZONTALLY:"horizontally",GRID:"grid"},Hd={LEFT:"left",RIGHT:"right"},Gd="_tkn1",Wd={styles:{padding:"30px 130px 0",fontSize:"28px"},left:[{type:Nd.DATETIME,dateFormat:"EEEE, LLLL dd",styles:{margin:"0"}}],right:[{type:Nd.CUSTOM_HTML,html:"Welcome to the <b>TileBoard</b>",styles:{margin:"40px 0 0"}}]},zd={layout:{padding:{left:0}},elements:{line:{fill:!1,borderWidth:3,stepped:!1,cubicInterpolationMode:"monotone"}},legend:{display:!1},scales:{xAxes:[{display:!1}],yAxes:[{display:!0,ticks:{mirror:!0,callback:function(t,e,n){return e===n.length-1||0===e?t:null}}}]},tooltips:{callbacks:{title:function(t,e){var n=t[0],r=n.datasetIndex,i=n.index;return Ad(e.datasets[r].data[i].x)},label:function(t,e){return t.value}}}},Yd={max:100,min:0,step:1,field:"value",request:{domain:"input_number",service:"set_value",field:"value"}},qd={max:255,min:0,step:1,field:"brightness",request:{domain:"light",service:"turn_on",field:"brightness"}},Kd={max:1,min:0,step:.02,field:"volume_level",request:{domain:"media_player",service:"volume_set",field:"volume_level"}},Xd=function(t,e){return{classes:["-popup-landscape"],styles:{},items:[{type:Fd.HISTORY,id:t.id,title:!1,position:[0,0],action:!1,secondaryAction:!1,classes:["-item-fullsize"],customStyles:{width:null,height:null,top:null,left:null}}]}},Zd=function(t,e){return{classes:["-popup-fullsize"],styles:{},items:[{type:Fd.IFRAME,url:t.url,id:{},state:!1,title:!1,position:[0,0],classes:["-item-fullsize"],customStyles:{width:null,height:null,top:null,left:null}}]}},Jd=function(t,e){return{classes:["-popup-fullsize"],styles:{},items:[{state:!1,title:!1,position:[0,0],action:!1,secondaryAction:!1,classes:["-item-fullsize","-item-non-clickable","-item-transparent"],customStyles:{width:null,height:null,top:null,left:null}}]}},Qd=(uu($d={},Fd.ALARM,{action:function(t,e){return this.$scope.openAlarm(t,e)}}),uu($d,Fd.AUTOMATION,{action:function(t,e){return this.$scope.triggerAutomation(t,e)}}),uu($d,Fd.CAMERA,{action:function(t,e){return this.$scope.openCamera(t,e)}}),uu($d,Fd.CAMERA_STREAM,{action:function(t,e){return this.$scope.openCamera(t,e)}}),uu($d,Fd.CLIMATE,{subtitle:function(t,e){return t.useHvacMode?e.attributes.hvac_action:void 0}}),uu($d,Fd.COVER_TOGGLE,{action:function(t,e){return this.$scope.toggleCover(t,e)}}),uu($d,Fd.DIMMER_SWITCH,{action:function(t,e){return this.$scope.dimmerToggle(t,e)}}),uu($d,Fd.DOOR_ENTRY,{action:function(t,e){return this.$scope.openDoorEntry(t,e)}}),uu($d,Fd.FAN,{action:function(t,e){return this.$scope.toggleSwitch(t,e)}}),uu($d,Fd.GAUGE,{settings:{backgroundColor:"rgba(0, 0, 0, 0.1)",foregroundColor:"rgba(0, 150, 136, 1)",size:function(t){return window.CONFIG.tileSize*(t.height<t.width?t.height:t.width)*.8},duration:1500,thick:6,type:"full",min:0,max:100,cap:"butt",thresholds:{}}}),uu($d,Fd.INPUT_BOOLEAN,{action:function(t,e){return this.$scope.toggleSwitch(t,e)}}),uu($d,Fd.INPUT_DATETIME,{action:function(t,e){return this.$scope.openDatetime(t,e)}}),uu($d,Fd.INPUT_SELECT,{action:function(t,e){return this.$scope.toggleSelect(t,e)}}),uu($d,Fd.LIGHT,{colorpicker:function(t,e){return Ld(Bd.LIGHT.COLOR,e)},action:function(t,e){return this.$scope.toggleSwitch(t,e)},secondaryAction:function(t,e){return this.$scope.openLightSliders(t,e)}}),uu($d,Fd.LOCK,{action:function(t,e){return this.$scope.toggleLock(t,e)}}),uu($d,Fd.POPUP,{action:function(t,e){return this.$scope.openPopup(t,e,t.popup)}}),uu($d,Fd.POPUP_IFRAME,{action:function(t,e){return this.$scope.openPopupIframe(t,e)}}),uu($d,Fd.SCENE,{action:function(t,e){return this.$scope.callScene(t,e)}}),uu($d,Fd.SCRIPT,{action:function(t,e){return this.$scope.callScript(t,e)}}),uu($d,Fd.SENSOR,{filter:function(t,e,n){var r;return"timestamp"===(null==n||null===(r=n.attributes)||void 0===r?void 0:r.device_class)?Ad(t,!1):t}}),uu($d,Fd.SWITCH,{action:function(t,e){return this.$scope.toggleSwitch(t,e)}}),uu($d,Fd.VACUUM,{action:function(t,e){return this.$scope.toggleVacuum(t,e)}}),uu($d,Fd.WEATHER_LIST,{dateFormat:"MMM d"}),$d),th=Object.freeze({__proto__:null,CLASS_BIG:"-big-entity",CLASS_SMALL:"-small-entity",CLASS_MICRO:"-micro-entity",GOOGLE_MAP:"google",YANDEX_MAP:Md,MAPBOX_MAP:Id,TRANSITIONS:Rd,ITEM_TRANSPARENT:"transparent",CUSTOM_THEMES:Pd,TYPES:Fd,HEADER_ITEMS:Nd,SCREENSAVER_ITEMS:Ud,FEATURES:Bd,MENU_POSITIONS:jd,GROUP_ALIGNS:Vd,NOTIES_POSITIONS:Hd,ENTITY_SIZES:{SMALL:"small",NORMAL:"normal",BIG:"big"},TOKEN_CACHE_KEY:Gd,DEFAULT_HEADER:Wd,MINIMAL_CHART_OPTIONS:zd,DEFAULT_SLIDER_OPTIONS:Yd,DEFAULT_LIGHT_SLIDER_OPTIONS:qd,DEFAULT_VOLUME_SLIDER_OPTIONS:Kd,DEFAULT_POPUP_HISTORY:Xd,DEFAULT_POPUP_IFRAME:Zd,DEFAULT_POPUP_DOOR_ENTRY:Jd,TILE_DEFAULTS:Qd}),eh=Tu.filter;kn({target:"Array",proto:!0,forced:!jn("filter")},{filter:function(t){return eh(this,t,arguments.length>1?arguments[1]:void 0)}});var nh=Tu.forEach,rh=nu("forEach")?[].forEach:function(t){return nh(this,t,arguments.length>1?arguments[1]:void 0)};kn({target:"Array",proto:!0,forced:[].forEach!=rh},{forEach:rh});var ih=i,ah=oa,oh=rh,sh=zt;for(var lh in ah){var uh=ih[lh],ch=uh&&uh.prototype;if(ch&&ch.forEach!==oh)try{sh(ch,"forEach",oh)}catch(t){ch.forEach=oh}}var dh=function(){var t=[],e=!1,n=function(t){this.setData(t)};return n.prototype.setData=function(t){this.id=t.id||Math.random(),this.title=t.title,this.message=t.message,this.icon=t.icon,this.lifetime=t.lifetime,this.type=t.type||n.INFO,this._timeout=null,this.resetTimeout();var e=this;setTimeout((function(){e.showed=!0,n.fireUpdate()}),100),n.fireUpdate()},n.prototype.resetTimeout=function(){var t=this;this.clearTimeout(),this.lifetime&&(this._timeout=setTimeout((function(){n.remove(t),n.fireUpdate()}),1e3*this.lifetime))},n.prototype.getClasses=function(){return this._classes||(this._classes=[]),this._classes.length=0,this._classes.push("-"+this.type),this.showed&&this._classes.push("-showed"),this._classes},n.prototype.getLifetimeStyles=function(){return this._lifetimeStyles||(this._lifetimeStyles={},this.lifetime&&(this._lifetimeStyles.animationDuration=this.lifetime+"s")),this._lifetimeStyles},n.prototype.clearTimeout=function(){this._timeout&&clearTimeout(this._timeout)},n.prototype.remove=function(){n.remove(this)},n.noties=[],n.notiesHistory=[],n.INFO="info",n.WARNING="warning",n.ERROR="error",n.SUCCESS="success",n.onUpdate=function(e){return-1!==t.indexOf(e)?function(){}:(t.push(e),function(){t=t.filter((function(t){return t!==e}))})},n.fireUpdate=function(){e||(e=!0,t.forEach((function(t){try{setTimeout((function(){e=!1,t()}),0)}catch(t){}})),setTimeout((function(){e=!1}),0))},n.add=function(t,e,r,i,a,o){return n.addObject({type:t,title:e,message:r,icon:i,lifetime:a,id:o})},n.addObject=function(t){if(t.id&&n.getById(t.id)){var e=n.getById(t.id);return e.setData(t),e}var r=new n(t);return n.noties.push(r),n.notiesHistory.push(r),r},n.getById=function(t){for(var e=0;e<n.noties.length;e++)if(n.noties[e].id===t)return n.noties[e];return null},n.hasSeenNoteId=function(t){for(var e=0;e<n.notiesHistory.length;e++)if(n.notiesHistory[e].id===t)return!0;return!1},n.remove=function(t){n.noties=n.noties.filter((function(e){return e!==t}))},n.removeAll=function(){n.noties=[]},n}();for(var hh in th)Object.prototype.hasOwnProperty.call(th,hh)&&(window[hh]=th[hh]);for(var fh in Od)Object.prototype.hasOwnProperty.call(Od,fh)&&(window[fh]=Od[fh]);window.Noty=dh,window.onerror=function(t,e,n,r){var i=[t,"File: "+e,"Line: "+n+":"+r].join("<br>");dh.addObject({type:dh.ERROR,title:"JS error",message:i,lifetime:12,id:t})};var ph=Td.module("App",["hmTouchEvents","colorpicker","angularjs-gauge","angularMoment","chart.js","tmh.dynamicLocale"]),gh=s,vh=Pt.f,mh=Function.prototype,yh=mh.toString,bh=/^\s*function ([^ (]*)/,Sh="name";gh&&!(Sh in mh)&&vh(mh,Sh,{configurable:!0,get:function(){try{return yh.call(this).match(bh)[1]}catch(t){return""}}});var Eh={exports:{}};
/*! Hammer.JS - v2.0.7 - 2016-04-22
	 * http://hammerjs.github.io/
	 *
	 * Copyright (c) 2016 Jorik Tangelder;
	 * Licensed under the MIT license */!function(t){!function(e,n,r,i){var a,o=["","webkit","Moz","MS","ms","o"],s=n.createElement("div"),l=Math.round,u=Math.abs,c=Date.now;function d(t,e,n){return setTimeout(y(t,n),e)}function h(t,e,n){return!!Array.isArray(t)&&(f(t,n[e],n),!0)}function f(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==i)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function p(t,n,r){var i="DEPRECATED METHOD: "+n+"\n"+r+" AT \n";return function(){var n=new Error("get-stack-trace"),r=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=e.console&&(e.console.warn||e.console.log);return a&&a.call(e.console,i,r),t.apply(this,arguments)}}a="function"!=typeof Object.assign?function(t){if(t===i||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==i&&null!==r)for(var a in r)r.hasOwnProperty(a)&&(e[a]=r[a])}return e}:Object.assign;var g=p((function(t,e,n){for(var r=Object.keys(e),a=0;a<r.length;)(!n||n&&t[r[a]]===i)&&(t[r[a]]=e[r[a]]),a++;return t}),"extend","Use `assign`."),v=p((function(t,e){return g(t,e,!0)}),"merge","Use `assign`.");function m(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&a(r,n)}function y(t,e){return function(){return t.apply(e,arguments)}}function b(t,e){return"function"==typeof t?t.apply(e&&e[0]||i,e):t}function S(t,e){return t===i?e:t}function E(t,e,n){f(w(e),(function(e){t.addEventListener(e,n,!1)}))}function T(t,e,n){f(w(e),(function(e){t.removeEventListener(e,n,!1)}))}function _(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function x(t,e){return t.indexOf(e)>-1}function w(t){return t.trim().split(/\s+/g)}function k(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function A(t){return Array.prototype.slice.call(t,0)}function C(t,e,n){for(var r=[],i=[],a=0;a<t.length;){var o=e?t[a][e]:t[a];k(i,o)<0&&r.push(t[a]),i[a]=o,a++}return n&&(r=e?r.sort((function(t,n){return t[e]>n[e]})):r.sort()),r}function D(t,e){for(var n,r,a=e[0].toUpperCase()+e.slice(1),s=0;s<o.length;){if((r=(n=o[s])?n+a:e)in t)return r;s++}return i}var L=1;function $(t){var n=t.ownerDocument||t;return n.defaultView||n.parentWindow||e}var O="ontouchstart"in e,M=D(e,"PointerEvent")!==i,I=O&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),R="touch",P="mouse",F=24,N=["x","y"],U=["clientX","clientY"];function B(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){b(t.options.enable,[t])&&n.handler(e)},this.init()}function j(t,e,n){var r=n.pointers.length,a=n.changedPointers.length,o=1&e&&r-a==0,s=12&e&&r-a==0;n.isFirst=!!o,n.isFinal=!!s,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,a=r.length;n.firstInput||(n.firstInput=V(e));a>1&&!n.firstMultiple?n.firstMultiple=V(e):1===a&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,l=s?s.center:o.center,d=e.center=H(r);e.timeStamp=c(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=Y(l,d),e.distance=z(l,d),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},a=t.prevInput||{};1!==e.eventType&&4!==a.eventType||(i=t.prevDelta={x:a.deltaX||0,y:a.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y});e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=W(e.deltaX,e.deltaY);var h=G(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=h.x,e.overallVelocityY=h.y,e.overallVelocity=u(h.x)>u(h.y)?h.x:h.y,e.scale=s?(f=s.pointers,p=r,z(p[0],p[1],U)/z(f[0],f[1],U)):1,e.rotation=s?function(t,e){return Y(e[1],e[0],U)+Y(t[1],t[0],U)}(s.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,a,o,s=t.lastInterval||e,l=e.timeStamp-s.timeStamp;if(8!=e.eventType&&(l>25||s.velocity===i)){var c=e.deltaX-s.deltaX,d=e.deltaY-s.deltaY,h=G(l,c,d);r=h.x,a=h.y,n=u(h.x)>u(h.y)?h.x:h.y,o=W(c,d),t.lastInterval=e}else n=s.velocity,r=s.velocityX,a=s.velocityY,o=s.direction;e.velocity=n,e.velocityX=r,e.velocityY=a,e.direction=o}(n,e);var f,p;var g=t.element;_(e.srcEvent.target,g)&&(g=e.srcEvent.target);e.target=g}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function V(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:l(t.pointers[n].clientX),clientY:l(t.pointers[n].clientY)},n++;return{timeStamp:c(),pointers:e,center:H(e),deltaX:t.deltaX,deltaY:t.deltaY}}function H(t){var e=t.length;if(1===e)return{x:l(t[0].clientX),y:l(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:l(n/e),y:l(r/e)}}function G(t,e,n){return{x:e/t||0,y:n/t||0}}function W(t,e){return t===e?1:u(t)>=u(e)?t<0?2:4:e<0?8:16}function z(t,e,n){n||(n=N);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function Y(t,e,n){n||(n=N);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}B.prototype={handler:function(){},init:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E($(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T($(this.element),this.evWin,this.domHandler)}};var q={mousedown:1,mousemove:2,mouseup:4},K="mousedown",X="mousemove mouseup";function Z(){this.evEl=K,this.evWin=X,this.pressed=!1,B.apply(this,arguments)}m(Z,B,{handler:function(t){var e=q[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:P,srcEvent:t}))}});var J={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Q={2:R,3:"pen",4:P,5:"kinect"},tt="pointerdown",et="pointermove pointerup pointercancel";function nt(){this.evEl=tt,this.evWin=et,B.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}e.MSPointerEvent&&!e.PointerEvent&&(tt="MSPointerDown",et="MSPointerMove MSPointerUp MSPointerCancel"),m(nt,B,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=J[r],a=Q[t.pointerType]||t.pointerType,o=a==R,s=k(e,t.pointerId,"pointerId");1&i&&(0===t.button||o)?s<0&&(e.push(t),s=e.length-1):12&i&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:a,srcEvent:t}),n&&e.splice(s,1))}});var rt={touchstart:1,touchmove:2,touchend:4,touchcancel:8},it="touchstart",at="touchstart touchmove touchend touchcancel";function ot(){this.evTarget=it,this.evWin=at,this.started=!1,B.apply(this,arguments)}function st(t,e){var n=A(t.touches),r=A(t.changedTouches);return 12&e&&(n=C(n.concat(r),"identifier",!0)),[n,r]}m(ot,B,{handler:function(t){var e=rt[t.type];if(1===e&&(this.started=!0),this.started){var n=st.call(this,t,e);12&e&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:R,srcEvent:t})}}});var lt={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ut="touchstart touchmove touchend touchcancel";function ct(){this.evTarget=ut,this.targetIds={},B.apply(this,arguments)}function dt(t,e){var n=A(t.touches),r=this.targetIds;if(3&e&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,a,o=A(t.changedTouches),s=[],l=this.target;if(a=n.filter((function(t){return _(t.target,l)})),1===e)for(i=0;i<a.length;)r[a[i].identifier]=!0,i++;for(i=0;i<o.length;)r[o[i].identifier]&&s.push(o[i]),12&e&&delete r[o[i].identifier],i++;return s.length?[C(a.concat(s),"identifier",!0),s]:void 0}m(ct,B,{handler:function(t){var e=lt[t.type],n=dt.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:R,srcEvent:t})}});function ht(){B.apply(this,arguments);var t=y(this.handler,this);this.touch=new ct(this.manager,t),this.mouse=new Z(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function ft(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,pt.call(this,e)):12&t&&pt.call(this,e)}function pt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)}),2500)}}function gt(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],a=Math.abs(e-i.x),o=Math.abs(n-i.y);if(a<=25&&o<=25)return!0}return!1}m(ht,B,{handler:function(t,e,n){var r=n.pointerType==R,i=n.pointerType==P;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)ft.call(this,e,n);else if(i&&gt.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var vt=D(s.style,"touchAction"),mt=vt!==i,yt="compute",bt="auto",St="manipulation",Et="none",Tt="pan-x",_t="pan-y",xt=function(){if(!mt)return!1;var t={},n=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(r){t[r]=!n||e.CSS.supports("touch-action",r)})),t}();function wt(t,e){this.manager=t,this.set(e)}wt.prototype={set:function(t){t==yt&&(t=this.compute()),mt&&this.manager.element.style&&xt[t]&&(this.manager.element.style[vt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return f(this.manager.recognizers,(function(e){b(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(x(t,Et))return Et;var e=x(t,Tt),n=x(t,_t);if(e&&n)return Et;if(e||n)return e?Tt:_t;if(x(t,St))return St;return bt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=x(r,Et)&&!xt.none,a=x(r,_t)&&!xt["pan-y"],o=x(r,Tt)&&!xt["pan-x"];if(i){var s=1===t.pointers.length,l=t.distance<2,u=t.deltaTime<250;if(s&&l&&u)return}if(!o||!a)return i||a&&6&n||o&&n&F?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var kt=32;function At(t){this.options=a({},this.defaults,t||{}),this.id=L++,this.manager=null,this.options.enable=S(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Ct(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function Dt(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function Lt(t,e){var n=e.manager;return n?n.get(t):t}function $t(){At.apply(this,arguments)}function Ot(){$t.apply(this,arguments),this.pX=null,this.pY=null}function Mt(){$t.apply(this,arguments)}function It(){At.apply(this,arguments),this._timer=null,this._input=null}function Rt(){$t.apply(this,arguments)}function Pt(){$t.apply(this,arguments)}function Ft(){At.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Nt(t,e){return(e=e||{}).recognizers=S(e.recognizers,Nt.defaults.preset),new Ut(t,e)}At.prototype={defaults:{},set:function(t){return a(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(h(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Lt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return h(t,"dropRecognizeWith",this)||(t=Lt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(h(t,"requireFailure",this))return this;var e=this.requireFail;return-1===k(e,t=Lt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(h(t,"dropRequireFailure",this))return this;t=Lt(t,this);var e=k(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<8&&r(e.options.event+Ct(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=8&&r(e.options.event+Ct(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=kt},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=a({},t);if(!b(this.options.enable,[this,e]))return this.reset(),void(this.state=kt);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},m($t,At,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=6&e,i=this.attrTest(t);return r&&(8&n||!i)?16|e:r||i?4&n?8|e:2&e?4|e:2:kt}}),m(Ot,$t,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(_t),t&F&&e.push(Tt),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,a=t.deltaX,o=t.deltaY;return i&e.direction||(6&e.direction?(i=0===a?1:a<0?2:4,n=a!=this.pX,r=Math.abs(t.deltaX)):(i=0===o?1:o<0?8:16,n=o!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return $t.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Dt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),m(Mt,$t,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Et]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),m(It,At,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[bt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||12&t.eventType&&!i)this.reset();else if(1&t.eventType)this.reset(),this._timer=d((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return kt},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}}),m(Rt,$t,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Et]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),m(Pt,$t,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Ot.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return 30&n?e=t.overallVelocity:6&n?e=t.overallVelocityX:n&F&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&u(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=Dt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),m(Ft,At,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[St]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&i&&n){if(4!=t.eventType)return this.failTimeout();var a=!this.pTime||t.timeStamp-this.pTime<e.interval,o=!this.pCenter||z(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,o&&a?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=d((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return kt},failTimeout:function(){return this._timer=d((function(){this.state=kt}),this.options.interval,this),kt},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Nt.VERSION="2.0.7",Nt.defaults={domEvents:!1,touchAction:yt,enable:!0,inputTarget:null,inputClass:null,preset:[[Rt,{enable:!1}],[Mt,{enable:!1},["rotate"]],[Pt,{direction:6}],[Ot,{direction:6},["swipe"]],[Ft],[Ft,{event:"doubletap",taps:2},["tap"]],[It]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Ut(t,e){var n;this.options=a({},Nt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(M?nt:I?ct:O?ht:Z))(n,j),this.touchAction=new wt(this,this.options.touchAction),Bt(this,!0),f(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function Bt(t,e){var n,r=t.element;r.style&&(f(t.options.cssProps,(function(i,a){n=D(r.style,a),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}Ut.prototype={set:function(t){return a(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&8&i.state)&&(i=e.curRecognizer=null);for(var a=0;a<r.length;)n=r[a],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&14&n.state&&(i=e.curRecognizer=n),a++}},get:function(t){if(t instanceof At)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(h(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(h(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=k(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==i&&e!==i){var n=this.handlers;return f(w(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==i){var n=this.handlers;return f(w(t),(function(t){e?n[t]&&n[t].splice(k(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var r=n.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}(t,e);var r=this.handlers[t]&&this.handlers[t].slice();if(r&&r.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<r.length;)r[i](e),i++}},destroy:function(){this.element&&Bt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},a(Nt,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:kt,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:F,DIRECTION_ALL:30,Manager:Ut,Input:B,TouchAction:wt,TouchInput:ct,MouseInput:Z,PointerEventInput:nt,TouchMouseInput:ht,SingleTouchInput:ot,Recognizer:At,AttrRecognizer:$t,Tap:Ft,Pan:Ot,Swipe:Pt,Pinch:Mt,Rotate:Rt,Press:It,on:E,off:T,each:f,merge:v,extend:g,assign:a,inherit:m,bindFn:y,prefixed:D}),(void 0!==e?e:"undefined"!=typeof self?self:{}).Hammer=Nt,t.exports?t.exports=Nt:e.Hammer=Nt}(window,document)}(Eh);var Th=Eh.exports;!function(t,e){if(void 0===t)throw Error("angular-hammer: AngularJS (angular) is undefined but is necessary.");if(void 0===e)throw Error("angular-hammer: HammerJS (Hammer) is undefined but is necessary.");var n="hmTouchEvents",r=t.module("hmTouchEvents",[]);function i(t,n){return void 0===t||void 0===n?null:(r=n.indexOf("pan")>-1?new e.Pan:n.indexOf("pinch")>-1?new e.Pinch:n.indexOf("press")>-1?new e.Press:n.indexOf("rotate")>-1?new e.Rotate:n.indexOf("swipe")>-1?new e.Swipe:new e.Tap,t.add(r),r);var r}function a(t){return t.indexOf("pan")>-1?"pan":t.indexOf("pinch")>-1?"pinch":t.indexOf("press")>-1?"press":t.indexOf("rotate")>-1?"rotate":t.indexOf("swipe")>-1?"swipe":t.indexOf("tap")>-1?"tap":"custom"}r.provider(n,(function(){var r=this,i=!1,o={},s={},l={};function u(e){return(e=t.copy(e)).event?"doubletap"==e.event?(e.type="tap",e.taps||(e.taps=2),e._name="doubletap"):e._name=!1:e._name=e.type||!1,e}l[e.Tap.toString()]="tap",l[e.Pan.toString()]="pan",l[e.Pinch.toString()]="pinch",l[e.Press.toString()]="press",l[e.Rotate.toString()]="rotate",l[e.Swipe.toString()]="swipe",r.applyHammerPresets=function(){var n=e.defaults.preset;t.forEach(n,(function(t){var e=t[1];e.type||(e.type=l[t[0]]),(e=u(e))._name&&(o[e._name]=e)}))},r.addManagerOption=function(e,n){"object"==typeof e?t.extend(s,e):s[e]=n},r.addRecognizerOption=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)r.addRecognizerOption(t[e]);else{if("object"!=typeof t)throw Error(n+"Provider: addRecognizerOption: should be object or array of objects");(t=u(t))._name?o[t.type]=t:t.event||(i=t)}},r.$get=function(){return{extendWithDefaultManagerOpts:function(e){for(var n in e="object"!=typeof e?{}:t.copy(e),s)e[n]||(e[n]=t.copy(s[n]));return e},extendWithDefaultRecognizerOpts:function(e,r){if("object"!=typeof r&&(r=[]),Array.isArray(r)||(r=[r]),"custom"==e)return r;var s,l=a(e),c=o[e]||o[l],d=!1,h=t.extend({},i||{},c||{});return r.forEach((function(n){if(!n.event&&!n.type)return t.extend(h,n);d||(n.event==e?(s=n,d=!0):n.event||n.type!=l||(s=n))})),s=s?u(s):function(t){if("custom"==t)throw Error(n+"Provider: no defaults exist for custom events");var e=a(t);return u("doubletap"==t?{type:e,event:"doubletap"}:{type:e})}(e),[t.extend(h,s)]}}}})),t.forEach(["hmCustom:custom","hmSwipe:swipe","hmSwipeleft:swipeleft","hmSwiperight:swiperight","hmSwipeup:swipeup","hmSwipedown:swipedown","hmPan:pan","hmPanstart:panstart","hmPanmove:panmove","hmPanend:panend","hmPancancel:pancancel","hmPanleft:panleft","hmPanright:panright","hmPanup:panup","hmPandown:pandown","hmPress:press","hmPressup:pressup","hmRotate:rotate","hmRotatestart:rotatestart","hmRotatemove:rotatemove","hmRotateend:rotateend","hmRotatecancel:rotatecancel","hmPinch:pinch","hmPinchstart:pinchstart","hmPinchmove:pinchmove","hmPinchend:pinchend","hmPinchcancel:pinchcancel","hmPinchin:pinchin","hmPinchout:pinchout","hmTap:tap","hmDoubletap:doubletap"],(function(o){var s=o.split(":"),l=s[0],u=s[1];r.directive(l,["$parse","$window",n,function(r,o,s){return{restrict:"A",scope:!1,link:function(c,d,h){if(!e||!o.addEventListener)throw Error(n+": window.Hammer or window.addEventListener not found, can't add event "+l);var f=d.data("hammer"),p=s.extendWithDefaultManagerOpts(c.$eval(h.hmManagerOptions)),g=s.extendWithDefaultRecognizerOpts(u,c.$eval(h.hmRecognizerOptions));f||(f=new e.Manager(d[0],p),d.data("hammer",f),c.$on("$destroy",(function(){f.destroy()})));var v=r(h[l]).bind(null,c),m=function(e){e.element=d;var n=!0,r=f.get(a(e.type));if(r){var i=r.options;i.preventDefault&&e.preventDefault(),i.stopPropagation&&e.srcEvent.stopPropagation(),n=t.isUndefined(i.invokeApply)||i.invokeApply}n?c.$apply((function(){v({$event:e})})):v({$event:e})};t.forEach(g,(function(n){"custom"!==u&&("doubletap"===u&&f.get("tap")?n.recognizeWith="tap":"pan"==n.type&&f.get("swipe")?n.recognizeWith="swipe":"pinch"==n.type&&f.get("rotate")&&(n.recognizeWith="rotate")),function(n,r,a){if(null==n||null==r||null==r.type)return console.error("ERROR: Angular Hammer could not setup the recognizer. Values of the passed manager and options: ",n,r);var o=n.get(r._name);o||(o=i(n,r._name));r.directions||("pan"===r._name||"swipe"===r._name?r.directions="DIRECTION_ALL":r._name.indexOf("left")>-1?r.directions="DIRECTION_LEFT":r._name.indexOf("right")>-1?r.directions="DIRECTION_RIGHT":r._name.indexOf("up")>-1?r.directions="DIRECTION_UP":r._name.indexOf("down")>-1?r.directions="DIRECTION_DOWN":r.directions="");if(r.direction=function(n){var r=0;return t.forEach(n.split("|"),(function(t){e.hasOwnProperty(t)&&(r|=e[t])})),r}(r.directions),o.set(r),"string"==typeof r.recognizeWith){var s;null==n.get(r.recognizeWith)&&(s=i(n,r.recognizeWith)),null!=s&&o.recognizeWith(s)}"string"==typeof r.dropRecognizeWith&&null!=n.get(r.dropRecognizeWith)&&o.dropRecognizeWith(n.get(r.dropRecognizeWith));if("string"==typeof r.requireFailure){var l;null==n.get(r.requireFailure)&&(l=i(n,{type:r.requireFailure})),null!=l&&o.requireFailure(l)}"string"==typeof r.dropRequireFailure&&null!=n.get(r.dropRequireFailure)&&o.dropRequireFailure(n.get(r.dropRequireFailure));!0===r.preventGhosts&&null!=a&&function(t){if(!t)return;var e=[],n=25,r=2500;"ontouchstart"in window&&(t[0].addEventListener("touchstart",a,!0),t[0].addEventListener("touchend",s,!0),t[0].addEventListener("click",i,!0),t[0].addEventListener("mouseup",i,!0));function i(t){for(var r=0;r<e.length;r++){var i=e[r][0],a=e[r][1];if(Math.abs(t.clientX-i)<n&&Math.abs(t.clientY-a)<n){t.stopPropagation(),t.preventDefault();break}}}function a(){e=[]}function o(){e.splice(0,1)}function s(t){if(t.touches.length-t.changedTouches.length<=0){var n=t.changedTouches[0];e.push([n.clientX,n.clientY]),setTimeout(o,r)}}}(a)}(f,function(t,e){t&&(e.preventGhosts=t.preventGhosts);return e}(p,n),d),f.on(u,m)}))}}}])}))}(angular,Hammer),Hammer=Eh.exports;var _h={exports:{}};
/*!
	 * Chart.js v2.9.4
	 * https://www.chartjs.org
	 * (c) 2020 Chart.js Contributors
	 * Released under the MIT License
	 */
!function(t,e){t.exports=function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}function n(t){return t&&t.default||t}t=t&&t.hasOwnProperty("default")?t.default:t;var r={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},i=e((function(t){var e={};for(var n in r)r.hasOwnProperty(n)&&(e[r[n]]=n);var i=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var a in i)if(i.hasOwnProperty(a)){if(!("channels"in i[a]))throw new Error("missing channels property: "+a);if(!("labels"in i[a]))throw new Error("missing channel labels property: "+a);if(i[a].labels.length!==i[a].channels)throw new Error("channel and label counts mismatch: "+a);var o=i[a].channels,s=i[a].labels;delete i[a].channels,delete i[a].labels,Object.defineProperty(i[a],"channels",{value:o}),Object.defineProperty(i[a],"labels",{value:s})}function l(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2)}i.rgb.hsl=function(t){var e,n,r=t[0]/255,i=t[1]/255,a=t[2]/255,o=Math.min(r,i,a),s=Math.max(r,i,a),l=s-o;return s===o?e=0:r===s?e=(i-a)/l:i===s?e=2+(a-r)/l:a===s&&(e=4+(r-i)/l),(e=Math.min(60*e,360))<0&&(e+=360),n=(o+s)/2,[e,100*(s===o?0:n<=.5?l/(s+o):l/(2-s-o)),100*n]},i.rgb.hsv=function(t){var e,n,r,i,a,o=t[0]/255,s=t[1]/255,l=t[2]/255,u=Math.max(o,s,l),c=u-Math.min(o,s,l),d=function(t){return(u-t)/6/c+.5};return 0===c?i=a=0:(a=c/u,e=d(o),n=d(s),r=d(l),o===u?i=r-n:s===u?i=1/3+e-r:l===u&&(i=2/3+n-e),i<0?i+=1:i>1&&(i-=1)),[360*i,100*a,100*u]},i.rgb.hwb=function(t){var e=t[0],n=t[1],r=t[2];return[i.rgb.hsl(t)[0],1/255*Math.min(e,Math.min(n,r))*100,100*(r=1-1/255*Math.max(e,Math.max(n,r)))]},i.rgb.cmyk=function(t){var e,n=t[0]/255,r=t[1]/255,i=t[2]/255;return[100*((1-n-(e=Math.min(1-n,1-r,1-i)))/(1-e)||0),100*((1-r-e)/(1-e)||0),100*((1-i-e)/(1-e)||0),100*e]},i.rgb.keyword=function(t){var n=e[t];if(n)return n;var i,a=1/0;for(var o in r)if(r.hasOwnProperty(o)){var s=l(t,r[o]);s<a&&(a=s,i=o)}return i},i.keyword.rgb=function(t){return r[t]},i.rgb.xyz=function(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*e+.7152*n+.0722*r),100*(.0193*e+.1192*n+.9505*r)]},i.rgb.lab=function(t){var e=i.rgb.xyz(t),n=e[0],r=e[1],a=e[2];return r/=100,a/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(n-r),200*(r-(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116))]},i.hsl.rgb=function(t){var e,n,r,i,a,o=t[0]/360,s=t[1]/100,l=t[2]/100;if(0===s)return[a=255*l,a,a];e=2*l-(n=l<.5?l*(1+s):l+s-l*s),i=[0,0,0];for(var u=0;u<3;u++)(r=o+1/3*-(u-1))<0&&r++,r>1&&r--,a=6*r<1?e+6*(n-e)*r:2*r<1?n:3*r<2?e+(n-e)*(2/3-r)*6:e,i[u]=255*a;return i},i.hsl.hsv=function(t){var e=t[0],n=t[1]/100,r=t[2]/100,i=n,a=Math.max(r,.01);return n*=(r*=2)<=1?r:2-r,i*=a<=1?a:2-a,[e,100*(0===r?2*i/(a+i):2*n/(r+n)),(r+n)/2*100]},i.hsv.rgb=function(t){var e=t[0]/60,n=t[1]/100,r=t[2]/100,i=Math.floor(e)%6,a=e-Math.floor(e),o=255*r*(1-n),s=255*r*(1-n*a),l=255*r*(1-n*(1-a));switch(r*=255,i){case 0:return[r,l,o];case 1:return[s,r,o];case 2:return[o,r,l];case 3:return[o,s,r];case 4:return[l,o,r];case 5:return[r,o,s]}},i.hsv.hsl=function(t){var e,n,r,i=t[0],a=t[1]/100,o=t[2]/100,s=Math.max(o,.01);return r=(2-a)*o,n=a*s,[i,100*(n=(n/=(e=(2-a)*s)<=1?e:2-e)||0),100*(r/=2)]},i.hwb.rgb=function(t){var e,n,r,i,a,o,s,l=t[0]/360,u=t[1]/100,c=t[2]/100,d=u+c;switch(d>1&&(u/=d,c/=d),r=6*l-(e=Math.floor(6*l)),0!=(1&e)&&(r=1-r),i=u+r*((n=1-c)-u),e){default:case 6:case 0:a=n,o=i,s=u;break;case 1:a=i,o=n,s=u;break;case 2:a=u,o=n,s=i;break;case 3:a=u,o=i,s=n;break;case 4:a=i,o=u,s=n;break;case 5:a=n,o=u,s=i}return[255*a,255*o,255*s]},i.cmyk.rgb=function(t){var e=t[0]/100,n=t[1]/100,r=t[2]/100,i=t[3]/100;return[255*(1-Math.min(1,e*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i))]},i.xyz.rgb=function(t){var e,n,r,i=t[0]/100,a=t[1]/100,o=t[2]/100;return n=-.9689*i+1.8758*a+.0415*o,r=.0557*i+-.204*a+1.057*o,e=(e=3.2406*i+-1.5372*a+-.4986*o)>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(e=Math.min(Math.max(0,e),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]},i.xyz.lab=function(t){var e=t[0],n=t[1],r=t[2];return n/=100,r/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(e-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},i.lab.xyz=function(t){var e,n,r,i=t[0];e=t[1]/500+(n=(i+16)/116),r=n-t[2]/200;var a=Math.pow(n,3),o=Math.pow(e,3),s=Math.pow(r,3);return n=a>.008856?a:(n-16/116)/7.787,e=o>.008856?o:(e-16/116)/7.787,r=s>.008856?s:(r-16/116)/7.787,[e*=95.047,n*=100,r*=108.883]},i.lab.lch=function(t){var e,n=t[0],r=t[1],i=t[2];return(e=360*Math.atan2(i,r)/2/Math.PI)<0&&(e+=360),[n,Math.sqrt(r*r+i*i),e]},i.lch.lab=function(t){var e,n=t[0],r=t[1];return e=t[2]/360*2*Math.PI,[n,r*Math.cos(e),r*Math.sin(e)]},i.rgb.ansi16=function(t){var e=t[0],n=t[1],r=t[2],a=1 in arguments?arguments[1]:i.rgb.hsv(t)[2];if(0===(a=Math.round(a/50)))return 30;var o=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(e/255));return 2===a&&(o+=60),o},i.hsv.ansi16=function(t){return i.rgb.ansi16(i.hsv.rgb(t),t[2])},i.rgb.ansi256=function(t){var e=t[0],n=t[1],r=t[2];return e===n&&n===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},i.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),[e=e/10.5*255,e,e];var n=.5*(1+~~(t>50));return[(1&e)*n*255,(e>>1&1)*n*255,(e>>2&1)*n*255]},i.ansi256.rgb=function(t){if(t>=232){var e=10*(t-232)+8;return[e,e,e]}var n;return t-=16,[Math.floor(t/36)/5*255,Math.floor((n=t%36)/6)/5*255,n%6/5*255]},i.rgb.hex=function(t){var e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},i.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var n=e[0];3===e[0].length&&(n=n.split("").map((function(t){return t+t})).join(""));var r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},i.rgb.hcg=function(t){var e,n=t[0]/255,r=t[1]/255,i=t[2]/255,a=Math.max(Math.max(n,r),i),o=Math.min(Math.min(n,r),i),s=a-o;return e=s<=0?0:a===n?(r-i)/s%6:a===r?2+(i-n)/s:4+(n-r)/s+4,e/=6,[360*(e%=1),100*s,100*(s<1?o/(1-s):0)]},i.hsl.hcg=function(t){var e=t[1]/100,n=t[2]/100,r=1,i=0;return(r=n<.5?2*e*n:2*e*(1-n))<1&&(i=(n-.5*r)/(1-r)),[t[0],100*r,100*i]},i.hsv.hcg=function(t){var e=t[1]/100,n=t[2]/100,r=e*n,i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],100*r,100*i]},i.hcg.rgb=function(t){var e=t[0]/360,n=t[1]/100,r=t[2]/100;if(0===n)return[255*r,255*r,255*r];var i=[0,0,0],a=e%1*6,o=a%1,s=1-o,l=0;switch(Math.floor(a)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=s,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=s,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=s}return l=(1-n)*r,[255*(n*i[0]+l),255*(n*i[1]+l),255*(n*i[2]+l)]},i.hcg.hsv=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e),r=0;return n>0&&(r=e/n),[t[0],100*r,100*n]},i.hcg.hsl=function(t){var e=t[1]/100,n=t[2]/100*(1-e)+.5*e,r=0;return n>0&&n<.5?r=e/(2*n):n>=.5&&n<1&&(r=e/(2*(1-n))),[t[0],100*r,100*n]},i.hcg.hwb=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e);return[t[0],100*(n-e),100*(1-n)]},i.hwb.hcg=function(t){var e=t[1]/100,n=1-t[2]/100,r=n-e,i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],100*r,100*i]},i.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},i.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},i.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},i.gray.hsl=i.gray.hsv=function(t){return[0,0,t[0]]},i.gray.hwb=function(t){return[0,100,t[0]]},i.gray.cmyk=function(t){return[0,0,0,t[0]]},i.gray.lab=function(t){return[t[0],0,0]},i.gray.hex=function(t){var e=255&Math.round(t[0]/100*255),n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n},i.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}}));function a(){for(var t={},e=Object.keys(i),n=e.length,r=0;r<n;r++)t[e[r]]={distance:-1,parent:null};return t}function o(t){var e=a(),n=[t];for(e[t].distance=0;n.length;)for(var r=n.pop(),o=Object.keys(i[r]),s=o.length,l=0;l<s;l++){var u=o[l],c=e[u];-1===c.distance&&(c.distance=e[r].distance+1,c.parent=r,n.unshift(u))}return e}function s(t,e){return function(n){return e(t(n))}}function l(t,e){for(var n=[e[t].parent,t],r=i[e[t].parent][t],a=e[t].parent;e[a].parent;)n.unshift(e[a].parent),r=s(i[e[a].parent][a],r),a=e[a].parent;return r.conversion=n,r}i.rgb,i.hsl,i.hsv,i.hwb,i.cmyk,i.xyz,i.lab,i.lch,i.hex,i.keyword,i.ansi16,i.ansi256,i.hcg,i.apple,i.gray;var u=function(t){for(var e=o(t),n={},r=Object.keys(e),i=r.length,a=0;a<i;a++){var s=r[a];null!==e[s].parent&&(n[s]=l(s,e))}return n},c={};function d(t){var e=function(e){return null==e?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}function h(t){var e=function(e){if(null==e)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var n=t(e);if("object"==typeof n)for(var r=n.length,i=0;i<r;i++)n[i]=Math.round(n[i]);return n};return"conversion"in t&&(e.conversion=t.conversion),e}Object.keys(i).forEach((function(t){c[t]={},Object.defineProperty(c[t],"channels",{value:i[t].channels}),Object.defineProperty(c[t],"labels",{value:i[t].labels});var e=u(t);Object.keys(e).forEach((function(n){var r=e[n];c[t][n]=h(r),c[t][n].raw=d(r)}))}));var f=c,p={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},g={getRgba:v,getHsla:m,getRgb:b,getHsl:S,getHwb:y,getAlpha:E,hexString:T,rgbString:_,rgbaString:x,percentString:w,percentaString:k,hslString:A,hslaString:C,hwbString:D,keyword:L};function v(t){if(t){var e=/^#([a-fA-F0-9]{3,4})$/i,n=/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i,r=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,a=/(\w+)/,o=[0,0,0],s=1,l=t.match(e),u="";if(l){u=(l=l[1])[3];for(var c=0;c<o.length;c++)o[c]=parseInt(l[c]+l[c],16);u&&(s=Math.round(parseInt(u+u,16)/255*100)/100)}else if(l=t.match(n)){for(u=l[2],l=l[1],c=0;c<o.length;c++)o[c]=parseInt(l.slice(2*c,2*c+2),16);u&&(s=Math.round(parseInt(u,16)/255*100)/100)}else if(l=t.match(r)){for(c=0;c<o.length;c++)o[c]=parseInt(l[c+1]);s=parseFloat(l[4])}else if(l=t.match(i)){for(c=0;c<o.length;c++)o[c]=Math.round(2.55*parseFloat(l[c+1]));s=parseFloat(l[4])}else if(l=t.match(a)){if("transparent"==l[1])return[0,0,0,0];if(!(o=p[l[1]]))return}for(c=0;c<o.length;c++)o[c]=$(o[c],0,255);return s=s||0==s?$(s,0,1):1,o[3]=s,o}}function m(t){if(t){var e=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,n=t.match(e);if(n){var r=parseFloat(n[4]);return[$(parseInt(n[1]),0,360),$(parseFloat(n[2]),0,100),$(parseFloat(n[3]),0,100),$(isNaN(r)?1:r,0,1)]}}}function y(t){if(t){var e=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,n=t.match(e);if(n){var r=parseFloat(n[4]);return[$(parseInt(n[1]),0,360),$(parseFloat(n[2]),0,100),$(parseFloat(n[3]),0,100),$(isNaN(r)?1:r,0,1)]}}}function b(t){var e=v(t);return e&&e.slice(0,3)}function S(t){var e=m(t);return e&&e.slice(0,3)}function E(t){var e=v(t);return e||(e=m(t))||(e=y(t))?e[3]:void 0}function T(t,e){return e=void 0!==e&&3===t.length?e:t[3],"#"+O(t[0])+O(t[1])+O(t[2])+(e>=0&&e<1?O(Math.round(255*e)):"")}function _(t,e){return e<1||t[3]&&t[3]<1?x(t,e):"rgb("+t[0]+", "+t[1]+", "+t[2]+")"}function x(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+e+")"}function w(t,e){return e<1||t[3]&&t[3]<1?k(t,e):"rgb("+Math.round(t[0]/255*100)+"%, "+Math.round(t[1]/255*100)+"%, "+Math.round(t[2]/255*100)+"%)"}function k(t,e){return"rgba("+Math.round(t[0]/255*100)+"%, "+Math.round(t[1]/255*100)+"%, "+Math.round(t[2]/255*100)+"%, "+(e||t[3]||1)+")"}function A(t,e){return e<1||t[3]&&t[3]<1?C(t,e):"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)"}function C(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+e+")"}function D(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+(void 0!==e&&1!==e?", "+e:"")+")"}function L(t){return M[t.slice(0,3)]}function $(t,e,n){return Math.min(Math.max(e,t),n)}function O(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}var M={};for(var I in p)M[p[I]]=I;var R=function(t){return t instanceof R?t:this instanceof R?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"==typeof t?(e=g.getRgba(t))?this.setValues("rgb",e):(e=g.getHsla(t))?this.setValues("hsl",e):(e=g.getHwb(t))&&this.setValues("hwb",e):"object"==typeof t&&(void 0!==(e=t).r||void 0!==e.red?this.setValues("rgb",e):void 0!==e.l||void 0!==e.lightness?this.setValues("hsl",e):void 0!==e.v||void 0!==e.value?this.setValues("hsv",e):void 0!==e.w||void 0!==e.whiteness?this.setValues("hwb",e):void 0===e.c&&void 0===e.cyan||this.setValues("cmyk",e)))):new R(t);var e};R.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var t=this.values;return 1!==t.alpha?t.hwb.concat([t.alpha]):t.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var t=this.values;return t.rgb.concat([t.alpha])},hslaArray:function(){var t=this.values;return t.hsl.concat([t.alpha])},alpha:function(t){return void 0===t?this.values.alpha:(this.setValues("alpha",t),this)},red:function(t){return this.setChannel("rgb",0,t)},green:function(t){return this.setChannel("rgb",1,t)},blue:function(t){return this.setChannel("rgb",2,t)},hue:function(t){return t&&(t=(t%=360)<0?360+t:t),this.setChannel("hsl",0,t)},saturation:function(t){return this.setChannel("hsl",1,t)},lightness:function(t){return this.setChannel("hsl",2,t)},saturationv:function(t){return this.setChannel("hsv",1,t)},whiteness:function(t){return this.setChannel("hwb",1,t)},blackness:function(t){return this.setChannel("hwb",2,t)},value:function(t){return this.setChannel("hsv",2,t)},cyan:function(t){return this.setChannel("cmyk",0,t)},magenta:function(t){return this.setChannel("cmyk",1,t)},yellow:function(t){return this.setChannel("cmyk",2,t)},black:function(t){return this.setChannel("cmyk",3,t)},hexString:function(){return g.hexString(this.values.rgb)},rgbString:function(){return g.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return g.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return g.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return g.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return g.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return g.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return g.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var t=this.values.rgb;return t[0]<<16|t[1]<<8|t[2]},luminosity:function(){for(var t=this.values.rgb,e=[],n=0;n<t.length;n++){var r=t[n]/255;e[n]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),n=t.luminosity();return e>n?(e+.05)/(n+.05):(n+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},dark:function(){var t=this.values.rgb;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var t=[],e=0;e<3;e++)t[e]=255-this.values.rgb[e];return this.setValues("rgb",t),this},lighten:function(t){var e=this.values.hsl;return e[2]+=e[2]*t,this.setValues("hsl",e),this},darken:function(t){var e=this.values.hsl;return e[2]-=e[2]*t,this.setValues("hsl",e),this},saturate:function(t){var e=this.values.hsl;return e[1]+=e[1]*t,this.setValues("hsl",e),this},desaturate:function(t){var e=this.values.hsl;return e[1]-=e[1]*t,this.setValues("hsl",e),this},whiten:function(t){var e=this.values.hwb;return e[1]+=e[1]*t,this.setValues("hwb",e),this},blacken:function(t){var e=this.values.hwb;return e[2]+=e[2]*t,this.setValues("hwb",e),this},greyscale:function(){var t=this.values.rgb,e=.3*t[0]+.59*t[1]+.11*t[2];return this.setValues("rgb",[e,e,e]),this},clearer:function(t){var e=this.values.alpha;return this.setValues("alpha",e-e*t),this},opaquer:function(t){var e=this.values.alpha;return this.setValues("alpha",e+e*t),this},rotate:function(t){var e=this.values.hsl,n=(e[0]+t)%360;return e[0]=n<0?360+n:n,this.setValues("hsl",e),this},mix:function(t,e){var n=this,r=t,i=void 0===e?.5:e,a=2*i-1,o=n.alpha()-r.alpha(),s=((a*o==-1?a:(a+o)/(1+a*o))+1)/2,l=1-s;return this.rgb(s*n.red()+l*r.red(),s*n.green()+l*r.green(),s*n.blue()+l*r.blue()).alpha(n.alpha()*i+r.alpha()*(1-i))},toJSON:function(){return this.rgb()},clone:function(){var t,e,n=new R,r=this.values,i=n.values;for(var a in r)r.hasOwnProperty(a)&&(t=r[a],"[object Array]"===(e={}.toString.call(t))?i[a]=t.slice(0):"[object Number]"===e?i[a]=t:console.error("unexpected color value:",t));return n}},R.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},R.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},R.prototype.getValues=function(t){for(var e=this.values,n={},r=0;r<t.length;r++)n[t.charAt(r)]=e[t][r];return 1!==e.alpha&&(n.a=e.alpha),n},R.prototype.setValues=function(t,e){var n,r,i=this.values,a=this.spaces,o=this.maxes,s=1;if(this.valid=!0,"alpha"===t)s=e;else if(e.length)i[t]=e.slice(0,t.length),s=e[t.length];else if(void 0!==e[t.charAt(0)]){for(n=0;n<t.length;n++)i[t][n]=e[t.charAt(n)];s=e.a}else if(void 0!==e[a[t][0]]){var l=a[t];for(n=0;n<t.length;n++)i[t][n]=e[l[n]];s=e.alpha}if(i.alpha=Math.max(0,Math.min(1,void 0===s?i.alpha:s)),"alpha"===t)return!1;for(n=0;n<t.length;n++)r=Math.max(0,Math.min(o[t][n],i[t][n])),i[t][n]=Math.round(r);for(var u in a)u!==t&&(i[u]=f[t][u](i[t]));return!0},R.prototype.setSpace=function(t,e){var n=e[0];return void 0===n?this.getValues(t):("number"==typeof n&&(n=Array.prototype.slice.call(e)),this.setValues(t,n),this)},R.prototype.setChannel=function(t,e,n){var r=this.values[t];return void 0===n?r[e]:(n===r[e]||(r[e]=n,this.setValues(t,r)),this)},"undefined"!=typeof window&&(window.Color=R);var P=R;function F(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}var N={noop:function(){},uid:function(){var t=0;return function(){return t++}}(),isNullOrUndef:function(t){return null==t},isArray:function(t){if(Array.isArray&&Array.isArray(t))return!0;var e=Object.prototype.toString.call(t);return"[object"===e.substr(0,7)&&"Array]"===e.substr(-6)},isObject:function(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)},isFinite:function(t){return("number"==typeof t||t instanceof Number)&&isFinite(t)},valueOrDefault:function(t,e){return void 0===t?e:t},valueAtIndexOrDefault:function(t,e,n){return N.valueOrDefault(N.isArray(t)?t[e]:t,n)},callback:function(t,e,n){if(t&&"function"==typeof t.call)return t.apply(n,e)},each:function(t,e,n,r){var i,a,o;if(N.isArray(t))if(a=t.length,r)for(i=a-1;i>=0;i--)e.call(n,t[i],i);else for(i=0;i<a;i++)e.call(n,t[i],i);else if(N.isObject(t))for(a=(o=Object.keys(t)).length,i=0;i<a;i++)e.call(n,t[o[i]],o[i])},arrayEquals:function(t,e){var n,r,i,a;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],a=e[n],i instanceof Array&&a instanceof Array){if(!N.arrayEquals(i,a))return!1}else if(i!==a)return!1;return!0},clone:function(t){if(N.isArray(t))return t.map(N.clone);if(N.isObject(t)){for(var e=Object.create(t),n=Object.keys(t),r=n.length,i=0;i<r;++i)e[n[i]]=N.clone(t[n[i]]);return e}return t},_merger:function(t,e,n,r){if(F(t)){var i=e[t],a=n[t];N.isObject(i)&&N.isObject(a)?N.merge(i,a,r):e[t]=N.clone(a)}},_mergerIf:function(t,e,n){if(F(t)){var r=e[t],i=n[t];N.isObject(r)&&N.isObject(i)?N.mergeIf(r,i):e.hasOwnProperty(t)||(e[t]=N.clone(i))}},merge:function(t,e,n){var r,i,a,o,s,l=N.isArray(e)?e:[e],u=l.length;if(!N.isObject(t))return t;for(r=(n=n||{}).merger||N._merger,i=0;i<u;++i)if(e=l[i],N.isObject(e))for(s=0,o=(a=Object.keys(e)).length;s<o;++s)r(a[s],t,e,n);return t},mergeIf:function(t,e){return N.merge(t,e,{merger:N._mergerIf})},extend:Object.assign||function(t){return N.merge(t,[].slice.call(arguments,1),{merger:function(t,e,n){e[t]=n[t]}})},inherits:function(t){var e=this,n=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},r=function(){this.constructor=n};return r.prototype=e.prototype,n.prototype=new r,n.extend=N.inherits,t&&N.extend(n.prototype,t),n.__super__=e.prototype,n},_deprecated:function(t,e,n,r){void 0!==e&&console.warn(t+': "'+n+'" is deprecated. Please use "'+r+'" instead')}},U=N;N.callCallback=N.callback,N.indexOf=function(t,e,n){return Array.prototype.indexOf.call(t,e,n)},N.getValueOrDefault=N.valueOrDefault,N.getValueAtIndexOrDefault=N.valueAtIndexOrDefault;var B={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return(t-=1)*t*t+1},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-((t-=1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return(t-=1)*t*t*t*t+1},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return 1-Math.cos(t*(Math.PI/2))},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return t>=1?t:-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-(t-=1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,n=0,r=1;return 0===t?0:1===t?1:(n||(n=.3),e=n/(2*Math.PI)*Math.asin(1/r),-r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n))},easeOutElastic:function(t){var e=1.70158,n=0,r=1;return 0===t?0:1===t?1:(n||(n=.3),e=n/(2*Math.PI)*Math.asin(1/r),r*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/n)+1)},easeInOutElastic:function(t){var e=1.70158,n=0,r=1;return 0===t?0:2==(t/=.5)?1:(n||(n=.45),e=n/(2*Math.PI)*Math.asin(1/r),t<1?r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)*-.5:r*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)*.5+1)},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:function(t){return 1-B.easeOutBounce(1-t)},easeOutBounce:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:function(t){return t<.5?.5*B.easeInBounce(2*t):.5*B.easeOutBounce(2*t-1)+.5}},j={effects:B};U.easingEffects=B;var V=Math.PI,H=V/180,G=2*V,W=V/2,z=V/4,Y=2*V/3,q={clear:function(t){t.ctx.clearRect(0,0,t.width,t.height)},roundedRect:function(t,e,n,r,i,a){if(a){var o=Math.min(a,i/2,r/2),s=e+o,l=n+o,u=e+r-o,c=n+i-o;t.moveTo(e,l),s<u&&l<c?(t.arc(s,l,o,-V,-W),t.arc(u,l,o,-W,0),t.arc(u,c,o,0,W),t.arc(s,c,o,W,V)):s<u?(t.moveTo(s,n),t.arc(u,l,o,-W,W),t.arc(s,l,o,W,V+W)):l<c?(t.arc(s,l,o,-V,0),t.arc(s,c,o,0,V)):t.arc(s,l,o,-V,V),t.closePath(),t.moveTo(e,n)}else t.rect(e,n,r,i)},drawPoint:function(t,e,n,r,i,a){var o,s,l,u,c,d=(a||0)*H;if(e&&"object"==typeof e&&("[object HTMLImageElement]"===(o=e.toString())||"[object HTMLCanvasElement]"===o))return t.save(),t.translate(r,i),t.rotate(d),t.drawImage(e,-e.width/2,-e.height/2,e.width,e.height),void t.restore();if(!(isNaN(n)||n<=0)){switch(t.beginPath(),e){default:t.arc(r,i,n,0,G),t.closePath();break;case"triangle":t.moveTo(r+Math.sin(d)*n,i-Math.cos(d)*n),d+=Y,t.lineTo(r+Math.sin(d)*n,i-Math.cos(d)*n),d+=Y,t.lineTo(r+Math.sin(d)*n,i-Math.cos(d)*n),t.closePath();break;case"rectRounded":u=n-(c=.516*n),s=Math.cos(d+z)*u,l=Math.sin(d+z)*u,t.arc(r-s,i-l,c,d-V,d-W),t.arc(r+l,i-s,c,d-W,d),t.arc(r+s,i+l,c,d,d+W),t.arc(r-l,i+s,c,d+W,d+V),t.closePath();break;case"rect":if(!a){u=Math.SQRT1_2*n,t.rect(r-u,i-u,2*u,2*u);break}d+=z;case"rectRot":s=Math.cos(d)*n,l=Math.sin(d)*n,t.moveTo(r-s,i-l),t.lineTo(r+l,i-s),t.lineTo(r+s,i+l),t.lineTo(r-l,i+s),t.closePath();break;case"crossRot":d+=z;case"cross":s=Math.cos(d)*n,l=Math.sin(d)*n,t.moveTo(r-s,i-l),t.lineTo(r+s,i+l),t.moveTo(r+l,i-s),t.lineTo(r-l,i+s);break;case"star":s=Math.cos(d)*n,l=Math.sin(d)*n,t.moveTo(r-s,i-l),t.lineTo(r+s,i+l),t.moveTo(r+l,i-s),t.lineTo(r-l,i+s),d+=z,s=Math.cos(d)*n,l=Math.sin(d)*n,t.moveTo(r-s,i-l),t.lineTo(r+s,i+l),t.moveTo(r+l,i-s),t.lineTo(r-l,i+s);break;case"line":s=Math.cos(d)*n,l=Math.sin(d)*n,t.moveTo(r-s,i-l),t.lineTo(r+s,i+l);break;case"dash":t.moveTo(r,i),t.lineTo(r+Math.cos(d)*n,i+Math.sin(d)*n)}t.fill(),t.stroke()}},_isPointInArea:function(t,e){var n=1e-6;return t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n},clipArea:function(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()},unclipArea:function(t){t.restore()},lineTo:function(t,e,n,r){var i=n.steppedLine;if(i){if("middle"===i){var a=(e.x+n.x)/2;t.lineTo(a,r?n.y:e.y),t.lineTo(a,r?e.y:n.y)}else"after"===i&&!r||"after"!==i&&r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}else n.tension?t.bezierCurveTo(r?e.controlPointPreviousX:e.controlPointNextX,r?e.controlPointPreviousY:e.controlPointNextY,r?n.controlPointNextX:n.controlPointPreviousX,r?n.controlPointNextY:n.controlPointPreviousY,n.x,n.y):t.lineTo(n.x,n.y)}},K=q;U.clear=q.clear,U.drawRoundedRectangle=function(t){t.beginPath(),q.roundedRect.apply(q,arguments)};var X={_set:function(t,e){return U.merge(this[t]||(this[t]={}),e)}};X._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var Z=X,J=U.valueOrDefault;function Q(t){return!t||U.isNullOrUndef(t.size)||U.isNullOrUndef(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}var tt={toLineHeight:function(t,e){var n=(""+t).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t},toPadding:function(t){var e,n,r,i;return U.isObject(t)?(e=+t.top||0,n=+t.right||0,r=+t.bottom||0,i=+t.left||0):e=n=r=i=+t||0,{top:e,right:n,bottom:r,left:i,height:e+r,width:i+n}},_parseFont:function(t){var e=Z.global,n=J(t.fontSize,e.defaultFontSize),r={family:J(t.fontFamily,e.defaultFontFamily),lineHeight:U.options.toLineHeight(J(t.lineHeight,e.defaultLineHeight),n),size:n,style:J(t.fontStyle,e.defaultFontStyle),weight:null,string:""};return r.string=Q(r),r},resolve:function(t,e,n,r){var i,a,o,s=!0;for(i=0,a=t.length;i<a;++i)if(void 0!==(o=t[i])&&(void 0!==e&&"function"==typeof o&&(o=o(e),s=!1),void 0!==n&&U.isArray(o)&&(o=o[n],s=!1),void 0!==o))return r&&!s&&(r.cacheable=!1),o}},et={_factorize:function(t){var e,n=[],r=Math.sqrt(t);for(e=1;e<r;e++)t%e==0&&(n.push(e),n.push(t/e));return r===(0|r)&&n.push(r),n.sort((function(t,e){return t-e})).pop(),n},log10:Math.log10||function(t){var e=Math.log(t)*Math.LOG10E,n=Math.round(e);return t===Math.pow(10,n)?n:e}},nt=et;U.log10=et.log10;var rt=function(t,e){return{x:function(n){return t+t+e-n},setWidth:function(t){e=t},textAlign:function(t){return"center"===t?t:"right"===t?"left":"right"},xPlus:function(t,e){return t-e},leftForLtr:function(t,e){return t-e}}},it=function(){return{x:function(t){return t},setWidth:function(t){},textAlign:function(t){return t},xPlus:function(t,e){return t+e},leftForLtr:function(t,e){return t}}},at=U,ot=j,st=K,lt=tt,ut=nt,ct={getRtlAdapter:function(t,e,n){return t?rt(e,n):it()},overrideTextDirection:function(t,e){var n,r;"ltr"!==e&&"rtl"!==e||(r=[(n=t.canvas.style).getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)},restoreTextDirection:function(t){var e=t.prevTextDirection;void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}};function dt(t,e,n,r){var i,a,o,s,l,u,c,d,h,f=Object.keys(n);for(i=0,a=f.length;i<a;++i)if(u=n[o=f[i]],e.hasOwnProperty(o)||(e[o]=u),(s=e[o])!==u&&"_"!==o[0]){if(t.hasOwnProperty(o)||(t[o]=s),(c=typeof u)==typeof(l=t[o]))if("string"===c){if((d=P(l)).valid&&(h=P(u)).valid){e[o]=h.mix(d,r).rgbString();continue}}else if(at.isFinite(l)&&at.isFinite(u)){e[o]=l+(u-l)*r;continue}e[o]=u}}at.easing=ot,at.canvas=st,at.options=lt,at.math=ut,at.rtl=ct;var ht=function(t){at.extend(this,t),this.initialize.apply(this,arguments)};at.extend(ht.prototype,{_type:void 0,initialize:function(){this.hidden=!1},pivot:function(){var t=this;return t._view||(t._view=at.extend({},t._model)),t._start={},t},transition:function(t){var e=this,n=e._model,r=e._start,i=e._view;return n&&1!==t?(i||(i=e._view={}),r||(r=e._start={}),dt(r,i,n,t),e):(e._view=at.extend({},n),e._start=null,e)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return at.isNumber(this._model.x)&&at.isNumber(this._model.y)}}),ht.extend=at.inherits;var ft=ht,pt=ft.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),gt=pt;Object.defineProperty(pt.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(pt.prototype,"chartInstance",{get:function(){return this.chart},set:function(t){this.chart=t}}),Z._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:at.noop,onComplete:at.noop}});var vt={animations:[],request:null,addAnimation:function(t,e,n,r){var i,a,o=this.animations;for(e.chart=t,e.startTime=Date.now(),e.duration=n,r||(t.animating=!0),i=0,a=o.length;i<a;++i)if(o[i].chart===t)return void(o[i]=e);o.push(e),1===o.length&&this.requestAnimationFrame()},cancelAnimation:function(t){var e=at.findIndex(this.animations,(function(e){return e.chart===t}));-1!==e&&(this.animations.splice(e,1),t.animating=!1)},requestAnimationFrame:function(){var t=this;null===t.request&&(t.request=at.requestAnimFrame.call(window,(function(){t.request=null,t.startDigest()})))},startDigest:function(){var t=this;t.advance(),t.animations.length>0&&t.requestAnimationFrame()},advance:function(){for(var t,e,n,r,i=this.animations,a=0;a<i.length;)e=(t=i[a]).chart,n=t.numSteps,r=Math.floor((Date.now()-t.startTime)/t.duration*n)+1,t.currentStep=Math.min(r,n),at.callback(t.render,[e,t],e),at.callback(t.onAnimationProgress,[t],e),t.currentStep>=n?(at.callback(t.onAnimationComplete,[t],e),e.animating=!1,i.splice(a,1)):++a}},mt=at.options.resolve,yt=["push","pop","shift","splice","unshift"];function bt(t,e){t._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),yt.forEach((function(e){var n="onData"+e.charAt(0).toUpperCase()+e.slice(1),r=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:function(){var e=Array.prototype.slice.call(arguments),i=r.apply(this,e);return at.each(t._chartjs.listeners,(function(t){"function"==typeof t[n]&&t[n].apply(t,e)})),i}})})))}function St(t,e){var n=t._chartjs;if(n){var r=n.listeners,i=r.indexOf(e);-1!==i&&r.splice(i,1),r.length>0||(yt.forEach((function(e){delete t[e]})),delete t._chartjs)}}var Et=function(t,e){this.initialize(t,e)};at.extend(Et.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(t,e){var n=this;n.chart=t,n.index=e,n.linkScales(),n.addElements(),n._type=n.getMeta().type},updateIndex:function(t){this.index=t},linkScales:function(){var t=this,e=t.getMeta(),n=t.chart,r=n.scales,i=t.getDataset(),a=n.options.scales;null!==e.xAxisID&&e.xAxisID in r&&!i.xAxisID||(e.xAxisID=i.xAxisID||a.xAxes[0].id),null!==e.yAxisID&&e.yAxisID in r&&!i.yAxisID||(e.yAxisID=i.yAxisID||a.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(t){return this.chart.scales[t]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(!0)},destroy:function(){this._data&&St(this._data,this)},createMetaDataset:function(){var t=this,e=t.datasetElementType;return e&&new e({_chart:t.chart,_datasetIndex:t.index})},createMetaData:function(t){var e=this,n=e.dataElementType;return n&&new n({_chart:e.chart,_datasetIndex:e.index,_index:t})},addElements:function(){var t,e,n=this,r=n.getMeta(),i=n.getDataset().data||[],a=r.data;for(t=0,e=i.length;t<e;++t)a[t]=a[t]||n.createMetaData(t);r.dataset=r.dataset||n.createMetaDataset()},addElementAndReset:function(t){var e=this.createMetaData(t);this.getMeta().data.splice(t,0,e),this.updateElement(e,t,!0)},buildOrUpdateElements:function(){var t=this,e=t.getDataset(),n=e.data||(e.data=[]);t._data!==n&&(t._data&&St(t._data,t),n&&Object.isExtensible(n)&&bt(n,t),t._data=n),t.resyncElements()},_configure:function(){var t=this;t._config=at.merge(Object.create(null),[t.chart.options.datasets[t._type],t.getDataset()],{merger:function(t,e,n){"_meta"!==t&&"data"!==t&&at._merger(t,e,n)}})},_update:function(t){var e=this;e._configure(),e._cachedDataOpts=null,e.update(t)},update:at.noop,transition:function(t){for(var e=this.getMeta(),n=e.data||[],r=n.length,i=0;i<r;++i)n[i].transition(t);e.dataset&&e.dataset.transition(t)},draw:function(){var t=this.getMeta(),e=t.data||[],n=e.length,r=0;for(t.dataset&&t.dataset.draw();r<n;++r)e[r].draw()},getStyle:function(t){var e,n=this,r=n.getMeta(),i=r.dataset;return n._configure(),i&&void 0===t?e=n._resolveDatasetElementOptions(i||{}):(t=t||0,e=n._resolveDataElementOptions(r.data[t]||{},t)),!1!==e.fill&&null!==e.fill||(e.backgroundColor=e.borderColor),e},_resolveDatasetElementOptions:function(t,e){var n,r,i,a,o=this,s=o.chart,l=o._config,u=t.custom||{},c=s.options.elements[o.datasetElementType.prototype._type]||{},d=o._datasetElementOptions,h={},f={chart:s,dataset:o.getDataset(),datasetIndex:o.index,hover:e};for(n=0,r=d.length;n<r;++n)i=d[n],a=e?"hover"+i.charAt(0).toUpperCase()+i.slice(1):i,h[i]=mt([u[a],l[a],c[a]],f);return h},_resolveDataElementOptions:function(t,e){var n=this,r=t&&t.custom,i=n._cachedDataOpts;if(i&&!r)return i;var a,o,s,l,u=n.chart,c=n._config,d=u.options.elements[n.dataElementType.prototype._type]||{},h=n._dataElementOptions,f={},p={chart:u,dataIndex:e,dataset:n.getDataset(),datasetIndex:n.index},g={cacheable:!r};if(r=r||{},at.isArray(h))for(o=0,s=h.length;o<s;++o)f[l=h[o]]=mt([r[l],c[l],d[l]],p,e,g);else for(o=0,s=(a=Object.keys(h)).length;o<s;++o)f[l=a[o]]=mt([r[l],c[h[l]],c[l],d[l]],p,e,g);return g.cacheable&&(n._cachedDataOpts=Object.freeze(f)),f},removeHoverStyle:function(t){at.merge(t._model,t.$previousStyle||{}),delete t.$previousStyle},setHoverStyle:function(t){var e=this.chart.data.datasets[t._datasetIndex],n=t._index,r=t.custom||{},i=t._model,a=at.getHoverColor;t.$previousStyle={backgroundColor:i.backgroundColor,borderColor:i.borderColor,borderWidth:i.borderWidth},i.backgroundColor=mt([r.hoverBackgroundColor,e.hoverBackgroundColor,a(i.backgroundColor)],void 0,n),i.borderColor=mt([r.hoverBorderColor,e.hoverBorderColor,a(i.borderColor)],void 0,n),i.borderWidth=mt([r.hoverBorderWidth,e.hoverBorderWidth,i.borderWidth],void 0,n)},_removeDatasetHoverStyle:function(){var t=this.getMeta().dataset;t&&this.removeHoverStyle(t)},_setDatasetHoverStyle:function(){var t,e,n,r,i,a,o=this.getMeta().dataset,s={};if(o){for(a=o._model,i=this._resolveDatasetElementOptions(o,!0),t=0,e=(r=Object.keys(i)).length;t<e;++t)s[n=r[t]]=a[n],a[n]=i[n];o.$previousStyle=s}},resyncElements:function(){var t=this,e=t.getMeta(),n=t.getDataset().data,r=e.data.length,i=n.length;i<r?e.data.splice(i,r-i):i>r&&t.insertElements(r,i-r)},insertElements:function(t,e){for(var n=0;n<e;++n)this.addElementAndReset(t+n)},onDataPush:function(){var t=arguments.length;this.insertElements(this.getDataset().data.length-t,t)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(t,e){this.getMeta().data.splice(t,e),this.insertElements(t,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),Et.extend=at.inherits;var Tt=Et,_t=2*Math.PI;function xt(t,e){var n=e.startAngle,r=e.endAngle,i=e.pixelMargin,a=i/e.outerRadius,o=e.x,s=e.y;t.beginPath(),t.arc(o,s,e.outerRadius,n-a,r+a),e.innerRadius>i?(a=i/e.innerRadius,t.arc(o,s,e.innerRadius-i,r+a,n-a,!0)):t.arc(o,s,i,r+Math.PI/2,n-Math.PI/2),t.closePath(),t.clip()}function wt(t,e,n,r){var i,a=n.endAngle;for(r&&(n.endAngle=n.startAngle+_t,xt(t,n),n.endAngle=a,n.endAngle===n.startAngle&&n.fullCircles&&(n.endAngle+=_t,n.fullCircles--)),t.beginPath(),t.arc(n.x,n.y,n.innerRadius,n.startAngle+_t,n.startAngle,!0),i=0;i<n.fullCircles;++i)t.stroke();for(t.beginPath(),t.arc(n.x,n.y,e.outerRadius,n.startAngle,n.startAngle+_t),i=0;i<n.fullCircles;++i)t.stroke()}function kt(t,e,n){var r="inner"===e.borderAlign;r?(t.lineWidth=2*e.borderWidth,t.lineJoin="round"):(t.lineWidth=e.borderWidth,t.lineJoin="bevel"),n.fullCircles&&wt(t,e,n,r),r&&xt(t,n),t.beginPath(),t.arc(n.x,n.y,e.outerRadius,n.startAngle,n.endAngle),t.arc(n.x,n.y,n.innerRadius,n.endAngle,n.startAngle,!0),t.closePath(),t.stroke()}Z._set("global",{elements:{arc:{backgroundColor:Z.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var At=ft.extend({_type:"arc",inLabelRange:function(t){var e=this._view;return!!e&&Math.pow(t-e.x,2)<Math.pow(e.radius+e.hoverRadius,2)},inRange:function(t,e){var n=this._view;if(n){for(var r=at.getAngleFromPoint(n,{x:t,y:e}),i=r.angle,a=r.distance,o=n.startAngle,s=n.endAngle;s<o;)s+=_t;for(;i>s;)i-=_t;for(;i<o;)i+=_t;var l=i>=o&&i<=s,u=a>=n.innerRadius&&a<=n.outerRadius;return l&&u}return!1},getCenterPoint:function(){var t=this._view,e=(t.startAngle+t.endAngle)/2,n=(t.innerRadius+t.outerRadius)/2;return{x:t.x+Math.cos(e)*n,y:t.y+Math.sin(e)*n}},getArea:function(){var t=this._view;return Math.PI*((t.endAngle-t.startAngle)/(2*Math.PI))*(Math.pow(t.outerRadius,2)-Math.pow(t.innerRadius,2))},tooltipPosition:function(){var t=this._view,e=t.startAngle+(t.endAngle-t.startAngle)/2,n=(t.outerRadius-t.innerRadius)/2+t.innerRadius;return{x:t.x+Math.cos(e)*n,y:t.y+Math.sin(e)*n}},draw:function(){var t,e=this._chart.ctx,n=this._view,r="inner"===n.borderAlign?.33:0,i={x:n.x,y:n.y,innerRadius:n.innerRadius,outerRadius:Math.max(n.outerRadius-r,0),pixelMargin:r,startAngle:n.startAngle,endAngle:n.endAngle,fullCircles:Math.floor(n.circumference/_t)};if(e.save(),e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,i.fullCircles){for(i.endAngle=i.startAngle+_t,e.beginPath(),e.arc(i.x,i.y,i.outerRadius,i.startAngle,i.endAngle),e.arc(i.x,i.y,i.innerRadius,i.endAngle,i.startAngle,!0),e.closePath(),t=0;t<i.fullCircles;++t)e.fill();i.endAngle=i.startAngle+n.circumference%_t}e.beginPath(),e.arc(i.x,i.y,i.outerRadius,i.startAngle,i.endAngle),e.arc(i.x,i.y,i.innerRadius,i.endAngle,i.startAngle,!0),e.closePath(),e.fill(),n.borderWidth&&kt(e,n,i),e.restore()}}),Ct=at.valueOrDefault,Dt=Z.global.defaultColor;Z._set("global",{elements:{line:{tension:.4,backgroundColor:Dt,borderWidth:3,borderColor:Dt,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var Lt=ft.extend({_type:"line",draw:function(){var t,e,n,r=this,i=r._view,a=r._chart.ctx,o=i.spanGaps,s=r._children.slice(),l=Z.global,u=l.elements.line,c=-1,d=r._loop;if(s.length){if(r._loop){for(t=0;t<s.length;++t)if(e=at.previousItem(s,t),!s[t]._view.skip&&e._view.skip){s=s.slice(t).concat(s.slice(0,t)),d=o;break}d&&s.push(s[0])}for(a.save(),a.lineCap=i.borderCapStyle||u.borderCapStyle,a.setLineDash&&a.setLineDash(i.borderDash||u.borderDash),a.lineDashOffset=Ct(i.borderDashOffset,u.borderDashOffset),a.lineJoin=i.borderJoinStyle||u.borderJoinStyle,a.lineWidth=Ct(i.borderWidth,u.borderWidth),a.strokeStyle=i.borderColor||l.defaultColor,a.beginPath(),(n=s[0]._view).skip||(a.moveTo(n.x,n.y),c=0),t=1;t<s.length;++t)n=s[t]._view,e=-1===c?at.previousItem(s,t):s[c],n.skip||(c!==t-1&&!o||-1===c?a.moveTo(n.x,n.y):at.canvas.lineTo(a,e._view,n),c=t);d&&a.closePath(),a.stroke(),a.restore()}}}),$t=at.valueOrDefault,Ot=Z.global.defaultColor;function Mt(t){var e=this._view;return!!e&&Math.abs(t-e.x)<e.radius+e.hitRadius}function It(t){var e=this._view;return!!e&&Math.abs(t-e.y)<e.radius+e.hitRadius}Z._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:Ot,borderColor:Ot,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var Rt=ft.extend({_type:"point",inRange:function(t,e){var n=this._view;return!!n&&Math.pow(t-n.x,2)+Math.pow(e-n.y,2)<Math.pow(n.hitRadius+n.radius,2)},inLabelRange:Mt,inXRange:Mt,inYRange:It,getCenterPoint:function(){var t=this._view;return{x:t.x,y:t.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y,padding:t.radius+t.borderWidth}},draw:function(t){var e=this._view,n=this._chart.ctx,r=e.pointStyle,i=e.rotation,a=e.radius,o=e.x,s=e.y,l=Z.global,u=l.defaultColor;e.skip||(void 0===t||at.canvas._isPointInArea(e,t))&&(n.strokeStyle=e.borderColor||u,n.lineWidth=$t(e.borderWidth,l.elements.point.borderWidth),n.fillStyle=e.backgroundColor||u,at.canvas.drawPoint(n,r,a,o,s,i))}}),Pt=Z.global.defaultColor;function Ft(t){return t&&void 0!==t.width}function Nt(t){var e,n,r,i,a;return Ft(t)?(a=t.width/2,e=t.x-a,n=t.x+a,r=Math.min(t.y,t.base),i=Math.max(t.y,t.base)):(a=t.height/2,e=Math.min(t.x,t.base),n=Math.max(t.x,t.base),r=t.y-a,i=t.y+a),{left:e,top:r,right:n,bottom:i}}function Ut(t,e,n){return t===e?n:t===n?e:t}function Bt(t){var e=t.borderSkipped,n={};return e?(t.horizontal?t.base>t.x&&(e=Ut(e,"left","right")):t.base<t.y&&(e=Ut(e,"bottom","top")),n[e]=!0,n):n}function jt(t,e,n){var r,i,a,o,s=t.borderWidth,l=Bt(t);return at.isObject(s)?(r=+s.top||0,i=+s.right||0,a=+s.bottom||0,o=+s.left||0):r=i=a=o=+s||0,{t:l.top||r<0?0:r>n?n:r,r:l.right||i<0?0:i>e?e:i,b:l.bottom||a<0?0:a>n?n:a,l:l.left||o<0?0:o>e?e:o}}function Vt(t){var e=Nt(t),n=e.right-e.left,r=e.bottom-e.top,i=jt(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b}}}function Ht(t,e,n){var r=null===e,i=null===n,a=!(!t||r&&i)&&Nt(t);return a&&(r||e>=a.left&&e<=a.right)&&(i||n>=a.top&&n<=a.bottom)}Z._set("global",{elements:{rectangle:{backgroundColor:Pt,borderColor:Pt,borderSkipped:"bottom",borderWidth:0}}});var Gt=ft.extend({_type:"rectangle",draw:function(){var t=this._chart.ctx,e=this._view,n=Vt(e),r=n.outer,i=n.inner;t.fillStyle=e.backgroundColor,t.fillRect(r.x,r.y,r.w,r.h),r.w===i.w&&r.h===i.h||(t.save(),t.beginPath(),t.rect(r.x,r.y,r.w,r.h),t.clip(),t.fillStyle=e.borderColor,t.rect(i.x,i.y,i.w,i.h),t.fill("evenodd"),t.restore())},height:function(){var t=this._view;return t.base-t.y},inRange:function(t,e){return Ht(this._view,t,e)},inLabelRange:function(t,e){var n=this._view;return Ft(n)?Ht(n,t,null):Ht(n,null,e)},inXRange:function(t){return Ht(this._view,t,null)},inYRange:function(t){return Ht(this._view,null,t)},getCenterPoint:function(){var t,e,n=this._view;return Ft(n)?(t=n.x,e=(n.y+n.base)/2):(t=(n.x+n.base)/2,e=n.y),{x:t,y:e}},getArea:function(){var t=this._view;return Ft(t)?t.width*Math.abs(t.y-t.base):t.height*Math.abs(t.x-t.base)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y}}}),Wt={},zt=At,Yt=Lt,qt=Rt,Kt=Gt;Wt.Arc=zt,Wt.Line=Yt,Wt.Point=qt,Wt.Rectangle=Kt;var Xt=at._deprecated,Zt=at.valueOrDefault;function Jt(t,e){var n,r,i,a,o=t._length;for(i=1,a=e.length;i<a;++i)o=Math.min(o,Math.abs(e[i]-e[i-1]));for(i=0,a=t.getTicks().length;i<a;++i)r=t.getPixelForTick(i),o=i>0?Math.min(o,Math.abs(r-n)):o,n=r;return o}function Qt(t,e,n){var r,i,a=n.barThickness,o=e.stackCount,s=e.pixels[t],l=at.isNullOrUndef(a)?Jt(e.scale,e.pixels):-1;return at.isNullOrUndef(a)?(r=l*n.categoryPercentage,i=n.barPercentage):(r=a*o,i=1),{chunk:r/o,ratio:i,start:s-r/2}}function te(t,e,n){var r,i=e.pixels,a=i[t],o=t>0?i[t-1]:null,s=t<i.length-1?i[t+1]:null,l=n.categoryPercentage;return null===o&&(o=a-(null===s?e.end-e.start:s-a)),null===s&&(s=a+a-o),r=a-(a-Math.min(o,s))/2*l,{chunk:Math.abs(s-o)/2*l/e.stackCount,ratio:n.barPercentage,start:r}}Z._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),Z._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});var ee=Tt.extend({dataElementType:Wt.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var t,e,n=this;Tt.prototype.initialize.apply(n,arguments),(t=n.getMeta()).stack=n.getDataset().stack,t.bar=!0,e=n._getIndexScale().options,Xt("bar chart",e.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage"),Xt("bar chart",e.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness"),Xt("bar chart",e.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage"),Xt("bar chart",n._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength"),Xt("bar chart",e.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(t){var e,n,r=this,i=r.getMeta().data;for(r._ruler=r.getRuler(),e=0,n=i.length;e<n;++e)r.updateElement(i[e],e,t)},updateElement:function(t,e,n){var r=this,i=r.getMeta(),a=r.getDataset(),o=r._resolveDataElementOptions(t,e);t._xScale=r.getScaleForId(i.xAxisID),t._yScale=r.getScaleForId(i.yAxisID),t._datasetIndex=r.index,t._index=e,t._model={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderSkipped:o.borderSkipped,borderWidth:o.borderWidth,datasetLabel:a.label,label:r.chart.data.labels[e]},at.isArray(a.data[e])&&(t._model.borderSkipped=null),r._updateElementGeometry(t,e,n,o),t.pivot()},_updateElementGeometry:function(t,e,n,r){var i=this,a=t._model,o=i._getValueScale(),s=o.getBasePixel(),l=o.isHorizontal(),u=i._ruler||i.getRuler(),c=i.calculateBarValuePixels(i.index,e,r),d=i.calculateBarIndexPixels(i.index,e,u,r);a.horizontal=l,a.base=n?s:c.base,a.x=l?n?s:c.head:d.center,a.y=l?d.center:n?s:c.head,a.height=l?d.size:void 0,a.width=l?void 0:d.size},_getStacks:function(t){var e,n,r=this,i=r._getIndexScale(),a=i._getMatchingVisibleMetas(r._type),o=i.options.stacked,s=a.length,l=[];for(e=0;e<s&&(n=a[e],(!1===o||-1===l.indexOf(n.stack)||void 0===o&&void 0===n.stack)&&l.push(n.stack),n.index!==t);++e);return l},getStackCount:function(){return this._getStacks().length},getStackIndex:function(t,e){var n=this._getStacks(t),r=void 0!==e?n.indexOf(e):-1;return-1===r?n.length-1:r},getRuler:function(){var t,e,n=this,r=n._getIndexScale(),i=[];for(t=0,e=n.getMeta().data.length;t<e;++t)i.push(r.getPixelForValue(null,t,n.index));return{pixels:i,start:r._startPixel,end:r._endPixel,stackCount:n.getStackCount(),scale:r}},calculateBarValuePixels:function(t,e,n){var r,i,a,o,s,l,u,c=this,d=c.chart,h=c._getValueScale(),f=h.isHorizontal(),p=d.data.datasets,g=h._getMatchingVisibleMetas(c._type),v=h._parseValue(p[t].data[e]),m=n.minBarLength,y=h.options.stacked,b=c.getMeta().stack,S=void 0===v.start?0:v.max>=0&&v.min>=0?v.min:v.max,E=void 0===v.start?v.end:v.max>=0&&v.min>=0?v.max-v.min:v.min-v.max,T=g.length;if(y||void 0===y&&void 0!==b)for(r=0;r<T&&(i=g[r]).index!==t;++r)i.stack===b&&(a=void 0===(u=h._parseValue(p[i.index].data[e])).start?u.end:u.min>=0&&u.max>=0?u.max:u.min,(v.min<0&&a<0||v.max>=0&&a>0)&&(S+=a));return o=h.getPixelForValue(S),l=(s=h.getPixelForValue(S+E))-o,void 0!==m&&Math.abs(l)<m&&(l=m,s=E>=0&&!f||E<0&&f?o-m:o+m),{size:l,base:o,head:s,center:s+l/2}},calculateBarIndexPixels:function(t,e,n,r){var i=this,a="flex"===r.barThickness?te(e,n,r):Qt(e,n,r),o=i.getStackIndex(t,i.getMeta().stack),s=a.start+a.chunk*o+a.chunk/2,l=Math.min(Zt(r.maxBarThickness,1/0),a.chunk*a.ratio);return{base:s-l/2,head:s+l/2,center:s,size:l}},draw:function(){var t=this,e=t.chart,n=t._getValueScale(),r=t.getMeta().data,i=t.getDataset(),a=r.length,o=0;for(at.canvas.clipArea(e.ctx,e.chartArea);o<a;++o){var s=n._parseValue(i.data[o]);isNaN(s.min)||isNaN(s.max)||r[o].draw()}at.canvas.unclipArea(e.ctx)},_resolveDataElementOptions:function(){var t=this,e=at.extend({},Tt.prototype._resolveDataElementOptions.apply(t,arguments)),n=t._getIndexScale().options,r=t._getValueScale().options;return e.barPercentage=Zt(n.barPercentage,e.barPercentage),e.barThickness=Zt(n.barThickness,e.barThickness),e.categoryPercentage=Zt(n.categoryPercentage,e.categoryPercentage),e.maxBarThickness=Zt(n.maxBarThickness,e.maxBarThickness),e.minBarLength=Zt(r.minBarLength,e.minBarLength),e}}),ne=at.valueOrDefault,re=at.options.resolve;Z._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(t,e){var n=e.datasets[t.datasetIndex].label||"",r=e.datasets[t.datasetIndex].data[t.index];return n+": ("+t.xLabel+", "+t.yLabel+", "+r.r+")"}}}});var ie=Tt.extend({dataElementType:Wt.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(t){var e=this,n=e.getMeta().data;at.each(n,(function(n,r){e.updateElement(n,r,t)}))},updateElement:function(t,e,n){var r=this,i=r.getMeta(),a=t.custom||{},o=r.getScaleForId(i.xAxisID),s=r.getScaleForId(i.yAxisID),l=r._resolveDataElementOptions(t,e),u=r.getDataset().data[e],c=r.index,d=n?o.getPixelForDecimal(.5):o.getPixelForValue("object"==typeof u?u:NaN,e,c),h=n?s.getBasePixel():s.getPixelForValue(u,e,c);t._xScale=o,t._yScale=s,t._options=l,t._datasetIndex=c,t._index=e,t._model={backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,hitRadius:l.hitRadius,pointStyle:l.pointStyle,rotation:l.rotation,radius:n?0:l.radius,skip:a.skip||isNaN(d)||isNaN(h),x:d,y:h},t.pivot()},setHoverStyle:function(t){var e=t._model,n=t._options,r=at.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=ne(n.hoverBackgroundColor,r(n.backgroundColor)),e.borderColor=ne(n.hoverBorderColor,r(n.borderColor)),e.borderWidth=ne(n.hoverBorderWidth,n.borderWidth),e.radius=n.radius+n.hoverRadius},_resolveDataElementOptions:function(t,e){var n=this,r=n.chart,i=n.getDataset(),a=t.custom||{},o=i.data[e]||{},s=Tt.prototype._resolveDataElementOptions.apply(n,arguments),l={chart:r,dataIndex:e,dataset:i,datasetIndex:n.index};return n._cachedDataOpts===s&&(s=at.extend({},s)),s.radius=re([a.radius,o.r,n._config.radius,r.options.elements.point.radius],l,e),s}}),ae=at.valueOrDefault,oe=Math.PI,se=2*oe,le=oe/2;Z._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(t){var e,n,r,i=document.createElement("ul"),a=t.data,o=a.datasets,s=a.labels;if(i.setAttribute("class",t.id+"-legend"),o.length)for(e=0,n=o[0].data.length;e<n;++e)(r=i.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=o[0].backgroundColor[e],s[e]&&r.appendChild(document.createTextNode(s[e]));return i.outerHTML},legend:{labels:{generateLabels:function(t){var e=t.data;return e.labels.length&&e.datasets.length?e.labels.map((function(n,r){var i=t.getDatasetMeta(0),a=i.controller.getStyle(r);return{text:n,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,hidden:isNaN(e.datasets[0].data[r])||i.data[r].hidden,index:r}})):[]}},onClick:function(t,e){var n,r,i,a=e.index,o=this.chart;for(n=0,r=(o.data.datasets||[]).length;n<r;++n)(i=o.getDatasetMeta(n)).data[a]&&(i.data[a].hidden=!i.data[a].hidden);o.update()}},cutoutPercentage:50,rotation:-le,circumference:se,tooltips:{callbacks:{title:function(){return""},label:function(t,e){var n=e.labels[t.index],r=": "+e.datasets[t.datasetIndex].data[t.index];return at.isArray(n)?(n=n.slice())[0]+=r:n+=r,n}}}});var ue=Tt.extend({dataElementType:Wt.Arc,linkScales:at.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(t){for(var e=0,n=0;n<t;++n)this.chart.isDatasetVisible(n)&&++e;return e},update:function(t){var e,n,r,i,a=this,o=a.chart,s=o.chartArea,l=o.options,u=1,c=1,d=0,h=0,f=a.getMeta(),p=f.data,g=l.cutoutPercentage/100||0,v=l.circumference,m=a._getRingWeight(a.index);if(v<se){var y=l.rotation%se,b=(y+=y>=oe?-se:y<-oe?se:0)+v,S=Math.cos(y),E=Math.sin(y),T=Math.cos(b),_=Math.sin(b),x=y<=0&&b>=0||b>=se,w=y<=le&&b>=le||b>=se+le,k=y<=-le&&b>=-le||b>=oe+le,A=y===-oe||b>=oe?-1:Math.min(S,S*g,T,T*g),C=k?-1:Math.min(E,E*g,_,_*g),D=x?1:Math.max(S,S*g,T,T*g),L=w?1:Math.max(E,E*g,_,_*g);u=(D-A)/2,c=(L-C)/2,d=-(D+A)/2,h=-(L+C)/2}for(r=0,i=p.length;r<i;++r)p[r]._options=a._resolveDataElementOptions(p[r],r);for(o.borderWidth=a.getMaxBorderWidth(),e=(s.right-s.left-o.borderWidth)/u,n=(s.bottom-s.top-o.borderWidth)/c,o.outerRadius=Math.max(Math.min(e,n)/2,0),o.innerRadius=Math.max(o.outerRadius*g,0),o.radiusLength=(o.outerRadius-o.innerRadius)/(a._getVisibleDatasetWeightTotal()||1),o.offsetX=d*o.outerRadius,o.offsetY=h*o.outerRadius,f.total=a.calculateTotal(),a.outerRadius=o.outerRadius-o.radiusLength*a._getRingWeightOffset(a.index),a.innerRadius=Math.max(a.outerRadius-o.radiusLength*m,0),r=0,i=p.length;r<i;++r)a.updateElement(p[r],r,t)},updateElement:function(t,e,n){var r=this,i=r.chart,a=i.chartArea,o=i.options,s=o.animation,l=(a.left+a.right)/2,u=(a.top+a.bottom)/2,c=o.rotation,d=o.rotation,h=r.getDataset(),f=n&&s.animateRotate||t.hidden?0:r.calculateCircumference(h.data[e])*(o.circumference/se),p=n&&s.animateScale?0:r.innerRadius,g=n&&s.animateScale?0:r.outerRadius,v=t._options||{};at.extend(t,{_datasetIndex:r.index,_index:e,_model:{backgroundColor:v.backgroundColor,borderColor:v.borderColor,borderWidth:v.borderWidth,borderAlign:v.borderAlign,x:l+i.offsetX,y:u+i.offsetY,startAngle:c,endAngle:d,circumference:f,outerRadius:g,innerRadius:p,label:at.valueAtIndexOrDefault(h.label,e,i.data.labels[e])}});var m=t._model;n&&s.animateRotate||(m.startAngle=0===e?o.rotation:r.getMeta().data[e-1]._model.endAngle,m.endAngle=m.startAngle+m.circumference),t.pivot()},calculateTotal:function(){var t,e=this.getDataset(),n=this.getMeta(),r=0;return at.each(n.data,(function(n,i){t=e.data[i],isNaN(t)||n.hidden||(r+=Math.abs(t))})),r},calculateCircumference:function(t){var e=this.getMeta().total;return e>0&&!isNaN(t)?se*(Math.abs(t)/e):0},getMaxBorderWidth:function(t){var e,n,r,i,a,o,s,l,u=this,c=0,d=u.chart;if(!t)for(e=0,n=d.data.datasets.length;e<n;++e)if(d.isDatasetVisible(e)){t=(r=d.getDatasetMeta(e)).data,e!==u.index&&(a=r.controller);break}if(!t)return 0;for(e=0,n=t.length;e<n;++e)i=t[e],a?(a._configure(),o=a._resolveDataElementOptions(i,e)):o=i._options,"inner"!==o.borderAlign&&(s=o.borderWidth,c=(l=o.hoverBorderWidth)>(c=s>c?s:c)?l:c);return c},setHoverStyle:function(t){var e=t._model,n=t._options,r=at.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth},e.backgroundColor=ae(n.hoverBackgroundColor,r(n.backgroundColor)),e.borderColor=ae(n.hoverBorderColor,r(n.borderColor)),e.borderWidth=ae(n.hoverBorderWidth,n.borderWidth)},_getRingWeightOffset:function(t){for(var e=0,n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e},_getRingWeight:function(t){return Math.max(ae(this.chart.data.datasets[t].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});Z._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),Z._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var ce=ee.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),de=at.valueOrDefault,he=at.options.resolve,fe=at.canvas._isPointInArea;function pe(t,e){var n=t&&t.options.ticks||{},r=n.reverse,i=void 0===n.min?e:0,a=void 0===n.max?e:0;return{start:r?a:i,end:r?i:a}}function ge(t,e,n){var r=n/2,i=pe(t,r),a=pe(e,r);return{top:a.end,right:i.end,bottom:a.start,left:i.start}}function ve(t){var e,n,r,i;return at.isObject(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i}}Z._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var me=Tt.extend({datasetElementType:Wt.Line,dataElementType:Wt.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(t){var e,n,r=this,i=r.getMeta(),a=i.dataset,o=i.data||[],s=r.chart.options,l=r._config,u=r._showLine=de(l.showLine,s.showLines);for(r._xScale=r.getScaleForId(i.xAxisID),r._yScale=r.getScaleForId(i.yAxisID),u&&(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),a._scale=r._yScale,a._datasetIndex=r.index,a._children=o,a._model=r._resolveDatasetElementOptions(a),a.pivot()),e=0,n=o.length;e<n;++e)r.updateElement(o[e],e,t);for(u&&0!==a._model.tension&&r.updateBezierControlPoints(),e=0,n=o.length;e<n;++e)o[e].pivot()},updateElement:function(t,e,n){var r,i,a=this,o=a.getMeta(),s=t.custom||{},l=a.getDataset(),u=a.index,c=l.data[e],d=a._xScale,h=a._yScale,f=o.dataset._model,p=a._resolveDataElementOptions(t,e);r=d.getPixelForValue("object"==typeof c?c:NaN,e,u),i=n?h.getBasePixel():a.calculatePointY(c,e,u),t._xScale=d,t._yScale=h,t._options=p,t._datasetIndex=u,t._index=e,t._model={x:r,y:i,skip:s.skip||isNaN(r)||isNaN(i),radius:p.radius,pointStyle:p.pointStyle,rotation:p.rotation,backgroundColor:p.backgroundColor,borderColor:p.borderColor,borderWidth:p.borderWidth,tension:de(s.tension,f?f.tension:0),steppedLine:!!f&&f.steppedLine,hitRadius:p.hitRadius}},_resolveDatasetElementOptions:function(t){var e=this,n=e._config,r=t.custom||{},i=e.chart.options,a=i.elements.line,o=Tt.prototype._resolveDatasetElementOptions.apply(e,arguments);return o.spanGaps=de(n.spanGaps,i.spanGaps),o.tension=de(n.lineTension,a.tension),o.steppedLine=he([r.steppedLine,n.steppedLine,a.stepped]),o.clip=ve(de(n.clip,ge(e._xScale,e._yScale,o.borderWidth))),o},calculatePointY:function(t,e,n){var r,i,a,o,s,l,u,c=this,d=c.chart,h=c._yScale,f=0,p=0;if(h.options.stacked){for(s=+h.getRightValue(t),u=(l=d._getSortedVisibleDatasetMetas()).length,r=0;r<u&&(a=l[r]).index!==n;++r)i=d.data.datasets[a.index],"line"===a.type&&a.yAxisID===h.id&&((o=+h.getRightValue(i.data[e]))<0?p+=o||0:f+=o||0);return s<0?h.getPixelForValue(p+s):h.getPixelForValue(f+s)}return h.getPixelForValue(t)},updateBezierControlPoints:function(){var t,e,n,r,i=this,a=i.chart,o=i.getMeta(),s=o.dataset._model,l=a.chartArea,u=o.data||[];function c(t,e,n){return Math.max(Math.min(t,n),e)}if(s.spanGaps&&(u=u.filter((function(t){return!t._model.skip}))),"monotone"===s.cubicInterpolationMode)at.splineCurveMonotone(u);else for(t=0,e=u.length;t<e;++t)n=u[t]._model,r=at.splineCurve(at.previousItem(u,t)._model,n,at.nextItem(u,t)._model,s.tension),n.controlPointPreviousX=r.previous.x,n.controlPointPreviousY=r.previous.y,n.controlPointNextX=r.next.x,n.controlPointNextY=r.next.y;if(a.options.elements.line.capBezierPoints)for(t=0,e=u.length;t<e;++t)n=u[t]._model,fe(n,l)&&(t>0&&fe(u[t-1]._model,l)&&(n.controlPointPreviousX=c(n.controlPointPreviousX,l.left,l.right),n.controlPointPreviousY=c(n.controlPointPreviousY,l.top,l.bottom)),t<u.length-1&&fe(u[t+1]._model,l)&&(n.controlPointNextX=c(n.controlPointNextX,l.left,l.right),n.controlPointNextY=c(n.controlPointNextY,l.top,l.bottom)))},draw:function(){var t,e=this,n=e.chart,r=e.getMeta(),i=r.data||[],a=n.chartArea,o=n.canvas,s=0,l=i.length;for(e._showLine&&(t=r.dataset._model.clip,at.canvas.clipArea(n.ctx,{left:!1===t.left?0:a.left-t.left,right:!1===t.right?o.width:a.right+t.right,top:!1===t.top?0:a.top-t.top,bottom:!1===t.bottom?o.height:a.bottom+t.bottom}),r.dataset.draw(),at.canvas.unclipArea(n.ctx));s<l;++s)i[s].draw(a)},setHoverStyle:function(t){var e=t._model,n=t._options,r=at.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=de(n.hoverBackgroundColor,r(n.backgroundColor)),e.borderColor=de(n.hoverBorderColor,r(n.borderColor)),e.borderWidth=de(n.hoverBorderWidth,n.borderWidth),e.radius=de(n.hoverRadius,n.radius)}}),ye=at.options.resolve;Z._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(t){var e,n,r,i=document.createElement("ul"),a=t.data,o=a.datasets,s=a.labels;if(i.setAttribute("class",t.id+"-legend"),o.length)for(e=0,n=o[0].data.length;e<n;++e)(r=i.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=o[0].backgroundColor[e],s[e]&&r.appendChild(document.createTextNode(s[e]));return i.outerHTML},legend:{labels:{generateLabels:function(t){var e=t.data;return e.labels.length&&e.datasets.length?e.labels.map((function(n,r){var i=t.getDatasetMeta(0),a=i.controller.getStyle(r);return{text:n,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,hidden:isNaN(e.datasets[0].data[r])||i.data[r].hidden,index:r}})):[]}},onClick:function(t,e){var n,r,i,a=e.index,o=this.chart;for(n=0,r=(o.data.datasets||[]).length;n<r;++n)(i=o.getDatasetMeta(n)).data[a].hidden=!i.data[a].hidden;o.update()}},tooltips:{callbacks:{title:function(){return""},label:function(t,e){return e.labels[t.index]+": "+t.yLabel}}}});var be=Tt.extend({dataElementType:Wt.Arc,linkScales:at.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(t){var e,n,r,i=this,a=i.getDataset(),o=i.getMeta(),s=i.chart.options.startAngle||0,l=i._starts=[],u=i._angles=[],c=o.data;for(i._updateRadius(),o.count=i.countVisibleElements(),e=0,n=a.data.length;e<n;e++)l[e]=s,r=i._computeAngle(e),u[e]=r,s+=r;for(e=0,n=c.length;e<n;++e)c[e]._options=i._resolveDataElementOptions(c[e],e),i.updateElement(c[e],e,t)},_updateRadius:function(){var t=this,e=t.chart,n=e.chartArea,r=e.options,i=Math.min(n.right-n.left,n.bottom-n.top);e.outerRadius=Math.max(i/2,0),e.innerRadius=Math.max(r.cutoutPercentage?e.outerRadius/100*r.cutoutPercentage:1,0),e.radiusLength=(e.outerRadius-e.innerRadius)/e.getVisibleDatasetCount(),t.outerRadius=e.outerRadius-e.radiusLength*t.index,t.innerRadius=t.outerRadius-e.radiusLength},updateElement:function(t,e,n){var r=this,i=r.chart,a=r.getDataset(),o=i.options,s=o.animation,l=i.scale,u=i.data.labels,c=l.xCenter,d=l.yCenter,h=o.startAngle,f=t.hidden?0:l.getDistanceFromCenterForValue(a.data[e]),p=r._starts[e],g=p+(t.hidden?0:r._angles[e]),v=s.animateScale?0:l.getDistanceFromCenterForValue(a.data[e]),m=t._options||{};at.extend(t,{_datasetIndex:r.index,_index:e,_scale:l,_model:{backgroundColor:m.backgroundColor,borderColor:m.borderColor,borderWidth:m.borderWidth,borderAlign:m.borderAlign,x:c,y:d,innerRadius:0,outerRadius:n?v:f,startAngle:n&&s.animateRotate?h:p,endAngle:n&&s.animateRotate?h:g,label:at.valueAtIndexOrDefault(u,e,u[e])}}),t.pivot()},countVisibleElements:function(){var t=this.getDataset(),e=this.getMeta(),n=0;return at.each(e.data,(function(e,r){isNaN(t.data[r])||e.hidden||n++})),n},setHoverStyle:function(t){var e=t._model,n=t._options,r=at.getHoverColor,i=at.valueOrDefault;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth},e.backgroundColor=i(n.hoverBackgroundColor,r(n.backgroundColor)),e.borderColor=i(n.hoverBorderColor,r(n.borderColor)),e.borderWidth=i(n.hoverBorderWidth,n.borderWidth)},_computeAngle:function(t){var e=this,n=this.getMeta().count,r=e.getDataset(),i=e.getMeta();if(isNaN(r.data[t])||i.data[t].hidden)return 0;var a={chart:e.chart,dataIndex:t,dataset:r,datasetIndex:e.index};return ye([e.chart.options.elements.arc.angle,2*Math.PI/n],a,t)}});Z._set("pie",at.clone(Z.doughnut)),Z._set("pie",{cutoutPercentage:0});var Se=ue,Ee=at.valueOrDefault;Z._set("radar",{spanGaps:!1,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var Te=Tt.extend({datasetElementType:Wt.Line,dataElementType:Wt.Point,linkScales:at.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(t){var e,n,r=this,i=r.getMeta(),a=i.dataset,o=i.data||[],s=r.chart.scale,l=r._config;for(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),a._scale=s,a._datasetIndex=r.index,a._children=o,a._loop=!0,a._model=r._resolveDatasetElementOptions(a),a.pivot(),e=0,n=o.length;e<n;++e)r.updateElement(o[e],e,t);for(r.updateBezierControlPoints(),e=0,n=o.length;e<n;++e)o[e].pivot()},updateElement:function(t,e,n){var r=this,i=t.custom||{},a=r.getDataset(),o=r.chart.scale,s=o.getPointPositionForValue(e,a.data[e]),l=r._resolveDataElementOptions(t,e),u=r.getMeta().dataset._model,c=n?o.xCenter:s.x,d=n?o.yCenter:s.y;t._scale=o,t._options=l,t._datasetIndex=r.index,t._index=e,t._model={x:c,y:d,skip:i.skip||isNaN(c)||isNaN(d),radius:l.radius,pointStyle:l.pointStyle,rotation:l.rotation,backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,tension:Ee(i.tension,u?u.tension:0),hitRadius:l.hitRadius}},_resolveDatasetElementOptions:function(){var t=this,e=t._config,n=t.chart.options,r=Tt.prototype._resolveDatasetElementOptions.apply(t,arguments);return r.spanGaps=Ee(e.spanGaps,n.spanGaps),r.tension=Ee(e.lineTension,n.elements.line.tension),r},updateBezierControlPoints:function(){var t,e,n,r,i=this,a=i.getMeta(),o=i.chart.chartArea,s=a.data||[];function l(t,e,n){return Math.max(Math.min(t,n),e)}for(a.dataset._model.spanGaps&&(s=s.filter((function(t){return!t._model.skip}))),t=0,e=s.length;t<e;++t)n=s[t]._model,r=at.splineCurve(at.previousItem(s,t,!0)._model,n,at.nextItem(s,t,!0)._model,n.tension),n.controlPointPreviousX=l(r.previous.x,o.left,o.right),n.controlPointPreviousY=l(r.previous.y,o.top,o.bottom),n.controlPointNextX=l(r.next.x,o.left,o.right),n.controlPointNextY=l(r.next.y,o.top,o.bottom)},setHoverStyle:function(t){var e=t._model,n=t._options,r=at.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=Ee(n.hoverBackgroundColor,r(n.backgroundColor)),e.borderColor=Ee(n.hoverBorderColor,r(n.borderColor)),e.borderWidth=Ee(n.hoverBorderWidth,n.borderWidth),e.radius=Ee(n.hoverRadius,n.radius)}});Z._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(t){return"("+t.xLabel+", "+t.yLabel+")"}}}}),Z._set("global",{datasets:{scatter:{showLine:!1}}});var _e={bar:ee,bubble:ie,doughnut:ue,horizontalBar:ce,line:me,polarArea:be,pie:Se,radar:Te,scatter:me};function xe(t,e){return t.native?{x:t.x,y:t.y}:at.getRelativePosition(t,e)}function we(t,e){var n,r,i,a,o,s,l=t._getSortedVisibleDatasetMetas();for(r=0,a=l.length;r<a;++r)for(i=0,o=(n=l[r].data).length;i<o;++i)(s=n[i])._view.skip||e(s)}function ke(t,e){var n=[];return we(t,(function(t){t.inRange(e.x,e.y)&&n.push(t)})),n}function Ae(t,e,n,r){var i=Number.POSITIVE_INFINITY,a=[];return we(t,(function(t){if(!n||t.inRange(e.x,e.y)){var o=t.getCenterPoint(),s=r(e,o);s<i?(a=[t],i=s):s===i&&a.push(t)}})),a}function Ce(t){var e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,r){var i=e?Math.abs(t.x-r.x):0,a=n?Math.abs(t.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(a,2))}}function De(t,e,n){var r=xe(e,t);n.axis=n.axis||"x";var i=Ce(n.axis),a=n.intersect?ke(t,r):Ae(t,r,!1,i),o=[];return a.length?(t._getSortedVisibleDatasetMetas().forEach((function(t){var e=t.data[a[0]._index];e&&!e._view.skip&&o.push(e)})),o):[]}var Le={modes:{single:function(t,e){var n=xe(e,t),r=[];return we(t,(function(t){if(t.inRange(n.x,n.y))return r.push(t),r})),r.slice(0,1)},label:De,index:De,dataset:function(t,e,n){var r=xe(e,t);n.axis=n.axis||"xy";var i=Ce(n.axis),a=n.intersect?ke(t,r):Ae(t,r,!1,i);return a.length>0&&(a=t.getDatasetMeta(a[0]._datasetIndex).data),a},"x-axis":function(t,e){return De(t,e,{intersect:!1})},point:function(t,e){return ke(t,xe(e,t))},nearest:function(t,e,n){var r=xe(e,t);n.axis=n.axis||"xy";var i=Ce(n.axis);return Ae(t,r,n.intersect,i)},x:function(t,e,n){var r=xe(e,t),i=[],a=!1;return we(t,(function(t){t.inXRange(r.x)&&i.push(t),t.inRange(r.x,r.y)&&(a=!0)})),n.intersect&&!a&&(i=[]),i},y:function(t,e,n){var r=xe(e,t),i=[],a=!1;return we(t,(function(t){t.inYRange(r.y)&&i.push(t),t.inRange(r.x,r.y)&&(a=!0)})),n.intersect&&!a&&(i=[]),i}}},$e=at.extend;function Oe(t,e){return at.where(t,(function(t){return t.pos===e}))}function Me(t,e){return t.sort((function(t,n){var r=e?n:t,i=e?t:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight}))}function Ie(t){var e,n,r,i=[];for(e=0,n=(t||[]).length;e<n;++e)r=t[e],i.push({index:e,box:r,pos:r.position,horizontal:r.isHorizontal(),weight:r.weight});return i}function Re(t,e){var n,r,i;for(n=0,r=t.length;n<r;++n)(i=t[n]).width=i.horizontal?i.box.fullWidth&&e.availableWidth:e.vBoxMaxWidth,i.height=i.horizontal&&e.hBoxMaxHeight}function Pe(t){var e=Ie(t),n=Me(Oe(e,"left"),!0),r=Me(Oe(e,"right")),i=Me(Oe(e,"top"),!0),a=Me(Oe(e,"bottom"));return{leftAndTop:n.concat(i),rightAndBottom:r.concat(a),chartArea:Oe(e,"chartArea"),vertical:n.concat(r),horizontal:i.concat(a)}}function Fe(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function Ne(t,e,n){var r,i,a=n.box,o=t.maxPadding;if(n.size&&(t[n.pos]-=n.size),n.size=n.horizontal?a.height:a.width,t[n.pos]+=n.size,a.getPadding){var s=a.getPadding();o.top=Math.max(o.top,s.top),o.left=Math.max(o.left,s.left),o.bottom=Math.max(o.bottom,s.bottom),o.right=Math.max(o.right,s.right)}if(r=e.outerWidth-Fe(o,t,"left","right"),i=e.outerHeight-Fe(o,t,"top","bottom"),r!==t.w||i!==t.h){t.w=r,t.h=i;var l=n.horizontal?[r,t.w]:[i,t.h];return!(l[0]===l[1]||isNaN(l[0])&&isNaN(l[1]))}}function Ue(t){var e=t.maxPadding;function n(n){var r=Math.max(e[n]-t[n],0);return t[n]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function Be(t,e){var n=e.maxPadding;function r(t){var r={left:0,top:0,right:0,bottom:0};return t.forEach((function(t){r[t]=Math.max(e[t],n[t])})),r}return r(t?["left","right"]:["top","bottom"])}function je(t,e,n){var r,i,a,o,s,l,u=[];for(r=0,i=t.length;r<i;++r)(o=(a=t[r]).box).update(a.width||e.w,a.height||e.h,Be(a.horizontal,e)),Ne(e,n,a)&&(l=!0,u.length&&(s=!0)),o.fullWidth||u.push(a);return s&&je(u,e,n)||l}function Ve(t,e,n){var r,i,a,o,s=n.padding,l=e.x,u=e.y;for(r=0,i=t.length;r<i;++r)o=(a=t[r]).box,a.horizontal?(o.left=o.fullWidth?s.left:e.left,o.right=o.fullWidth?n.outerWidth-s.right:e.left+e.w,o.top=u,o.bottom=u+o.height,o.width=o.right-o.left,u=o.bottom):(o.left=l,o.right=l+o.width,o.top=e.top,o.bottom=e.top+e.h,o.height=o.bottom-o.top,l=o.right);e.x=l,e.y=u}Z._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var He={defaults:{},addBox:function(t,e){t.boxes||(t.boxes=[]),e.fullWidth=e.fullWidth||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw:function(){e.draw.apply(e,arguments)}}]},t.boxes.push(e)},removeBox:function(t,e){var n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure:function(t,e,n){for(var r,i=["fullWidth","position","weight"],a=i.length,o=0;o<a;++o)r=i[o],n.hasOwnProperty(r)&&(e[r]=n[r])},update:function(t,e,n){if(t){var r=t.options.layout||{},i=at.options.toPadding(r.padding),a=e-i.width,o=n-i.height,s=Pe(t.boxes),l=s.vertical,u=s.horizontal,c=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:a,vBoxMaxWidth:a/2/l.length,hBoxMaxHeight:o/2}),d=$e({maxPadding:$e({},i),w:a,h:o,x:i.left,y:i.top},i);Re(l.concat(u),c),je(l,d,c),je(u,d,c)&&je(l,d,c),Ue(d),Ve(s.leftAndTop,d,c),d.x+=d.w,d.y+=d.h,Ve(s.rightAndBottom,d,c),t.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h},at.each(s.chartArea,(function(e){var n=e.box;$e(n,t.chartArea),n.update(d.w,d.h)}))}}},Ge={acquireContext:function(t){return t&&t.canvas&&(t=t.canvas),t&&t.getContext("2d")||null}},We="/*\r\n * DOM element rendering detection\r\n * https://davidwalsh.name/detect-node-insertion\r\n */\r\n@keyframes chartjs-render-animation {\r\n\tfrom { opacity: 0.99; }\r\n\tto { opacity: 1; }\r\n}\r\n\r\n.chartjs-render-monitor {\r\n\tanimation: chartjs-render-animation 0.001s;\r\n}\r\n\r\n/*\r\n * DOM element resizing detection\r\n * https://github.com/marcj/css-element-queries\r\n */\r\n.chartjs-size-monitor,\r\n.chartjs-size-monitor-expand,\r\n.chartjs-size-monitor-shrink {\r\n\tposition: absolute;\r\n\tdirection: ltr;\r\n\tleft: 0;\r\n\ttop: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\toverflow: hidden;\r\n\tpointer-events: none;\r\n\tvisibility: hidden;\r\n\tz-index: -1;\r\n}\r\n\r\n.chartjs-size-monitor-expand > div {\r\n\tposition: absolute;\r\n\twidth: 1000000px;\r\n\theight: 1000000px;\r\n\tleft: 0;\r\n\ttop: 0;\r\n}\r\n\r\n.chartjs-size-monitor-shrink > div {\r\n\tposition: absolute;\r\n\twidth: 200%;\r\n\theight: 200%;\r\n\tleft: 0;\r\n\ttop: 0;\r\n}\r\n",ze=n(Object.freeze({__proto__:null,default:We})),Ye="$chartjs",qe="chartjs-",Ke=qe+"size-monitor",Xe=qe+"render-monitor",Ze=qe+"render-animation",Je=["animationstart","webkitAnimationStart"],Qe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function tn(t,e){var n=at.getStyle(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?Number(r[1]):void 0}function en(t,e){var n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[Ye]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",null===i||""===i){var a=tn(t,"width");void 0!==a&&(t.width=a)}if(null===r||""===r)if(""===t.style.height)t.height=t.width/(e.options.aspectRatio||2);else{var o=tn(t,"height");void 0!==a&&(t.height=o)}return t}var nn=!!function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("e",null,e)}catch(t){}return t}()&&{passive:!0};function rn(t,e,n){t.addEventListener(e,n,nn)}function an(t,e,n){t.removeEventListener(e,n,nn)}function on(t,e,n,r,i){return{type:t,chart:e,native:i||null,x:void 0!==n?n:null,y:void 0!==r?r:null}}function sn(t,e){var n=Qe[t.type]||t.type,r=at.getRelativePosition(t,e);return on(n,e,r.x,r.y,t)}function ln(t,e){var n=!1,r=[];return function(){r=Array.prototype.slice.call(arguments),e=e||this,n||(n=!0,at.requestAnimFrame.call(window,(function(){n=!1,t.apply(e,r)})))}}function un(t){var e=document.createElement("div");return e.className=t||"",e}function cn(t){var e=1e6,n=un(Ke),r=un(Ke+"-expand"),i=un(Ke+"-shrink");r.appendChild(un()),i.appendChild(un()),n.appendChild(r),n.appendChild(i),n._reset=function(){r.scrollLeft=e,r.scrollTop=e,i.scrollLeft=e,i.scrollTop=e};var a=function(){n._reset(),t()};return rn(r,"scroll",a.bind(r,"expand")),rn(i,"scroll",a.bind(i,"shrink")),n}function dn(t,e){var n=t[Ye]||(t[Ye]={}),r=n.renderProxy=function(t){t.animationName===Ze&&e()};at.each(Je,(function(e){rn(t,e,r)})),n.reflow=!!t.offsetParent,t.classList.add(Xe)}function hn(t){var e=t[Ye]||{},n=e.renderProxy;n&&(at.each(Je,(function(e){an(t,e,n)})),delete e.renderProxy),t.classList.remove(Xe)}function fn(t,e,n){var r=t[Ye]||(t[Ye]={}),i=r.resizer=cn(ln((function(){if(r.resizer){var i=n.options.maintainAspectRatio&&t.parentNode,a=i?i.clientWidth:0;e(on("resize",n)),i&&i.clientWidth<a&&n.canvas&&e(on("resize",n))}})));dn(t,(function(){if(r.resizer){var e=t.parentNode;e&&e!==i.parentNode&&e.insertBefore(i,e.firstChild),i._reset()}}))}function pn(t){var e=t[Ye]||{},n=e.resizer;delete e.resizer,hn(t),n&&n.parentNode&&n.parentNode.removeChild(n)}function gn(t,e){var n=t[Ye]||(t[Ye]={});if(!n.containsStyles){n.containsStyles=!0,e="/* Chart.js */\n"+e;var r=document.createElement("style");r.setAttribute("type","text/css"),r.appendChild(document.createTextNode(e)),t.appendChild(r)}}var vn={disableCSSInjection:!1,_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,_ensureLoaded:function(t){if(!this.disableCSSInjection){var e=t.getRootNode?t.getRootNode():document;gn(e.host?e:document.head,ze)}},acquireContext:function(t,e){"string"==typeof t?t=document.getElementById(t):t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas);var n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(this._ensureLoaded(t),en(t,e),n):null},releaseContext:function(t){var e=t.canvas;if(e[Ye]){var n=e[Ye].initial;["height","width"].forEach((function(t){var r=n[t];at.isNullOrUndef(r)?e.removeAttribute(t):e.setAttribute(t,r)})),at.each(n.style||{},(function(t,n){e.style[n]=t})),e.width=e.width,delete e[Ye]}},addEventListener:function(t,e,n){var r=t.canvas;if("resize"!==e){var i=n[Ye]||(n[Ye]={});rn(r,e,(i.proxies||(i.proxies={}))[t.id+"_"+e]=function(e){n(sn(e,t))})}else fn(r,n,t)},removeEventListener:function(t,e,n){var r=t.canvas;if("resize"!==e){var i=((n[Ye]||{}).proxies||{})[t.id+"_"+e];i&&an(r,e,i)}else pn(r)}};at.addEvent=rn,at.removeEvent=an;var mn=vn._enabled?vn:Ge,yn=at.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},mn);Z._set("global",{plugins:{}});var bn={_plugins:[],_cacheId:0,register:function(t){var e=this._plugins;[].concat(t).forEach((function(t){-1===e.indexOf(t)&&e.push(t)})),this._cacheId++},unregister:function(t){var e=this._plugins;[].concat(t).forEach((function(t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)})),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(t,e,n){var r,i,a,o,s,l=this.descriptors(t),u=l.length;for(r=0;r<u;++r)if("function"==typeof(s=(a=(i=l[r]).plugin)[e])&&((o=[t].concat(n||[])).push(i.options),!1===s.apply(a,o)))return!1;return!0},descriptors:function(t){var e=t.$plugins||(t.$plugins={});if(e.id===this._cacheId)return e.descriptors;var n=[],r=[],i=t&&t.config||{},a=i.options&&i.options.plugins||{};return this._plugins.concat(i.plugins||[]).forEach((function(t){if(-1===n.indexOf(t)){var e=t.id,i=a[e];!1!==i&&(!0===i&&(i=at.clone(Z.global.plugins[e])),n.push(t),r.push({plugin:t,options:i||{}}))}})),e.descriptors=r,e.id=this._cacheId,r},_invalidate:function(t){delete t.$plugins}},Sn={constructors:{},defaults:{},registerScaleType:function(t,e,n){this.constructors[t]=e,this.defaults[t]=at.clone(n)},getScaleConstructor:function(t){return this.constructors.hasOwnProperty(t)?this.constructors[t]:void 0},getScaleDefaults:function(t){return this.defaults.hasOwnProperty(t)?at.merge(Object.create(null),[Z.scale,this.defaults[t]]):{}},updateScaleDefaults:function(t,e){var n=this;n.defaults.hasOwnProperty(t)&&(n.defaults[t]=at.extend(n.defaults[t],e))},addScalesToLayout:function(t){at.each(t.scales,(function(e){e.fullWidth=e.options.fullWidth,e.position=e.options.position,e.weight=e.options.weight,He.addBox(t,e)}))}},En=at.valueOrDefault,Tn=at.rtl.getRtlAdapter;Z._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:at.noop,title:function(t,e){var n="",r=e.labels,i=r?r.length:0;if(t.length>0){var a=t[0];a.label?n=a.label:a.xLabel?n=a.xLabel:i>0&&a.index<i&&(n=r[a.index])}return n},afterTitle:at.noop,beforeBody:at.noop,beforeLabel:at.noop,label:function(t,e){var n=e.datasets[t.datasetIndex].label||"";return n&&(n+=": "),at.isNullOrUndef(t.value)?n+=t.yLabel:n+=t.value,n},labelColor:function(t,e){var n=e.getDatasetMeta(t.datasetIndex).data[t.index]._view;return{borderColor:n.borderColor,backgroundColor:n.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:at.noop,afterBody:at.noop,beforeFooter:at.noop,footer:at.noop,afterFooter:at.noop}}});var _n={average:function(t){if(!t.length)return!1;var e,n,r=0,i=0,a=0;for(e=0,n=t.length;e<n;++e){var o=t[e];if(o&&o.hasValue()){var s=o.tooltipPosition();r+=s.x,i+=s.y,++a}}return{x:r/a,y:i/a}},nearest:function(t,e){var n,r,i,a=e.x,o=e.y,s=Number.POSITIVE_INFINITY;for(n=0,r=t.length;n<r;++n){var l=t[n];if(l&&l.hasValue()){var u=l.getCenterPoint(),c=at.distanceBetweenPoints(e,u);c<s&&(s=c,i=l)}}if(i){var d=i.tooltipPosition();a=d.x,o=d.y}return{x:a,y:o}}};function xn(t,e){return e&&(at.isArray(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function wn(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function kn(t){var e=t._xScale,n=t._yScale||t._scale,r=t._index,i=t._datasetIndex,a=t._chart.getDatasetMeta(i).controller,o=a._getIndexScale(),s=a._getValueScale();return{xLabel:e?e.getLabelForIndex(r,i):"",yLabel:n?n.getLabelForIndex(r,i):"",label:o?""+o.getLabelForIndex(r,i):"",value:s?""+s.getLabelForIndex(r,i):"",index:r,datasetIndex:i,x:t._model.x,y:t._model.y}}function An(t){var e=Z.global;return{xPadding:t.xPadding,yPadding:t.yPadding,xAlign:t.xAlign,yAlign:t.yAlign,rtl:t.rtl,textDirection:t.textDirection,bodyFontColor:t.bodyFontColor,_bodyFontFamily:En(t.bodyFontFamily,e.defaultFontFamily),_bodyFontStyle:En(t.bodyFontStyle,e.defaultFontStyle),_bodyAlign:t.bodyAlign,bodyFontSize:En(t.bodyFontSize,e.defaultFontSize),bodySpacing:t.bodySpacing,titleFontColor:t.titleFontColor,_titleFontFamily:En(t.titleFontFamily,e.defaultFontFamily),_titleFontStyle:En(t.titleFontStyle,e.defaultFontStyle),titleFontSize:En(t.titleFontSize,e.defaultFontSize),_titleAlign:t.titleAlign,titleSpacing:t.titleSpacing,titleMarginBottom:t.titleMarginBottom,footerFontColor:t.footerFontColor,_footerFontFamily:En(t.footerFontFamily,e.defaultFontFamily),_footerFontStyle:En(t.footerFontStyle,e.defaultFontStyle),footerFontSize:En(t.footerFontSize,e.defaultFontSize),_footerAlign:t.footerAlign,footerSpacing:t.footerSpacing,footerMarginTop:t.footerMarginTop,caretSize:t.caretSize,cornerRadius:t.cornerRadius,backgroundColor:t.backgroundColor,opacity:0,legendColorBackground:t.multiKeyBackground,displayColors:t.displayColors,borderColor:t.borderColor,borderWidth:t.borderWidth}}function Cn(t,e){var n=t._chart.ctx,r=2*e.yPadding,i=0,a=e.body,o=a.reduce((function(t,e){return t+e.before.length+e.lines.length+e.after.length}),0);o+=e.beforeBody.length+e.afterBody.length;var s=e.title.length,l=e.footer.length,u=e.titleFontSize,c=e.bodyFontSize,d=e.footerFontSize;r+=s*u,r+=s?(s-1)*e.titleSpacing:0,r+=s?e.titleMarginBottom:0,r+=o*c,r+=o?(o-1)*e.bodySpacing:0,r+=l?e.footerMarginTop:0,r+=l*d,r+=l?(l-1)*e.footerSpacing:0;var h=0,f=function(t){i=Math.max(i,n.measureText(t).width+h)};return n.font=at.fontString(u,e._titleFontStyle,e._titleFontFamily),at.each(e.title,f),n.font=at.fontString(c,e._bodyFontStyle,e._bodyFontFamily),at.each(e.beforeBody.concat(e.afterBody),f),h=e.displayColors?c+2:0,at.each(a,(function(t){at.each(t.before,f),at.each(t.lines,f),at.each(t.after,f)})),h=0,n.font=at.fontString(d,e._footerFontStyle,e._footerFontFamily),at.each(e.footer,f),{width:i+=2*e.xPadding,height:r}}function Dn(t,e){var n,r,i,a,o,s=t._model,l=t._chart,u=t._chart.chartArea,c="center",d="center";s.y<e.height?d="top":s.y>l.height-e.height&&(d="bottom");var h=(u.left+u.right)/2,f=(u.top+u.bottom)/2;"center"===d?(n=function(t){return t<=h},r=function(t){return t>h}):(n=function(t){return t<=e.width/2},r=function(t){return t>=l.width-e.width/2}),i=function(t){return t+e.width+s.caretSize+s.caretPadding>l.width},a=function(t){return t-e.width-s.caretSize-s.caretPadding<0},o=function(t){return t<=f?"top":"bottom"},n(s.x)?(c="left",i(s.x)&&(c="center",d=o(s.y))):r(s.x)&&(c="right",a(s.x)&&(c="center",d=o(s.y)));var p=t._options;return{xAlign:p.xAlign?p.xAlign:c,yAlign:p.yAlign?p.yAlign:d}}function Ln(t,e,n,r){var i=t.x,a=t.y,o=t.caretSize,s=t.caretPadding,l=t.cornerRadius,u=n.xAlign,c=n.yAlign,d=o+s,h=l+s;return"right"===u?i-=e.width:"center"===u&&((i-=e.width/2)+e.width>r.width&&(i=r.width-e.width),i<0&&(i=0)),"top"===c?a+=d:a-="bottom"===c?e.height+d:e.height/2,"center"===c?"left"===u?i+=d:"right"===u&&(i-=d):"left"===u?i-=h:"right"===u&&(i+=h),{x:i,y:a}}function $n(t,e){return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-t.xPadding:t.x+t.xPadding}function On(t){return xn([],wn(t))}var Mn=ft.extend({initialize:function(){this._model=An(this._options),this._lastActive=[]},getTitle:function(){var t=this,e=t._options.callbacks,n=e.beforeTitle.apply(t,arguments),r=e.title.apply(t,arguments),i=e.afterTitle.apply(t,arguments),a=[];return a=xn(a,wn(n)),a=xn(a,wn(r)),a=xn(a,wn(i))},getBeforeBody:function(){return On(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(t,e){var n=this,r=n._options.callbacks,i=[];return at.each(t,(function(t){var a={before:[],lines:[],after:[]};xn(a.before,wn(r.beforeLabel.call(n,t,e))),xn(a.lines,r.label.call(n,t,e)),xn(a.after,wn(r.afterLabel.call(n,t,e))),i.push(a)})),i},getAfterBody:function(){return On(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var t=this,e=t._options.callbacks,n=e.beforeFooter.apply(t,arguments),r=e.footer.apply(t,arguments),i=e.afterFooter.apply(t,arguments),a=[];return a=xn(a,wn(n)),a=xn(a,wn(r)),a=xn(a,wn(i))},update:function(t){var e,n,r=this,i=r._options,a=r._model,o=r._model=An(i),s=r._active,l=r._data,u={xAlign:a.xAlign,yAlign:a.yAlign},c={x:a.x,y:a.y},d={width:a.width,height:a.height},h={x:a.caretX,y:a.caretY};if(s.length){o.opacity=1;var f=[],p=[];h=_n[i.position].call(r,s,r._eventPosition);var g=[];for(e=0,n=s.length;e<n;++e)g.push(kn(s[e]));i.filter&&(g=g.filter((function(t){return i.filter(t,l)}))),i.itemSort&&(g=g.sort((function(t,e){return i.itemSort(t,e,l)}))),at.each(g,(function(t){f.push(i.callbacks.labelColor.call(r,t,r._chart)),p.push(i.callbacks.labelTextColor.call(r,t,r._chart))})),o.title=r.getTitle(g,l),o.beforeBody=r.getBeforeBody(g,l),o.body=r.getBody(g,l),o.afterBody=r.getAfterBody(g,l),o.footer=r.getFooter(g,l),o.x=h.x,o.y=h.y,o.caretPadding=i.caretPadding,o.labelColors=f,o.labelTextColors=p,o.dataPoints=g,c=Ln(o,d=Cn(this,o),u=Dn(this,d),r._chart)}else o.opacity=0;return o.xAlign=u.xAlign,o.yAlign=u.yAlign,o.x=c.x,o.y=c.y,o.width=d.width,o.height=d.height,o.caretX=h.x,o.caretY=h.y,r._model=o,t&&i.custom&&i.custom.call(r,o),r},drawCaret:function(t,e){var n=this._chart.ctx,r=this._view,i=this.getCaretPosition(t,e,r);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)},getCaretPosition:function(t,e,n){var r,i,a,o,s,l,u=n.caretSize,c=n.cornerRadius,d=n.xAlign,h=n.yAlign,f=t.x,p=t.y,g=e.width,v=e.height;if("center"===h)s=p+v/2,"left"===d?(i=(r=f)-u,a=r,o=s+u,l=s-u):(i=(r=f+g)+u,a=r,o=s-u,l=s+u);else if("left"===d?(r=(i=f+c+u)-u,a=i+u):"right"===d?(r=(i=f+g-c-u)-u,a=i+u):(r=(i=n.caretX)-u,a=i+u),"top"===h)s=(o=p)-u,l=o;else{s=(o=p+v)+u,l=o;var m=a;a=r,r=m}return{x1:r,x2:i,x3:a,y1:o,y2:s,y3:l}},drawTitle:function(t,e,n){var r,i,a,o=e.title,s=o.length;if(s){var l=Tn(e.rtl,e.x,e.width);for(t.x=$n(e,e._titleAlign),n.textAlign=l.textAlign(e._titleAlign),n.textBaseline="middle",r=e.titleFontSize,i=e.titleSpacing,n.fillStyle=e.titleFontColor,n.font=at.fontString(r,e._titleFontStyle,e._titleFontFamily),a=0;a<s;++a)n.fillText(o[a],l.x(t.x),t.y+r/2),t.y+=r+i,a+1===s&&(t.y+=e.titleMarginBottom-i)}},drawBody:function(t,e,n){var r,i,a,o,s,l,u,c,d=e.bodyFontSize,h=e.bodySpacing,f=e._bodyAlign,p=e.body,g=e.displayColors,v=0,m=g?$n(e,"left"):0,y=Tn(e.rtl,e.x,e.width),b=function(e){n.fillText(e,y.x(t.x+v),t.y+d/2),t.y+=d+h},S=y.textAlign(f);for(n.textAlign=f,n.textBaseline="middle",n.font=at.fontString(d,e._bodyFontStyle,e._bodyFontFamily),t.x=$n(e,S),n.fillStyle=e.bodyFontColor,at.each(e.beforeBody,b),v=g&&"right"!==S?"center"===f?d/2+1:d+2:0,s=0,u=p.length;s<u;++s){for(r=p[s],i=e.labelTextColors[s],a=e.labelColors[s],n.fillStyle=i,at.each(r.before,b),l=0,c=(o=r.lines).length;l<c;++l){if(g){var E=y.x(m);n.fillStyle=e.legendColorBackground,n.fillRect(y.leftForLtr(E,d),t.y,d,d),n.lineWidth=1,n.strokeStyle=a.borderColor,n.strokeRect(y.leftForLtr(E,d),t.y,d,d),n.fillStyle=a.backgroundColor,n.fillRect(y.leftForLtr(y.xPlus(E,1),d-2),t.y+1,d-2,d-2),n.fillStyle=i}b(o[l])}at.each(r.after,b)}v=0,at.each(e.afterBody,b),t.y-=h},drawFooter:function(t,e,n){var r,i,a=e.footer,o=a.length;if(o){var s=Tn(e.rtl,e.x,e.width);for(t.x=$n(e,e._footerAlign),t.y+=e.footerMarginTop,n.textAlign=s.textAlign(e._footerAlign),n.textBaseline="middle",r=e.footerFontSize,n.fillStyle=e.footerFontColor,n.font=at.fontString(r,e._footerFontStyle,e._footerFontFamily),i=0;i<o;++i)n.fillText(a[i],s.x(t.x),t.y+r/2),t.y+=r+e.footerSpacing}},drawBackground:function(t,e,n,r){n.fillStyle=e.backgroundColor,n.strokeStyle=e.borderColor,n.lineWidth=e.borderWidth;var i=e.xAlign,a=e.yAlign,o=t.x,s=t.y,l=r.width,u=r.height,c=e.cornerRadius;n.beginPath(),n.moveTo(o+c,s),"top"===a&&this.drawCaret(t,r),n.lineTo(o+l-c,s),n.quadraticCurveTo(o+l,s,o+l,s+c),"center"===a&&"right"===i&&this.drawCaret(t,r),n.lineTo(o+l,s+u-c),n.quadraticCurveTo(o+l,s+u,o+l-c,s+u),"bottom"===a&&this.drawCaret(t,r),n.lineTo(o+c,s+u),n.quadraticCurveTo(o,s+u,o,s+u-c),"center"===a&&"left"===i&&this.drawCaret(t,r),n.lineTo(o,s+c),n.quadraticCurveTo(o,s,o+c,s),n.closePath(),n.fill(),e.borderWidth>0&&n.stroke()},draw:function(){var t=this._chart.ctx,e=this._view;if(0!==e.opacity){var n={width:e.width,height:e.height},r={x:e.x,y:e.y},i=Math.abs(e.opacity<.001)?0:e.opacity,a=e.title.length||e.beforeBody.length||e.body.length||e.afterBody.length||e.footer.length;this._options.enabled&&a&&(t.save(),t.globalAlpha=i,this.drawBackground(r,e,t,n),r.y+=e.yPadding,at.rtl.overrideTextDirection(t,e.textDirection),this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),at.rtl.restoreTextDirection(t,e.textDirection),t.restore())}},handleEvent:function(t){var e=this,n=e._options,r=!1;return e._lastActive=e._lastActive||[],"mouseout"===t.type?e._active=[]:(e._active=e._chart.getElementsAtEventForMode(t,n.mode,n),n.reverse&&e._active.reverse()),(r=!at.arrayEquals(e._active,e._lastActive))&&(e._lastActive=e._active,(n.enabled||n.custom)&&(e._eventPosition={x:t.x,y:t.y},e.update(!0),e.pivot())),r}}),In=_n,Rn=Mn;Rn.positioners=In;var Pn=at.valueOrDefault;function Fn(){return at.merge(Object.create(null),[].slice.call(arguments),{merger:function(t,e,n,r){if("xAxes"===t||"yAxes"===t){var i,a,o,s=n[t].length;for(e[t]||(e[t]=[]),i=0;i<s;++i)o=n[t][i],a=Pn(o.type,"xAxes"===t?"category":"linear"),i>=e[t].length&&e[t].push({}),!e[t][i].type||o.type&&o.type!==e[t][i].type?at.merge(e[t][i],[Sn.getScaleDefaults(a),o]):at.merge(e[t][i],o)}else at._merger(t,e,n,r)}})}function Nn(){return at.merge(Object.create(null),[].slice.call(arguments),{merger:function(t,e,n,r){var i=e[t]||Object.create(null),a=n[t];"scales"===t?e[t]=Fn(i,a):"scale"===t?e[t]=at.merge(i,[Sn.getScaleDefaults(a.type),a]):at._merger(t,e,n,r)}})}function Un(t){var e=(t=t||Object.create(null)).data=t.data||{};return e.datasets=e.datasets||[],e.labels=e.labels||[],t.options=Nn(Z.global,Z[t.type],t.options||{}),t}function Bn(t){var e=t.options;at.each(t.scales,(function(e){He.removeBox(t,e)})),e=Nn(Z.global,Z[t.config.type],e),t.options=t.config.options=e,t.ensureScalesHaveIDs(),t.buildOrUpdateScales(),t.tooltip._options=e.tooltips,t.tooltip.initialize()}function jn(t,e,n){var r,i=function(t){return t.id===r};do{r=e+n++}while(at.findIndex(t,i)>=0);return r}function Vn(t){return"top"===t||"bottom"===t}function Hn(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}Z._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});var Gn=function(t,e){return this.construct(t,e),this};at.extend(Gn.prototype,{construct:function(t,e){var n=this;e=Un(e);var r=yn.acquireContext(t,e),i=r&&r.canvas,a=i&&i.height,o=i&&i.width;n.id=at.uid(),n.ctx=r,n.canvas=i,n.config=e,n.width=o,n.height=a,n.aspectRatio=a?o/a:null,n.options=e.options,n._bufferedRender=!1,n._layers=[],n.chart=n,n.controller=n,Gn.instances[n.id]=n,Object.defineProperty(n,"data",{get:function(){return n.config.data},set:function(t){n.config.data=t}}),r&&i?(n.initialize(),n.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var t=this;return bn.notify(t,"beforeInit"),at.retinaScale(t,t.options.devicePixelRatio),t.bindEvents(),t.options.responsive&&t.resize(!0),t.initToolTip(),bn.notify(t,"afterInit"),t},clear:function(){return at.canvas.clear(this),this},stop:function(){return vt.cancelAnimation(this),this},resize:function(t){var e=this,n=e.options,r=e.canvas,i=n.maintainAspectRatio&&e.aspectRatio||null,a=Math.max(0,Math.floor(at.getMaximumWidth(r))),o=Math.max(0,Math.floor(i?a/i:at.getMaximumHeight(r)));if((e.width!==a||e.height!==o)&&(r.width=e.width=a,r.height=e.height=o,r.style.width=a+"px",r.style.height=o+"px",at.retinaScale(e,n.devicePixelRatio),!t)){var s={width:a,height:o};bn.notify(e,"resize",[s]),n.onResize&&n.onResize(e,s),e.stop(),e.update({duration:n.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var t=this.options,e=t.scales||{},n=t.scale;at.each(e.xAxes,(function(t,n){t.id||(t.id=jn(e.xAxes,"x-axis-",n))})),at.each(e.yAxes,(function(t,n){t.id||(t.id=jn(e.yAxes,"y-axis-",n))})),n&&(n.id=n.id||"scale")},buildOrUpdateScales:function(){var t=this,e=t.options,n=t.scales||{},r=[],i=Object.keys(n).reduce((function(t,e){return t[e]=!1,t}),{});e.scales&&(r=r.concat((e.scales.xAxes||[]).map((function(t){return{options:t,dtype:"category",dposition:"bottom"}})),(e.scales.yAxes||[]).map((function(t){return{options:t,dtype:"linear",dposition:"left"}})))),e.scale&&r.push({options:e.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),at.each(r,(function(e){var r=e.options,a=r.id,o=Pn(r.type,e.dtype);Vn(r.position)!==Vn(e.dposition)&&(r.position=e.dposition),i[a]=!0;var s=null;if(a in n&&n[a].type===o)(s=n[a]).options=r,s.ctx=t.ctx,s.chart=t;else{var l=Sn.getScaleConstructor(o);if(!l)return;s=new l({id:a,type:o,options:r,ctx:t.ctx,chart:t}),n[s.id]=s}s.mergeTicksOptions(),e.isDefault&&(t.scale=s)})),at.each(i,(function(t,e){t||delete n[e]})),t.scales=n,Sn.addScalesToLayout(this)},buildOrUpdateControllers:function(){var t,e,n=this,r=[],i=n.data.datasets;for(t=0,e=i.length;t<e;t++){var a=i[t],o=n.getDatasetMeta(t),s=a.type||n.config.type;if(o.type&&o.type!==s&&(n.destroyDatasetMeta(t),o=n.getDatasetMeta(t)),o.type=s,o.order=a.order||0,o.index=t,o.controller)o.controller.updateIndex(t),o.controller.linkScales();else{var l=_e[o.type];if(void 0===l)throw new Error('"'+o.type+'" is not a chart type.');o.controller=new l(n,t),r.push(o.controller)}}return r},resetElements:function(){var t=this;at.each(t.data.datasets,(function(e,n){t.getDatasetMeta(n).controller.reset()}),t)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(t){var e,n,r=this;if(t&&"object"==typeof t||(t={duration:t,lazy:arguments[1]}),Bn(r),bn._invalidate(r),!1!==bn.notify(r,"beforeUpdate")){r.tooltip._data=r.data;var i=r.buildOrUpdateControllers();for(e=0,n=r.data.datasets.length;e<n;e++)r.getDatasetMeta(e).controller.buildOrUpdateElements();r.updateLayout(),r.options.animation&&r.options.animation.duration&&at.each(i,(function(t){t.reset()})),r.updateDatasets(),r.tooltip.initialize(),r.lastActive=[],bn.notify(r,"afterUpdate"),r._layers.sort(Hn("z","_idx")),r._bufferedRender?r._bufferedRequest={duration:t.duration,easing:t.easing,lazy:t.lazy}:r.render(t)}},updateLayout:function(){var t=this;!1!==bn.notify(t,"beforeLayout")&&(He.update(this,this.width,this.height),t._layers=[],at.each(t.boxes,(function(e){e._configure&&e._configure(),t._layers.push.apply(t._layers,e._layers())}),t),t._layers.forEach((function(t,e){t._idx=e})),bn.notify(t,"afterScaleUpdate"),bn.notify(t,"afterLayout"))},updateDatasets:function(){var t=this;if(!1!==bn.notify(t,"beforeDatasetsUpdate")){for(var e=0,n=t.data.datasets.length;e<n;++e)t.updateDataset(e);bn.notify(t,"afterDatasetsUpdate")}},updateDataset:function(t){var e=this,n=e.getDatasetMeta(t),r={meta:n,index:t};!1!==bn.notify(e,"beforeDatasetUpdate",[r])&&(n.controller._update(),bn.notify(e,"afterDatasetUpdate",[r]))},render:function(t){var e=this;t&&"object"==typeof t||(t={duration:t,lazy:arguments[1]});var n=e.options.animation,r=Pn(t.duration,n&&n.duration),i=t.lazy;if(!1!==bn.notify(e,"beforeRender")){var a=function(t){bn.notify(e,"afterRender"),at.callback(n&&n.onComplete,[t],e)};if(n&&r){var o=new gt({numSteps:r/16.66,easing:t.easing||n.easing,render:function(t,e){var n=at.easing.effects[e.easing],r=e.currentStep,i=r/e.numSteps;t.draw(n(i),i,r)},onAnimationProgress:n.onProgress,onAnimationComplete:a});vt.addAnimation(e,o,r,i)}else e.draw(),a(new gt({numSteps:0,chart:e}));return e}},draw:function(t){var e,n,r=this;if(r.clear(),at.isNullOrUndef(t)&&(t=1),r.transition(t),!(r.width<=0||r.height<=0)&&!1!==bn.notify(r,"beforeDraw",[t])){for(n=r._layers,e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(r.chartArea);for(r.drawDatasets(t);e<n.length;++e)n[e].draw(r.chartArea);r._drawTooltip(t),bn.notify(r,"afterDraw",[t])}},transition:function(t){for(var e=this,n=0,r=(e.data.datasets||[]).length;n<r;++n)e.isDatasetVisible(n)&&e.getDatasetMeta(n).controller.transition(t);e.tooltip.transition(t)},_getSortedDatasetMetas:function(t){var e,n,r=this,i=[];for(e=0,n=(r.data.datasets||[]).length;e<n;++e)t&&!r.isDatasetVisible(e)||i.push(r.getDatasetMeta(e));return i.sort(Hn("order","index")),i},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(!0)},drawDatasets:function(t){var e,n,r=this;if(!1!==bn.notify(r,"beforeDatasetsDraw",[t])){for(n=(e=r._getSortedVisibleDatasetMetas()).length-1;n>=0;--n)r.drawDataset(e[n],t);bn.notify(r,"afterDatasetsDraw",[t])}},drawDataset:function(t,e){var n=this,r={meta:t,index:t.index,easingValue:e};!1!==bn.notify(n,"beforeDatasetDraw",[r])&&(t.controller.draw(e),bn.notify(n,"afterDatasetDraw",[r]))},_drawTooltip:function(t){var e=this,n=e.tooltip,r={tooltip:n,easingValue:t};!1!==bn.notify(e,"beforeTooltipDraw",[r])&&(n.draw(),bn.notify(e,"afterTooltipDraw",[r]))},getElementAtEvent:function(t){return Le.modes.single(this,t)},getElementsAtEvent:function(t){return Le.modes.label(this,t,{intersect:!0})},getElementsAtXAxis:function(t){return Le.modes["x-axis"](this,t,{intersect:!0})},getElementsAtEventForMode:function(t,e,n){var r=Le.modes[e];return"function"==typeof r?r(this,t,n):[]},getDatasetAtEvent:function(t){return Le.modes.dataset(this,t,{intersect:!0})},getDatasetMeta:function(t){var e=this,n=e.data.datasets[t];n._meta||(n._meta={});var r=n._meta[e.id];return r||(r=n._meta[e.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n.order||0,index:t}),r},getVisibleDatasetCount:function(){for(var t=0,e=0,n=this.data.datasets.length;e<n;++e)this.isDatasetVisible(e)&&t++;return t},isDatasetVisible:function(t){var e=this.getDatasetMeta(t);return"boolean"==typeof e.hidden?!e.hidden:!this.data.datasets[t].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(t){var e=this.id,n=this.data.datasets[t],r=n._meta&&n._meta[e];r&&(r.controller.destroy(),delete n._meta[e])},destroy:function(){var t,e,n=this,r=n.canvas;for(n.stop(),t=0,e=n.data.datasets.length;t<e;++t)n.destroyDatasetMeta(t);r&&(n.unbindEvents(),at.canvas.clear(n),yn.releaseContext(n.ctx),n.canvas=null,n.ctx=null),bn.notify(n,"destroy"),delete Gn.instances[n.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var t=this;t.tooltip=new Rn({_chart:t,_chartInstance:t,_data:t.data,_options:t.options.tooltips},t)},bindEvents:function(){var t=this,e=t._listeners={},n=function(){t.eventHandler.apply(t,arguments)};at.each(t.options.events,(function(r){yn.addEventListener(t,r,n),e[r]=n})),t.options.responsive&&(n=function(){t.resize()},yn.addEventListener(t,"resize",n),e.resize=n)},unbindEvents:function(){var t=this,e=t._listeners;e&&(delete t._listeners,at.each(e,(function(e,n){yn.removeEventListener(t,n,e)})))},updateHoverStyle:function(t,e,n){var r,i,a,o=n?"set":"remove";for(i=0,a=t.length;i<a;++i)(r=t[i])&&this.getDatasetMeta(r._datasetIndex).controller[o+"HoverStyle"](r);"dataset"===e&&this.getDatasetMeta(t[0]._datasetIndex).controller["_"+o+"DatasetHoverStyle"]()},eventHandler:function(t){var e=this,n=e.tooltip;if(!1!==bn.notify(e,"beforeEvent",[t])){e._bufferedRender=!0,e._bufferedRequest=null;var r=e.handleEvent(t);n&&(r=n._start?n.handleEvent(t):r|n.handleEvent(t)),bn.notify(e,"afterEvent",[t]);var i=e._bufferedRequest;return i?e.render(i):r&&!e.animating&&(e.stop(),e.render({duration:e.options.hover.animationDuration,lazy:!0})),e._bufferedRender=!1,e._bufferedRequest=null,e}},handleEvent:function(t){var e=this,n=e.options||{},r=n.hover,i=!1;return e.lastActive=e.lastActive||[],"mouseout"===t.type?e.active=[]:e.active=e.getElementsAtEventForMode(t,r.mode,r),at.callback(n.onHover||n.hover.onHover,[t.native,e.active],e),"mouseup"!==t.type&&"click"!==t.type||n.onClick&&n.onClick.call(e,t.native,e.active),e.lastActive.length&&e.updateHoverStyle(e.lastActive,r.mode,!1),e.active.length&&r.mode&&e.updateHoverStyle(e.active,r.mode,!0),i=!at.arrayEquals(e.active,e.lastActive),e.lastActive=e.active,i}}),Gn.instances={};var Wn=Gn;Gn.Controller=Gn,Gn.types={},at.configMerge=Nn,at.scaleMerge=Fn;var zn=function(){function t(t,e,n){var r;return"string"==typeof t?(r=parseInt(t,10),-1!==t.indexOf("%")&&(r=r/100*e.parentNode[n])):r=t,r}function e(t){return null!=t&&"none"!==t}function n(n,r,i){var a=document.defaultView,o=at._getParentNode(n),s=a.getComputedStyle(n)[r],l=a.getComputedStyle(o)[r],u=e(s),c=e(l),d=Number.POSITIVE_INFINITY;return u||c?Math.min(u?t(s,n,i):d,c?t(l,o,i):d):"none"}at.where=function(t,e){if(at.isArray(t)&&Array.prototype.filter)return t.filter(e);var n=[];return at.each(t,(function(t){e(t)&&n.push(t)})),n},at.findIndex=Array.prototype.findIndex?function(t,e,n){return t.findIndex(e,n)}:function(t,e,n){n=void 0===n?t:n;for(var r=0,i=t.length;r<i;++r)if(e.call(n,t[r],r,t))return r;return-1},at.findNextWhere=function(t,e,n){at.isNullOrUndef(n)&&(n=-1);for(var r=n+1;r<t.length;r++){var i=t[r];if(e(i))return i}},at.findPreviousWhere=function(t,e,n){at.isNullOrUndef(n)&&(n=t.length);for(var r=n-1;r>=0;r--){var i=t[r];if(e(i))return i}},at.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},at.almostEquals=function(t,e,n){return Math.abs(t-e)<n},at.almostWhole=function(t,e){var n=Math.round(t);return n-e<=t&&n+e>=t},at.max=function(t){return t.reduce((function(t,e){return isNaN(e)?t:Math.max(t,e)}),Number.NEGATIVE_INFINITY)},at.min=function(t){return t.reduce((function(t,e){return isNaN(e)?t:Math.min(t,e)}),Number.POSITIVE_INFINITY)},at.sign=Math.sign?function(t){return Math.sign(t)}:function(t){return 0==(t=+t)||isNaN(t)?t:t>0?1:-1},at.toRadians=function(t){return t*(Math.PI/180)},at.toDegrees=function(t){return t*(180/Math.PI)},at._decimalPlaces=function(t){if(at.isFinite(t)){for(var e=1,n=0;Math.round(t*e)/e!==t;)e*=10,n++;return n}},at.getAngleFromPoint=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r),a=Math.atan2(r,n);return a<-.5*Math.PI&&(a+=2*Math.PI),{angle:a,distance:i}},at.distanceBetweenPoints=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},at.aliasPixel=function(t){return t%2==0?0:.5},at._alignPixel=function(t,e,n){var r=t.currentDevicePixelRatio,i=n/2;return Math.round((e-i)*r)/r+i},at.splineCurve=function(t,e,n,r){var i=t.skip?e:t,a=e,o=n.skip?e:n,s=Math.sqrt(Math.pow(a.x-i.x,2)+Math.pow(a.y-i.y,2)),l=Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2)),u=s/(s+l),c=l/(s+l),d=r*(u=isNaN(u)?0:u),h=r*(c=isNaN(c)?0:c);return{previous:{x:a.x-d*(o.x-i.x),y:a.y-d*(o.y-i.y)},next:{x:a.x+h*(o.x-i.x),y:a.y+h*(o.y-i.y)}}},at.EPSILON=Number.EPSILON||1e-14,at.splineCurveMonotone=function(t){var e,n,r,i,a,o,s,l,u,c=(t||[]).map((function(t){return{model:t._model,deltaK:0,mK:0}})),d=c.length;for(e=0;e<d;++e)if(!(r=c[e]).model.skip){if(n=e>0?c[e-1]:null,(i=e<d-1?c[e+1]:null)&&!i.model.skip){var h=i.model.x-r.model.x;r.deltaK=0!==h?(i.model.y-r.model.y)/h:0}!n||n.model.skip?r.mK=r.deltaK:!i||i.model.skip?r.mK=n.deltaK:this.sign(n.deltaK)!==this.sign(r.deltaK)?r.mK=0:r.mK=(n.deltaK+r.deltaK)/2}for(e=0;e<d-1;++e)r=c[e],i=c[e+1],r.model.skip||i.model.skip||(at.almostEquals(r.deltaK,0,this.EPSILON)?r.mK=i.mK=0:(a=r.mK/r.deltaK,o=i.mK/r.deltaK,(l=Math.pow(a,2)+Math.pow(o,2))<=9||(s=3/Math.sqrt(l),r.mK=a*s*r.deltaK,i.mK=o*s*r.deltaK)));for(e=0;e<d;++e)(r=c[e]).model.skip||(n=e>0?c[e-1]:null,i=e<d-1?c[e+1]:null,n&&!n.model.skip&&(u=(r.model.x-n.model.x)/3,r.model.controlPointPreviousX=r.model.x-u,r.model.controlPointPreviousY=r.model.y-u*r.mK),i&&!i.model.skip&&(u=(i.model.x-r.model.x)/3,r.model.controlPointNextX=r.model.x+u,r.model.controlPointNextY=r.model.y+u*r.mK))},at.nextItem=function(t,e,n){return n?e>=t.length-1?t[0]:t[e+1]:e>=t.length-1?t[t.length-1]:t[e+1]},at.previousItem=function(t,e,n){return n?e<=0?t[t.length-1]:t[e-1]:e<=0?t[0]:t[e-1]},at.niceNum=function(t,e){var n=Math.floor(at.log10(t)),r=t/Math.pow(10,n);return(e?r<1.5?1:r<3?2:r<7?5:10:r<=1?1:r<=2?2:r<=5?5:10)*Math.pow(10,n)},at.requestAnimFrame="undefined"==typeof window?function(t){t()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},at.getRelativePosition=function(t,e){var n,r,i=t.originalEvent||t,a=t.target||t.srcElement,o=a.getBoundingClientRect(),s=i.touches;s&&s.length>0?(n=s[0].clientX,r=s[0].clientY):(n=i.clientX,r=i.clientY);var l=parseFloat(at.getStyle(a,"padding-left")),u=parseFloat(at.getStyle(a,"padding-top")),c=parseFloat(at.getStyle(a,"padding-right")),d=parseFloat(at.getStyle(a,"padding-bottom")),h=o.right-o.left-l-c,f=o.bottom-o.top-u-d;return{x:n=Math.round((n-o.left-l)/h*a.width/e.currentDevicePixelRatio),y:r=Math.round((r-o.top-u)/f*a.height/e.currentDevicePixelRatio)}},at.getConstraintWidth=function(t){return n(t,"max-width","clientWidth")},at.getConstraintHeight=function(t){return n(t,"max-height","clientHeight")},at._calculatePadding=function(t,e,n){return(e=at.getStyle(t,e)).indexOf("%")>-1?n*parseInt(e,10)/100:parseInt(e,10)},at._getParentNode=function(t){var e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e},at.getMaximumWidth=function(t){var e=at._getParentNode(t);if(!e)return t.clientWidth;var n=e.clientWidth,r=n-at._calculatePadding(e,"padding-left",n)-at._calculatePadding(e,"padding-right",n),i=at.getConstraintWidth(t);return isNaN(i)?r:Math.min(r,i)},at.getMaximumHeight=function(t){var e=at._getParentNode(t);if(!e)return t.clientHeight;var n=e.clientHeight,r=n-at._calculatePadding(e,"padding-top",n)-at._calculatePadding(e,"padding-bottom",n),i=at.getConstraintHeight(t);return isNaN(i)?r:Math.min(r,i)},at.getStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,null).getPropertyValue(e)},at.retinaScale=function(t,e){var n=t.currentDevicePixelRatio=e||"undefined"!=typeof window&&window.devicePixelRatio||1;if(1!==n){var r=t.canvas,i=t.height,a=t.width;r.height=i*n,r.width=a*n,t.ctx.scale(n,n),r.style.height||r.style.width||(r.style.height=i+"px",r.style.width=a+"px")}},at.fontString=function(t,e,n){return e+" "+t+"px "+n},at.longestText=function(t,e,n,r){var i=(r=r||{}).data=r.data||{},a=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},a=r.garbageCollect=[],r.font=e),t.font=e;var o,s,l,u,c,d=0,h=n.length;for(o=0;o<h;o++)if(null!=(u=n[o])&&!0!==at.isArray(u))d=at.measureText(t,i,a,d,u);else if(at.isArray(u))for(s=0,l=u.length;s<l;s++)null==(c=u[s])||at.isArray(c)||(d=at.measureText(t,i,a,d,c));var f=a.length/2;if(f>n.length){for(o=0;o<f;o++)delete i[a[o]];a.splice(0,f)}return d},at.measureText=function(t,e,n,r,i){var a=e[i];return a||(a=e[i]=t.measureText(i).width,n.push(i)),a>r&&(r=a),r},at.numberOfLabelLines=function(t){var e=1;return at.each(t,(function(t){at.isArray(t)&&t.length>e&&(e=t.length)})),e},at.color=P?function(t){return t instanceof CanvasGradient&&(t=Z.global.defaultColor),P(t)}:function(t){return console.error("Color.js not found!"),t},at.getHoverColor=function(t){return t instanceof CanvasPattern||t instanceof CanvasGradient?t:at.color(t).saturate(.5).darken(.1).rgbString()}};function Yn(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function qn(t){this.options=t||{}}at.extend(qn.prototype,{formats:Yn,parse:Yn,format:Yn,add:Yn,diff:Yn,startOf:Yn,endOf:Yn,_create:function(t){return t}}),qn.override=function(t){at.extend(qn.prototype,t)};var Kn={_date:qn},Xn={formatters:{values:function(t){return at.isArray(t)?t:""+t},linear:function(t,e,n){var r=n.length>3?n[2]-n[1]:n[1]-n[0];Math.abs(r)>1&&t!==Math.floor(t)&&(r=t-Math.floor(t));var i=at.log10(Math.abs(r)),a="";if(0!==t)if(Math.max(Math.abs(n[0]),Math.abs(n[n.length-1]))<1e-4){var o=at.log10(Math.abs(t)),s=Math.floor(o)-Math.floor(i);s=Math.max(Math.min(s,20),0),a=t.toExponential(s)}else{var l=-1*Math.floor(i);l=Math.max(Math.min(l,20),0),a=t.toFixed(l)}else a="0";return a},logarithmic:function(t,e,n){var r=t/Math.pow(10,Math.floor(at.log10(t)));return 0===t?"0":1===r||2===r||5===r||0===e||e===n.length-1?t.toExponential():""}}},Zn=at.isArray,Jn=at.isNullOrUndef,Qn=at.valueOrDefault,tr=at.valueAtIndexOrDefault;function er(t,e){for(var n=[],r=t.length/e,i=0,a=t.length;i<a;i+=r)n.push(t[Math.floor(i)]);return n}function nr(t,e,n){var r,i=t.getTicks().length,a=Math.min(e,i-1),o=t.getPixelForTick(a),s=t._startPixel,l=t._endPixel,u=1e-6;if(!(n&&(r=1===i?Math.max(o-s,l-o):0===e?(t.getPixelForTick(1)-o)/2:(o-t.getPixelForTick(a-1))/2,(o+=a<e?r:-r)<s-u||o>l+u)))return o}function rr(t,e){at.each(t,(function(t){var n,r=t.gc,i=r.length/2;if(i>e){for(n=0;n<i;++n)delete t.data[r[n]];r.splice(0,i)}}))}function ir(t,e,n,r){var i,a,o,s,l,u,c,d,h,f,p,g,v,m=n.length,y=[],b=[],S=[],E=0,T=0;for(i=0;i<m;++i){if(s=n[i].label,l=n[i].major?e.major:e.minor,t.font=u=l.string,c=r[u]=r[u]||{data:{},gc:[]},d=l.lineHeight,h=f=0,Jn(s)||Zn(s)){if(Zn(s))for(a=0,o=s.length;a<o;++a)p=s[a],Jn(p)||Zn(p)||(h=at.measureText(t,c.data,c.gc,h,p),f+=d)}else h=at.measureText(t,c.data,c.gc,h,s),f=d;y.push(h),b.push(f),S.push(d/2),E=Math.max(h,E),T=Math.max(f,T)}function _(t){return{width:y[t]||0,height:b[t]||0,offset:S[t]||0}}return rr(r,m),g=y.indexOf(E),v=b.indexOf(T),{first:_(0),last:_(m-1),widest:_(g),highest:_(v)}}function ar(t){return t.drawTicks?t.tickMarkLength:0}function or(t){var e,n;return t.display?(e=at.options._parseFont(t),n=at.options.toPadding(t.padding),e.lineHeight+n.height):0}function sr(t,e){return at.extend(at.options._parseFont({fontFamily:Qn(e.fontFamily,t.fontFamily),fontSize:Qn(e.fontSize,t.fontSize),fontStyle:Qn(e.fontStyle,t.fontStyle),lineHeight:Qn(e.lineHeight,t.lineHeight)}),{color:at.options.resolve([e.fontColor,t.fontColor,Z.global.defaultFontColor])})}function lr(t){var e=sr(t,t.minor);return{minor:e,major:t.major.enabled?sr(t,t.major):e}}function ur(t){var e,n,r,i=[];for(n=0,r=t.length;n<r;++n)void 0!==(e=t[n])._index&&i.push(e);return i}function cr(t){var e,n,r=t.length;if(r<2)return!1;for(n=t[0],e=1;e<r;++e)if(t[e]-t[e-1]!==n)return!1;return n}function dr(t,e,n,r){var i,a,o,s,l=cr(t),u=(e.length-1)/r;if(!l)return Math.max(u,1);for(o=0,s=(i=at.math._factorize(l)).length-1;o<s;o++)if((a=i[o])>u)return a;return Math.max(u,1)}function hr(t){var e,n,r=[];for(e=0,n=t.length;e<n;e++)t[e].major&&r.push(e);return r}function fr(t,e,n){var r,i,a=0,o=e[0];for(n=Math.ceil(n),r=0;r<t.length;r++)i=t[r],r===o?(i._index=r,o=e[++a*n]):delete i.label}function pr(t,e,n,r){var i,a,o,s,l=Qn(n,0),u=Math.min(Qn(r,t.length),t.length),c=0;for(e=Math.ceil(e),r&&(e=(i=r-n)/Math.floor(i/e)),s=l;s<0;)c++,s=Math.round(l+c*e);for(a=Math.max(l,0);a<u;a++)o=t[a],a===s?(o._index=a,c++,s=Math.round(l+c*e)):delete o.label}Z._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:Xn.formatters.values,minor:{},major:{}}});var gr=ft.extend({zeroLineIndex:0,getPadding:function(){var t=this;return{left:t.paddingLeft||0,top:t.paddingTop||0,right:t.paddingRight||0,bottom:t.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){at.callback(this.options.beforeUpdate,[this])},update:function(t,e,n){var r,i,a,o,s,l=this,u=l.options.ticks,c=u.sampleSize;if(l.beforeUpdate(),l.maxWidth=t,l.maxHeight=e,l.margins=at.extend({left:0,right:0,top:0,bottom:0},n),l._ticks=null,l.ticks=null,l._labelSizes=null,l._maxLabelLines=0,l.longestLabelWidth=0,l.longestTextCache=l.longestTextCache||{},l._gridLineItems=null,l._labelItems=null,l.beforeSetDimensions(),l.setDimensions(),l.afterSetDimensions(),l.beforeDataLimits(),l.determineDataLimits(),l.afterDataLimits(),l.beforeBuildTicks(),o=l.buildTicks()||[],(!(o=l.afterBuildTicks(o)||o)||!o.length)&&l.ticks)for(o=[],r=0,i=l.ticks.length;r<i;++r)o.push({value:l.ticks[r],major:!1});return l._ticks=o,s=c<o.length,a=l._convertTicksToLabels(s?er(o,c):o),l._configure(),l.beforeCalculateTickRotation(),l.calculateTickRotation(),l.afterCalculateTickRotation(),l.beforeFit(),l.fit(),l.afterFit(),l._ticksToDraw=u.display&&(u.autoSkip||"auto"===u.source)?l._autoSkip(o):o,s&&(a=l._convertTicksToLabels(l._ticksToDraw)),l.ticks=a,l.afterUpdate(),l.minSize},_configure:function(){var t,e,n=this,r=n.options.ticks.reverse;n.isHorizontal()?(t=n.left,e=n.right):(t=n.top,e=n.bottom,r=!r),n._startPixel=t,n._endPixel=e,n._reversePixels=r,n._length=e-t},afterUpdate:function(){at.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){at.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0},afterSetDimensions:function(){at.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){at.callback(this.options.beforeDataLimits,[this])},determineDataLimits:at.noop,afterDataLimits:function(){at.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){at.callback(this.options.beforeBuildTicks,[this])},buildTicks:at.noop,afterBuildTicks:function(t){var e=this;return Zn(t)&&t.length?at.callback(e.options.afterBuildTicks,[e,t]):(e.ticks=at.callback(e.options.afterBuildTicks,[e,e.ticks])||e.ticks,t)},beforeTickToLabelConversion:function(){at.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var t=this,e=t.options.ticks;t.ticks=t.ticks.map(e.userCallback||e.callback,this)},afterTickToLabelConversion:function(){at.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){at.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var t,e,n,r,i,a,o,s=this,l=s.options,u=l.ticks,c=s.getTicks().length,d=u.minRotation||0,h=u.maxRotation,f=d;!s._isVisible()||!u.display||d>=h||c<=1||!s.isHorizontal()?s.labelRotation=d:(e=(t=s._getLabelSizes()).widest.width,n=t.highest.height-t.highest.offset,r=Math.min(s.maxWidth,s.chart.width-e),e+6>(i=l.offset?s.maxWidth/c:r/(c-1))&&(i=r/(c-(l.offset?.5:1)),a=s.maxHeight-ar(l.gridLines)-u.padding-or(l.scaleLabel),o=Math.sqrt(e*e+n*n),f=at.toDegrees(Math.min(Math.asin(Math.min((t.highest.height+6)/i,1)),Math.asin(Math.min(a/o,1))-Math.asin(n/o))),f=Math.max(d,Math.min(h,f))),s.labelRotation=f)},afterCalculateTickRotation:function(){at.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){at.callback(this.options.beforeFit,[this])},fit:function(){var t=this,e=t.minSize={width:0,height:0},n=t.chart,r=t.options,i=r.ticks,a=r.scaleLabel,o=r.gridLines,s=t._isVisible(),l="bottom"===r.position,u=t.isHorizontal();if(u?e.width=t.maxWidth:s&&(e.width=ar(o)+or(a)),u?s&&(e.height=ar(o)+or(a)):e.height=t.maxHeight,i.display&&s){var c=lr(i),d=t._getLabelSizes(),h=d.first,f=d.last,p=d.widest,g=d.highest,v=.4*c.minor.lineHeight,m=i.padding;if(u){var y=0!==t.labelRotation,b=at.toRadians(t.labelRotation),S=Math.cos(b),E=Math.sin(b),T=E*p.width+S*(g.height-(y?g.offset:0))+(y?0:v);e.height=Math.min(t.maxHeight,e.height+T+m);var _,x,w=t.getPixelForTick(0)-t.left,k=t.right-t.getPixelForTick(t.getTicks().length-1);y?(_=l?S*h.width+E*h.offset:E*(h.height-h.offset),x=l?E*(f.height-f.offset):S*f.width+E*f.offset):(_=h.width/2,x=f.width/2),t.paddingLeft=Math.max((_-w)*t.width/(t.width-w),0)+3,t.paddingRight=Math.max((x-k)*t.width/(t.width-k),0)+3}else{var A=i.mirror?0:p.width+m+v;e.width=Math.min(t.maxWidth,e.width+A),t.paddingTop=h.height/2,t.paddingBottom=f.height/2}}t.handleMargins(),u?(t.width=t._length=n.width-t.margins.left-t.margins.right,t.height=e.height):(t.width=e.width,t.height=t._length=n.height-t.margins.top-t.margins.bottom)},handleMargins:function(){var t=this;t.margins&&(t.margins.left=Math.max(t.paddingLeft,t.margins.left),t.margins.top=Math.max(t.paddingTop,t.margins.top),t.margins.right=Math.max(t.paddingRight,t.margins.right),t.margins.bottom=Math.max(t.paddingBottom,t.margins.bottom))},afterFit:function(){at.callback(this.options.afterFit,[this])},isHorizontal:function(){var t=this.options.position;return"top"===t||"bottom"===t},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(t){if(Jn(t))return NaN;if(("number"==typeof t||t instanceof Number)&&!isFinite(t))return NaN;if(t)if(this.isHorizontal()){if(void 0!==t.x)return this.getRightValue(t.x)}else if(void 0!==t.y)return this.getRightValue(t.y);return t},_convertTicksToLabels:function(t){var e,n,r,i=this;for(i.ticks=t.map((function(t){return t.value})),i.beforeTickToLabelConversion(),e=i.convertTicksToLabels(t)||i.ticks,i.afterTickToLabelConversion(),n=0,r=t.length;n<r;++n)t[n].label=e[n];return e},_getLabelSizes:function(){var t=this,e=t._labelSizes;return e||(t._labelSizes=e=ir(t.ctx,lr(t.options.ticks),t.getTicks(),t.longestTextCache),t.longestLabelWidth=e.widest.width),e},_parseValue:function(t){var e,n,r,i;return Zn(t)?(e=+this.getRightValue(t[0]),n=+this.getRightValue(t[1]),r=Math.min(e,n),i=Math.max(e,n)):(e=void 0,n=t=+this.getRightValue(t),r=t,i=t),{min:r,max:i,start:e,end:n}},_getScaleLabel:function(t){var e=this._parseValue(t);return void 0!==e.start?"["+e.start+", "+e.end+"]":+this.getRightValue(t)},getLabelForIndex:at.noop,getPixelForValue:at.noop,getValueForPixel:at.noop,getPixelForTick:function(t){var e=this,n=e.options.offset,r=e._ticks.length,i=1/Math.max(r-(n?0:1),1);return t<0||t>r-1?null:e.getPixelForDecimal(t*i+(n?i/2:0))},getPixelForDecimal:function(t){var e=this;return e._reversePixels&&(t=1-t),e._startPixel+t*e._length},getDecimalForPixel:function(t){var e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var t=this,e=t.min,n=t.max;return t.beginAtZero?0:e<0&&n<0?n:e>0&&n>0?e:0},_autoSkip:function(t){var e,n,r,i,a=this,o=a.options.ticks,s=a._length,l=o.maxTicksLimit||s/a._tickSize()+1,u=o.major.enabled?hr(t):[],c=u.length,d=u[0],h=u[c-1];if(c>l)return fr(t,u,c/l),ur(t);if(r=dr(u,t,s,l),c>0){for(e=0,n=c-1;e<n;e++)pr(t,r,u[e],u[e+1]);return i=c>1?(h-d)/(c-1):null,pr(t,r,at.isNullOrUndef(i)?0:d-i,d),pr(t,r,h,at.isNullOrUndef(i)?t.length:h+i),ur(t)}return pr(t,r),ur(t)},_tickSize:function(){var t=this,e=t.options.ticks,n=at.toRadians(t.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),a=t._getLabelSizes(),o=e.autoSkipPadding||0,s=a?a.widest.width+o:0,l=a?a.highest.height+o:0;return t.isHorizontal()?l*r>s*i?s/r:l/i:l*i<s*r?l/r:s/i},_isVisible:function(){var t,e,n,r=this,i=r.chart,a=r.options.display;if("auto"!==a)return!!a;for(t=0,e=i.data.datasets.length;t<e;++t)if(i.isDatasetVisible(t)&&((n=i.getDatasetMeta(t)).xAxisID===r.id||n.yAxisID===r.id))return!0;return!1},_computeGridLineItems:function(t){var e,n,r,i,a,o,s,l,u,c,d,h,f,p,g,v,m,y=this,b=y.chart,S=y.options,E=S.gridLines,T=S.position,_=E.offsetGridLines,x=y.isHorizontal(),w=y._ticksToDraw,k=w.length+(_?1:0),A=ar(E),C=[],D=E.drawBorder?tr(E.lineWidth,0,0):0,L=D/2,$=at._alignPixel,O=function(t){return $(b,t,D)};for("top"===T?(e=O(y.bottom),s=y.bottom-A,u=e-L,d=O(t.top)+L,f=t.bottom):"bottom"===T?(e=O(y.top),d=t.top,f=O(t.bottom)-L,s=e+L,u=y.top+A):"left"===T?(e=O(y.right),o=y.right-A,l=e-L,c=O(t.left)+L,h=t.right):(e=O(y.left),c=t.left,h=O(t.right)-L,o=e+L,l=y.left+A),n=0;n<k;++n)r=w[n]||{},Jn(r.label)&&n<w.length||(n===y.zeroLineIndex&&S.offset===_?(p=E.zeroLineWidth,g=E.zeroLineColor,v=E.zeroLineBorderDash||[],m=E.zeroLineBorderDashOffset||0):(p=tr(E.lineWidth,n,1),g=tr(E.color,n,"rgba(0,0,0,0.1)"),v=E.borderDash||[],m=E.borderDashOffset||0),void 0!==(i=nr(y,r._index||n,_))&&(a=$(b,i,p),x?o=l=c=h=a:s=u=d=f=a,C.push({tx1:o,ty1:s,tx2:l,ty2:u,x1:c,y1:d,x2:h,y2:f,width:p,color:g,borderDash:v,borderDashOffset:m})));return C.ticksLength=k,C.borderValue=e,C},_computeLabelItems:function(){var t,e,n,r,i,a,o,s,l,u,c,d,h=this,f=h.options,p=f.ticks,g=f.position,v=p.mirror,m=h.isHorizontal(),y=h._ticksToDraw,b=lr(p),S=p.padding,E=ar(f.gridLines),T=-at.toRadians(h.labelRotation),_=[];for("top"===g?(a=h.bottom-E-S,o=T?"left":"center"):"bottom"===g?(a=h.top+E+S,o=T?"right":"center"):"left"===g?(i=h.right-(v?0:E)-S,o=v?"left":"right"):(i=h.left+(v?0:E)+S,o=v?"right":"left"),t=0,e=y.length;t<e;++t)r=(n=y[t]).label,Jn(r)||(s=h.getPixelForTick(n._index||t)+p.labelOffset,u=(l=n.major?b.major:b.minor).lineHeight,c=Zn(r)?r.length:1,m?(i=s,d="top"===g?((T?1:.5)-c)*u:(T?0:.5)*u):(a=s,d=(1-c)*u/2),_.push({x:i,y:a,rotation:T,label:r,font:l,textOffset:d,textAlign:o}));return _},_drawGrid:function(t){var e=this,n=e.options.gridLines;if(n.display){var r,i,a,o,s,l=e.ctx,u=e.chart,c=at._alignPixel,d=n.drawBorder?tr(n.lineWidth,0,0):0,h=e._gridLineItems||(e._gridLineItems=e._computeGridLineItems(t));for(a=0,o=h.length;a<o;++a)r=(s=h[a]).width,i=s.color,r&&i&&(l.save(),l.lineWidth=r,l.strokeStyle=i,l.setLineDash&&(l.setLineDash(s.borderDash),l.lineDashOffset=s.borderDashOffset),l.beginPath(),n.drawTicks&&(l.moveTo(s.tx1,s.ty1),l.lineTo(s.tx2,s.ty2)),n.drawOnChartArea&&(l.moveTo(s.x1,s.y1),l.lineTo(s.x2,s.y2)),l.stroke(),l.restore());if(d){var f,p,g,v,m=d,y=tr(n.lineWidth,h.ticksLength-1,1),b=h.borderValue;e.isHorizontal()?(f=c(u,e.left,m)-m/2,p=c(u,e.right,y)+y/2,g=v=b):(g=c(u,e.top,m)-m/2,v=c(u,e.bottom,y)+y/2,f=p=b),l.lineWidth=d,l.strokeStyle=tr(n.color,0),l.beginPath(),l.moveTo(f,g),l.lineTo(p,v),l.stroke()}}},_drawLabels:function(){var t=this;if(t.options.ticks.display){var e,n,r,i,a,o,s,l,u=t.ctx,c=t._labelItems||(t._labelItems=t._computeLabelItems());for(e=0,r=c.length;e<r;++e){if(o=(a=c[e]).font,u.save(),u.translate(a.x,a.y),u.rotate(a.rotation),u.font=o.string,u.fillStyle=o.color,u.textBaseline="middle",u.textAlign=a.textAlign,s=a.label,l=a.textOffset,Zn(s))for(n=0,i=s.length;n<i;++n)u.fillText(""+s[n],0,l),l+=o.lineHeight;else u.fillText(s,0,l);u.restore()}}},_drawTitle:function(){var t=this,e=t.ctx,n=t.options,r=n.scaleLabel;if(r.display){var i,a,o=Qn(r.fontColor,Z.global.defaultFontColor),s=at.options._parseFont(r),l=at.options.toPadding(r.padding),u=s.lineHeight/2,c=n.position,d=0;if(t.isHorizontal())i=t.left+t.width/2,a="bottom"===c?t.bottom-u-l.bottom:t.top+u+l.top;else{var h="left"===c;i=h?t.left+u+l.top:t.right-u-l.top,a=t.top+t.height/2,d=h?-.5*Math.PI:.5*Math.PI}e.save(),e.translate(i,a),e.rotate(d),e.textAlign="center",e.textBaseline="middle",e.fillStyle=o,e.font=s.string,e.fillText(r.labelString,0,0),e.restore()}},draw:function(t){var e=this;e._isVisible()&&(e._drawGrid(t),e._drawTitle(),e._drawLabels())},_layers:function(){var t=this,e=t.options,n=e.ticks&&e.ticks.z||0,r=e.gridLines&&e.gridLines.z||0;return t._isVisible()&&n!==r&&t.draw===t._draw?[{z:r,draw:function(){t._drawGrid.apply(t,arguments),t._drawTitle.apply(t,arguments)}},{z:n,draw:function(){t._drawLabels.apply(t,arguments)}}]:[{z:n,draw:function(){t.draw.apply(t,arguments)}}]},_getMatchingVisibleMetas:function(t){var e=this,n=e.isHorizontal();return e.chart._getSortedVisibleDatasetMetas().filter((function(r){return(!t||r.type===t)&&(n?r.xAxisID===e.id:r.yAxisID===e.id)}))}});gr.prototype._draw=gr.prototype.draw;var vr=gr,mr=at.isNullOrUndef,yr={position:"bottom"},br=vr.extend({determineDataLimits:function(){var t,e=this,n=e._getLabels(),r=e.options.ticks,i=r.min,a=r.max,o=0,s=n.length-1;void 0!==i&&(t=n.indexOf(i))>=0&&(o=t),void 0!==a&&(t=n.indexOf(a))>=0&&(s=t),e.minIndex=o,e.maxIndex=s,e.min=n[o],e.max=n[s]},buildTicks:function(){var t=this,e=t._getLabels(),n=t.minIndex,r=t.maxIndex;t.ticks=0===n&&r===e.length-1?e:e.slice(n,r+1)},getLabelForIndex:function(t,e){var n=this,r=n.chart;return r.getDatasetMeta(e).controller._getValueScaleId()===n.id?n.getRightValue(r.data.datasets[e].data[t]):n._getLabels()[t]},_configure:function(){var t=this,e=t.options.offset,n=t.ticks;vr.prototype._configure.call(t),t.isHorizontal()||(t._reversePixels=!t._reversePixels),n&&(t._startValue=t.minIndex-(e?.5:0),t._valueRange=Math.max(n.length-(e?0:1),1))},getPixelForValue:function(t,e,n){var r,i,a,o=this;return mr(e)||mr(n)||(t=o.chart.data.datasets[n].data[e]),mr(t)||(r=o.isHorizontal()?t.x:t.y),(void 0!==r||void 0!==t&&isNaN(e))&&(i=o._getLabels(),t=at.valueOrDefault(r,t),e=-1!==(a=i.indexOf(t))?a:e,isNaN(e)&&(e=t)),o.getPixelForDecimal((e-o._startValue)/o._valueRange)},getPixelForTick:function(t){var e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t],t+this.minIndex)},getValueForPixel:function(t){var e=this,n=Math.round(e._startValue+e.getDecimalForPixel(t)*e._valueRange);return Math.min(Math.max(n,0),e.ticks.length-1)},getBasePixel:function(){return this.bottom}}),Sr=yr;br._defaults=Sr;var Er=at.noop,Tr=at.isNullOrUndef;function _r(t,e){var n,r,i,a,o=[],s=1e-14,l=t.stepSize,u=l||1,c=t.maxTicks-1,d=t.min,h=t.max,f=t.precision,p=e.min,g=e.max,v=at.niceNum((g-p)/c/u)*u;if(v<s&&Tr(d)&&Tr(h))return[p,g];(a=Math.ceil(g/v)-Math.floor(p/v))>c&&(v=at.niceNum(a*v/c/u)*u),l||Tr(f)?n=Math.pow(10,at._decimalPlaces(v)):(n=Math.pow(10,f),v=Math.ceil(v*n)/n),r=Math.floor(p/v)*v,i=Math.ceil(g/v)*v,l&&(!Tr(d)&&at.almostWhole(d/v,v/1e3)&&(r=d),!Tr(h)&&at.almostWhole(h/v,v/1e3)&&(i=h)),a=(i-r)/v,a=at.almostEquals(a,Math.round(a),v/1e3)?Math.round(a):Math.ceil(a),r=Math.round(r*n)/n,i=Math.round(i*n)/n,o.push(Tr(d)?r:d);for(var m=1;m<a;++m)o.push(Math.round((r+m*v)*n)/n);return o.push(Tr(h)?i:h),o}var xr=vr.extend({getRightValue:function(t){return"string"==typeof t?+t:vr.prototype.getRightValue.call(this,t)},handleTickRangeOptions:function(){var t=this,e=t.options.ticks;if(e.beginAtZero){var n=at.sign(t.min),r=at.sign(t.max);n<0&&r<0?t.max=0:n>0&&r>0&&(t.min=0)}var i=void 0!==e.min||void 0!==e.suggestedMin,a=void 0!==e.max||void 0!==e.suggestedMax;void 0!==e.min?t.min=e.min:void 0!==e.suggestedMin&&(null===t.min?t.min=e.suggestedMin:t.min=Math.min(t.min,e.suggestedMin)),void 0!==e.max?t.max=e.max:void 0!==e.suggestedMax&&(null===t.max?t.max=e.suggestedMax:t.max=Math.max(t.max,e.suggestedMax)),i!==a&&t.min>=t.max&&(i?t.max=t.min+1:t.min=t.max-1),t.min===t.max&&(t.max++,e.beginAtZero||t.min--)},getTickLimit:function(){var t,e=this,n=e.options.ticks,r=n.stepSize,i=n.maxTicksLimit;return r?t=Math.ceil(e.max/r)-Math.floor(e.min/r)+1:(t=e._computeTickLimit(),i=i||11),i&&(t=Math.min(i,t)),t},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:Er,buildTicks:function(){var t=this,e=t.options.ticks,n=t.getTickLimit(),r={maxTicks:n=Math.max(2,n),min:e.min,max:e.max,precision:e.precision,stepSize:at.valueOrDefault(e.fixedStepSize,e.stepSize)},i=t.ticks=_r(r,t);t.handleDirectionalChanges(),t.max=at.max(i),t.min=at.min(i),e.reverse?(i.reverse(),t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max)},convertTicksToLabels:function(){var t=this;t.ticksAsNumbers=t.ticks.slice(),t.zeroLineIndex=t.ticks.indexOf(0),vr.prototype.convertTicksToLabels.call(t)},_configure:function(){var t,e=this,n=e.getTicks(),r=e.min,i=e.max;vr.prototype._configure.call(e),e.options.offset&&n.length&&(r-=t=(i-r)/Math.max(n.length-1,1)/2,i+=t),e._startValue=r,e._endValue=i,e._valueRange=i-r}}),wr={position:"left",ticks:{callback:Xn.formatters.linear}},kr=0,Ar=1;function Cr(t,e,n){var r=[n.type,void 0===e&&void 0===n.stack?n.index:"",n.stack].join(".");return void 0===t[r]&&(t[r]={pos:[],neg:[]}),t[r]}function Dr(t,e,n,r){var i,a,o=t.options,s=Cr(e,o.stacked,n),l=s.pos,u=s.neg,c=r.length;for(i=0;i<c;++i)a=t._parseValue(r[i]),isNaN(a.min)||isNaN(a.max)||n.data[i].hidden||(l[i]=l[i]||0,u[i]=u[i]||0,o.relativePoints?l[i]=100:a.min<0||a.max<0?u[i]+=a.min:l[i]+=a.max)}function Lr(t,e,n){var r,i,a=n.length;for(r=0;r<a;++r)i=t._parseValue(n[r]),isNaN(i.min)||isNaN(i.max)||e.data[r].hidden||(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}var $r=xr.extend({determineDataLimits:function(){var t,e,n,r,i=this,a=i.options,o=i.chart.data.datasets,s=i._getMatchingVisibleMetas(),l=a.stacked,u={},c=s.length;if(i.min=Number.POSITIVE_INFINITY,i.max=Number.NEGATIVE_INFINITY,void 0===l)for(t=0;!l&&t<c;++t)l=void 0!==(e=s[t]).stack;for(t=0;t<c;++t)n=o[(e=s[t]).index].data,l?Dr(i,u,e,n):Lr(i,e,n);at.each(u,(function(t){r=t.pos.concat(t.neg),i.min=Math.min(i.min,at.min(r)),i.max=Math.max(i.max,at.max(r))})),i.min=at.isFinite(i.min)&&!isNaN(i.min)?i.min:kr,i.max=at.isFinite(i.max)&&!isNaN(i.max)?i.max:Ar,i.handleTickRangeOptions()},_computeTickLimit:function(){var t,e=this;return e.isHorizontal()?Math.ceil(e.width/40):(t=at.options._parseFont(e.options.ticks),Math.ceil(e.height/t.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(t,e){return this._getScaleLabel(this.chart.data.datasets[e].data[t])},getPixelForValue:function(t){var e=this;return e.getPixelForDecimal((+e.getRightValue(t)-e._startValue)/e._valueRange)},getValueForPixel:function(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange},getPixelForTick:function(t){var e=this.ticksAsNumbers;return t<0||t>e.length-1?null:this.getPixelForValue(e[t])}}),Or=wr;$r._defaults=Or;var Mr=at.valueOrDefault,Ir=at.math.log10;function Rr(t,e){var n,r,i=[],a=Mr(t.min,Math.pow(10,Math.floor(Ir(e.min)))),o=Math.floor(Ir(e.max)),s=Math.ceil(e.max/Math.pow(10,o));0===a?(n=Math.floor(Ir(e.minNotZero)),r=Math.floor(e.minNotZero/Math.pow(10,n)),i.push(a),a=r*Math.pow(10,n)):(n=Math.floor(Ir(a)),r=Math.floor(a/Math.pow(10,n)));var l=n<0?Math.pow(10,Math.abs(n)):1;do{i.push(a),10==++r&&(r=1,l=++n>=0?1:l),a=Math.round(r*Math.pow(10,n)*l)/l}while(n<o||n===o&&r<s);var u=Mr(t.max,a);return i.push(u),i}var Pr={position:"left",ticks:{callback:Xn.formatters.logarithmic}};function Fr(t,e){return at.isFinite(t)&&t>=0?t:e}var Nr=vr.extend({determineDataLimits:function(){var t,e,n,r,i,a,o=this,s=o.options,l=o.chart,u=l.data.datasets,c=o.isHorizontal();function d(t){return c?t.xAxisID===o.id:t.yAxisID===o.id}o.min=Number.POSITIVE_INFINITY,o.max=Number.NEGATIVE_INFINITY,o.minNotZero=Number.POSITIVE_INFINITY;var h=s.stacked;if(void 0===h)for(t=0;t<u.length;t++)if(e=l.getDatasetMeta(t),l.isDatasetVisible(t)&&d(e)&&void 0!==e.stack){h=!0;break}if(s.stacked||h){var f={};for(t=0;t<u.length;t++){var p=[(e=l.getDatasetMeta(t)).type,void 0===s.stacked&&void 0===e.stack?t:"",e.stack].join(".");if(l.isDatasetVisible(t)&&d(e))for(void 0===f[p]&&(f[p]=[]),i=0,a=(r=u[t].data).length;i<a;i++){var g=f[p];n=o._parseValue(r[i]),isNaN(n.min)||isNaN(n.max)||e.data[i].hidden||n.min<0||n.max<0||(g[i]=g[i]||0,g[i]+=n.max)}}at.each(f,(function(t){if(t.length>0){var e=at.min(t),n=at.max(t);o.min=Math.min(o.min,e),o.max=Math.max(o.max,n)}}))}else for(t=0;t<u.length;t++)if(e=l.getDatasetMeta(t),l.isDatasetVisible(t)&&d(e))for(i=0,a=(r=u[t].data).length;i<a;i++)n=o._parseValue(r[i]),isNaN(n.min)||isNaN(n.max)||e.data[i].hidden||n.min<0||n.max<0||(o.min=Math.min(n.min,o.min),o.max=Math.max(n.max,o.max),0!==n.min&&(o.minNotZero=Math.min(n.min,o.minNotZero)));o.min=at.isFinite(o.min)?o.min:null,o.max=at.isFinite(o.max)?o.max:null,o.minNotZero=at.isFinite(o.minNotZero)?o.minNotZero:null,this.handleTickRangeOptions()},handleTickRangeOptions:function(){var t=this,e=t.options.ticks,n=1,r=10;t.min=Fr(e.min,t.min),t.max=Fr(e.max,t.max),t.min===t.max&&(0!==t.min&&null!==t.min?(t.min=Math.pow(10,Math.floor(Ir(t.min))-1),t.max=Math.pow(10,Math.floor(Ir(t.max))+1)):(t.min=n,t.max=r)),null===t.min&&(t.min=Math.pow(10,Math.floor(Ir(t.max))-1)),null===t.max&&(t.max=0!==t.min?Math.pow(10,Math.floor(Ir(t.min))+1):r),null===t.minNotZero&&(t.min>0?t.minNotZero=t.min:t.max<1?t.minNotZero=Math.pow(10,Math.floor(Ir(t.max))):t.minNotZero=n)},buildTicks:function(){var t=this,e=t.options.ticks,n=!t.isHorizontal(),r={min:Fr(e.min),max:Fr(e.max)},i=t.ticks=Rr(r,t);t.max=at.max(i),t.min=at.min(i),e.reverse?(n=!n,t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max),n&&i.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),vr.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(t,e){return this._getScaleLabel(this.chart.data.datasets[e].data[t])},getPixelForTick:function(t){var e=this.tickValues;return t<0||t>e.length-1?null:this.getPixelForValue(e[t])},_getFirstTickValue:function(t){var e=Math.floor(Ir(t));return Math.floor(t/Math.pow(10,e))*Math.pow(10,e)},_configure:function(){var t=this,e=t.min,n=0;vr.prototype._configure.call(t),0===e&&(e=t._getFirstTickValue(t.minNotZero),n=Mr(t.options.ticks.fontSize,Z.global.defaultFontSize)/t._length),t._startValue=Ir(e),t._valueOffset=n,t._valueRange=(Ir(t.max)-Ir(e))/(1-n)},getPixelForValue:function(t){var e=this,n=0;return(t=+e.getRightValue(t))>e.min&&t>0&&(n=(Ir(t)-e._startValue)/e._valueRange+e._valueOffset),e.getPixelForDecimal(n)},getValueForPixel:function(t){var e=this,n=e.getDecimalForPixel(t);return 0===n&&0===e.min?0:Math.pow(10,e._startValue+(n-e._valueOffset)*e._valueRange)}}),Ur=Pr;Nr._defaults=Ur;var Br=at.valueOrDefault,jr=at.valueAtIndexOrDefault,Vr=at.options.resolve,Hr={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:Xn.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(t){return t}}};function Gr(t){var e=t.ticks;return e.display&&t.display?Br(e.fontSize,Z.global.defaultFontSize)+2*e.backdropPaddingY:0}function Wr(t,e,n){return at.isArray(n)?{w:at.longestText(t,t.font,n),h:n.length*e}:{w:t.measureText(n).width,h:e}}function zr(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function Yr(t){var e,n,r,i=at.options._parseFont(t.options.pointLabels),a={l:0,r:t.width,t:0,b:t.height-t.paddingTop},o={};t.ctx.font=i.string,t._pointLabelSizes=[];var s=t.chart.data.labels.length;for(e=0;e<s;e++){r=t.getPointPosition(e,t.drawingArea+5),n=Wr(t.ctx,i.lineHeight,t.pointLabels[e]),t._pointLabelSizes[e]=n;var l=t.getIndexAngle(e),u=at.toDegrees(l)%360,c=zr(u,r.x,n.w,0,180),d=zr(u,r.y,n.h,90,270);c.start<a.l&&(a.l=c.start,o.l=l),c.end>a.r&&(a.r=c.end,o.r=l),d.start<a.t&&(a.t=d.start,o.t=l),d.end>a.b&&(a.b=d.end,o.b=l)}t.setReductions(t.drawingArea,a,o)}function qr(t){return 0===t||180===t?"center":t<180?"left":"right"}function Kr(t,e,n,r){var i,a,o=n.y+r/2;if(at.isArray(e))for(i=0,a=e.length;i<a;++i)t.fillText(e[i],n.x,o),o+=r;else t.fillText(e,n.x,o)}function Xr(t,e,n){90===t||270===t?n.y-=e.h/2:(t>270||t<90)&&(n.y-=e.h)}function Zr(t){var e=t.ctx,n=t.options,r=n.pointLabels,i=Gr(n),a=t.getDistanceFromCenterForValue(n.ticks.reverse?t.min:t.max),o=at.options._parseFont(r);e.save(),e.font=o.string,e.textBaseline="middle";for(var s=t.chart.data.labels.length-1;s>=0;s--){var l=0===s?i/2:0,u=t.getPointPosition(s,a+l+5),c=jr(r.fontColor,s,Z.global.defaultFontColor);e.fillStyle=c;var d=t.getIndexAngle(s),h=at.toDegrees(d);e.textAlign=qr(h),Xr(h,t._pointLabelSizes[s],u),Kr(e,t.pointLabels[s],u,o.lineHeight)}e.restore()}function Jr(t,e,n,r){var i,a=t.ctx,o=e.circular,s=t.chart.data.labels.length,l=jr(e.color,r-1),u=jr(e.lineWidth,r-1);if((o||s)&&l&&u){if(a.save(),a.strokeStyle=l,a.lineWidth=u,a.setLineDash&&(a.setLineDash(e.borderDash||[]),a.lineDashOffset=e.borderDashOffset||0),a.beginPath(),o)a.arc(t.xCenter,t.yCenter,n,0,2*Math.PI);else{i=t.getPointPosition(0,n),a.moveTo(i.x,i.y);for(var c=1;c<s;c++)i=t.getPointPosition(c,n),a.lineTo(i.x,i.y)}a.closePath(),a.stroke(),a.restore()}}function Qr(t){return at.isNumber(t)?t:0}var ti=xr.extend({setDimensions:function(){var t=this;t.width=t.maxWidth,t.height=t.maxHeight,t.paddingTop=Gr(t.options)/2,t.xCenter=Math.floor(t.width/2),t.yCenter=Math.floor((t.height-t.paddingTop)/2),t.drawingArea=Math.min(t.height-t.paddingTop,t.width)/2},determineDataLimits:function(){var t=this,e=t.chart,n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;at.each(e.data.datasets,(function(i,a){if(e.isDatasetVisible(a)){var o=e.getDatasetMeta(a);at.each(i.data,(function(e,i){var a=+t.getRightValue(e);isNaN(a)||o.data[i].hidden||(n=Math.min(a,n),r=Math.max(a,r))}))}})),t.min=n===Number.POSITIVE_INFINITY?0:n,t.max=r===Number.NEGATIVE_INFINITY?0:r,t.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/Gr(this.options))},convertTicksToLabels:function(){var t=this;xr.prototype.convertTicksToLabels.call(t),t.pointLabels=t.chart.data.labels.map((function(){var e=at.callback(t.options.pointLabels.callback,arguments,t);return e||0===e?e:""}))},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},fit:function(){var t=this,e=t.options;e.display&&e.pointLabels.display?Yr(t):t.setCenterPoint(0,0,0,0)},setReductions:function(t,e,n){var r=this,i=e.l/Math.sin(n.l),a=Math.max(e.r-r.width,0)/Math.sin(n.r),o=-e.t/Math.cos(n.t),s=-Math.max(e.b-(r.height-r.paddingTop),0)/Math.cos(n.b);i=Qr(i),a=Qr(a),o=Qr(o),s=Qr(s),r.drawingArea=Math.min(Math.floor(t-(i+a)/2),Math.floor(t-(o+s)/2)),r.setCenterPoint(i,a,o,s)},setCenterPoint:function(t,e,n,r){var i=this,a=i.width-e-i.drawingArea,o=t+i.drawingArea,s=n+i.drawingArea,l=i.height-i.paddingTop-r-i.drawingArea;i.xCenter=Math.floor((o+a)/2+i.left),i.yCenter=Math.floor((s+l)/2+i.top+i.paddingTop)},getIndexAngle:function(t){var e=this.chart,n=(t*(360/e.data.labels.length)+((e.options||{}).startAngle||0))%360;return(n<0?n+360:n)*Math.PI*2/360},getDistanceFromCenterForValue:function(t){var e=this;if(at.isNullOrUndef(t))return NaN;var n=e.drawingArea/(e.max-e.min);return e.options.ticks.reverse?(e.max-t)*n:(t-e.min)*n},getPointPosition:function(t,e){var n=this,r=n.getIndexAngle(t)-Math.PI/2;return{x:Math.cos(r)*e+n.xCenter,y:Math.sin(r)*e+n.yCenter}},getPointPositionForValue:function(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))},getBasePosition:function(t){var e=this,n=e.min,r=e.max;return e.getPointPositionForValue(t||0,e.beginAtZero?0:n<0&&r<0?r:n>0&&r>0?n:0)},_drawGrid:function(){var t,e,n,r=this,i=r.ctx,a=r.options,o=a.gridLines,s=a.angleLines,l=Br(s.lineWidth,o.lineWidth),u=Br(s.color,o.color);if(a.pointLabels.display&&Zr(r),o.display&&at.each(r.ticks,(function(t,n){0!==n&&(e=r.getDistanceFromCenterForValue(r.ticksAsNumbers[n]),Jr(r,o,e,n))})),s.display&&l&&u){for(i.save(),i.lineWidth=l,i.strokeStyle=u,i.setLineDash&&(i.setLineDash(Vr([s.borderDash,o.borderDash,[]])),i.lineDashOffset=Vr([s.borderDashOffset,o.borderDashOffset,0])),t=r.chart.data.labels.length-1;t>=0;t--)e=r.getDistanceFromCenterForValue(a.ticks.reverse?r.min:r.max),n=r.getPointPosition(t,e),i.beginPath(),i.moveTo(r.xCenter,r.yCenter),i.lineTo(n.x,n.y),i.stroke();i.restore()}},_drawLabels:function(){var t=this,e=t.ctx,n=t.options.ticks;if(n.display){var r,i,a=t.getIndexAngle(0),o=at.options._parseFont(n),s=Br(n.fontColor,Z.global.defaultFontColor);e.save(),e.font=o.string,e.translate(t.xCenter,t.yCenter),e.rotate(a),e.textAlign="center",e.textBaseline="middle",at.each(t.ticks,(function(a,l){(0!==l||n.reverse)&&(r=t.getDistanceFromCenterForValue(t.ticksAsNumbers[l]),n.showLabelBackdrop&&(i=e.measureText(a).width,e.fillStyle=n.backdropColor,e.fillRect(-i/2-n.backdropPaddingX,-r-o.size/2-n.backdropPaddingY,i+2*n.backdropPaddingX,o.size+2*n.backdropPaddingY)),e.fillStyle=s,e.fillText(a,0,-r))})),e.restore()}},_drawTitle:at.noop}),ei=Hr;ti._defaults=ei;var ni=at._deprecated,ri=at.options.resolve,ii=at.valueOrDefault,ai=Number.MIN_SAFE_INTEGER||-9007199254740991,oi=Number.MAX_SAFE_INTEGER||9007199254740991,si={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},li=Object.keys(si);function ui(t,e){return t-e}function ci(t){var e,n,r,i={},a=[];for(e=0,n=t.length;e<n;++e)i[r=t[e]]||(i[r]=!0,a.push(r));return a}function di(t){return at.valueOrDefault(t.time.min,t.ticks.min)}function hi(t){return at.valueOrDefault(t.time.max,t.ticks.max)}function fi(t,e,n,r){if("linear"===r||!t.length)return[{time:e,pos:0},{time:n,pos:1}];var i,a,o,s,l,u=[],c=[e];for(i=0,a=t.length;i<a;++i)(s=t[i])>e&&s<n&&c.push(s);for(c.push(n),i=0,a=c.length;i<a;++i)l=c[i+1],o=c[i-1],s=c[i],void 0!==o&&void 0!==l&&Math.round((l+o)/2)===s||u.push({time:s,pos:i/(a-1)});return u}function pi(t,e,n){for(var r,i,a,o=0,s=t.length-1;o>=0&&o<=s;){if(i=t[(r=o+s>>1)-1]||null,a=t[r],!i)return{lo:null,hi:a};if(a[e]<n)o=r+1;else{if(!(i[e]>n))return{lo:i,hi:a};s=r-1}}return{lo:a,hi:null}}function gi(t,e,n,r){var i=pi(t,e,n),a=i.lo?i.hi?i.lo:t[t.length-2]:t[0],o=i.lo?i.hi?i.hi:t[t.length-1]:t[1],s=o[e]-a[e],l=s?(n-a[e])/s:0,u=(o[r]-a[r])*l;return a[r]+u}function vi(t,e){var n=t._adapter,r=t.options.time,i=r.parser,a=i||r.format,o=e;return"function"==typeof i&&(o=i(o)),at.isFinite(o)||(o="string"==typeof a?n.parse(o,a):n.parse(o)),null!==o?+o:(i||"function"!=typeof a||(o=a(e),at.isFinite(o)||(o=n.parse(o))),o)}function mi(t,e){if(at.isNullOrUndef(e))return null;var n=t.options.time,r=vi(t,t.getRightValue(e));return null===r||n.round&&(r=+t._adapter.startOf(r,n.round)),r}function yi(t,e,n,r){var i,a,o,s=li.length;for(i=li.indexOf(t);i<s-1;++i)if(o=(a=si[li[i]]).steps?a.steps:oi,a.common&&Math.ceil((n-e)/(o*a.size))<=r)return li[i];return li[s-1]}function bi(t,e,n,r,i){var a,o;for(a=li.length-1;a>=li.indexOf(n);a--)if(o=li[a],si[o].common&&t._adapter.diff(i,r,o)>=e-1)return o;return li[n?li.indexOf(n):0]}function Si(t){for(var e=li.indexOf(t)+1,n=li.length;e<n;++e)if(si[li[e]].common)return li[e]}function Ei(t,e,n,r){var i,a=t._adapter,o=t.options,s=o.time,l=s.unit||yi(s.minUnit,e,n,r),u=ri([s.stepSize,s.unitStepSize,1]),c="week"===l&&s.isoWeekday,d=e,h=[];if(c&&(d=+a.startOf(d,"isoWeek",c)),d=+a.startOf(d,c?"day":l),a.diff(n,e,l)>1e5*u)throw e+" and "+n+" are too far apart with stepSize of "+u+" "+l;for(i=d;i<n;i=+a.add(i,u,l))h.push(i);return i!==n&&"ticks"!==o.bounds||h.push(i),h}function Ti(t,e,n,r,i){var a,o,s=0,l=0;return i.offset&&e.length&&(a=gi(t,"time",e[0],"pos"),s=1===e.length?1-a:(gi(t,"time",e[1],"pos")-a)/2,o=gi(t,"time",e[e.length-1],"pos"),l=1===e.length?o:(o-gi(t,"time",e[e.length-2],"pos"))/2),{start:s,end:l,factor:1/(s+1+l)}}function _i(t,e,n,r){var i,a,o=t._adapter,s=+o.startOf(e[0].value,r),l=e[e.length-1].value;for(i=s;i<=l;i=+o.add(i,1,r))(a=n[i])>=0&&(e[a].major=!0);return e}function xi(t,e,n){var r,i,a=[],o={},s=e.length;for(r=0;r<s;++r)o[i=e[r]]=r,a.push({value:i,major:!1});return 0!==s&&n?_i(t,a,o,n):a}var wi={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}},ki=vr.extend({initialize:function(){this.mergeTicksOptions(),vr.prototype.initialize.call(this)},update:function(){var t=this,e=t.options,n=e.time||(e.time={}),r=t._adapter=new Kn._date(e.adapters.date);return ni("time scale",n.format,"time.format","time.parser"),ni("time scale",n.min,"time.min","ticks.min"),ni("time scale",n.max,"time.max","ticks.max"),at.mergeIf(n.displayFormats,r.formats()),vr.prototype.update.apply(t,arguments)},getRightValue:function(t){return t&&void 0!==t.t&&(t=t.t),vr.prototype.getRightValue.call(this,t)},determineDataLimits:function(){var t,e,n,r,i,a,o,s=this,l=s.chart,u=s._adapter,c=s.options,d=c.time.unit||"day",h=oi,f=ai,p=[],g=[],v=[],m=s._getLabels();for(t=0,n=m.length;t<n;++t)v.push(mi(s,m[t]));for(t=0,n=(l.data.datasets||[]).length;t<n;++t)if(l.isDatasetVisible(t))if(i=l.data.datasets[t].data,at.isObject(i[0]))for(g[t]=[],e=0,r=i.length;e<r;++e)a=mi(s,i[e]),p.push(a),g[t][e]=a;else g[t]=v.slice(0),o||(p=p.concat(v),o=!0);else g[t]=[];v.length&&(h=Math.min(h,v[0]),f=Math.max(f,v[v.length-1])),p.length&&(p=n>1?ci(p).sort(ui):p.sort(ui),h=Math.min(h,p[0]),f=Math.max(f,p[p.length-1])),h=mi(s,di(c))||h,f=mi(s,hi(c))||f,h=h===oi?+u.startOf(Date.now(),d):h,f=f===ai?+u.endOf(Date.now(),d)+1:f,s.min=Math.min(h,f),s.max=Math.max(h+1,f),s._table=[],s._timestamps={data:p,datasets:g,labels:v}},buildTicks:function(){var t,e,n,r=this,i=r.min,a=r.max,o=r.options,s=o.ticks,l=o.time,u=r._timestamps,c=[],d=r.getLabelCapacity(i),h=s.source,f=o.distribution;for(u="data"===h||"auto"===h&&"series"===f?u.data:"labels"===h?u.labels:Ei(r,i,a,d),"ticks"===o.bounds&&u.length&&(i=u[0],a=u[u.length-1]),i=mi(r,di(o))||i,a=mi(r,hi(o))||a,t=0,e=u.length;t<e;++t)(n=u[t])>=i&&n<=a&&c.push(n);return r.min=i,r.max=a,r._unit=l.unit||(s.autoSkip?yi(l.minUnit,r.min,r.max,d):bi(r,c.length,l.minUnit,r.min,r.max)),r._majorUnit=s.major.enabled&&"year"!==r._unit?Si(r._unit):void 0,r._table=fi(r._timestamps.data,i,a,f),r._offsets=Ti(r._table,c,i,a,o),s.reverse&&c.reverse(),xi(r,c,r._majorUnit)},getLabelForIndex:function(t,e){var n=this,r=n._adapter,i=n.chart.data,a=n.options.time,o=i.labels&&t<i.labels.length?i.labels[t]:"",s=i.datasets[e].data[t];return at.isObject(s)&&(o=n.getRightValue(s)),a.tooltipFormat?r.format(vi(n,o),a.tooltipFormat):"string"==typeof o?o:r.format(vi(n,o),a.displayFormats.datetime)},tickFormatFunction:function(t,e,n,r){var i=this,a=i._adapter,o=i.options,s=o.time.displayFormats,l=s[i._unit],u=i._majorUnit,c=s[u],d=n[e],h=o.ticks,f=u&&c&&d&&d.major,p=a.format(t,r||(f?c:l)),g=f?h.major:h.minor,v=ri([g.callback,g.userCallback,h.callback,h.userCallback]);return v?v(p,e,n):p},convertTicksToLabels:function(t){var e,n,r=[];for(e=0,n=t.length;e<n;++e)r.push(this.tickFormatFunction(t[e].value,e,t));return r},getPixelForOffset:function(t){var e=this,n=e._offsets,r=gi(e._table,"time",t,"pos");return e.getPixelForDecimal((n.start+r)*n.factor)},getPixelForValue:function(t,e,n){var r=this,i=null;if(void 0!==e&&void 0!==n&&(i=r._timestamps.datasets[n][e]),null===i&&(i=mi(r,t)),null!==i)return r.getPixelForOffset(i)},getPixelForTick:function(t){var e=this.getTicks();return t>=0&&t<e.length?this.getPixelForOffset(e[t].value):null},getValueForPixel:function(t){var e=this,n=e._offsets,r=e.getDecimalForPixel(t)/n.factor-n.end,i=gi(e._table,"pos",r,"time");return e._adapter._create(i)},_getLabelSize:function(t){var e=this,n=e.options.ticks,r=e.ctx.measureText(t).width,i=at.toRadians(e.isHorizontal()?n.maxRotation:n.minRotation),a=Math.cos(i),o=Math.sin(i),s=ii(n.fontSize,Z.global.defaultFontSize);return{w:r*a+s*o,h:r*o+s*a}},getLabelWidth:function(t){return this._getLabelSize(t).w},getLabelCapacity:function(t){var e=this,n=e.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,a=e.tickFormatFunction(t,0,xi(e,[t],e._majorUnit),i),o=e._getLabelSize(a),s=Math.floor(e.isHorizontal()?e.width/o.w:e.height/o.h);return e.options.offset&&s--,s>0?s:1}}),Ai=wi;ki._defaults=Ai;var Ci={category:br,linear:$r,logarithmic:Nr,radialLinear:ti,time:ki},Di={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};Kn._date.override("function"==typeof t?{_id:"moment",formats:function(){return Di},parse:function(e,n){return"string"==typeof e&&"string"==typeof n?e=t(e,n):e instanceof t||(e=t(e)),e.isValid()?e.valueOf():null},format:function(e,n){return t(e).format(n)},add:function(e,n,r){return t(e).add(n,r).valueOf()},diff:function(e,n,r){return t(e).diff(t(n),r)},startOf:function(e,n,r){return e=t(e),"isoWeek"===n?e.isoWeekday(r).valueOf():e.startOf(n).valueOf()},endOf:function(e,n){return t(e).endOf(n).valueOf()},_create:function(e){return t(e)}}:{}),Z._set("global",{plugins:{filler:{propagate:!0}}});var Li={dataset:function(t){var e=t.fill,n=t.chart,r=n.getDatasetMeta(e),i=r&&n.isDatasetVisible(e)&&r.dataset._children||[],a=i.length||0;return a?function(t,e){return e<a&&i[e]._view||null}:null},boundary:function(t){var e=t.boundary,n=e?e.x:null,r=e?e.y:null;return at.isArray(e)?function(t,n){return e[n]}:function(t){return{x:null===n?t.x:n,y:null===r?t.y:r}}}};function $i(t,e,n){var r,i=t._model||{},a=i.fill;if(void 0===a&&(a=!!i.backgroundColor),!1===a||null===a)return!1;if(!0===a)return"origin";if(r=parseFloat(a,10),isFinite(r)&&Math.floor(r)===r)return"-"!==a[0]&&"+"!==a[0]||(r=e+r),!(r===e||r<0||r>=n)&&r;switch(a){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return a;default:return!1}}function Oi(t){var e,n=t.el._model||{},r=t.el._scale||{},i=t.fill,a=null;if(isFinite(i))return null;if("start"===i?a=void 0===n.scaleBottom?r.bottom:n.scaleBottom:"end"===i?a=void 0===n.scaleTop?r.top:n.scaleTop:void 0!==n.scaleZero?a=n.scaleZero:r.getBasePixel&&(a=r.getBasePixel()),null!=a){if(void 0!==a.x&&void 0!==a.y)return a;if(at.isFinite(a))return{x:(e=r.isHorizontal())?a:null,y:e?null:a}}return null}function Mi(t){var e,n,r,i,a,o=t.el._scale,s=o.options,l=o.chart.data.labels.length,u=t.fill,c=[];if(!l)return null;for(e=s.ticks.reverse?o.max:o.min,n=s.ticks.reverse?o.min:o.max,r=o.getPointPositionForValue(0,e),i=0;i<l;++i)a="start"===u||"end"===u?o.getPointPositionForValue(i,"start"===u?e:n):o.getBasePosition(i),s.gridLines.circular&&(a.cx=r.x,a.cy=r.y,a.angle=o.getIndexAngle(i)-Math.PI/2),c.push(a);return c}function Ii(t){return(t.el._scale||{}).getPointPositionForValue?Mi(t):Oi(t)}function Ri(t,e,n){var r,i=t[e].fill,a=[e];if(!n)return i;for(;!1!==i&&-1===a.indexOf(i);){if(!isFinite(i))return i;if(!(r=t[i]))return!1;if(r.visible)return i;a.push(i),i=r.fill}return!1}function Pi(t){var e=t.fill,n="dataset";return!1===e?null:(isFinite(e)||(n="boundary"),Li[n](t))}function Fi(t){return t&&!t.skip}function Ni(t,e,n,r,i){var a,o,s,l;if(r&&i){for(t.moveTo(e[0].x,e[0].y),a=1;a<r;++a)at.canvas.lineTo(t,e[a-1],e[a]);if(void 0===n[0].angle)for(t.lineTo(n[i-1].x,n[i-1].y),a=i-1;a>0;--a)at.canvas.lineTo(t,n[a],n[a-1],!0);else for(o=n[0].cx,s=n[0].cy,l=Math.sqrt(Math.pow(n[0].x-o,2)+Math.pow(n[0].y-s,2)),a=i-1;a>0;--a)t.arc(o,s,l,n[a].angle,n[a-1].angle,!0)}}function Ui(t,e,n,r,i,a){var o,s,l,u,c,d,h,f,p=e.length,g=r.spanGaps,v=[],m=[],y=0,b=0;for(t.beginPath(),o=0,s=p;o<s;++o)c=n(u=e[l=o%p]._view,l,r),d=Fi(u),h=Fi(c),a&&void 0===f&&d&&(s=p+(f=o+1)),d&&h?(y=v.push(u),b=m.push(c)):y&&b&&(g?(d&&v.push(u),h&&m.push(c)):(Ni(t,v,m,y,b),y=b=0,v=[],m=[]));Ni(t,v,m,y,b),t.closePath(),t.fillStyle=i,t.fill()}var Bi={id:"filler",afterDatasetsUpdate:function(t,e){var n,r,i,a,o=(t.data.datasets||[]).length,s=e.propagate,l=[];for(r=0;r<o;++r)a=null,(i=(n=t.getDatasetMeta(r)).dataset)&&i._model&&i instanceof Wt.Line&&(a={visible:t.isDatasetVisible(r),fill:$i(i,r,o),chart:t,el:i}),n.$filler=a,l.push(a);for(r=0;r<o;++r)(a=l[r])&&(a.fill=Ri(l,r,s),a.boundary=Ii(a),a.mapper=Pi(a))},beforeDatasetsDraw:function(t){var e,n,r,i,a,o,s,l=t._getSortedVisibleDatasetMetas(),u=t.ctx;for(n=l.length-1;n>=0;--n)(e=l[n].$filler)&&e.visible&&(i=(r=e.el)._view,a=r._children||[],o=e.mapper,s=i.backgroundColor||Z.global.defaultColor,o&&s&&a.length&&(at.canvas.clipArea(u,t.chartArea),Ui(u,a,o,i,s,r._loop),at.canvas.unclipArea(u)))}},ji=at.rtl.getRtlAdapter,Vi=at.noop,Hi=at.valueOrDefault;function Gi(t,e){return t.usePointStyle&&t.boxWidth>e?e:t.boxWidth}Z._set("global",{legend:{display:!0,position:"top",align:"center",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(t,e){var n=e.datasetIndex,r=this.chart,i=r.getDatasetMeta(n);i.hidden=null===i.hidden?!r.data.datasets[n].hidden:null,r.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(t){var e=t.data.datasets,n=t.options.legend||{},r=n.labels&&n.labels.usePointStyle;return t._getSortedDatasetMetas().map((function(n){var i=n.controller.getStyle(r?0:void 0);return{text:e[n.index].label,fillStyle:i.backgroundColor,hidden:!t.isDatasetVisible(n.index),lineCap:i.borderCapStyle,lineDash:i.borderDash,lineDashOffset:i.borderDashOffset,lineJoin:i.borderJoinStyle,lineWidth:i.borderWidth,strokeStyle:i.borderColor,pointStyle:i.pointStyle,rotation:i.rotation,datasetIndex:n.index}}),this)}}},legendCallback:function(t){var e,n,r,i=document.createElement("ul"),a=t.data.datasets;for(i.setAttribute("class",t.id+"-legend"),e=0,n=a.length;e<n;e++)(r=i.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=a[e].backgroundColor,a[e].label&&r.appendChild(document.createTextNode(a[e].label));return i.outerHTML}});var Wi=ft.extend({initialize:function(t){var e=this;at.extend(e,t),e.legendHitBoxes=[],e._hoveredItem=null,e.doughnutMode=!1},beforeUpdate:Vi,update:function(t,e,n){var r=this;return r.beforeUpdate(),r.maxWidth=t,r.maxHeight=e,r.margins=n,r.beforeSetDimensions(),r.setDimensions(),r.afterSetDimensions(),r.beforeBuildLabels(),r.buildLabels(),r.afterBuildLabels(),r.beforeFit(),r.fit(),r.afterFit(),r.afterUpdate(),r.minSize},afterUpdate:Vi,beforeSetDimensions:Vi,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:Vi,beforeBuildLabels:Vi,buildLabels:function(){var t=this,e=t.options.labels||{},n=at.callback(e.generateLabels,[t.chart],t)||[];e.filter&&(n=n.filter((function(n){return e.filter(n,t.chart.data)}))),t.options.reverse&&n.reverse(),t.legendItems=n},afterBuildLabels:Vi,beforeFit:Vi,fit:function(){var t=this,e=t.options,n=e.labels,r=e.display,i=t.ctx,a=at.options._parseFont(n),o=a.size,s=t.legendHitBoxes=[],l=t.minSize,u=t.isHorizontal();if(u?(l.width=t.maxWidth,l.height=r?10:0):(l.width=r?10:0,l.height=t.maxHeight),r){if(i.font=a.string,u){var c=t.lineWidths=[0],d=0;i.textAlign="left",i.textBaseline="middle",at.each(t.legendItems,(function(t,e){var r=Gi(n,o)+o/2+i.measureText(t.text).width;(0===e||c[c.length-1]+r+2*n.padding>l.width)&&(d+=o+n.padding,c[c.length-(e>0?0:1)]=0),s[e]={left:0,top:0,width:r,height:o},c[c.length-1]+=r+n.padding})),l.height+=d}else{var h=n.padding,f=t.columnWidths=[],p=t.columnHeights=[],g=n.padding,v=0,m=0;at.each(t.legendItems,(function(t,e){var r=Gi(n,o)+o/2+i.measureText(t.text).width;e>0&&m+o+2*h>l.height&&(g+=v+n.padding,f.push(v),p.push(m),v=0,m=0),v=Math.max(v,r),m+=o+h,s[e]={left:0,top:0,width:r,height:o}})),g+=v,f.push(v),p.push(m),l.width+=g}t.width=l.width,t.height=l.height}else t.width=l.width=t.height=l.height=0},afterFit:Vi,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var t=this,e=t.options,n=e.labels,r=Z.global,i=r.defaultColor,a=r.elements.line,o=t.height,s=t.columnHeights,l=t.width,u=t.lineWidths;if(e.display){var c,d=ji(e.rtl,t.left,t.minSize.width),h=t.ctx,f=Hi(n.fontColor,r.defaultFontColor),p=at.options._parseFont(n),g=p.size;h.textAlign=d.textAlign("left"),h.textBaseline="middle",h.lineWidth=.5,h.strokeStyle=f,h.fillStyle=f,h.font=p.string;var v=Gi(n,g),m=t.legendHitBoxes,y=function(t,e,r){if(!(isNaN(v)||v<=0)){h.save();var o=Hi(r.lineWidth,a.borderWidth);if(h.fillStyle=Hi(r.fillStyle,i),h.lineCap=Hi(r.lineCap,a.borderCapStyle),h.lineDashOffset=Hi(r.lineDashOffset,a.borderDashOffset),h.lineJoin=Hi(r.lineJoin,a.borderJoinStyle),h.lineWidth=o,h.strokeStyle=Hi(r.strokeStyle,i),h.setLineDash&&h.setLineDash(Hi(r.lineDash,a.borderDash)),n&&n.usePointStyle){var s=v*Math.SQRT2/2,l=d.xPlus(t,v/2),u=e+g/2;at.canvas.drawPoint(h,r.pointStyle,s,l,u,r.rotation)}else h.fillRect(d.leftForLtr(t,v),e,v,g),0!==o&&h.strokeRect(d.leftForLtr(t,v),e,v,g);h.restore()}},b=function(t,e,n,r){var i=g/2,a=d.xPlus(t,v+i),o=e+i;h.fillText(n.text,a,o),n.hidden&&(h.beginPath(),h.lineWidth=2,h.moveTo(a,o),h.lineTo(d.xPlus(a,r),o),h.stroke())},S=function(t,r){switch(e.align){case"start":return n.padding;case"end":return t-r;default:return(t-r+n.padding)/2}},E=t.isHorizontal();c=E?{x:t.left+S(l,u[0]),y:t.top+n.padding,line:0}:{x:t.left+n.padding,y:t.top+S(o,s[0]),line:0},at.rtl.overrideTextDirection(t.ctx,e.textDirection);var T=g+n.padding;at.each(t.legendItems,(function(e,r){var i=h.measureText(e.text).width,a=v+g/2+i,f=c.x,p=c.y;d.setWidth(t.minSize.width),E?r>0&&f+a+n.padding>t.left+t.minSize.width&&(p=c.y+=T,c.line++,f=c.x=t.left+S(l,u[c.line])):r>0&&p+T>t.top+t.minSize.height&&(f=c.x=f+t.columnWidths[c.line]+n.padding,c.line++,p=c.y=t.top+S(o,s[c.line]));var _=d.x(f);y(_,p,e),m[r].left=d.leftForLtr(_,m[r].width),m[r].top=p,b(_,p,e,i),E?c.x+=a+n.padding:c.y+=T})),at.rtl.restoreTextDirection(t.ctx,e.textDirection)}},_getLegendItemAt:function(t,e){var n,r,i,a=this;if(t>=a.left&&t<=a.right&&e>=a.top&&e<=a.bottom)for(i=a.legendHitBoxes,n=0;n<i.length;++n)if(t>=(r=i[n]).left&&t<=r.left+r.width&&e>=r.top&&e<=r.top+r.height)return a.legendItems[n];return null},handleEvent:function(t){var e,n=this,r=n.options,i="mouseup"===t.type?"click":t.type;if("mousemove"===i){if(!r.onHover&&!r.onLeave)return}else{if("click"!==i)return;if(!r.onClick)return}e=n._getLegendItemAt(t.x,t.y),"click"===i?e&&r.onClick&&r.onClick.call(n,t.native,e):(r.onLeave&&e!==n._hoveredItem&&(n._hoveredItem&&r.onLeave.call(n,t.native,n._hoveredItem),n._hoveredItem=e),r.onHover&&e&&r.onHover.call(n,t.native,e))}});function zi(t,e){var n=new Wi({ctx:t.ctx,options:e,chart:t});He.configure(t,n,e),He.addBox(t,n),t.legend=n}var Yi={id:"legend",_element:Wi,beforeInit:function(t){var e=t.options.legend;e&&zi(t,e)},beforeUpdate:function(t){var e=t.options.legend,n=t.legend;e?(at.mergeIf(e,Z.global.legend),n?(He.configure(t,n,e),n.options=e):zi(t,e)):n&&(He.removeBox(t,n),delete t.legend)},afterEvent:function(t,e){var n=t.legend;n&&n.handleEvent(e)}},qi=at.noop;Z._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var Ki=ft.extend({initialize:function(t){var e=this;at.extend(e,t),e.legendHitBoxes=[]},beforeUpdate:qi,update:function(t,e,n){var r=this;return r.beforeUpdate(),r.maxWidth=t,r.maxHeight=e,r.margins=n,r.beforeSetDimensions(),r.setDimensions(),r.afterSetDimensions(),r.beforeBuildLabels(),r.buildLabels(),r.afterBuildLabels(),r.beforeFit(),r.fit(),r.afterFit(),r.afterUpdate(),r.minSize},afterUpdate:qi,beforeSetDimensions:qi,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:qi,beforeBuildLabels:qi,buildLabels:qi,afterBuildLabels:qi,beforeFit:qi,fit:function(){var t,e=this,n=e.options,r=e.minSize={},i=e.isHorizontal();n.display?(t=(at.isArray(n.text)?n.text.length:1)*at.options._parseFont(n).lineHeight+2*n.padding,e.width=r.width=i?e.maxWidth:t,e.height=r.height=i?t:e.maxHeight):e.width=r.width=e.height=r.height=0},afterFit:qi,isHorizontal:function(){var t=this.options.position;return"top"===t||"bottom"===t},draw:function(){var t=this,e=t.ctx,n=t.options;if(n.display){var r,i,a,o=at.options._parseFont(n),s=o.lineHeight,l=s/2+n.padding,u=0,c=t.top,d=t.left,h=t.bottom,f=t.right;e.fillStyle=at.valueOrDefault(n.fontColor,Z.global.defaultFontColor),e.font=o.string,t.isHorizontal()?(i=d+(f-d)/2,a=c+l,r=f-d):(i="left"===n.position?d+l:f-l,a=c+(h-c)/2,r=h-c,u=Math.PI*("left"===n.position?-.5:.5)),e.save(),e.translate(i,a),e.rotate(u),e.textAlign="center",e.textBaseline="middle";var p=n.text;if(at.isArray(p))for(var g=0,v=0;v<p.length;++v)e.fillText(p[v],0,g,r),g+=s;else e.fillText(p,0,0,r);e.restore()}}});function Xi(t,e){var n=new Ki({ctx:t.ctx,options:e,chart:t});He.configure(t,n,e),He.addBox(t,n),t.titleBlock=n}var Zi={},Ji=Bi,Qi=Yi,ta={id:"title",_element:Ki,beforeInit:function(t){var e=t.options.title;e&&Xi(t,e)},beforeUpdate:function(t){var e=t.options.title,n=t.titleBlock;e?(at.mergeIf(e,Z.global.title),n?(He.configure(t,n,e),n.options=e):Xi(t,e)):n&&(He.removeBox(t,n),delete t.titleBlock)}};for(var ea in Zi.filler=Ji,Zi.legend=Qi,Zi.title=ta,Wn.helpers=at,zn(),Wn._adapters=Kn,Wn.Animation=gt,Wn.animationService=vt,Wn.controllers=_e,Wn.DatasetController=Tt,Wn.defaults=Z,Wn.Element=ft,Wn.elements=Wt,Wn.Interaction=Le,Wn.layouts=He,Wn.platform=yn,Wn.plugins=bn,Wn.Scale=vr,Wn.scaleService=Sn,Wn.Ticks=Xn,Wn.Tooltip=Rn,Wn.helpers.each(Ci,(function(t,e){Wn.scaleService.registerScaleType(e,t,t._defaults)})),Zi)Zi.hasOwnProperty(ea)&&Wn.plugins.register(Zi[ea]);Wn.platform.initialize();var na=Wn;return"undefined"!=typeof window&&(window.Chart=Wn),Wn.Chart=Wn,Wn.Legend=Zi.legend._element,Wn.Title=Zi.title._element,Wn.pluginService=Wn.plugins,Wn.PluginBase=Wn.Element.extend({}),Wn.canvasHelpers=Wn.helpers.canvas,Wn.layoutService=Wn.layouts,Wn.LinearScaleBase=xr,Wn.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],(function(t){Wn[t]=function(e,n){return new Wn(e,Wn.helpers.merge(n||{},{type:t.charAt(0).toLowerCase()+t.slice(1)}))}})),na}(function(){try{return _d.exports}catch(t){}}())}(_h),
/*!
	 * angular-chart.js - An angular.js wrapper for Chart.js
	 * http://jtblin.github.io/angular-chart.js/
	 * Version: 1.1.1
	 *
	 * Copyright 2016 Jerome Touffe-Blin
	 * Released under the BSD-2-Clause license
	 * https://github.com/jtblin/angular-chart.js/blob/master/LICENSE
	 */
function(t,e){t.exports=function(t,e){e.defaults.global.multiTooltipTemplate="<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= value %>",e.defaults.global.tooltips.mode="label",e.defaults.global.elements.line.borderWidth=2,e.defaults.global.elements.rectangle.borderWidth=2,e.defaults.global.legend.display=!1,e.defaults.global.colors=["#97BBCD","#DCDCDC","#F7464A","#46BFBD","#FDB45C","#949FB1","#4D5360"];var n="object"==typeof window.G_vmlCanvasManager&&null!==window.G_vmlCanvasManager&&"function"==typeof window.G_vmlCanvasManager.initElement;return n&&(e.defaults.global.animation=!1),t.module("chart.js",[]).provider("ChartJs",r).factory("ChartJsFactory",["ChartJs","$timeout",i]).directive("chartBase",["ChartJsFactory",function(t){return new t}]).directive("chartLine",["ChartJsFactory",function(t){return new t("line")}]).directive("chartBar",["ChartJsFactory",function(t){return new t("bar")}]).directive("chartHorizontalBar",["ChartJsFactory",function(t){return new t("horizontalBar")}]).directive("chartRadar",["ChartJsFactory",function(t){return new t("radar")}]).directive("chartDoughnut",["ChartJsFactory",function(t){return new t("doughnut")}]).directive("chartPie",["ChartJsFactory",function(t){return new t("pie")}]).directive("chartPolarArea",["ChartJsFactory",function(t){return new t("polarArea")}]).directive("chartBubble",["ChartJsFactory",function(t){return new t("bubble")}]).name;function r(){var n={responsive:!0},r={Chart:e,getOptions:function(e){var r=e&&n[e]||{};return t.extend({},n,r)}};this.setOptions=function(e,i){i?n[e]=t.merge(n[e]||{},i):(i=e,n=t.merge(n,i)),t.merge(r.Chart.defaults,n)},this.$get=function(){return r}}function i(r,i){return function(e){return{restrict:"CA",scope:{chartGetColor:"=?",chartType:"=",chartData:"=?",chartLabels:"=?",chartOptions:"=?",chartSeries:"=?",chartColors:"=?",chartClick:"=?",chartHover:"=?",chartDatasetOverride:"=?"},link:function(r,i){function s(t,n){if(t&&t.length&&(!Array.isArray(t[0])||t[0].length)){var s=e||r.chartType;if(s)return r.chart&&o(t,n)?x(t,r):void a(s,r,i)}else A(r)}function l(n,o){if(!w(n)&&!t.equals(n,o)){var s=e||r.chartType;s&&a(s,r,i)}}function u(e,n){w(e)||t.equals(e,n)||a(e,r,i)}n&&window.G_vmlCanvasManager.initElement(i[0]),r.$watch("chartData",s,!0),r.$watch("chartSeries",l,!0),r.$watch("chartLabels",l,!0),r.$watch("chartOptions",l,!0),r.$watch("chartColors",l,!0),r.$watch("chartDatasetOverride",l,!0),r.$watch("chartType",u,!1),r.$on("$destroy",(function(){A(r)})),r.$on("$resize",(function(){r.chart&&r.chart.resize()}))}}};function a(t,e,n){var i=T(t,e);if(m(e)&&k(t,e,n,i)){var a=n[0],o=a.getContext("2d");e.chartGetColor=y(e);var s=b(t,e);A(e),e.chart=new r.Chart(o,{type:t,data:s,options:i}),e.$emit("chart-create",e.chart),_(a,e)}}function o(t,e){return!!(t&&e&&t.length&&e.length)&&(Array.isArray(t[0])?t.length===e.length&&t.every((function(t,n){return t.length===e[n].length})):e.reduce(s,0)>0&&t.length===e.length)}function s(t,e){return t+e}function l(e,n,r){var i={point:void 0,points:void 0};return function(a){var o=e.chart.getElementAtEvent||e.chart.getPointAtEvent,s=e.chart.getElementsAtEvent||e.chart.getPointsAtEvent;if(s){var l=s.call(e.chart,a),u=o?o.call(e.chart,a)[0]:void 0;!1!==r&&(t.equals(i.points,l)||t.equals(i.point,u))||(i.point=u,i.points=l,e[n](l,a,u))}}}function u(n,i){for(var a=t.copy(i.chartColors||r.getOptions(n).chartColors||e.defaults.global.colors),o=a.length<i.chartData.length;a.length<i.chartData.length;)a.push(i.chartGetColor());return o&&(i.chartColors=a),a.map(c)}function c(t){return"string"==typeof t&&"r"===t[0]?h(v(t)):"string"==typeof t&&"#"===t[0]?h(g(t.substr(1))):"object"==typeof t&&null!==t?t:d()}function d(){return h([f(0,255),f(0,255),f(0,255)])}function h(t){var e=t[3]||1;return{backgroundColor:p(t=t.slice(0,3),.2),pointBackgroundColor:p(t,e),pointHoverBackgroundColor:p(t,.8),borderColor:p(t,e),pointBorderColor:"#fff",pointHoverBorderColor:p(t,e)}}function f(t,e){return Math.floor(Math.random()*(e-t+1))+t}function p(t,e){return n?"rgb("+t.join(",")+")":"rgba("+t.concat(e).join(",")+")"}function g(t){var e=parseInt(t,16);return[e>>16&255,e>>8&255,255&e]}function v(t){var e=t.match(/^rgba?\(([\d,.]+)\)$/);if(!e)throw new Error("Cannot parse rgb value");return(t=e[1].split(",")).map(Number)}function m(t){return t.chartData&&t.chartData.length}function y(t){return"function"==typeof t.chartGetColor?t.chartGetColor:d}function b(t,e){var n=u(t,e);return Array.isArray(e.chartData[0])?S(e.chartLabels,e.chartData,e.chartSeries||[],n,e.chartDatasetOverride):E(e.chartLabels,e.chartData,n,e.chartDatasetOverride)}function S(e,n,r,i,a){return{labels:e,datasets:n.map((function(e,n){var o=t.extend({},i[n],{label:r[n],data:e});return a&&a.length>=n&&t.merge(o,a[n]),o}))}}function E(e,n,r,i){var a={labels:e,datasets:[{data:n,backgroundColor:r.map((function(t){return t.pointBackgroundColor})),hoverBackgroundColor:r.map((function(t){return t.backgroundColor}))}]};return i&&t.merge(a.datasets[0],i),a}function T(e,n){return t.extend({},r.getOptions(e),n.chartOptions)}function _(e,n){e.onclick=n.chartClick?l(n,"chartClick",!1):t.noop,e.onmousemove=n.chartHover?l(n,"chartHover",!0):t.noop}function x(t,e){Array.isArray(e.chartData[0])?e.chart.data.datasets.forEach((function(e,n){e.data=t[n]})):e.chart.data.datasets[0].data=t,e.chart.update(),e.$emit("chart-update",e.chart)}function w(t){return!t||Array.isArray(t)&&!t.length||"object"==typeof t&&!Object.keys(t).length}function k(t,e,n,r){return!r.responsive||0!==n[0].clientHeight||(i((function(){a(t,e,n)}),50,!1),!1)}function A(t){t.chart&&(t.chart.destroy(),t.$emit("chart-destroy",t.chart))}}}("undefined"!=typeof angular?angular:Td,"undefined"!=typeof Chart?Chart:_h.exports)}({exports:{}}),
/*!
	 * @license angularjs-gauge - A Gauge directive for Angular 1.x apps and dashboards
	 * 
	 * version: 2.2.0
	 *
	 * Copyright (c) 2016-2017 Ashish Chopra
	 * Released under the MIT license
	 * https://github.com/ashish-chopra/angular-gauge/blob/master/LICENSE
	 */
function(t){function e(){var e={size:200,value:void 0,min:0,max:100,cap:"butt",thick:6,type:"full",foregroundColor:"rgba(0, 150, 136, 1)",backgroundColor:"rgba(0, 0, 0, 0.1)",duration:1500,fractionSize:null,labelOnly:!1};this.setOptions=function(n){if(!n||!t.isObject(n))throw new Error("Invalid option type specified in the ngGaugeProvider");e=t.merge(e,n)};var n={getOptions:function(){return t.extend({},e)}};this.$get=function(){return n}}function n(e){var n=function(t,e){this.element=t.find("canvas")[0],this.text=t.find("span"),this.legend=t.find("b"),this.unit=t.find("u"),this.context=this.element.getContext("2d"),this.options=e,this.init()};return n.prototype={init:function(){this.setupStyles(),this.create(null,null)},setupStyles:function(){this.context.canvas.width=this.options.size,this.context.canvas.height=this.options.size,this.context.lineCap=this.options.cap,this.context.lineWidth=this.options.thick;var t=.22*this.options.size,e=this.options.size;this.text.css({display:"inline-block",fontWeight:"normal",width:"100%",position:"absolute",textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",fontSize:t+"px",lineHeight:e+"px"}),this.unit.css({textDecoration:"none",fontSize:"0.6em",fontWeight:200,opacity:.8});var n=this.options.labelOnly?.8*t:this.options.size/13,r=this.options.labelOnly?e:5*n+parseInt(this.options.size);this.legend.css({display:"inline-block",width:"100%",position:"absolute",textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",fontWeight:"normal",fontSize:n+"px",lineHeight:r+"px"})},create:function(t,e){var n,r,i=this,a=this.getType(),o=this.getBounds(a),s=this.getDuration(),l=this.getMin(),u=this.getMax(),c=this.clamp(this.getValue(),l,u),d=o.head,h=(o.tail-o.head)/(u-l),f=h*(c-l),p=o.tail,g=this.getForegroundColorByRange(c);function v(t){var a=(t=t||(new Date).getTime())-r,o=Math.min(a/s,1),l=d+(e?e*h:0)+f*o;i.drawShell(d,l,p,g),a<s?n=window.requestAnimationFrame((function(t){v(t)})):cancelAnimationFrame(n)}t&&e&&(f=h*t-h*e),requestAnimationFrame((function(t){r=t||(new Date).getTime(),v(t)}))},getBounds:function(t){var e,n;return"semi"==t?(e=Math.PI,n=2*Math.PI):"full"==t?(e=1.5*Math.PI,n=3.5*Math.PI):"arch"===t&&(e=.8*Math.PI,n=2.2*Math.PI),{head:e,tail:n}},drawShell:function(t,e,n,r){var i=this.context,a=this.getCenter(),o=this.getRadius(),s=r,l=this.getBackgroundColor();this.clear(),e=Math.max(e,t),e=Math.min(e,n),i.beginPath(),i.strokeStyle=l,i.arc(a.x,a.y,o,e,n,!1),i.stroke(),i.beginPath(),i.strokeStyle=s,i.arc(a.x,a.y,o,t,e,!1),i.stroke()},clear:function(){this.context.clearRect(0,0,this.getWidth(),this.getHeight())},update:function(t,e){this.create(t,e)},destroy:function(){this.clear()},getRadius:function(){return this.getCenter().x-this.getThickness()},getCenter:function(){return{x:this.getWidth()/2,y:this.getHeight()/2}},getValue:function(){return this.options.value},getMin:function(){return this.options.min},getMax:function(){return this.options.max},getWidth:function(){return this.context.canvas.width},getHeight:function(){return this.context.canvas.height},getThickness:function(){return this.options.thick},getBackgroundColor:function(){return this.options.backgroundColor},getForegroundColor:function(){return this.options.foregroundColor},getForegroundColorByRange:function(t){var e=Object.keys(this.options.thresholds).filter((function(e){return function(t){return null!=t&&!isNaN(parseFloat(t))&&!isNaN(Number(t))}(e)&&Number(e)<=t})).sort((function(t,e){return Number(t)>Number(e)})).reverse()[0];return void 0!==e&&this.options.thresholds[e].color||this.getForegroundColor()},getLineCap:function(){return this.options.cap},getType:function(){return this.options.type},getDuration:function(){return this.options.duration},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))}},{restrict:"E",replace:!0,template:'<div style="display:inline-block;text-align:center;position:relative;"><span ng-show="{{!labelOnly}}"><u>{{prepend}}</u><span ng-if="fractionSize === null">{{value | number}}</span><span ng-if="fractionSize !== null">{{value | number: fractionSize}}</span><u>{{append}}</u></span><b>{{ label }}</b><canvas></canvas></div>',scope:{append:"@?",backgroundColor:"@?",cap:"@?",foregroundColor:"@?",label:"@?",labelOnly:"@?",prepend:"@?",size:"@?",thick:"@?",type:"@?",duration:"@?",value:"=?",min:"=?",max:"=?",thresholds:"=?",fractionSize:"=?"},link:function(r,i){var a=e.getOptions();r.min=t.isDefined(r.min)?r.min:a.min,r.max=t.isDefined(r.max)?r.max:a.max,r.value=t.isDefined(r.value)?r.value:a.value,r.size=t.isDefined(r.size)?r.size:a.size,r.cap=t.isDefined(r.cap)?r.cap:a.cap,r.thick=t.isDefined(r.thick)?r.thick:a.thick,r.type=t.isDefined(r.type)?r.type:a.type,r.duration=t.isDefined(r.duration)?r.duration:a.duration,r.labelOnly=t.isDefined(r.labelOnly)?r.labelOnly:a.labelOnly,r.foregroundColor=t.isDefined(r.foregroundColor)?r.foregroundColor:a.foregroundColor,r.backgroundColor=t.isDefined(r.backgroundColor)?r.backgroundColor:a.backgroundColor,r.thresholds=t.isDefined(r.thresholds)?r.thresholds:{},r.fractionSize=t.isDefined(r.fractionSize)?r.fractionSize:a.fractionSize;var o=new n(i,r);function s(e,n){o&&t.isDefined(e)&&!t.equals(e,n)&&o.update(e,n)}function l(e,n){t.isDefined(e)&&!t.equals(e,n)&&(o.destroy(),o.init())}r.$watch("value",s,!1),r.$watch("min",s,!1),r.$watch("max",s,!1),r.$watch("cap",l,!1),r.$watch("thick",l,!1),r.$watch("type",l,!1),r.$watch("size",l,!1),r.$watch("duration",l,!1),r.$watch("foregroundColor",l,!1),r.$watch("backgroundColor",l,!1),r.$watch("thresholds",l,!1),r.$watch("fractionSize",s,!1),r.$on("$destroy",(function(){})),r.$on("$resize",(function(){}))}}}t.module("angularjs-gauge",[]).directive("ngGauge",n).provider("ngGauge",e),e.$inject=[],n.$inject=["ngGauge"]}(angular);!function(e){!function(){function n(t){return angular.isUndefined(t)||null===t}function r(t,e){return void 0===e&&(e=function(){try{return _d.exports}catch(t){throw new Error("Please install moment via npm. Please reference to: https://github.com/urish/angular-moment")}}()),t.module("angularMoment",[]).constant("angularMomentConfig",{preprocess:null,timezone:null,format:null,statefulFilters:!0}).constant("moment",e).constant("amTimeAgoConfig",{withoutSuffix:!1,serverTime:null,titleFormat:null,fullDateThreshold:null,fullDateFormat:null,fullDateThresholdUnit:"day"}).directive("amTimeAgo",["$window","moment","amMoment","amTimeAgoConfig",function(e,r,i,a){return function(o,s,l){var u,c,d=null,h=a.withoutSuffix,f=a.titleFormat,p=a.fullDateThreshold,g=a.fullDateFormat,v=a.fullDateThresholdUnit,m=(new Date).getTime(),y=l.amTimeAgo,b="TIME"===s[0].nodeName.toUpperCase(),S=!s.attr("title");function E(){var t;if(c)t=c;else if(a.serverTime){var e=(new Date).getTime()-m+a.serverTime;t=r(e)}else t=r();return t}function T(){d&&(e.clearTimeout(d),d=null)}function _(t){var n=E().diff(t,v),r=p&&n>=p;if(r?s.text(t.format(g)):s.text(t.from(E(),h)),f&&S&&s.attr("title",t.format(f)),!r){var i=Math.abs(E().diff(t,"minute")),a=3600;i<1?a=1:i<60?a=30:i<180&&(a=300),d=e.setTimeout((function(){_(t)}),1e3*a)}}function x(t){b&&s.attr("datetime",t)}function w(){if(T(),u){var t=i.preprocessDate(u);_(t),x(t.toISOString())}}o.$watch(y,(function(t){if(n(t)||""===t)return T(),void(u&&(s.text(""),x(""),u=null));u=t,w()})),t.isDefined(l.amFrom)&&o.$watch(l.amFrom,(function(t){c=n(t)||""===t?null:r(t),w()})),t.isDefined(l.amWithoutSuffix)&&o.$watch(l.amWithoutSuffix,(function(t){"boolean"==typeof t?(h=t,w()):h=a.withoutSuffix})),l.$observe("amFullDateThreshold",(function(t){p=t,w()})),l.$observe("amFullDateFormat",(function(t){g=t,w()})),l.$observe("amFullDateThresholdUnit",(function(t){v=t,w()})),o.$on("$destroy",(function(){T()})),o.$on("amMoment:localeChanged",(function(){w()}))}}]).service("amMoment",["moment","$rootScope","$log","angularMomentConfig",function(e,n,r,i){var a=null;this.changeLocale=function(r,i){var a=e.locale(r,i);return t.isDefined(r)&&n.$broadcast("amMoment:localeChanged"),a},this.changeTimezone=function(t){e.tz&&e.tz.setDefault?(e.tz.setDefault(t),n.$broadcast("amMoment:timezoneChanged")):r.warn("angular-moment: changeTimezone() works only with moment-timezone.js v0.3.0 or greater."),i.timezone=t,a=t},this.preprocessDate=function(t){return a!==i.timezone&&this.changeTimezone(i.timezone),i.preprocess?i.preprocess(t):!isNaN(parseFloat(t))&&isFinite(t)?e(parseInt(t,10)):e(t)}}]).filter("amParse",["moment",function(t){return function(e,n){return t(e,n)}}]).filter("amFromUnix",["moment",function(t){return function(e){return t.unix(e)}}]).filter("amUtc",["moment",function(t){return function(e){return t.utc(e)}}]).filter("amUtcOffset",["amMoment",function(t){return function(e,n){return t.preprocessDate(e).utcOffset(n)}}]).filter("amLocal",["moment",function(t){return function(e){return t.isMoment(e)?e.local():null}}]).filter("amTimezone",["amMoment","angularMomentConfig","$log",function(t,e,n){return function(e,r){var i=t.preprocessDate(e);return r?i.tz?i.tz(r):(n.warn("angular-moment: named timezone specified but moment.tz() is undefined. Did you forget to include moment-timezone.js ?"),i):i}}]).filter("amCalendar",["moment","amMoment","angularMomentConfig",function(t,e,r){function i(t,r,i){if(n(t))return"";var a=e.preprocessDate(t);return a.isValid()?a.calendar(r,i):""}return i.$stateful=r.statefulFilters,i}]).filter("amDifference",["moment","amMoment","angularMomentConfig",function(t,e,r){function i(r,i,a,o){if(n(r))return"";var s=e.preprocessDate(r),l=n(i)?t():e.preprocessDate(i);return s.isValid()&&l.isValid()?s.diff(l,a,o):""}return i.$stateful=r.statefulFilters,i}]).filter("amDateFormat",["moment","amMoment","angularMomentConfig",function(t,e,r){function i(t,r){if(n(t))return"";var i=e.preprocessDate(t);return i.isValid()?i.format(r):""}return i.$stateful=r.statefulFilters,i}]).filter("amDurationFormat",["moment","angularMomentConfig",function(t,e){function r(e,r,i){return n(e)?"":t.duration(e,r).humanize(i)}return r.$stateful=e.statefulFilters,r}]).filter("amTimeAgo",["moment","amMoment","angularMomentConfig",function(t,e,r){function i(r,i,a){var o,s;return n(r)?"":(r=e.preprocessDate(r),(o=t(r)).isValid()?(s=t(a),!n(a)&&s.isValid()?o.from(s,i):o.fromNow(i)):"")}return i.$stateful=r.statefulFilters,i}]).filter("amSubtract",["moment","angularMomentConfig",function(t,e){function r(e,r,i){return n(e)?"":t(e).subtract(parseInt(r,10),i)}return r.$stateful=e.statefulFilters,r}]).filter("amAdd",["moment","angularMomentConfig",function(t,e){function r(e,r,i){return n(e)?"":t(e).add(parseInt(r,10),i)}return r.$stateful=e.statefulFilters,r}]).filter("amStartOf",["moment","angularMomentConfig",function(t,e){function r(e,r){return n(e)?"":t(e).startOf(r)}return r.$stateful=e.statefulFilters,r}]).filter("amEndOf",["moment","angularMomentConfig",function(t,e){function r(e,r){return n(e)?"":t(e).endOf(r)}return r.$stateful=e.statefulFilters,r}]),"angularMoment"}var i=window&&window.process&&window.process.type;e&&e.exports&&!i?e.exports=r(Td,_d.exports):r(angular,(void 0!==t&&void 0!==t.moment?t:window).moment)}()}({exports:{}});!function(t,e){t.exports=(angular.module("tmh.dynamicLocale",[]).config(["$provide",function(t){function e(t){return t.$stateful=!0,t}t.decorator("dateFilter",["$delegate",e]),t.decorator("numberFilter",["$delegate",e]),t.decorator("currencyFilter",["$delegate",e])}]).constant("tmhDynamicLocale.STORAGE_KEY","tmhDynamicLocale.locale").provider("tmhDynamicLocale",["tmhDynamicLocale.STORAGE_KEY",function(t){var e,n,r,i,a="angular/i18n/angular-locale_{{locale}}.js",o="tmhDynamicLocaleStorageCache",s=t,l="get",u="put",c={},d={};function h(t,e,r,i){var a=document.createElement("script"),o=n||document.getElementsByTagName("body")[0],s=!1;a.type="text/javascript",a.readyState?a.onreadystatechange=function(){"complete"!==a.readyState&&"loaded"!==a.readyState||(a.onreadystatechange=null,i((function(){s||(s=!0,a.parentNode===o&&o.removeChild(a),e())}),30,!1))}:(a.onload=function(){s||(s=!0,a.parentNode===o&&o.removeChild(a),e())},a.onerror=function(){s||(s=!0,a.parentNode===o&&o.removeChild(a),r())}),a.src=t,a.async=!0,o.appendChild(a)}function f(t,e,n,a,o,l,d){function f(t,e){i===n&&(angular.forEach(t,(function(n,r){e[r]?angular.isArray(e[r])&&(t[r].length=e[r].length):delete t[r]})),angular.forEach(e,(function(n,r){angular.isArray(e[r])||angular.isObject(e[r])?(t[r]||(t[r]=angular.isArray(e[r])?[]:{}),f(t[r],e[r])):t[r]=e[r]})))}if(c[n])return i=n,c[n];var p,g=o.defer();return n===i?g.resolve(e):(p=l.get(n))?(i=n,a.$evalAsync((function(){f(e,p),r[u](s,n),a.$broadcast("$localeChangeSuccess",n,e),g.resolve(e)}))):(i=n,c[n]=g.promise,h(t,(function(){var t=angular.injector(["ngLocale"]).get("$locale");f(e,t),l.put(n,t),delete c[n],a.$applyAsync((function(){r[u](s,n),a.$broadcast("$localeChangeSuccess",n,e),g.resolve(e)}))}),(function(){delete c[n],a.$applyAsync((function(){i===n&&(i=e.id),a.$broadcast("$localeChangeError",n),g.reject(n)}))}),d)),g.promise}this.localeLocationPattern=function(t){return t?(a=t,this):a},this.appendScriptTo=function(t){n=t},this.useStorage=function(t){o=t,l="get",u="put"},this.useCookieStorage=function(){angular.version.minor<7?this.useStorage("$cookieStore"):(this.useStorage("$cookies"),l="getObject",u="putObject")},this.defaultLocale=function(t){e=t},this.storageKey=function(t){return t?(s=t,this):s},this.addLocalePatternValue=function(t,e){d[t]=e},this.$get=["$rootScope","$injector","$interpolate","$locale","$q","tmhDynamicLocaleCache","$timeout",function(t,n,u,c,h,p,g){var v=u(a);return r=n.get(o),t.$evalAsync((function(){var t;(t=r[l](s)||e)&&m(t)})),{set:m,get:function(){return i}};function m(e){var n={locale:e,angularVersion:angular.version.full};return f(v(angular.extend({},d,n)),c,e,t,h,p,g)}}]}]).provider("tmhDynamicLocaleCache",(function(){this.$get=["$cacheFactory",function(t){return t("tmh.dynamicLocales")}]})).provider("tmhDynamicLocaleStorageCache",(function(){this.$get=["$cacheFactory",function(t){return t("tmh.dynamicLocales.store")}]})).run(["tmhDynamicLocale",angular.noop]),"tmh.dynamicLocale")}({exports:{}});var xh=Yi,wh=Vu.trim,kh=Ru,Ah=i.parseInt,Ch=/^[+-]?0[Xx]/,Dh=8!==Ah(kh+"08")||22!==Ah(kh+"0x16")?function(t,e){var n=wh(xh(t));return Ah(n,e>>>0||(Ch.test(n)?16:10))}:Ah;kn({global:!0,forced:parseInt!=Dh},{parseInt:Dh});var Lh=Yt.exports,$h=Nt,Oh=Yi,Mh=o,Ih=bc,Rh="toString",Ph=RegExp.prototype,Fh=Ph.toString,Nh=Mh((function(){return"/a/b"!=Fh.call({source:"a",flags:"b"})})),Uh=Fh.name!=Rh;(Nh||Uh)&&Lh(RegExp.prototype,Rh,(function(){var t=$h(this),e=Oh(t.source),n=t.flags;return"/"+e+"/"+Oh(void 0===n&&t instanceof RegExp&&!("flags"in Ph)?Ih.call(t):n)}),{unsafe:!0});var Bh=Nt,jh=Fe,Vh=Yi,Hh=S,Gh=Zc,Wh=ad;Kc("match",(function(t,e,n){return[function(e){var n=Hh(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](Vh(n))},function(t){var r=Bh(this),i=Vh(t),a=n(e,r,i);if(a.done)return a.value;if(!r.global)return Wh(r,i);var o=r.unicode;r.lastIndex=0;for(var s,l=[],u=0;null!==(s=Wh(r,i));){var c=Vh(s[0]);l[u]=c,""===c&&(r.lastIndex=Gh(i,jh(r.lastIndex),o)),u++}return 0===u?null:l}]}));var zh=Nt,Yh=Ma,qh=ft("species"),Kh=function(t,e){var n,r=zh(t).constructor;return void 0===r||null==(n=zh(r)[qh])?e:Yh(n)},Xh=Kc,Zh=Du,Jh=Nt,Qh=S,tf=Kh,ef=Zc,nf=Fe,rf=Yi,af=ad,of=jc,sf=o,lf=Sc.UNSUPPORTED_Y,uf=[].push,cf=Math.min,df=4294967295;Xh("split",(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=rf(Qh(this)),i=void 0===n?df:n>>>0;if(0===i)return[];if(void 0===t)return[r];if(!Zh(t))return e.call(r,t,i);for(var a,o,s,l=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),c=0,d=new RegExp(t.source,u+"g");(a=of.call(d,r))&&!((o=d.lastIndex)>c&&(l.push(r.slice(c,a.index)),a.length>1&&a.index<r.length&&uf.apply(l,a.slice(1)),s=a[0].length,c=o,l.length>=i));)d.lastIndex===a.index&&d.lastIndex++;return c===r.length?!s&&d.test("")||l.push(""):l.push(r.slice(c)),l.length>i?l.slice(0,i):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=Qh(this),a=null==e?void 0:e[t];return void 0!==a?a.call(e,i,n):r.call(rf(i),e,n)},function(t,i){var a=Jh(this),o=rf(t),s=n(r,a,o,i,r!==e);if(s.done)return s.value;var l=tf(a,RegExp),u=a.unicode,c=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(lf?"g":"y"),d=new l(lf?"^(?:"+a.source+")":a,c),h=void 0===i?df:i>>>0;if(0===h)return[];if(0===o.length)return null===af(d,o)?[o]:[];for(var f=0,p=0,g=[];p<o.length;){d.lastIndex=lf?0:p;var v,m=af(d,lf?o.slice(p):o);if(null===m||(v=cf(nf(d.lastIndex+(lf?p:0)),o.length))===f)p=ef(o,p,u);else{if(g.push(o.slice(f,p)),g.length===h)return g;for(var y=1;y<=m.length-1;y++)if(g.push(m[y]),g.length===h)return g;p=f=v}}return g.push(o.slice(f)),g}]}),!!sf((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),lf);
/*
	 * Color Picker Angular directive
	 * https://github.com/Alberplz/angular-colorpicker-directive
	 *
	 * Alberto Pujante
	 * 
	 * @licence: http://opensource.org/licenses/MIT
	 */
var hf=angular.module("colorpicker",[]).factory("ColorHelper",(function(){return{hsla2hsva:function(t){var e=Math.min(t.h,1),n=Math.min(t.s,1),r=Math.min(t.l,1),i=Math.min(t.a,1);if(0===r)return{h:e,s:0,v:0,a:i};var a=r+n*(1-Math.abs(2*r-1))/2;return{h:e,s:2*(a-r)/a,v:a,a:i}},hsva2hsla:function(t){var e=t.h,n=t.s,r=t.v,i=t.a;if(0===r)return{h:e,s:0,l:0,a:i};if(0===n&&1===r)return{h:e,s:1,l:1,a:i};var a=r*(2-n)/2;return{h:e,s:r*n/(1-Math.abs(2*a-1)),l:a,a:i}},rgbaToHsva:function(t){var e,n,r=Math.min(t.r,1),i=Math.min(t.g,1),a=Math.min(t.b,1),o=Math.min(t.a,1),s=Math.max(r,i,a),l=Math.min(r,i,a),u=s,c=s-l;if(n=0===s?0:c/s,s===l)e=0;else{switch(s){case r:e=(i-a)/c+(i<a?6:0);break;case i:e=(a-r)/c+2;break;case a:e=(r-i)/c+4}e/=6}return{h:e,s:n,v:u,a:o}},hsvaToRgba:function(t){var e,n,r,i=t.h,a=t.s,o=t.v,s=t.a,l=Math.floor(6*i),u=6*i-l,c=o*(1-a),d=o*(1-u*a),h=o*(1-(1-u)*a);switch(l%6){case 0:e=o,n=h,r=c;break;case 1:e=d,n=o,r=c;break;case 2:e=c,n=o,r=h;break;case 3:e=c,n=d,r=o;break;case 4:e=h,n=c,r=o;break;case 5:e=o,n=c,r=d}return{r:e,g:n,b:r,a:s}},stringToHsva:function(t){var e=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(t){return["rgb",parseInt(t[2]),parseInt(t[3]),parseInt(t[4]),isNaN(parseFloat(t[5]))?1:parseFloat(t[5])]}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(t){return["hsl",parseInt(t[2]),parseInt(t[3]),parseInt(t[4]),isNaN(parseFloat(t[5]))?1:parseFloat(t[5])]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(t){return["hex",parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),1]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(t){return["hex",parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),1]}}];t="string"==typeof t?t.toLowerCase():t;var n=null;for(var r in e)if(e.hasOwnProperty(r)){var i=e[r],a=i.re.exec(t),o=a&&i.parse(a);if(o)return n="hex"===o[0]||"rgb"===o[0]?this.rgbaToHsva({r:o[1]/255,g:o[2]/255,b:o[3]/255,a:o[4]}):this.hsla2hsva({h:o[1]/360,s:o[2]/100,l:o[3]/100,a:o[4]})}return n}}}));hf.directive("colorPicker",["$document","$compile","ColorHelper",function(t,e,n){return{restrict:"A",scope:{colorPickerModel:"=",colorPickerOutputFormat:"=",colorPickerItem:"="},controller:["$scope",function(t){function e(t){return{r:Math.round(255*t.r),g:Math.round(255*t.g),b:Math.round(255*t.b),a:t.a}}t.show=!1,t.sAndLMax={},t.hueMax={},t.alphaMax={},t.type=0,t.hsva={h:.5,s:1,v:1,a:1},t.hueSlider={left:0},t.sAndLSlider={left:0,top:0},t.alphaSlider={left:0},t.rbgaSteps={r:1,g:1,b:1,a:.1},t.hslaSteps={h:1,s:1,l:1,a:.1},t.cancelButtonClass="",t.showCancelButton=!1,t.extraLargeClass="","rgba"===t.colorPickerOutputFormat?t.type=1:"hsla"===t.colorPickerOutputFormat&&(t.type=2),t.setSaturation=function(e,r){var i=n.hsva2hsla(t.hsva);i.s=e/r,t.hsva=n.hsla2hsva(i)},t.setLightness=function(e,r){var i=n.hsva2hsla(t.hsva);i.l=e/r,t.hsva=n.hsla2hsva(i)},t.setHue=function(e,n){t.hsva.h=e/n},t.setAlpha=function(e,n){t.hsva.a=e/n},t.setR=function(e,r){var i=n.hsvaToRgba(t.hsva);i.r=e/r,t.hsva=n.rgbaToHsva(i)},t.setG=function(e,r){var i=n.hsvaToRgba(t.hsva);i.g=e/r,t.hsva=n.rgbaToHsva(i)},t.setB=function(e,r){var i=n.hsvaToRgba(t.hsva);i.b=e/r,t.hsva=n.rgbaToHsva(i)},t.setSaturationAndBrightness=function(e,n,r,i){t.hsva.s=e/r,t.hsva.v=n/i},t.update=function(){var r=n.hsva2hsla(t.hsva);t.hslaText={h:Math.round(360*r.h),s:Math.round(100*r.s),l:Math.round(100*r.l),a:Math.round(100*r.a)/100};var i=e(n.hsvaToRgba(t.hsva)),a=e(n.hsvaToRgba({h:t.hsva.h,s:1,v:1,a:1}));if(t.rgbaText={r:i.r,g:i.g,b:i.b,a:Math.round(100*i.a)/100},t.hexText="#"+(1<<24|parseInt(i.r,10)<<16|parseInt(i.g,10)<<8|parseInt(i.b,10)).toString(16).substr(1),t.hexText[1]===t.hexText[2]&&t.hexText[3]===t.hexText[4]&&t.hexText[5]===t.hexText[6]&&(t.hexText="#"+t.hexText[1]+t.hexText[3]+t.hexText[5]),t.alphaSliderColor="rgb("+i.r+","+i.g+","+i.b+")",t.hueSliderColor="rgb("+a.r+","+a.g+","+a.b+")",0===t.type&&t.hsva.a<1&&t.type++,t.hsva.a<1)switch(t.colorPickerOutputFormat){case"hsla":t.outputColor="hsla("+t.hslaText.h+","+t.hslaText.s+"%,"+t.hslaText.l+"%,"+t.hslaText.a+")";break;default:t.outputColor="rgba("+i.r+","+i.g+","+i.b+","+Math.round(100*i.a)/100+")"}else switch(t.colorPickerOutputFormat){case"hsla":t.outputColor="hsl("+t.hslaText.h+","+t.hslaText.s+"%,"+t.hslaText.l+"%)";break;case"rgba":t.outputColor=t.alphaSliderColor;break;default:t.outputColor=t.hexText}t.sAndLSlider={left:t.hsva.s*t.sAndLMax.x-8+"px",top:(1-t.hsva.v)*t.sAndLMax.y-8+"px"},t.hueSlider.left=t.hsva.h*t.hueMax.x-8+"px",t.alphaSlider.left=t.hsva.a*t.alphaMax.x-8+"px",t.alphaInvalidClass=""},t.setColorFromHex=function(e){var r=n.stringToHsva(e);return null!==r&&(t.hsva=r),r},t.typePolicy=function(){return t.type=(t.type+1)%3,0===t.type&&t.hsva.a<1&&t.type++,t.type}}],link:function(r,i,a){var o,s="";if(void 0===r.colorPickerModel&&(r.colorPickerModel="#008fff",i.val("")),void 0===a.colorPickerShowValue&&(a.colorPickerShowValue="true"),void 0===a.colorPickerPosition&&(a.colorPickerPosition="right"),void 0===a.colorPickerShowInputSpinner&&(a.colorPickerShowInputSpinner="false"),void 0===a.colorPickerShowCancelButton&&(a.colorPickerShowCancelButton="false"),"true"===a.colorPickerShowCancelButton&&(r.showCancelButton=!0,r.extraLargeClass="color-picker-extra-large"),void 0!==a.colorPickerCancelButtonClass&&(r.cancelButtonClass=a.colorPickerCancelButtonClass),void 0!==a.colorPickerSpinnerRgbaSteps&&null!==a.colorPickerSpinnerRgbaSteps.match(/^\d+;\d+;\d+;[0-9]+([\.][0-9]{1,2})?$/)){var l=a.colorPickerSpinnerRgbaSteps.split(";");r.rbgaSteps={r:l[0],g:l[1],b:l[2],a:l[3]}}if(void 0!==a.colorPickerSpinnerHslaSteps&&null!==a.colorPickerSpinnerHslaSteps.match(/^\d+;\d+;\d+;[0-9]+([\.][0-9]{1,2})?$/)){l=a.colorPickerSpinnerHslaSteps.split(";");r.hslaSteps={h:l[0],s:l[1],l:l[2],a:l[3]}}function u(t){var e=n.stringToHsva(t);null!==e&&(r.hsva=e,r.update())}function c(){setTimeout((function(){d()}),5)}function d(){r.$apply((function(){a.colorPickerShowValue="true",u(i.val()),r.colorPickerModel=i.val()}))}function h(e){s=r.colorPickerModel,r.$apply((function(){r.show=!0})),r.$apply((function(){r.sAndLMax={x:o[0].getElementsByClassName("saturation-lightness")[0].offsetWidth,y:o[0].getElementsByClassName("saturation-lightness")[0].offsetHeight},r.hueMax={x:o[0].getElementsByClassName("hue")[0].offsetWidth},r.update()})),p(),t.on("mousedown",g),angular.element(window).on("resize",f)}function f(){p()}function p(){var t;"true"===a.colorPickerFixedPosition?(t=v(i[0],!1),o[0].style.position="fixed"):t=v(i[0],!0),"left"===a.colorPickerPosition?(o[0].style.top=t.top+"px",o[0].style.left=t.left-252+"px"):"top"===a.colorPickerPosition?(o[0].style.top=t.top-t.height-284+"px",o[0].style.left=t.left+"px"):"bottom"===a.colorPickerPosition?(o[0].style.top=t.top+t.height+10+"px",o[0].style.left=t.left+"px"):(o[0].style.top=t.top+"px",o[0].style.left=t.left+t.width+"px")}function g(e){e.target===i[0]||o[0]===e.target||function(t,e){var n=e.parentNode;for(;null!==n;){if(n===t)return!0;n=n.parentNode}return!1}(o[0],e.target)||(r.$apply((function(){r.notifyColorChanged(),r.show=!1})),t.off("mousedown",g),angular.element(window).off("resize",f))}function v(t,e){return{top:t.getBoundingClientRect().top+(e?window.pageYOffset:0),left:t.getBoundingClientRect().left+(e?window.pageXOffset:0),width:t.offsetWidth,height:t.offsetHeight}}u(r.colorPickerModel),"true"===a.colorPickerShowValue&&i.val(r.outputColor),o=angular.element('<div ng-show="show" class="color-picker {{extraLargeClass}}">   <div class="arrow arrow-'+a.colorPickerPosition+'"></div>   <div slider rg-x=1 rg-y=1 action="setSaturationAndBrightness(s, v, rgX, rgY)" class="saturation-lightness" ng-style="{\'background-color\':hueSliderColor}">       <div class="cursor-sv" ng-style="{\'top\':sAndLSlider.top, \'left\':sAndLSlider.left}"></div>   </div>   <div slider rg-x=1 action="setHue(v, rg)" class="hue" style="top: 160px">       <div class="cursor" ng-style="{\'left\':hueSlider.left}"></div>   </div>   <div class="selected-color-background"></div>   <div class="selected-color" ng-style="{\'background-color\':outputColor}"></div>   <div ng-show="type==1" class="rgba-text" style="left: 40px; top: 210px">       <input text type="number" pattern="[0-9]*" min="0" max="255" step="'+r.rbgaSteps.r+'" rg=255 action="setR(v, rg)" ng-model="rgbaText.r" spinner="'+a.colorPickerShowInputSpinner+'" />       <input text type="number" pattern="[0-9]*" min="0" max="255" step="'+r.rbgaSteps.g+'" rg=255 action="setG(v, rg)" ng-model="rgbaText.g" spinner="'+a.colorPickerShowInputSpinner+'" />       <input text type="number" pattern="[0-9]*" min="0" max="255" step="'+r.rbgaSteps.b+'" rg=255 action="setB(v, rg)" ng-model="rgbaText.b" spinner="'+a.colorPickerShowInputSpinner+'" />       <br /><div>R</div><div>G</div><div>B</div>\x3c!--div>A</div--\x3e   </div>   <button type="button" class="{{cancelButtonClass}}" ng-show="showCancelButton" ng-click="cancelColor()">Cancel</button></div>'),document.getElementsByTagName("body")[0].appendChild(o[0]),e(o)(r),i.on("paste",c),i.on("keyup",d),r.$on("color-changed",(function(t){r.$apply((function(){r.update(),"true"===a.colorPickerShowValue&&i.val(r.outputColor)}))})),r.cancelColor=function(){r.colorPickerModel=s,r.show=!1,u(r.colorPickerModel),t.off("mousedown",g),angular.element(window).off("resize",f)},i.on("click",h),i.on("$destroy",(function(){i.off("click",h),i.off("keyup",d),i.off("paste",c)})),r.notifyColorChanged=function(){r.$emit("colorpicker-colorupdated",{item:r.colorPickerItem,color:r.outputColor})}}}}]),hf.directive("text",[function(){return{restrict:"A",scope:{action:"&"},link:function(t,e,n){function r(t){"true"===n.spinner&&e.removeClass("color-picker-input-spinner")}function i(t){e.addClass("color-picker-input-spinner")}function a(t){setTimeout((function(){o()}),5)}function o(r){if(void 0===n.rg)t.action({string:e.val()})&&t.$emit("color-changed");else{var i=parseFloat(e.val());isNaN(i)?t.$emit("alpha-invalid"):(i=Math.abs(Math.min(parseFloat(e.val()),n.rg)),t.action({v:i,rg:n.rg}),t.$emit("color-changed"),t.$emit("alpha-valid"))}}e.on("paste",a),e.on("keyup",o),e.on("change",o),e.on("focus",r),e.on("blur",i),e.on("mouseover",r),e.on("mouseout",i),e.addClass("color-picker-input-spinner"),e.on("$destroy",(function(){e.off("paste",a),e.off("keyup",o),e.off("change",o),e.off("focus",r),e.off("blur",i),e.off("mouseover",r),e.off("mouseout",i)}))}}}]),hf.directive("slider",["$document","$window",function(t,e){return{restrict:"A",scope:{action:"&"},link:function(n,r,i){function a(e){s(e),t.on("mousemove touchmove",o)}function o(t){t.preventDefault(),s(t)}function s(t){var a=r[0].offsetHeight,o=r[0].offsetWidth,s=Math.max(0,Math.min(function(t,n){return(void 0!==t.pageX?t.pageX:t.touches[0].pageX)-n.getBoundingClientRect().left-e.pageXOffset}(t,r[0]),o)),l=Math.max(0,Math.min(function(t,n){return(void 0!==t.pageY?t.pageY:t.touches[0].pageY)-n.getBoundingClientRect().top-e.pageYOffset}(t,r[0]),a));void 0!==i.rgX&&void 0!==i.rgY?n.action({s:s/o,v:1-l/a,rgX:i.rgX,rgY:i.rgY}):n.action({v:s/o,rg:i.rgX}),n.$emit("color-changed")}r.on("mousedown touchstart",a),t.on("mouseup touchend",(function(){t.off("mousemove touchmove",o)})),r.on("$destroy",(function(){r.off("mousedown touchend",a)}))}}}]),window.initApp=function(){Td.element((function(){Td.bootstrap(document,[ph.name])})),ph.config(["$sceProvider","$locationProvider","ApiProvider","ChartJsProvider","tmhDynamicLocaleProvider",function(t,e,n,r,i){if(t.enabled(!1),e.html5Mode({enabled:!0,requireBase:!1}),window.CONFIG){n.setInitOptions({wsUrl:window.WS_URL_OVERRIDE||window.CONFIG.wsUrl,authToken:window.AUTH_TOKEN_OVERRIDE||window.CONFIG.authToken}),i.localeLocationPattern("./locales/{{locale}}.js");var a=24===window.CONFIG.timeFormat;r.setOptions("line",{maintainAspectRatio:!1,layout:{padding:{bottom:10,left:10,right:10}},scales:{xAxes:[{type:"time",time:{displayFormats:{datetime:a?"MMM D, YYYY, H:mm:ss":"MMM D, YYYY, h:mm:ss a",hour:a?"H:mm":"h:mm a",millisecond:a?"H:mm:ss.SSS":"h:mm:ss.SSS a",minute:a?"H:mm":"h:mm a",second:a?"H:mm:ss":"h:mm:ss a"}}}],yAxes:[{ticks:{maxTicksLimit:7}}]},elements:{point:{radius:0,hitRadius:5},line:{borderWidth:1,stepped:!0}},legend:{align:"start",display:!0},tooltips:{intersect:!1},hover:{intersect:!1}}),window.Chart.Legend.prototype.afterFit=function(){this.height+=20}}}])};var ff=Ma,pf=x,gf=[].slice,vf={},mf=function(t,e,n){if(!(e in vf)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";vf[e]=Function("C,a","return new C("+r.join(",")+")")}return vf[e](t,n)};kn({target:"Function",proto:!0},{bind:Function.bind||function(t){var e=ff(this),n=gf.call(arguments,1),r=function(){var i=n.concat(gf.call(arguments));return this instanceof r?mf(e,i.length,i):e.apply(t,i)};return pf(e.prototype)&&(r.prototype=e.prototype),r}});var yf=Fe,bf=Yi,Sf=Zu,Ef=S,Tf=Math.ceil,_f=function(t){return function(e,n,r){var i,a,o=bf(Ef(e)),s=o.length,l=void 0===r?" ":bf(r),u=yf(n);return u<=s||""==l?o:(i=u-s,(a=Sf.call(l,Tf(i/l.length))).length>i&&(a=a.slice(0,i)),t?o+a:a+o)}},xf=o,wf={start:_f(!1),end:_f(!0)}.start,kf=Math.abs,Af=Date.prototype,Cf=Af.getTime,Df=Af.toISOString,Lf=xf((function(){return"0385-07-25T07:06:39.999Z"!=Df.call(new Date(-50000000000001))}))||!xf((function(){Df.call(new Date(NaN))}))?function(){if(!isFinite(Cf.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":e>9999?"+":"";return r+wf(kf(e),r?6:4,0)+"-"+wf(t.getUTCMonth()+1,2,0)+"-"+wf(t.getUTCDate(),2,0)+"T"+wf(t.getUTCHours(),2,0)+":"+wf(t.getUTCMinutes(),2,0)+":"+wf(t.getUTCSeconds(),2,0)+"."+wf(n,3,0)+"Z"}:Df;kn({target:"Date",proto:!0,forced:Date.prototype.toISOString!==Lf},{toISOString:Lf});var $f=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e},Of=Nt,Mf=S,If=$f,Rf=Yi,Pf=ad;Kc("search",(function(t,e,n){return[function(e){var n=Mf(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](Rf(n))},function(t){var r=Of(this),i=Rf(t),a=n(e,r,i);if(a.done)return a.value;var o=r.lastIndex;If(o,0)||(r.lastIndex=0);var s=Pf(r,i);return If(r.lastIndex,o)||(r.lastIndex=o),null===s?-1:s.index}]})),ph.provider("Api",(function(){var t,e;this.setInitOptions=function(n){t=n.wsUrl,e=n.authToken},this.$get=["$http","$location","$q",function(n,r,i){var a=null;function o(t,e){var n=this;this._id=1,this._url=t,this._listeners={error:[],message:[],ready:[],unready:[]},this._callbacks={},e&&(this._configToken=e),this._init(),window.onbeforeunload=function(t){n.socket&&n.socket.readyState<WebSocket.CLOSING&&n.socket.close()}}function s(t){localStorage.setItem(Gd,JSON.stringify(t))}function l(){var t=localStorage.getItem(Gd);return t?JSON.parse(t):null}function u(){return encodeURIComponent(window.location.origin)}function c(){localStorage.removeItem(Gd),window.location.href=Dd("/auth/authorize?client_id="+u()+"&redirect_uri="+function(){var t=window.location.origin+window.location.pathname;return window.location.search?t+=window.location.search+"&oauth=1":t+="?oauth=1",encodeURIComponent(t)}())}return o.prototype._init=function(){var t=this;t._url?this._getToken().then((function(e){e?(t._token=e.access_token,t._connect.call(t),e.expires_in&&setTimeout(t._refreshToken.bind(t),900*e.expires_in)):dh.addObject({type:dh.ERROR,title:"ACCESS TOKEN",message:"Error while receiving access token"})})):console.info("Skipping API service initialization since no API URL was provided.")},o.prototype.on=function(t,e){var n=this;return-1!==this._listeners[t].indexOf(e)?function(){}:(this._listeners[t].push(e),function(){n._listeners[t]=n._listeners[t].filter((function(t){return t!==e}))})},o.prototype.onError=function(t){return this.on("error",t)},o.prototype.onMessage=function(t){return this.on("message",t)},o.prototype.onReady=function(t){if(3===this.status)try{t({status:3})}catch(t){}return this.on("ready",t)},o.prototype.onUnready=function(t){return this.on("unready",t)},o.prototype.send=function(t,e,n){n=!1!==n,!t.id&&n&&(t.id=this._id++);var r=JSON.stringify(t);return e&&t.id&&(this._callbacks[t.id]=e),this.socket.send(r)},o.prototype.callService=function(t,e,n,r){var i={type:"call_service",domain:t,service:e,service_data:n};this.send(i,(function(t){r&&r(t)}))},o.prototype.rest=function(t){var e=Td.copy(t);return e.url=Dd(e.url,window.REST_URL_OVERRIDE),e.headers=e.headers||{},e.headers.Authorization="Bearer "+this._token,n(e).then((function(t){return t.data})).catch((function(t){switch(t.status){case 401:return void c();default:return window.Noty.add(window.Noty.ERROR,"Error in REST api","Code "+t.status+" retrieved for "+e.url+"."),null}}))},o.prototype.getHistory=function(t,e,n){var r={type:"GET",url:"/api/history/period"};if(t&&(r.url+="/"+t),r.url+=n?"?end_time="+n:"?end_time="+new Date(Date.now()).toISOString(),e){var i=e instanceof Array?e.join(","):e;r.url+="&filter_entity_id="+i}return this.rest(r)},o.prototype.subscribeEvents=function(t,e){var n=this;t&&"object"===lu(t)?t.forEach((function(t){n.subscribeEvent(t,e)})):this.subscribeEvent(t,e)},o.prototype.subscribeEvent=function(t,e){var n={type:"subscribe_events"};t&&(n.event_type=t),this.send(n,e)},o.prototype.getStates=function(t){return this.send({type:"get_states"},t)},o.prototype.getPanels=function(t){return this.send({type:"get_panels"},t)},o.prototype.getConfig=function(t){return this.send({type:"get_config"},t)},o.prototype.getServices=function(t){return this.send({type:"get_services"},t)},o.prototype.getUser=function(t){return this.send({type:"auth/current_user"},t)},o.prototype.sendPing=function(t){return this.send({type:"ping"},t)},o.prototype._connect=function(){var t=this;this.socket&&this.socket.readyState<WebSocket.CLOSING||(this.status=1,this.socket=new WebSocket(this._url),this.socket.addEventListener("open",(function(e){t._setStatus(2)})),this.socket.addEventListener("close",(function(e){t._setStatus(5),t._reconnect.call(t)})),this.socket.addEventListener("error",(function(e){t._setStatus(4),t._sendError.call(t,"System error",e),t._reconnect.call(t,1e3)})),this.socket.addEventListener("message",(function(e){var n=JSON.parse(e.data);t._handleMessage.call(t,n)})))},o.prototype.forceReconnect=function(){this.socket&&this.socket.readyState<WebSocket.CLOSING?this.socket.close():this._reconnect()},o.prototype._reconnect=function(t){t=t||0,this._fire("unready",{status:this.status}),a&&clearTimeout(a),a=setTimeout(this._connect.bind(this),t)},o.prototype._fire=function(t,e){this._listeners[t].forEach((function(t){setTimeout((function(){t(e)}),0)}))},o.prototype._handleMessage=function(t){var e=this;return"auth_required"===t.type?this._authenticate():"auth_invalid"===t.type?this._authInvalid(t.message):"auth_ok"===t.type?this._ready():t.error?this._sendError(t.error.message,t):("result"===t.type&&t.id&&this._callbacks[t.id]&&setTimeout((function(){e._callbacks[t.id](t)}),0),"pong"===t.type&&t.id&&this._callbacks[t.id]&&setTimeout((function(){e._callbacks[t.id](t)}),0),void this._fire("message",t))},o.prototype._authInvalid=function(t){this._setStatus(4),this._sendError(t),this._refreshToken()},o.prototype._sendError=function(t,e){var n={message:t};e&&(n.data=e),this._fire("error",n)},o.prototype._authenticate=function(){var t={type:"auth",access_token:this._token};this.send(t,null,!1)},o.prototype._ready=function(){this._setStatus(3),this._fire("ready",{status:3})},o.prototype._setStatus=function(t){this.status=t},o.prototype._tokenRequest=function(t){var e={method:"POST",url:Dd("/auth/token"),headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t+"&client_id="+u()};return n(e).then((function(t){return t.data})).catch((function(t){if(!(t.status>=400&&t.status<=499))return null;c()}))},o.prototype._refreshToken=function(){var t=this;this._getFreshToken().then((function(e){e&&(t._token=e.access_token,e.expires_in&&setTimeout(t._refreshToken.bind(t),900*e.expires_in))}))},o.prototype._getFreshToken=function(){var t=l(),e="grant_type=refresh_token&refresh_token="+t.refresh_token;return this._tokenRequest(e).then((function(e){return e?(e.refresh_token=t.refresh_token,s(e),e):null}))},o.prototype._getTokenByCode=function(t){var e="grant_type=authorization_code&code="+t;return this._tokenRequest(e).then((function(t){return t?(s(t),t):null}))},o.prototype._getToken=function(){if(this._configToken)return i.resolve({access_token:this._configToken});if(l())return this._getFreshToken();var t=r.search();if(t.oauth&&t.code){var e=t.code;return r.search("oauth",null).search("code",null),this._getTokenByCode(e)}return c(),i.resolve(null)},new o(t,e)}]}));var Ff=i.Promise,Nf=A,Uf=Pt,Bf=s,jf=ft("species"),Vf=Nt,Hf=Ha,Gf=Fe,Wf=Ra,zf=Ya,Yf=Fa,qf=function(t,e){this.stopped=t,this.result=e},Kf=ft("iterator"),Xf=!1;try{var Zf=0,Jf={next:function(){return{done:!!Zf++}},return:function(){Xf=!0}};Jf[Kf]=function(){return this},Array.from(Jf,(function(){throw 2}))}catch(t){}var Qf,tp,ep,np,rp=/(?:iphone|ipod|ipad).*applewebkit/i.test(C),ip="process"==v(i.process),ap=i,op=o,sp=Ra,lp=hr,up=wt,cp=rp,dp=ip,hp=ap.setImmediate,fp=ap.clearImmediate,pp=ap.process,gp=ap.MessageChannel,vp=ap.Dispatch,mp=0,yp={},bp="onreadystatechange";try{Qf=ap.location}catch(t){}var Sp=function(t){if(yp.hasOwnProperty(t)){var e=yp[t];delete yp[t],e()}},Ep=function(t){return function(){Sp(t)}},Tp=function(t){Sp(t.data)},_p=function(t){ap.postMessage(String(t),Qf.protocol+"//"+Qf.host)};hp&&fp||(hp=function(t){for(var e=[],n=arguments.length,r=1;n>r;)e.push(arguments[r++]);return yp[++mp]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},tp(mp),mp},fp=function(t){delete yp[t]},dp?tp=function(t){pp.nextTick(Ep(t))}:vp&&vp.now?tp=function(t){vp.now(Ep(t))}:gp&&!cp?(np=(ep=new gp).port2,ep.port1.onmessage=Tp,tp=sp(np.postMessage,np,1)):ap.addEventListener&&"function"==typeof postMessage&&!ap.importScripts&&Qf&&"file:"!==Qf.protocol&&!op(_p)?(tp=_p,ap.addEventListener("message",Tp,!1)):tp=bp in up("script")?function(t){lp.appendChild(up("script")).onreadystatechange=function(){lp.removeChild(this),Sp(t)}}:function(t){setTimeout(Ep(t),0)});var xp,wp,kp,Ap,Cp,Dp,Lp,$p,Op={set:hp,clear:fp},Mp=/web0s(?!.*chrome)/i.test(C),Ip=i,Rp=a.f,Pp=Op.set,Fp=rp,Np=Mp,Up=ip,Bp=Ip.MutationObserver||Ip.WebKitMutationObserver,jp=Ip.document,Vp=Ip.process,Hp=Ip.Promise,Gp=Rp(Ip,"queueMicrotask"),Wp=Gp&&Gp.value;Wp||(xp=function(){var t,e;for(Up&&(t=Vp.domain)&&t.exit();wp;){e=wp.fn,wp=wp.next;try{e()}catch(t){throw wp?Ap():kp=void 0,t}}kp=void 0,t&&t.enter()},Fp||Up||Np||!Bp||!jp?Hp&&Hp.resolve?((Lp=Hp.resolve(void 0)).constructor=Hp,$p=Lp.then,Ap=function(){$p.call(Lp,xp)}):Ap=Up?function(){Vp.nextTick(xp)}:function(){Pp.call(Ip,xp)}:(Cp=!0,Dp=jp.createTextNode(""),new Bp(xp).observe(Dp,{characterData:!0}),Ap=function(){Dp.data=Cp=!Cp}));var zp=Wp||function(t){var e={fn:t,next:void 0};kp&&(kp.next=e),wp||(wp=e,Ap()),kp=e},Yp={},qp=Ma,Kp=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=qp(e),this.reject=qp(n)};Yp.f=function(t){return new Kp(t)};var Xp,Zp,Jp,Qp,tg=Nt,eg=x,ng=Yp,rg=i,ig="object"==typeof window,ag=kn,og=i,sg=A,lg=Ff,ug=Yt.exports,cg=ho,dg=li,hg=Zr,fg=function(t){var e=Nf(t),n=Uf.f;Bf&&e&&!e[jf]&&n(e,jf,{configurable:!0,get:function(){return this}})},pg=x,gg=Ma,vg=Ta,mg=Qt,yg=function(t,e,n){var r,i,a,o,s,l,u,c=n&&n.that,d=!(!n||!n.AS_ENTRIES),h=!(!n||!n.IS_ITERATOR),f=!(!n||!n.INTERRUPTED),p=Wf(e,c,1+d+f),g=function(t){return r&&Yf(r),new qf(!0,t)},v=function(t){return d?(Vf(t),f?p(t[0],t[1],g):p(t[0],t[1])):f?p(t,g):p(t)};if(h)r=t;else{if("function"!=typeof(i=zf(t)))throw TypeError("Target is not iterable");if(Hf(i)){for(a=0,o=Gf(t.length);o>a;a++)if((s=v(t[a]))&&s instanceof qf)return s;return new qf(!1)}r=i.call(t)}for(l=r.next;!(u=l.call(r)).done;){try{s=v(u.value)}catch(t){throw Yf(r),t}if("object"==typeof s&&s&&s instanceof qf)return s}return new qf(!1)},bg=function(t,e){if(!e&&!Xf)return!1;var n=!1;try{var r={};r[Kf]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},Sg=Kh,Eg=Op.set,Tg=zp,_g=function(t,e){if(tg(t),eg(e)&&e.constructor===t)return e;var n=ng.f(t);return(0,n.resolve)(e),n.promise},xg=function(t,e){var n=rg.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))},wg=Yp,kg=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Ag=Te,Cg=yn,Dg=ig,Lg=ip,$g=R,Og=ft("species"),Mg="Promise",Ig=Ag.get,Rg=Ag.set,Pg=Ag.getterFor(Mg),Fg=lg&&lg.prototype,Ng=lg,Ug=Fg,Bg=og.TypeError,jg=og.document,Vg=og.process,Hg=wg.f,Gg=Hg,Wg=!!(jg&&jg.createEvent&&og.dispatchEvent),zg="function"==typeof PromiseRejectionEvent,Yg="unhandledrejection",qg=!1,Kg=Cg(Mg,(function(){var t=mg(Ng),e=t!==String(Ng);if(!e&&66===$g)return!0;if($g>=51&&/native code/.test(t))return!1;var n=new Ng((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};return(n.constructor={})[Og]=r,!(qg=n.then((function(){}))instanceof r)||!e&&Dg&&!zg})),Xg=Kg||!bg((function(t){Ng.all(t).catch((function(){}))})),Zg=function(t){var e;return!(!pg(t)||"function"!=typeof(e=t.then))&&e},Jg=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;Tg((function(){for(var r=t.value,i=1==t.state,a=0;n.length>a;){var o,s,l,u=n[a++],c=i?u.ok:u.fail,d=u.resolve,h=u.reject,f=u.domain;try{c?(i||(2===t.rejection&&nv(t),t.rejection=1),!0===c?o=r:(f&&f.enter(),o=c(r),f&&(f.exit(),l=!0)),o===u.promise?h(Bg("Promise-chain cycle")):(s=Zg(o))?s.call(o,d,h):d(o)):h(r)}catch(t){f&&!l&&f.exit(),h(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&tv(t)}))}},Qg=function(t,e,n){var r,i;Wg?((r=jg.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),og.dispatchEvent(r)):r={promise:e,reason:n},!zg&&(i=og["on"+t])?i(r):t===Yg&&xg("Unhandled promise rejection",n)},tv=function(t){Eg.call(og,(function(){var e,n=t.facade,r=t.value;if(ev(t)&&(e=kg((function(){Lg?Vg.emit("unhandledRejection",r,n):Qg(Yg,n,r)})),t.rejection=Lg||ev(t)?2:1,e.error))throw e.value}))},ev=function(t){return 1!==t.rejection&&!t.parent},nv=function(t){Eg.call(og,(function(){var e=t.facade;Lg?Vg.emit("rejectionHandled",e):Qg("rejectionhandled",e,t.value)}))},rv=function(t,e,n){return function(r){t(e,r,n)}},iv=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,Jg(t,!0))},av=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw Bg("Promise can't be resolved itself");var r=Zg(e);r?Tg((function(){var n={done:!1};try{r.call(e,rv(av,n,t),rv(iv,n,t))}catch(e){iv(n,e,t)}})):(t.value=e,t.state=1,Jg(t,!1))}catch(e){iv({done:!1},e,t)}}};if(Kg&&(Ug=(Ng=function(t){vg(this,Ng,Mg),gg(t),Xp.call(this);var e=Ig(this);try{t(rv(av,e),rv(iv,e))}catch(t){iv(e,t)}}).prototype,(Xp=function(t){Rg(this,{type:Mg,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=cg(Ug,{then:function(t,e){var n=Pg(this),r=Hg(Sg(this,Ng));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Lg?Vg.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Jg(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Zp=function(){var t=new Xp,e=Ig(t);this.promise=t,this.resolve=rv(av,e),this.reject=rv(iv,e)},wg.f=Hg=function(t){return t===Ng||t===Jp?new Zp(t):Gg(t)},"function"==typeof lg&&Fg!==Object.prototype)){Qp=Fg.then,qg||(ug(Fg,"then",(function(t,e){var n=this;return new Ng((function(t,e){Qp.call(n,t,e)})).then(t,e)}),{unsafe:!0}),ug(Fg,"catch",Ug.catch,{unsafe:!0}));try{delete Fg.constructor}catch(t){}dg&&dg(Fg,Ug)}ag({global:!0,wrap:!0,forced:Kg},{Promise:Ng}),hg(Ng,Mg,!1),fg(Mg),Jp=sg(Mg),ag({target:Mg,stat:!0,forced:Kg},{reject:function(t){var e=Hg(this);return e.reject.call(void 0,t),e.promise}}),ag({target:Mg,stat:!0,forced:Kg},{resolve:function(t){return _g(this,t)}}),ag({target:Mg,stat:!0,forced:Xg},{all:function(t){var e=this,n=Hg(e),r=n.resolve,i=n.reject,a=kg((function(){var n=gg(e.resolve),a=[],o=0,s=1;yg(t,(function(t){var l=o++,u=!1;a.push(void 0),s++,n.call(e,t).then((function(t){u||(u=!0,a[l]=t,--s||r(a))}),i)})),--s||r(a)}));return a.error&&i(a.value),n.promise},race:function(t){var e=this,n=Hg(e),r=n.reject,i=kg((function(){var i=gg(e.resolve);yg(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var ov={exports:{}};!function(t,e){var n;"undefined"!=typeof window&&(n=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":
/*!*********************************************!*\
	  !*** ./node_modules/eventemitter3/index.js ***!
	  \*********************************************/
/*! no static exports found */function(t,e,n){var r=Object.prototype.hasOwnProperty,i="~";function a(){}function o(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,n,r,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new o(n,r||t,a),l=i?i+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],s]:t._events[l].push(s):(t._events[l]=s,t._eventsCount++),t}function l(t,e){0==--t._eventsCount?t._events=new a:delete t._events[e]}function u(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(i=!1)),u.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},u.prototype.listeners=function(t){var e=i?i+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,a=n.length,o=new Array(a);r<a;r++)o[r]=n[r].fn;return o},u.prototype.listenerCount=function(t){var e=i?i+t:t,n=this._events[e];return n?n.fn?1:n.length:0},u.prototype.emit=function(t,e,n,r,a,o){var s=i?i+t:t;if(!this._events[s])return!1;var l,u,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,r),!0;case 5:return c.fn.call(c.context,e,n,r,a),!0;case 6:return c.fn.call(c.context,e,n,r,a,o),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var h,f=c.length;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(t,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,e);break;case 3:c[u].fn.call(c[u].context,e,n);break;case 4:c[u].fn.call(c[u].context,e,n,r);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];c[u].fn.apply(c[u].context,l)}}return!0},u.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},u.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},u.prototype.removeListener=function(t,e,n,r){var a=i?i+t:t;if(!this._events[a])return this;if(!e)return l(this,a),this;var o=this._events[a];if(o.fn)o.fn!==e||r&&!o.once||n&&o.context!==n||l(this,a);else{for(var s=0,u=[],c=o.length;s<c;s++)(o[s].fn!==e||r&&!o[s].once||n&&o[s].context!==n)&&u.push(o[s]);u.length?this._events[a]=1===u.length?u[0]:u:l(this,a)}return this},u.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&l(this,e)):(this._events=new a,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,t.exports=u},"./node_modules/url-toolkit/src/url-toolkit.js":
/*!*****************************************************!*\
	  !*** ./node_modules/url-toolkit/src/url-toolkit.js ***!
	  \*****************************************************/
/*! no static exports found */function(t,e,n){var r,i,a,o,s;r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,i=/^([^\/?#]*)([^]*)$/,a=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(t,e,n){if(n=n||{},t=t.trim(),!(e=e.trim())){if(!n.alwaysNormalize)return t;var r=s.parseURL(t);if(!r)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}var a=s.parseURL(e);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):e;var o=s.parseURL(t);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=i.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var u={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(u.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var c=o.path,d=c.substring(0,c.lastIndexOf("/")+1)+a.path;u.path=s.normalizePath(d)}else u.path=o.path,a.params||(u.params=o.params,a.query||(u.query=o.query));return null===u.path&&(u.path=n.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(u)},parseURL:function(t){var e=r.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(a,"");t.length!==(t=t.replace(o,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=s},"./node_modules/webworkify-webpack/index.js":
/*!**************************************************!*\
	  !*** ./node_modules/webworkify-webpack/index.js ***!
	  \**************************************************/
/*! no static exports found */function(t,e,n){function r(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n.oe=function(t){throw console.error(t),t};var r=n(n.s=ENTRY_MODULE);return r.default||r}var i="[\\.|\\-|\\+|\\w|/|@]+",a="\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function o(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function s(t,e,r){var s={};s[r]=[];var l=e.toString(),u=l.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!u)return s;for(var c,d=u[1],h=new RegExp("(\\\\n|\\W)"+o(d)+a,"g");c=h.exec(l);)"dll-reference"!==c[3]&&s[r].push(c[3]);for(h=new RegExp("\\("+o(d)+'\\("(dll-reference\\s('+i+'))"\\)\\)'+a,"g");c=h.exec(l);)t[c[2]]||(s[r].push(c[1]),t[c[2]]=n(c[1]).m),s[c[2]]=s[c[2]]||[],s[c[2]].push(c[4]);for(var f,p=Object.keys(s),g=0;g<p.length;g++)for(var v=0;v<s[p[g]].length;v++)f=s[p[g]][v],isNaN(1*f)||(s[p[g]][v]=1*s[p[g]][v]);return s}function l(t){return Object.keys(t).reduce((function(e,n){return e||t[n].length>0}),!1)}t.exports=function(t,e){e=e||{};var i={main:n.m},a=e.all?{main:Object.keys(i.main)}:function(t,e){for(var n={main:[e]},r={main:[]},i={main:{}};l(n);)for(var a=Object.keys(n),o=0;o<a.length;o++){var u=a[o],c=n[u].pop();if(i[u]=i[u]||{},!i[u][c]&&t[u][c]){i[u][c]=!0,r[u]=r[u]||[],r[u].push(c);for(var d=s(t,t[u][c],u),h=Object.keys(d),f=0;f<h.length;f++)n[h[f]]=n[h[f]]||[],n[h[f]]=n[h[f]].concat(d[h[f]])}}return r}(i,t),o="";Object.keys(a).filter((function(t){return"main"!==t})).forEach((function(t){for(var e=0;a[t][e];)e++;a[t].push(e),i[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+t+" = ("+r.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+a[t].map((function(e){return JSON.stringify(e)+": "+i[t][e].toString()})).join(",")+"});\n"})),o=o+"new (("+r.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+a.main.map((function(t){return JSON.stringify(t)+": "+i.main[t].toString()})).join(",")+"}))(self);";var u=new window.Blob([o],{type:"text/javascript"});if(e.bare)return u;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(u),d=new window.Worker(c);return d.objectURL=c,d}},"./src/config.ts":
/*!***********************!*\
	  !*** ./src/config.ts ***!
	  \***********************/
/*! exports provided: hlsDefaultConfig, mergeConfig, enableStreamingMode */function(t,e,n){n.r(e),n.d(e,"hlsDefaultConfig",(function(){return T})),n.d(e,"mergeConfig",(function(){return _})),n.d(e,"enableStreamingMode",(function(){return x}));var r=n(/*! ./controller/abr-controller */"./src/controller/abr-controller.ts"),i=n(/*! ./controller/audio-stream-controller */"./src/controller/audio-stream-controller.ts"),a=n(/*! ./controller/audio-track-controller */"./src/controller/audio-track-controller.ts"),o=n(/*! ./controller/subtitle-stream-controller */"./src/controller/subtitle-stream-controller.ts"),s=n(/*! ./controller/subtitle-track-controller */"./src/controller/subtitle-track-controller.ts"),l=n(/*! ./controller/buffer-controller */"./src/controller/buffer-controller.ts"),u=n(/*! ./controller/timeline-controller */"./src/controller/timeline-controller.ts"),c=n(/*! ./controller/cap-level-controller */"./src/controller/cap-level-controller.ts"),d=n(/*! ./controller/fps-controller */"./src/controller/fps-controller.ts"),h=n(/*! ./controller/eme-controller */"./src/controller/eme-controller.ts"),f=n(/*! ./utils/xhr-loader */"./src/utils/xhr-loader.ts"),p=n(/*! ./utils/fetch-loader */"./src/utils/fetch-loader.ts"),g=n(/*! ./utils/cues */"./src/utils/cues.ts"),v=n(/*! ./utils/mediakeys-helper */"./src/utils/mediakeys-helper.ts"),m=n(/*! ./utils/logger */"./src/utils/logger.ts");function y(){return(y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){E(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function E(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T=S(S({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:f.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:r.default,bufferController:l.default,capLevelController:c.default,fpsController:d.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:v.requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0},{cueHandler:g.default,enableCEA708Captions:!0,enableWebVTT:!0,enableIMSC1:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:o.SubtitleStreamController,subtitleTrackController:s.default,timelineController:u.TimelineController,audioStreamController:i.default,audioTrackController:a.default,emeController:h.default});function _(t,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==e.liveMaxLatencyDurationCount&&(void 0===e.liveSyncDurationCount||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==e.liveMaxLatencyDuration&&(void 0===e.liveSyncDuration||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return y({},t,e)}function x(t){var e=t.loader;e!==p.default&&e!==f.default?(m.logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):Object(p.fetchSupported)()&&(t.loader=p.default,t.progressive=!0,t.enableSoftwareAES=!0,m.logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}},"./src/controller/abr-controller.ts":
/*!******************************************!*\
	  !*** ./src/controller/abr-controller.ts ***!
	  \******************************************/
/*! exports provided: default */function(t,e,n){n.r(e);var r=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),i=n(/*! ../utils/ewma-bandwidth-estimator */"./src/utils/ewma-bandwidth-estimator.ts"),a=n(/*! ../events */"./src/events.ts"),o=n(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.ts"),s=n(/*! ../errors */"./src/errors.ts"),l=n(/*! ../types/loader */"./src/types/loader.ts"),u=n(/*! ../utils/logger */"./src/utils/logger.ts");function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var d=function(){function t(t){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=t;var e=t.config;this.bwEstimator=new i.default(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate),this.registerListeners()}var e,n,d,h=t.prototype;return h.registerListeners=function(){var t=this.hls;t.on(a.Events.FRAG_LOADING,this.onFragLoading,this),t.on(a.Events.FRAG_LOADED,this.onFragLoaded,this),t.on(a.Events.FRAG_BUFFERED,this.onFragBuffered,this),t.on(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.on(a.Events.ERROR,this.onError,this)},h.unregisterListeners=function(){var t=this.hls;t.off(a.Events.FRAG_LOADING,this.onFragLoading,this),t.off(a.Events.FRAG_LOADED,this.onFragLoaded,this),t.off(a.Events.FRAG_BUFFERED,this.onFragBuffered,this),t.off(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.off(a.Events.ERROR,this.onError,this)},h.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},h.onFragLoading=function(t,e){var n,r=e.frag;r.type===l.PlaylistLevelType.MAIN&&(this.timer||(this.fragCurrent=r,this.partCurrent=null!=(n=e.part)?n:null,this.timer=self.setInterval(this.onCheck,100)))},h.onLevelLoaded=function(t,e){var n=this.hls.config;e.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD)},h._abandonRulesCheck=function(){var t=this.fragCurrent,e=this.partCurrent,n=this.hls,i=n.autoLevelEnabled,s=n.config,l=n.media;if(t&&l){var c=e?e.stats:t.stats,d=e?e.duration:t.duration;if(c.aborted)return u.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);if(i&&!l.paused&&l.playbackRate&&l.readyState){var h=performance.now()-c.loading.start,f=Math.abs(l.playbackRate);if(!(h<=500*d/f)){var p=n.levels,g=n.minAutoLevel,v=p[t.level],m=c.total||Math.max(c.loaded,Math.round(d*v.maxBitrate/8)),y=Math.max(1,c.bwEstimate?c.bwEstimate/8:1e3*c.loaded/h),b=(m-c.loaded)/y,S=l.currentTime,E=(o.BufferHelper.bufferInfo(l,S,s.maxBufferHole).end-S)/f;if(!(E>=2*d/f||b<=E)){var T,_=Number.POSITIVE_INFINITY;for(T=t.level-1;T>g&&!((_=d*p[T].maxBitrate/(6.4*y))<E);T--);if(!(_>=b)){var x=this.bwEstimator.getEstimate();u.logger.warn("Fragment "+t.sn+(e?" part "+e.index:"")+" of level "+t.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+T+"\n      Current BW estimate: "+(Object(r.isFiniteNumber)(x)?(x/1024).toFixed(3):"Unknown")+" Kb/s\n      Estimated load time for current fragment: "+b.toFixed(3)+" s\n      Estimated load time for the next fragment: "+_.toFixed(3)+" s\n      Time to underbuffer: "+E.toFixed(3)+" s"),n.nextLoadLevel=T,this.bwEstimator.sample(h,c.loaded),this.clearTimer(),t.loader&&(this.fragCurrent=this.partCurrent=null,t.loader.abort()),n.trigger(a.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:t,part:e,stats:c})}}}}}},h.onFragLoaded=function(t,e){var n=e.frag,i=e.part;if(n.type===l.PlaylistLevelType.MAIN&&Object(r.isFiniteNumber)(n.sn)){var o=i?i.stats:n.stats,s=i?i.duration:n.duration;if(this.clearTimer(),this.lastLoadedFragLevel=n.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var u=this.hls.levels[n.level],c=(u.loaded?u.loaded.bytes:0)+o.loaded,d=(u.loaded?u.loaded.duration:0)+s;u.loaded={bytes:c,duration:d},u.realBitrate=Math.round(8*c/d)}if(n.bitrateTest){var h={stats:o,frag:n,part:i,id:n.type};this.onFragBuffered(a.Events.FRAG_BUFFERED,h),n.bitrateTest=!1}}},h.onFragBuffered=function(t,e){var n=e.frag,r=e.part,i=r?r.stats:n.stats;if(!i.aborted&&n.type===l.PlaylistLevelType.MAIN&&"initSegment"!==n.sn){var a=i.parsing.end-i.loading.start;this.bwEstimator.sample(a,i.loaded),i.bwEstimate=this.bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}},h.onError=function(t,e){switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},h.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},h.getNextABRAutoLevel=function(){var t=this.fragCurrent,e=this.partCurrent,n=this.hls,r=n.maxAutoLevel,i=n.config,a=n.minAutoLevel,s=n.media,l=e?e.duration:t?t.duration:0,c=s?s.currentTime:0,d=s&&0!==s.playbackRate?Math.abs(s.playbackRate):1,h=this.bwEstimator?this.bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,f=(o.BufferHelper.bufferInfo(s,c,i.maxBufferHole).end-c)/d,p=this.findBestLevel(h,a,r,f,i.abrBandWidthFactor,i.abrBandWidthUpFactor);if(p>=0)return p;u.logger.trace((f?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var g=l?Math.min(l,i.maxStarvationDelay):i.maxStarvationDelay,v=i.abrBandWidthFactor,m=i.abrBandWidthUpFactor;if(!f){var y=this.bitrateTestDelay;y&&(g=(l?Math.min(l,i.maxLoadingDelay):i.maxLoadingDelay)-y,u.logger.trace("bitrate test took "+Math.round(1e3*y)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*g)+" ms"),v=m=1)}return p=this.findBestLevel(h,a,r,f+g,v,m),Math.max(p,0)},h.findBestLevel=function(t,e,n,r,i,a){for(var o,s=this.fragCurrent,l=this.partCurrent,c=this.lastLoadedFragLevel,d=this.hls.levels,h=d[c],f=!(null==h||null===(o=h.details)||void 0===o||!o.live),p=null==h?void 0:h.codecSet,g=l?l.duration:s?s.duration:0,v=n;v>=e;v--){var m=d[v];if(m&&(!p||m.codecSet===p)){var y=m.details,b=(l?null==y?void 0:y.partTarget:null==y?void 0:y.averagetargetduration)||g,S=void 0;S=v<=c?i*t:a*t;var E=d[v].maxBitrate,T=E*b/S;if(u.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+v+"/"+Math.round(S)+"/"+E+"/"+b+"/"+r+"/"+T),S>E&&(!T||f&&!this.bitrateTestDelay||T<r))return v}}return-1},e=t,(n=[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this.bwEstimator;if(!(-1===t||e&&e.canEstimate()))return t;var n=this.getNextABRAutoLevel();return-1!==t&&(n=Math.min(t,n)),n},set:function(t){this._nextAutoLevel=t}}])&&c(e.prototype,n),d&&c(e,d),t}();e.default=d},"./src/controller/audio-stream-controller.ts":
/*!***************************************************!*\
	  !*** ./src/controller/audio-stream-controller.ts ***!
	  \***************************************************/
/*! exports provided: default */function(t,e,n){n.r(e);var r=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),i=n(/*! ./base-stream-controller */"./src/controller/base-stream-controller.ts"),a=n(/*! ../events */"./src/events.ts"),o=n(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.ts"),s=n(/*! ./fragment-tracker */"./src/controller/fragment-tracker.ts"),l=n(/*! ../types/level */"./src/types/level.ts"),u=n(/*! ../types/loader */"./src/types/loader.ts"),c=n(/*! ../loader/fragment */"./src/loader/fragment.ts"),d=n(/*! ../demux/chunk-cache */"./src/demux/chunk-cache.ts"),h=n(/*! ../demux/transmuxer-interface */"./src/demux/transmuxer-interface.ts"),f=n(/*! ../types/transmuxer */"./src/types/transmuxer.ts"),p=n(/*! ./fragment-finders */"./src/controller/fragment-finders.ts"),g=n(/*! ../utils/discontinuities */"./src/utils/discontinuities.ts"),v=n(/*! ../errors */"./src/errors.ts"),m=n(/*! ../utils/logger */"./src/utils/logger.ts");function y(){return(y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var S=function(t){var e,n;function S(e,n){var r;return(r=t.call(this,e,n,"[audio-stream-controller]")||this).videoBuffer=null,r.videoTrackCC=-1,r.waitingVideoCC=-1,r.audioSwitch=!1,r.trackId=-1,r.waitingData=null,r.mainDetails=null,r.bufferFlushed=!1,r._registerListeners(),r}n=t,(e=S).prototype=Object.create(n.prototype),e.prototype.constructor=e,b(e,n);var E=S.prototype;return E.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},E._registerListeners=function(){var t=this.hls;t.on(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.on(a.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.on(a.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(a.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(a.Events.ERROR,this.onError,this),t.on(a.Events.BUFFER_RESET,this.onBufferReset,this),t.on(a.Events.BUFFER_CREATED,this.onBufferCreated,this),t.on(a.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(a.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(a.Events.FRAG_BUFFERED,this.onFragBuffered,this)},E._unregisterListeners=function(){var t=this.hls;t.off(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.off(a.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.off(a.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(a.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(a.Events.ERROR,this.onError,this),t.off(a.Events.BUFFER_RESET,this.onBufferReset,this),t.off(a.Events.BUFFER_CREATED,this.onBufferCreated,this),t.off(a.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(a.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(a.Events.FRAG_BUFFERED,this.onFragBuffered,this)},E.onInitPtsFound=function(t,e){var n=e.frag,r=e.id,a=e.initPTS;if("main"===r){var o=n.cc;this.initPTS[n.cc]=a,this.log("InitPTS for cc: "+o+" found from main: "+a),this.videoTrackCC=o,this.state===i.State.WAITING_INIT_PTS&&this.tick()}},E.startLoad=function(t){if(!this.levels)return this.startPosition=t,void(this.state=i.State.STOPPED);var e=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,e>0&&-1===t?(this.log("Override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=i.State.IDLE):(this.loadedmetadata=!1,this.state=i.State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()},E.doTick=function(){switch(this.state){case i.State.IDLE:this.doTickIdle();break;case i.State.WAITING_TRACK:var e,n=this.levels,r=this.trackId,a=null==n||null===(e=n[r])||void 0===e?void 0:e.details;if(a){if(this.waitForCdnTuneIn(a))break;this.state=i.State.WAITING_INIT_PTS}break;case i.State.FRAG_LOADING_WAITING_RETRY:var s,l=performance.now(),u=this.retryDate;(!u||l>=u||null!==(s=this.media)&&void 0!==s&&s.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.state=i.State.IDLE);break;case i.State.WAITING_INIT_PTS:var c=this.waitingData;if(c){var d=c.frag,h=c.part,f=c.cache,g=c.complete;if(void 0!==this.initPTS[d.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=i.State.FRAG_LOADING;var v={frag:d,part:h,payload:f.flush(),networkDetails:null};this._handleFragmentLoadProgress(v),g&&t.prototype._handleFragmentLoadComplete.call(this,v)}else if(this.videoTrackCC!==this.waitingVideoCC)m.logger.log("Waiting fragment cc ("+d.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var y=this.getLoadPosition(),b=o.BufferHelper.bufferInfo(this.mediaBuffer,y,this.config.maxBufferHole);Object(p.fragmentWithinToleranceTest)(b.end,this.config.maxFragLookUpTolerance,d)<0&&(m.logger.log("Waiting fragment cc ("+d.cc+") @ "+d.start+" cancelled because another fragment at "+b.end+" is needed"),this.clearWaitingFragment())}}else this.state=i.State.IDLE}this.onTickEnd()},E.clearWaitingFragment=function(){var t=this.waitingData;t&&(this.fragmentTracker.removeFragment(t.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=i.State.IDLE)},E.onTickEnd=function(){var t=this.media;if(t&&t.readyState){var e=(this.mediaBuffer?this.mediaBuffer:t).buffered;!this.loadedmetadata&&e.length&&(this.loadedmetadata=!0),this.lastCurrentTime=t.currentTime}},E.doTickIdle=function(){var t,e,n=this.hls,r=this.levels,o=this.media,s=this.trackId,l=n.config;if(r&&r[s]&&(o||!this.startFragRequested&&l.startFragPrefetch)){var d=r[s].details;if(!d||d.live&&this.levelLastLoaded!==s||this.waitForCdnTuneIn(d))this.state=i.State.WAITING_TRACK;else{this.bufferFlushed&&(this.bufferFlushed=!1,this.afterBufferFlushed(this.mediaBuffer?this.mediaBuffer:this.media,c.ElementaryStreamTypes.AUDIO,u.PlaylistLevelType.AUDIO));var h=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,u.PlaylistLevelType.AUDIO);if(null!==h){var f=h.len,p=this.getMaxBufferLength(),g=this.audioSwitch;if(!(f>=p)||g){if(!g&&this._streamEnded(h,d))return n.trigger(a.Events.BUFFER_EOS,{type:"audio"}),void(this.state=i.State.ENDED);var v=d.fragments[0].start,m=h.end;if(g){var y=this.getLoadPosition();m=y,d.PTSKnown&&y<v&&(h.end>v||h.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),o.currentTime=v+.05)}var b=this.getNextFragment(m,d);b?"identity"!==(null===(t=b.decryptdata)||void 0===t?void 0:t.keyFormat)||null!==(e=b.decryptdata)&&void 0!==e&&e.key?this.loadFragment(b,d,m):this.loadKey(b,d):this.bufferFlushed=!0}}}}},E.getMaxBufferLength=function(){var e=t.prototype.getMaxBufferLength.call(this),n=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,u.PlaylistLevelType.MAIN);return null===n?e:Math.max(e,n.len)},E.onMediaDetaching=function(){this.videoBuffer=null,t.prototype.onMediaDetaching.call(this)},E.onAudioTracksUpdated=function(t,e){var n=e.audioTracks;this.resetTransmuxer(),this.levels=n.map((function(t){return new l.Level(t)}))},E.onAudioTrackSwitching=function(t,e){var n=!!e.url;this.trackId=e.id;var r=this.fragCurrent;null!=r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.clearWaitingFragment(),n?this.setInterval(100):this.resetTransmuxer(),n?(this.audioSwitch=!0,this.state=i.State.IDLE):this.state=i.State.STOPPED,this.tick()},E.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},E.onLevelLoaded=function(t,e){this.mainDetails=e.details},E.onAudioTrackLoaded=function(t,e){var n,r=this.levels,a=e.details,o=e.id;if(r){this.log("Track "+o+" loaded ["+a.startSN+","+a.endSN+"],duration:"+a.totalduration);var s=r[o],l=0;if(a.live||null!==(n=s.details)&&void 0!==n&&n.live){var u=this.mainDetails;if(a.fragments[0]||(a.deltaUpdateFailed=!0),a.deltaUpdateFailed||!u)return;!s.details&&a.hasProgramDateTime&&u.hasProgramDateTime?(Object(g.alignPDT)(a,u),l=a.fragments[0].start):l=this.alignPlaylists(a,s.details)}s.details=a,this.levelLastLoaded=o,this.startFragRequested||!this.mainDetails&&a.live||this.setStartPosition(s.details,l),this.state!==i.State.WAITING_TRACK||this.waitForCdnTuneIn(a)||(this.state=i.State.IDLE),this.tick()}else this.warn("Audio tracks were reset while loading level "+o)},E._handleFragmentLoadProgress=function(t){var e,n=t.frag,r=t.part,a=t.payload,o=this.config,s=this.trackId,l=this.levels;if(l){var c=l[s];console.assert(c,"Audio track is defined on fragment load progress");var p=c.details;console.assert(p,"Audio track details are defined on fragment load progress");var g=o.defaultAudioCodec||c.audioCodec||"mp4a.40.2",v=this.transmuxer;v||(v=this.transmuxer=new h.default(this.hls,u.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var y=this.initPTS[n.cc],b=null===(e=n.initSegment)||void 0===e?void 0:e.data;if(void 0!==y){var S=r?r.index:-1,E=-1!==S,T=new f.ChunkMetadata(n.level,n.sn,n.stats.chunkCount,a.byteLength,S,E);v.push(a,b,g,"",n,r,p.totalduration,!1,T,y)}else m.logger.log("Unknown video PTS for cc "+n.cc+", waiting for video PTS before demuxing audio frag "+n.sn+" of ["+p.startSN+" ,"+p.endSN+"],track "+s),(this.waitingData=this.waitingData||{frag:n,part:r,cache:new d.default,complete:!1}).cache.push(new Uint8Array(a)),this.waitingVideoCC=this.videoTrackCC,this.state=i.State.WAITING_INIT_PTS}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+n.sn+" of level "+n.level+" will not be buffered")},E._handleFragmentLoadComplete=function(e){this.waitingData?this.waitingData.complete=!0:t.prototype._handleFragmentLoadComplete.call(this,e)},E.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},E.onBufferCreated=function(t,e){var n=e.tracks.audio;n&&(this.mediaBuffer=n.buffer),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},E.onFragBuffered=function(t,e){var n=e.frag,r=e.part;n.type===u.PlaylistLevelType.AUDIO&&(this.fragContextChanged(n)?this.warn("Fragment "+n.sn+(r?" p: "+r.index:"")+" of level "+n.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch):("initSegment"!==n.sn&&(this.fragPrevious=n,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(a.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(n,r)))},E.onError=function(e,n){switch(n.details){case v.ErrorDetails.FRAG_LOAD_ERROR:case v.ErrorDetails.FRAG_LOAD_TIMEOUT:case v.ErrorDetails.KEY_LOAD_ERROR:case v.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(u.PlaylistLevelType.AUDIO,n);break;case v.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case v.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==i.State.ERROR&&this.state!==i.State.STOPPED&&(this.state=n.fatal?i.State.ERROR:i.State.IDLE,this.warn(n.details+" while loading frag, switching to "+this.state+" state"));break;case v.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===n.parent&&(this.state===i.State.PARSING||this.state===i.State.PARSED)){var r=!0,a=this.getFwdBufferInfo(this.mediaBuffer,u.PlaylistLevelType.AUDIO);a&&a.len>.5&&(r=!this.reduceMaxBufferLength(a.len)),r&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,t.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}}},E.onBufferFlushed=function(t,e){e.type===c.ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0)},E._handleTransmuxComplete=function(t){var e,n="audio",r=this.hls,o=t.remuxResult,s=t.chunkMeta,l=this.getCurrentContext(s);if(!l)return this.warn("The loading context changed while buffering fragment "+s.sn+" of level "+s.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(s.level);var u=l.frag,d=l.part,h=o.audio,f=o.text,p=o.id3,g=o.initSegment;if(!this.fragContextChanged(u)){if(this.state=i.State.PARSING,this.audioSwitch&&h&&this.completeAudioSwitch(),null!=g&&g.tracks&&(this._bufferInitSegment(g.tracks,u,s),r.trigger(a.Events.FRAG_PARSING_INIT_SEGMENT,{frag:u,id:n,tracks:g.tracks})),h){var v=h.startPTS,m=h.endPTS,b=h.startDTS,S=h.endDTS;d&&(d.elementaryStreams[c.ElementaryStreamTypes.AUDIO]={startPTS:v,endPTS:m,startDTS:b,endDTS:S}),u.setElementaryStreamInfo(c.ElementaryStreamTypes.AUDIO,v,m,b,S),this.bufferFragmentData(h,u,d,s)}if(null!=p&&null!==(e=p.samples)&&void 0!==e&&e.length){var E=y({frag:u,id:n},p);r.trigger(a.Events.FRAG_PARSING_METADATA,E)}if(f){var T=y({frag:u,id:n},f);r.trigger(a.Events.FRAG_PARSING_USERDATA,T)}}},E._bufferInitSegment=function(t,e,n){if(this.state===i.State.PARSING){t.video&&delete t.video;var r=t.audio;if(r){r.levelCodec=r.codec,r.id="audio",this.log("Init audio buffer, container:"+r.container+", codecs[parsed]=["+r.codec+"]"),this.hls.trigger(a.Events.BUFFER_CODECS,t);var o=r.initSegment;if(null!=o&&o.byteLength){var s={type:"audio",frag:e,part:null,chunkMeta:n,parent:e.type,data:o};this.hls.trigger(a.Events.BUFFER_APPENDING,s)}this.tick()}}},E.loadFragment=function(e,n,a){var o=this.fragmentTracker.getState(e);this.fragCurrent=e,(this.audioSwitch||o===s.FragmentState.NOT_LOADED||o===s.FragmentState.PARTIAL)&&("initSegment"===e.sn?this._loadInitSegment(e):n.live&&!Object(r.isFiniteNumber)(this.initPTS[e.cc])?(this.log("Waiting for video PTS in continuity counter "+e.cc+" of live stream before loading audio fragment "+e.sn+" of level "+this.trackId),this.state=i.State.WAITING_INIT_PTS):(this.startFragRequested=!0,t.prototype.loadFragment.call(this,e,n,a)))},E.completeAudioSwitch=function(){var e=this.hls,n=this.media,r=this.trackId;n&&(this.log("Switching audio track : flushing all audio"),t.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,e.trigger(a.Events.AUDIO_TRACK_SWITCHED,{id:r})},S}(i.default);e.default=S},"./src/controller/audio-track-controller.ts":
/*!**************************************************!*\
	  !*** ./src/controller/audio-track-controller.ts ***!
	  \**************************************************/
/*! exports provided: default */function(t,e,n){n.r(e);var r=n(/*! ../events */"./src/events.ts"),i=n(/*! ../errors */"./src/errors.ts"),a=n(/*! ./base-playlist-controller */"./src/controller/base-playlist-controller.ts"),o=n(/*! ../types/loader */"./src/types/loader.ts");function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=function(t){var e,n;function a(e){var n;return(n=t.call(this,e,"[audio-track-controller]")||this).tracks=[],n.groupId=null,n.tracksInGroup=[],n.trackId=-1,n.trackName="",n.selectDefaultTrack=!0,n.registerListeners(),n}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,l(e,n);var u,c,d,h=a.prototype;return h.registerListeners=function(){var t=this.hls;t.on(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.on(r.Events.LEVEL_LOADING,this.onLevelLoading,this),t.on(r.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(r.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(r.Events.ERROR,this.onError,this)},h.unregisterListeners=function(){var t=this.hls;t.off(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.off(r.Events.LEVEL_LOADING,this.onLevelLoading,this),t.off(r.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(r.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(r.Events.ERROR,this.onError,this)},h.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,t.prototype.destroy.call(this)},h.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},h.onManifestParsed=function(t,e){this.tracks=e.audioTracks||[]},h.onAudioTrackLoaded=function(t,e){var n=e.id,r=e.details,i=this.tracksInGroup[n];if(i){var a=i.details;i.details=e.details,this.log("audioTrack "+n+" loaded ["+r.startSN+"-"+r.endSN+"]"),n===this.trackId&&(this.retryCount=0,this.playlistLoaded(n,e,a))}else this.warn("Invalid audio track id "+n)},h.onLevelLoading=function(t,e){this.switchLevel(e.level)},h.onLevelSwitching=function(t,e){this.switchLevel(e.level)},h.switchLevel=function(t){var e=this.hls.levels[t];if(null!=e&&e.audioGroupIds){var n=e.audioGroupIds[e.urlId];if(this.groupId!==n){this.groupId=n;var i=this.tracks.filter((function(t){return!n||t.groupId===n}));this.selectDefaultTrack&&!i.some((function(t){return t.default}))&&(this.selectDefaultTrack=!1),this.tracksInGroup=i;var a={audioTracks:i};this.log("Updating audio tracks, "+i.length+' track(s) found in "'+n+'" group-id'),this.hls.trigger(r.Events.AUDIO_TRACKS_UPDATED,a),this.selectInitialTrack()}}},h.onError=function(e,n){t.prototype.onError.call(this,e,n),!n.fatal&&n.context&&n.context.type===o.PlaylistContextType.AUDIO_TRACK&&n.context.id===this.trackId&&n.context.groupId===this.groupId&&this.retryLoadingOrFail(n)},h.setAudioTrack=function(t){var e=this.tracksInGroup;if(t<0||t>=e.length)this.warn("Invalid id passed to audio-track controller");else{this.clearTimer();var n=e[this.trackId];this.log("Now switching to audio-track index "+t);var i=e[t],a=i.id,o=i.groupId,s=void 0===o?"":o,l=i.name,u=i.type,c=i.url;if(this.trackId=t,this.trackName=l,this.selectDefaultTrack=!1,this.hls.trigger(r.Events.AUDIO_TRACK_SWITCHING,{id:a,groupId:s,name:l,type:u,url:c}),!i.details||i.details.live){var d=this.switchParams(i.url,null==n?void 0:n.details);this.loadPlaylist(d)}}},h.selectInitialTrack=function(){var t=this.tracksInGroup;console.assert(t.length,"Initial audio track should be selected when tracks are known");var e=this.trackName,n=this.findTrackId(e)||this.findTrackId();-1!==n?this.setAudioTrack(n):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},h.findTrackId=function(t){for(var e=this.tracksInGroup,n=0;n<e.length;n++){var r=e[n];if((!this.selectDefaultTrack||r.default)&&(!t||t===r.name))return r.id}return-1},h.loadPlaylist=function(t){var e=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(e)){var n=e.id,i=e.groupId,a=e.url;if(t)try{a=t.addDirectives(a)}catch(t){this.warn("Could not construct new URL with HLS Delivery Directives: "+t)}this.log("loading audio-track playlist for id: "+n),this.clearTimer(),this.hls.trigger(r.Events.AUDIO_TRACK_LOADING,{url:a,id:n,groupId:i,deliveryDirectives:t||null})}},u=a,(c=[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(t){this.selectDefaultTrack=!1,this.setAudioTrack(t)}}])&&s(u.prototype,c),d&&s(u,d),a}(a.default);e.default=u},"./src/controller/base-playlist-controller.ts":
/*!****************************************************!*\
	  !*** ./src/controller/base-playlist-controller.ts ***!
	  \****************************************************/
/*! exports provided: default */function(t,e,n){n.r(e),n.d(e,"default",(function(){return l}));var r=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),i=n(/*! ../types/level */"./src/types/level.ts"),a=n(/*! ./level-helper */"./src/controller/level-helper.ts"),o=n(/*! ../utils/logger */"./src/utils/logger.ts"),s=n(/*! ../errors */"./src/errors.ts"),l=function(){function t(t,e){this.hls=void 0,this.timer=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=o.logger.log.bind(o.logger,e+":"),this.warn=o.logger.warn.bind(o.logger,e+":"),this.hls=t}var e=t.prototype;return e.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},e.onError=function(t,e){e.fatal&&e.type===s.ErrorTypes.NETWORK_ERROR&&this.clearTimer()},e.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},e.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.loadPlaylist()},e.stopLoad=function(){this.canLoad=!1,this.clearTimer()},e.switchParams=function(t,e){var n=null==e?void 0:e.renditionReports;if(n)for(var a=0;a<n.length;a++){var o=n[a],s=""+o.URI;if(s===t.substr(-s.length)){var l=parseInt(o["LAST-MSN"]),u=parseInt(o["LAST-PART"]);if(e&&this.hls.config.lowLatencyMode){var c=Math.min(e.age-e.partTarget,e.targetduration);void 0!==u&&c>e.partTarget&&(u+=1)}if(Object(r.isFiniteNumber)(l))return new i.HlsUrlParameters(l,Object(r.isFiniteNumber)(u)?u:void 0,i.HlsSkip.No)}}},e.loadPlaylist=function(t){},e.shouldLoadTrack=function(t){return this.canLoad&&t&&!!t.url&&(!t.details||t.details.live)},e.playlistLoaded=function(t,e,n){var r=this,i=e.details,o=e.stats,s=o.loading.end?Math.max(0,self.performance.now()-o.loading.end):0;if(i.advancedDateTime=Date.now()-s,i.live||null!=n&&n.live){if(i.reloaded(n),n&&this.log("live playlist "+t+" "+(i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:"MISSED")),n&&i.fragments.length>0&&Object(a.mergeDetails)(n,i),!this.canLoad||!i.live)return;var l,u=void 0,c=void 0;if(i.canBlockReload&&i.endSN&&i.advanced){var d=this.hls.config.lowLatencyMode,h=i.lastPartSn,f=i.endSN,p=i.lastPartIndex,g=h===f;-1!==p?(u=g?f+1:h,c=g?d?0:p:p+1):u=f+1;var v=i.age,m=v+i.ageHeader,y=Math.min(m-i.partTarget,1.5*i.targetduration);if(y>0){if(n&&y>n.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+n.tuneInGoal+" to: "+y+" with playlist age: "+i.age),y=0;else{var b=Math.floor(y/i.targetduration);u+=b,void 0!==c&&(c+=Math.round(y%i.targetduration/i.partTarget)),this.log("CDN Tune-in age: "+i.ageHeader+"s last advanced "+v.toFixed(2)+"s goal: "+y+" skip sn "+b+" to part "+c)}i.tuneInGoal=y}if(l=this.getDeliveryDirectives(i,e.deliveryDirectives,u,c),d||!g)return void this.loadPlaylist(l)}else l=this.getDeliveryDirectives(i,e.deliveryDirectives,u,c);var S=Object(a.computeReloadInterval)(i,o);void 0!==u&&i.canBlockReload&&(S-=i.partTarget||1),this.log("reload live playlist "+t+" in "+Math.round(S)+" ms"),this.timer=self.setTimeout((function(){return r.loadPlaylist(l)}),S)}else this.clearTimer()},e.getDeliveryDirectives=function(t,e,n,r){var a=Object(i.getSkipValue)(t,n);return null!=e&&e.skip&&t.deltaUpdateFailed&&(n=e.msn,r=e.part,a=i.HlsSkip.No),new i.HlsUrlParameters(n,r,a)},e.retryLoadingOrFail=function(t){var e,n=this,r=this.hls.config,i=this.retryCount<r.levelLoadingMaxRetry;if(i)if(this.retryCount++,t.details.indexOf("LoadTimeOut")>-1&&null!==(e=t.context)&&void 0!==e&&e.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+t.details+'"'),this.loadPlaylist();else{var a=Math.min(Math.pow(2,this.retryCount)*r.levelLoadingRetryDelay,r.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout((function(){return n.loadPlaylist()}),a),this.warn("retry playlist loading #"+this.retryCount+" in "+a+' ms after "'+t.details+'"')}else this.warn('cannot recover from error "'+t.details+'"'),this.clearTimer(),t.fatal=!0;return i},t}()},"./src/controller/base-stream-controller.ts":
/*!**************************************************!*\
	  !*** ./src/controller/base-stream-controller.ts ***!
	  \**************************************************/
/*! exports provided: State, default */function(t,e,n){n.r(e),n.d(e,"State",(function(){return E})),n.d(e,"default",(function(){return T}));var r=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),i=n(/*! ../task-loop */"./src/task-loop.ts"),a=n(/*! ./fragment-tracker */"./src/controller/fragment-tracker.ts"),o=n(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.ts"),s=n(/*! ../utils/logger */"./src/utils/logger.ts"),l=n(/*! ../events */"./src/events.ts"),u=n(/*! ../errors */"./src/errors.ts"),c=n(/*! ../types/transmuxer */"./src/types/transmuxer.ts"),d=n(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),h=n(/*! ../utils/discontinuities */"./src/utils/discontinuities.ts"),f=n(/*! ./fragment-finders */"./src/controller/fragment-finders.ts"),p=n(/*! ./level-helper */"./src/controller/level-helper.ts"),g=n(/*! ../loader/fragment-loader */"./src/loader/fragment-loader.ts"),v=n(/*! ../crypt/decrypter */"./src/crypt/decrypter.ts"),m=n(/*! ../utils/time-ranges */"./src/utils/time-ranges.ts"),y=n(/*! ../types/loader */"./src/types/loader.ts");function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var E={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BACKTRACKING:"BACKTRACKING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},T=function(t){var e,n;function i(e,n,r){var i;return(i=t.call(this)||this).hls=void 0,i.fragPrevious=null,i.fragCurrent=null,i.fragmentTracker=void 0,i.transmuxer=null,i._state=E.STOPPED,i.media=void 0,i.mediaBuffer=void 0,i.config=void 0,i.bitrateTest=!1,i.lastCurrentTime=0,i.nextLoadPosition=0,i.startPosition=0,i.loadedmetadata=!1,i.fragLoadError=0,i.retryDate=0,i.levels=null,i.fragmentLoader=void 0,i.levelLastLoaded=null,i.startFragRequested=!1,i.decrypter=void 0,i.initPTS=[],i.onvseeking=null,i.onvended=null,i.logPrefix="",i.log=void 0,i.warn=void 0,i.logPrefix=r,i.log=s.logger.log.bind(s.logger,r+":"),i.warn=s.logger.warn.bind(s.logger,r+":"),i.hls=e,i.fragmentLoader=new g.default(e.config),i.fragmentTracker=n,i.config=e.config,i.decrypter=new v.default(e,e.config),e.on(l.Events.KEY_LOADED,i.onKeyLoaded,function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(i)),i}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,S(e,n);var T,_,x,w=i.prototype;return w.doTick=function(){this.onTickEnd()},w.onTickEnd=function(){},w.startLoad=function(t){},w.stopLoad=function(){this.fragmentLoader.abort();var t=this.fragCurrent;t&&this.fragmentTracker.removeFragment(t),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=E.STOPPED},w._streamEnded=function(t,e){var n=this.fragCurrent,r=this.fragmentTracker;if(!e.live&&n&&n.sn===e.endSN&&!t.nextStart){var i=r.getState(n);return i===a.FragmentState.PARTIAL||i===a.FragmentState.OK}return!1},w.onMediaAttached=function(t,e){var n=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),n.addEventListener("seeking",this.onvseeking),n.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.state===E.STOPPED&&this.startLoad(r.startPosition)},w.onMediaDetaching=function(){var t=this.media;null!=t&&t.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},w.onMediaSeeking=function(){var t=this.config,e=this.fragCurrent,n=this.media,i=this.mediaBuffer,a=this.state,s=n?n.currentTime:0,l=o.BufferHelper.bufferInfo(i||n,s,t.maxBufferHole);if(this.log("media seeking to "+(Object(r.isFiniteNumber)(s)?s.toFixed(3):s)+", state: "+a),a===E.ENDED)this.resetLoadingState();else if(e&&!l.len){var u=t.maxFragLookUpTolerance,c=e.start-u,d=s>e.start+e.duration+u;(s<c||d)&&(d&&e.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),e.loader.abort()),this.resetLoadingState())}n&&(this.lastCurrentTime=s),this.loadedmetadata||l.len||(this.nextLoadPosition=this.startPosition=s),this.tickImmediate()},w.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},w.onKeyLoaded=function(t,e){if(this.state===E.KEY_LOADING&&e.frag===this.fragCurrent&&this.levels){this.state=E.IDLE;var n=this.levels[e.frag.level].details;n&&this.loadFragment(e.frag,n,e.frag.start)}},w.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},w.onHandlerDestroyed=function(){this.state=E.STOPPED,this.hls.off(l.Events.KEY_LOADED,this.onKeyLoaded,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.fragmentLoader=this.fragmentTracker=null,t.prototype.onHandlerDestroyed.call(this)},w.loadKey=function(t,e){this.log("Loading key for "+t.sn+" of ["+e.startSN+"-"+e.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+t.level),this.state=E.KEY_LOADING,this.fragCurrent=t,this.hls.trigger(l.Events.KEY_LOADING,{frag:t})},w.loadFragment=function(t,e,n){this._loadFragForPlayback(t,e,n)},w._loadFragForPlayback=function(t,e,n){var r=this;this._doFragLoad(t,e,n,(function(e){if(r.fragContextChanged(t))return r.warn("Fragment "+t.sn+(e.part?" p: "+e.part.index:"")+" of level "+t.level+" was dropped during download."),void r.fragmentTracker.removeFragment(t);t.stats.chunkCount++,r._handleFragmentLoadProgress(e)})).then((function(e){if(e){r.fragLoadError=0;var n=r.state;if(!r.fragContextChanged(t))return"payload"in e&&(r.log("Loaded fragment "+t.sn+" of level "+t.level),r.hls.trigger(l.Events.FRAG_LOADED,e),r.state===E.BACKTRACKING)?(r.fragmentTracker.backtrack(t,e),void r.resetFragmentLoading(t)):void r._handleFragmentLoadComplete(e);(n===E.FRAG_LOADING||n===E.BACKTRACKING||!r.fragCurrent&&n===E.PARSING)&&(r.fragmentTracker.removeFragment(t),r.state=E.IDLE)}})).catch((function(e){r.warn(e),r.resetFragmentLoading(t)}))},w.flushMainBuffer=function(t,e,n){if(void 0===n&&(n=null),t-e){var r={startOffset:t,endOffset:e,type:n};this.fragLoadError=0,this.hls.trigger(l.Events.BUFFER_FLUSHING,r)}},w._loadInitSegment=function(t){var e=this;this._doFragLoad(t).then((function(n){if(!n||e.fragContextChanged(t)||!e.levels)throw new Error("init load aborted");return n})).then((function(n){var r=e.hls,i=n.payload,a=t.decryptdata;if(i&&i.byteLength>0&&a&&a.key&&a.iv&&"AES-128"===a.method){var o=self.performance.now();return e.decrypter.webCryptoDecrypt(new Uint8Array(i),a.key.buffer,a.iv.buffer).then((function(e){var i=self.performance.now();return r.trigger(l.Events.FRAG_DECRYPTED,{frag:t,payload:e,stats:{tstart:o,tdecrypt:i}}),n.payload=e,n}))}return n})).then((function(n){var r=e.fragCurrent,i=e.hls,a=e.levels;if(!a)throw new Error("init load aborted, missing levels");var o=a[t.level].details;console.assert(o,"Level details are defined when init segment is loaded");var s=t.stats;e.state=E.IDLE,e.fragLoadError=0,t.data=new Uint8Array(n.payload),s.parsing.start=s.buffering.start=self.performance.now(),s.parsing.end=s.buffering.end=self.performance.now(),n.frag===r&&i.trigger(l.Events.FRAG_BUFFERED,{stats:s,frag:r,part:null,id:t.type}),e.tick()})).catch((function(n){e.warn(n),e.resetFragmentLoading(t)}))},w.fragContextChanged=function(t){var e=this.fragCurrent;return!t||!e||t.level!==e.level||t.sn!==e.sn||t.urlId!==e.urlId},w.fragBufferedComplete=function(t,e){var n=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+t.type+" sn: "+t.sn+(e?" part: "+e.index:"")+" of "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+t.level+" "+m.default.toString(o.BufferHelper.getBuffered(n))),this.state=E.IDLE,this.tick()},w._handleFragmentLoadComplete=function(t){var e=this.transmuxer;if(e){var n=t.frag,r=t.part,i=t.partsLoaded,a=!i||0===i.length||i.some((function(t){return!t})),o=new c.ChunkMetadata(n.level,n.sn,n.stats.chunkCount+1,0,r?r.index:-1,!a);e.flush(o)}},w._handleFragmentLoadProgress=function(t){},w._doFragLoad=function(t,e,n,i){var a=this;if(void 0===n&&(n=null),!this.levels)throw new Error("frag load aborted, missing levels");if(n=Math.max(t.start,n||0),this.config.lowLatencyMode&&e){var o=e.partList;if(o&&i){n>t.end&&e.fragmentHint&&(t=e.fragmentHint);var s=this.getNextPart(o,t,n);if(s>-1){var u=o[s];return this.log("Loading part sn: "+t.sn+" p: "+u.index+" cc: "+t.cc+" of playlist ["+e.startSN+"-"+e.endSN+"] parts [0-"+s+"-"+(o.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(n.toFixed(3))),this.nextLoadPosition=u.start+u.duration,this.state=E.FRAG_LOADING,this.hls.trigger(l.Events.FRAG_LOADING,{frag:t,part:o[s],targetBufferTime:n}),this.doFragPartsLoad(t,o,s,i).catch((function(t){return a.handleFragLoadError(t)}))}if(!t.url||this.loadedEndOfParts(o,n))return Promise.resolve(null)}}return this.log("Loading fragment "+t.sn+" cc: "+t.cc+" "+(e?"of ["+e.startSN+"-"+e.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(n.toFixed(3))),Object(r.isFiniteNumber)(t.sn)&&!this.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),this.state=E.FRAG_LOADING,this.hls.trigger(l.Events.FRAG_LOADING,{frag:t,targetBufferTime:n}),this.fragmentLoader.load(t,i).catch((function(t){return a.handleFragLoadError(t)}))},w.doFragPartsLoad=function(t,e,n,r){var i=this;return new Promise((function(a,o){var s=[];!function n(u){var c=e[u];i.fragmentLoader.loadPart(t,c,r).then((function(r){s[c.index]=r;var o=r.part;i.hls.trigger(l.Events.FRAG_LOADED,r);var d=e[u+1];if(!d||d.fragment!==t)return a({frag:t,part:o,partsLoaded:s});n(u+1)})).catch(o)}(n)}))},w.handleFragLoadError=function(t){var e=t.data;return e&&e.details===u.ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(e.frag,e.part):this.hls.trigger(l.Events.ERROR,e),null},w._handleTransmuxerFlush=function(t){var e=this.getCurrentContext(t);if(e&&this.state===E.PARSING){var n=e.frag,r=e.part,i=e.level,a=self.performance.now();n.stats.parsing.end=a,r&&(r.stats.parsing.end=a),this.updateLevelTiming(n,r,i,t.partial)}else this.fragCurrent||(this.state=E.IDLE)},w.getCurrentContext=function(t){var e=this.levels,n=t.level,r=t.sn,i=t.part;if(!e||!e[n])return this.warn("Levels object was unset while buffering fragment "+r+" of level "+n+". The current chunk will not be buffered."),null;var a=e[n],o=i>-1?Object(p.getPartWith)(a,r,i):null,s=o?o.fragment:Object(p.getFragmentWithSN)(a,r,this.fragCurrent);return s?{frag:s,part:o,level:a}:null},w.bufferFragmentData=function(t,e,n,r){if(t&&this.state===E.PARSING){var i=t.data1,a=t.data2,o=i;if(i&&a&&(o=Object(d.appendUint8Array)(i,a)),o&&o.length){var s={type:t.type,frag:e,part:n,chunkMeta:r,parent:e.type,data:o};this.hls.trigger(l.Events.BUFFER_APPENDING,s),t.dropped&&t.independent&&!n&&this.flushBufferGap(e)}}},w.flushBufferGap=function(t){var e=this.media;if(e)if(o.BufferHelper.isBuffered(e,e.currentTime)){var n=e.currentTime,r=o.BufferHelper.bufferInfo(e,n,0),i=t.duration,a=Math.min(2*this.config.maxFragLookUpTolerance,.25*i),s=Math.max(Math.min(t.start-a,r.end-a),n+a);t.start-s>a&&this.flushMainBuffer(s,t.start)}else this.flushMainBuffer(0,t.start)},w.getFwdBufferInfo=function(t,e){var n=this.config,i=this.getLoadPosition();if(!Object(r.isFiniteNumber)(i))return null;var a=o.BufferHelper.bufferInfo(t,i,n.maxBufferHole);if(0===a.len&&void 0!==a.nextStart){var s=this.fragmentTracker.getBufferedFrag(i,e);if(s&&a.nextStart<s.end)return o.BufferHelper.bufferInfo(t,i,Math.max(a.nextStart,n.maxBufferHole))}return a},w.getMaxBufferLength=function(t){var e,n=this.config;return e=t?Math.max(8*n.maxBufferSize/t,n.maxBufferLength):n.maxBufferLength,Math.min(e,n.maxMaxBufferLength)},w.reduceMaxBufferLength=function(t){var e=this.config,n=t||e.maxBufferLength;return e.maxMaxBufferLength>=n&&(e.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+e.maxMaxBufferLength+"s"),!0)},w.getNextFragment=function(t,e){var n,r,i=e.fragments,a=i.length;if(!a)return null;var o,s=this.config,l=i[0].start;if(e.live){var u=s.initialLiveManifestSize;if(a<u)return this.warn("Not enough fragments to start playback (have: "+a+", need: "+u+")"),null;e.PTSKnown||this.startFragRequested||-1!==this.startPosition||(o=this.getInitialLiveFragment(e,i),this.startPosition=o?this.hls.liveSyncPosition||o.start:t)}else t<=l&&(o=i[0]);if(!o){var c=s.lowLatencyMode?e.partEnd:e.fragmentEnd;o=this.getFragmentAtPosition(t,c,e)}return null===(n=o)||void 0===n||!n.initSegment||null!==(r=o)&&void 0!==r&&r.initSegment.data||this.bitrateTest||(o=o.initSegment),o},w.getNextPart=function(t,e,n){for(var r=-1,i=!1,a=!0,o=0,s=t.length;o<s;o++){var l=t[o];if(a=a&&!l.independent,r>-1&&n<l.start)break;var u=l.loaded;!u&&(i||l.independent||a)&&l.fragment===e&&(r=o),i=u}return r},w.loadedEndOfParts=function(t,e){var n=t[t.length-1];return n&&e>n.start&&n.loaded},w.getInitialLiveFragment=function(t,e){var n=this.fragPrevious,r=null;if(n){if(t.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+n.programDateTime),r=Object(f.findFragmentByPDT)(e,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!r){var i=n.sn+1;if(i>=t.startSN&&i<=t.endSN){var a=e[i-t.startSN];n.cc===a.cc&&(r=a,this.log("Live playlist, switching playlist, load frag with next SN: "+r.sn))}r||(r=Object(f.findFragWithCC)(e,n.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+r.sn)}}else{var o=this.hls.liveSyncPosition;null!==o&&(r=this.getFragmentAtPosition(o,this.bitrateTest?t.fragmentEnd:t.edge,t))}return r},w.getFragmentAtPosition=function(t,e,n){var r,i=this.config,o=this.fragPrevious,s=n.fragments,l=n.endSN,u=n.fragmentHint,c=i.maxFragLookUpTolerance,d=!!(i.lowLatencyMode&&n.partList&&u);if(d&&u&&!this.bitrateTest&&(s=s.concat(u),l=u.sn),t<e){var h=t>e-c?0:c;r=Object(f.findFragmentByPTS)(o,s,t,h)}else r=s[s.length-1];if(r){var p=r.sn-n.startSN,g=o&&r.level===o.level,v=s[p+1];if(this.fragmentTracker.getState(r)===a.FragmentState.BACKTRACKED){r=null;for(var m=p;s[m]&&this.fragmentTracker.getState(s[m])===a.FragmentState.BACKTRACKED;)r=o?s[m--]:s[--m];r||(r=v)}else o&&r.sn===o.sn&&!d&&g&&(r.sn<l&&this.fragmentTracker.getState(v)!==a.FragmentState.OK?(this.log("SN "+r.sn+" just loaded, load next one: "+v.sn),r=v):r=null)}return r},w.synchronizeToLiveEdge=function(t){var e=this.config,n=this.media;if(n){var r=this.hls.liveSyncPosition,i=n.currentTime,a=t.fragments[0].start,o=t.edge,s=i>=a-e.maxFragLookUpTolerance&&i<=o;if(null!==r&&n.duration>r&&(i<r||!s)){var l=void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:e.liveMaxLatencyDurationCount*t.targetduration;(!s&&n.readyState<4||i<o-l)&&(this.loadedmetadata||(this.nextLoadPosition=r),n.readyState&&(this.warn("Playback: "+i.toFixed(3)+" is located too far from the end of live sliding playlist: "+o+", reset currentTime to : "+r.toFixed(3)),n.currentTime=r))}}},w.alignPlaylists=function(t,e){var n=this.levels,i=this.levelLastLoaded,a=this.fragPrevious,o=null!==i?n[i]:null,s=t.fragments.length;if(!s)return this.warn("No fragments in live playlist"),0;var l=t.fragments[0].start,u=!e,c=t.alignedSliding&&Object(r.isFiniteNumber)(l);if(u||!c&&!l){Object(h.alignStream)(a,o,t);var d=t.fragments[0].start;return this.log("Live playlist sliding: "+d.toFixed(2)+" start-sn: "+(e?e.startSN:"na")+"->"+t.startSN+" prev-sn: "+(a?a.sn:"na")+" fragments: "+s),d}return l},w.waitForCdnTuneIn=function(t){return t.live&&t.canBlockReload&&t.tuneInGoal>Math.max(t.partHoldBack,3*t.partTarget)},w.setStartPosition=function(t,e){var n=this.startPosition;if(n<e&&(n=-1),-1===n||-1===this.lastCurrentTime){var i=t.startTimeOffset;Object(r.isFiniteNumber)(i)?(n=e+i,i<0&&(n+=t.totalduration),n=Math.min(Math.max(e,n),e+t.totalduration),this.log("Start time offset "+i+" found in playlist, adjust startPosition to "+n),this.startPosition=n):t.live?n=this.hls.liveSyncPosition||e:this.startPosition=n=0,this.lastCurrentTime=n}this.nextLoadPosition=n},w.getLoadPosition=function(){var t=this.media,e=0;return this.loadedmetadata&&t?e=t.currentTime:this.nextLoadPosition&&(e=this.nextLoadPosition),e},w.handleFragLoadAborted=function(t,e){this.transmuxer&&"initSegment"!==t.sn&&t.stats.aborted&&(this.warn("Fragment "+t.sn+(e?" part"+e.index:"")+" of level "+t.level+" was aborted"),this.resetFragmentLoading(t))},w.resetFragmentLoading=function(t){this.fragCurrent&&this.fragContextChanged(t)||(this.state=E.IDLE)},w.onFragmentOrKeyLoadError=function(t,e){if(!e.fatal){var n=e.frag;if(n&&n.type===t){var r=this.fragCurrent;console.assert(r&&n.sn===r.sn&&n.level===r.level&&n.urlId===r.urlId,"Frag load error must match current frag to retry");var i=this.config;if(this.fragLoadError+1<=i.fragLoadingMaxRetry){if(this.resetLiveStartWhenNotLoaded(n.level))return;var a=Math.min(Math.pow(2,this.fragLoadError)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);this.warn("Fragment "+n.sn+" of "+t+" "+n.level+" failed to load, retrying in "+a+"ms"),this.retryDate=self.performance.now()+a,this.fragLoadError++,this.state=E.FRAG_LOADING_WAITING_RETRY}else e.levelRetry?(t===y.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=E.IDLE):(s.logger.error(e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.hls.stopLoad(),this.state=E.ERROR)}}},w.afterBufferFlushed=function(t,e,n){if(t){var r=o.BufferHelper.getBuffered(t);this.fragmentTracker.detectEvictedFragments(e,r,n),this.state===E.ENDED&&this.resetLoadingState()}},w.resetLoadingState=function(){this.fragCurrent=null,this.fragPrevious=null,this.state=E.IDLE},w.resetLiveStartWhenNotLoaded=function(t){if(!this.loadedmetadata){this.startFragRequested=!1;var e=this.levels?this.levels[t].details:null;if(null!=e&&e.live)return this.startPosition=-1,this.setStartPosition(e,0),this.resetLoadingState(),!0;this.nextLoadPosition=this.startPosition}return!1},w.updateLevelTiming=function(t,e,n,r){var i=this,a=n.details;console.assert(!!a,"level.details must be defined"),Object.keys(t.elementaryStreams).reduce((function(e,o){var s=t.elementaryStreams[o];if(s){var u=s.endPTS-s.startPTS;if(u<=0)return i.warn("Could not parse fragment "+t.sn+" "+o+" duration reliably ("+u+") resetting transmuxer to fallback to playlist timing"),i.resetTransmuxer(),e||!1;var c=r?0:Object(p.updateFragPTSDTS)(a,t,s.startPTS,s.endPTS,s.startDTS,s.endDTS);return i.hls.trigger(l.Events.LEVEL_PTS_UPDATED,{details:a,level:n,drift:c,type:o,frag:t,start:s.startPTS,end:s.endPTS}),!0}return e}),!1)?(this.state=E.PARSED,this.hls.trigger(l.Events.FRAG_PARSED,{frag:t,part:e})):this.resetLoadingState()},w.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},T=i,(_=[{key:"state",get:function(){return this._state},set:function(t){var e=this._state;e!==t&&(this._state=t,this.log(e+"->"+t))}}])&&b(T.prototype,_),x&&b(T,x),i}(i.default)},"./src/controller/buffer-controller.ts":
/*!*********************************************!*\
	  !*** ./src/controller/buffer-controller.ts ***!
	  \*********************************************/
/*! exports provided: default */function(t,e,n){n.r(e),n.d(e,"default",(function(){return f}));var r=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),i=n(/*! ../events */"./src/events.ts"),a=n(/*! ../utils/logger */"./src/utils/logger.ts"),o=n(/*! ../errors */"./src/errors.ts"),s=n(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.ts"),l=n(/*! ../utils/mediasource-helper */"./src/utils/mediasource-helper.ts"),u=n(/*! ../loader/fragment */"./src/loader/fragment.ts"),c=n(/*! ./buffer-operation-queue */"./src/controller/buffer-operation-queue.ts"),d=Object(l.getMediaSource)(),h=/([ha]vc.)(?:\.[^.,]+)+/,f=function(){function t(t){var e=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var t=e.hls,n=e.media,r=e.mediaSource;a.logger.log("[buffer-controller]: Media source opened"),n&&(e.updateMediaElementDuration(),t.trigger(i.Events.MEDIA_ATTACHED,{media:n})),r&&r.removeEventListener("sourceopen",e._onMediaSourceOpen),e.checkPendingTracks()},this._onMediaSourceClose=function(){a.logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){a.logger.log("[buffer-controller]: Media source ended")},this.hls=t,this._initSourceBuffer(),this.registerListeners()}var e=t.prototype;return e.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},e.destroy=function(){this.unregisterListeners(),this.details=null},e.registerListeners=function(){var t=this.hls;t.on(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.on(i.Events.BUFFER_RESET,this.onBufferReset,this),t.on(i.Events.BUFFER_APPENDING,this.onBufferAppending,this),t.on(i.Events.BUFFER_CODECS,this.onBufferCodecs,this),t.on(i.Events.BUFFER_EOS,this.onBufferEos,this),t.on(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(i.Events.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(i.Events.FRAG_PARSED,this.onFragParsed,this),t.on(i.Events.FRAG_CHANGED,this.onFragChanged,this)},e.unregisterListeners=function(){var t=this.hls;t.off(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.off(i.Events.BUFFER_RESET,this.onBufferReset,this),t.off(i.Events.BUFFER_APPENDING,this.onBufferAppending,this),t.off(i.Events.BUFFER_CODECS,this.onBufferCodecs,this),t.off(i.Events.BUFFER_EOS,this.onBufferEos,this),t.off(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(i.Events.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(i.Events.FRAG_PARSED,this.onFragParsed,this),t.off(i.Events.FRAG_CHANGED,this.onFragChanged,this)},e._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new c.default(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]}},e.onManifestParsed=function(t,e){var n=2;(e.audio&&!e.video||!e.altAudio)&&(n=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=n,this.details=null,a.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},e.onMediaAttaching=function(t,e){var n=this.media=e.media;if(n&&d){var r=this.mediaSource=new d;r.addEventListener("sourceopen",this._onMediaSourceOpen),r.addEventListener("sourceended",this._onMediaSourceEnded),r.addEventListener("sourceclose",this._onMediaSourceClose),n.src=self.URL.createObjectURL(r),this._objectUrl=n.src}},e.onMediaDetaching=function(){var t=this.media,e=this.mediaSource,n=this._objectUrl;if(e){if(a.logger.log("[buffer-controller]: media source detaching"),"open"===e.readyState)try{e.endOfStream()}catch(t){a.logger.warn("[buffer-controller]: onMediaDetaching: "+t.message+" while calling endOfStream")}this.onBufferReset(),e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),t&&(n&&self.URL.revokeObjectURL(n),t.src===n?(t.removeAttribute("src"),t.load()):a.logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(i.Events.MEDIA_DETACHED,void 0)},e.onBufferReset=function(){var t=this;this.getSourceBufferTypes().forEach((function(e){var n=t.sourceBuffer[e];try{n&&(t.removeBufferListeners(e),t.mediaSource&&t.mediaSource.removeSourceBuffer(n),t.sourceBuffer[e]=void 0)}catch(t){a.logger.warn("[buffer-controller]: Failed to reset the "+e+" buffer",t)}})),this._initSourceBuffer()},e.onBufferCodecs=function(t,e){var n=this,r=this.getSourceBufferTypes().length;Object.keys(e).forEach((function(t){if(r){var i=n.tracks[t];if(i&&"function"==typeof i.buffer.changeType){var a=e[t],o=a.codec,s=a.levelCodec,l=a.container;if((i.levelCodec||i.codec).replace(h,"$1")!==(s||o).replace(h,"$1")){var u=l+";codecs="+(s||o);n.appendChangeType(t,u)}}}else n.pendingTracks[t]=e[t]})),r||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},e.appendChangeType=function(t,e){var n=this,r=this.operationQueue,i={execute:function(){var i=n.sourceBuffer[t];i&&(a.logger.log("[buffer-controller]: changing "+t+" sourceBuffer type to "+e),i.changeType(e)),r.shiftAndExecuteNext(t)},onStart:function(){},onComplete:function(){},onError:function(e){a.logger.warn("[buffer-controller]: Failed to change "+t+" SourceBuffer type",e)}};r.append(i,t)},e.onBufferAppending=function(t,e){var n=this,r=this.hls,l=this.operationQueue,u=this.tracks,c=e.data,d=e.type,h=e.frag,f=e.part,p=e.chunkMeta,g=p.buffering[d],v=self.performance.now();g.start=v;var m=h.stats.buffering,y=f?f.stats.buffering:null;0===m.start&&(m.start=v),y&&0===y.start&&(y.start=v);var b=u.audio,S="audio"===d&&1===p.id&&"audio/mpeg"===(null==b?void 0:b.container),E={execute:function(){if(g.executeStart=self.performance.now(),S){var t=n.sourceBuffer[d];if(t){var e=h.start-t.timestampOffset;Math.abs(e)>=.1&&(a.logger.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+h.start+" (delta: "+e+") sn: "+h.sn+")"),t.timestampOffset=h.start)}}n.appendExecutor(c,d)},onStart:function(){},onComplete:function(){var t=self.performance.now();g.executeEnd=g.end=t,0===m.first&&(m.first=t),y&&0===y.first&&(y.first=t);var e=n.sourceBuffer,r={};for(var a in e)r[a]=s.BufferHelper.getBuffered(e[a]);n.appendError=0,n.hls.trigger(i.Events.BUFFER_APPENDED,{type:d,frag:h,part:f,chunkMeta:p,parent:h.type,timeRanges:r})},onError:function(t){a.logger.error("[buffer-controller]: Error encountered while trying to append to the "+d+" SourceBuffer",t);var e={type:o.ErrorTypes.MEDIA_ERROR,parent:h.type,details:o.ErrorDetails.BUFFER_APPEND_ERROR,err:t,fatal:!1};t.code===DOMException.QUOTA_EXCEEDED_ERR?e.details=o.ErrorDetails.BUFFER_FULL_ERROR:(n.appendError++,e.details=o.ErrorDetails.BUFFER_APPEND_ERROR,n.appendError>r.config.appendErrorMaxRetry&&(a.logger.error("[buffer-controller]: Failed "+r.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),e.fatal=!0)),r.trigger(i.Events.ERROR,e)}};l.append(E,d)},e.onBufferFlushing=function(t,e){var n=this,r=this.operationQueue,o=function(t){return{execute:n.removeExecutor.bind(n,t,e.startOffset,e.endOffset),onStart:function(){},onComplete:function(){n.hls.trigger(i.Events.BUFFER_FLUSHED,{type:t})},onError:function(e){a.logger.warn("[buffer-controller]: Failed to remove from "+t+" SourceBuffer",e)}}};e.type?r.append(o(e.type),e.type):this.getSourceBufferTypes().forEach((function(t){r.append(o(t),t)}))},e.onFragParsed=function(t,e){var n=this,r=e.frag,o=e.part,s=[],l=o?o.elementaryStreams:r.elementaryStreams;l[u.ElementaryStreamTypes.AUDIOVIDEO]?s.push("audiovideo"):(l[u.ElementaryStreamTypes.AUDIO]&&s.push("audio"),l[u.ElementaryStreamTypes.VIDEO]&&s.push("video")),0===s.length&&a.logger.warn("Fragments must have at least one ElementaryStreamType set. type: "+r.type+" level: "+r.level+" sn: "+r.sn),this.blockBuffers((function(){var t=self.performance.now();r.stats.buffering.end=t,o&&(o.stats.buffering.end=t);var e=o?o.stats:r.stats;n.hls.trigger(i.Events.FRAG_BUFFERED,{frag:r,part:o,stats:e,id:r.type})}),s)},e.onFragChanged=function(t,e){this.flushBackBuffer()},e.onBufferEos=function(t,e){var n=this;this.getSourceBufferTypes().reduce((function(t,r){var i=n.sourceBuffer[r];return e.type&&e.type!==r||i&&!i.ended&&(i.ended=!0,a.logger.log("[buffer-controller]: "+r+" sourceBuffer now EOS")),t&&!(i&&!i.ended)}),!0)&&this.blockBuffers((function(){var t=n.mediaSource;t&&"open"===t.readyState&&t.endOfStream()}))},e.onLevelUpdated=function(t,e){var n=e.details;n.fragments.length&&(this.details=n,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},e.flushBackBuffer=function(){var t=this.hls,e=this.details,n=this.media,a=this.sourceBuffer;if(n&&null!==e){var o=this.getSourceBufferTypes();if(o.length){var l=e.live&&null!==t.config.liveBackBufferLength?t.config.liveBackBufferLength:t.config.backBufferLength;if(Object(r.isFiniteNumber)(l)&&!(l<0)){var u=n.currentTime,c=e.levelTargetDuration,d=Math.max(l,c),h=Math.floor(u/c)*c-d;o.forEach((function(n){var r=a[n];if(r){var o=s.BufferHelper.getBuffered(r);o.length>0&&h>o.start(0)&&(t.trigger(i.Events.BACK_BUFFER_REACHED,{bufferEnd:h}),e.live&&t.trigger(i.Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:h}),t.trigger(i.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:h,type:n}))}}))}}}},e.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var t=this.details,e=this.hls,n=this.media,i=this.mediaSource,o=t.fragments[0].start+t.totalduration,s=n.duration,l=Object(r.isFiniteNumber)(i.duration)?i.duration:0;t.live&&e.config.liveDurationInfinity?(a.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),i.duration=1/0,this.updateSeekableRange(t)):(o>l&&o>s||!Object(r.isFiniteNumber)(s))&&(a.logger.log("[buffer-controller]: Updating Media Source duration to "+o.toFixed(3)),i.duration=o)}},e.updateSeekableRange=function(t){var e=this.mediaSource,n=t.fragments;if(n.length&&t.live&&null!=e&&e.setLiveSeekableRange){var r=Math.max(0,n[0].start),i=Math.max(r,r+t.totalduration);e.setLiveSeekableRange(r,i)}},e.checkPendingTracks=function(){var t=this.bufferCodecEventsExpected,e=this.operationQueue,n=this.pendingTracks,r=Object.keys(n).length;if(r&&!t||2===r){this.createSourceBuffers(n),this.pendingTracks={};var a=this.getSourceBufferTypes();if(0===a.length)return void this.hls.trigger(i.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});a.forEach((function(t){e.executeNext(t)}))}},e.createSourceBuffers=function(t){var e=this.sourceBuffer,n=this.mediaSource;if(!n)throw Error("createSourceBuffers called when mediaSource was null");var r=0;for(var s in t)if(!e[s]){var l=t[s];if(!l)throw Error("source buffer exists for track "+s+", however track does not");var u=l.levelCodec||l.codec,c=l.container+";codecs="+u;a.logger.log("[buffer-controller]: creating sourceBuffer("+c+")");try{var d=e[s]=n.addSourceBuffer(c),h=s;this.addBufferListener(h,"updatestart",this._onSBUpdateStart),this.addBufferListener(h,"updateend",this._onSBUpdateEnd),this.addBufferListener(h,"error",this._onSBUpdateError),this.tracks[s]={buffer:d,codec:u,container:l.container,levelCodec:l.levelCodec,id:l.id},r++}catch(t){a.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+t.message),this.hls.trigger(i.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:t,mimeType:c})}}r&&this.hls.trigger(i.Events.BUFFER_CREATED,{tracks:this.tracks})},e._onSBUpdateStart=function(t){this.operationQueue.current(t).onStart()},e._onSBUpdateEnd=function(t){var e=this.operationQueue;e.current(t).onComplete(),e.shiftAndExecuteNext(t)},e._onSBUpdateError=function(t,e){a.logger.error("[buffer-controller]: "+t+" SourceBuffer error",e),this.hls.trigger(i.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1});var n=this.operationQueue.current(t);n&&n.onError(e)},e.removeExecutor=function(t,e,n){var i=this.media,o=this.mediaSource,s=this.operationQueue,l=this.sourceBuffer[t];if(!i||!o||!l)return a.logger.warn("[buffer-controller]: Attempting to remove from the "+t+" SourceBuffer, but it does not exist"),void s.shiftAndExecuteNext(t);var u=Object(r.isFiniteNumber)(i.duration)?i.duration:1/0,c=Object(r.isFiniteNumber)(o.duration)?o.duration:1/0,d=Math.max(0,e),h=Math.min(n,u,c);h>d?(a.logger.log("[buffer-controller]: Removing ["+d+","+h+"] from the "+t+" SourceBuffer"),console.assert(!l.updating,t+" sourceBuffer must not be updating"),l.remove(d,h)):s.shiftAndExecuteNext(t)},e.appendExecutor=function(t,e){var n=this.operationQueue,r=this.sourceBuffer[e];if(!r)return a.logger.warn("[buffer-controller]: Attempting to append to the "+e+" SourceBuffer, but it does not exist"),void n.shiftAndExecuteNext(e);r.ended=!1,console.assert(!r.updating,e+" sourceBuffer must not be updating"),r.appendBuffer(t)},e.blockBuffers=function(t,e){var n=this;if(void 0===e&&(e=this.getSourceBufferTypes()),!e.length)return a.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve(t);var r=this.operationQueue,i=e.map((function(t){return r.appendBlocker(t)}));Promise.all(i).then((function(){t(),e.forEach((function(t){var e=n.sourceBuffer[t];e&&e.updating||r.shiftAndExecuteNext(t)}))}))},e.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},e.addBufferListener=function(t,e,n){var r=this.sourceBuffer[t];if(r){var i=n.bind(this,t);this.listeners[t].push({event:e,listener:i}),r.addEventListener(e,i)}},e.removeBufferListeners=function(t){var e=this.sourceBuffer[t];e&&this.listeners[t].forEach((function(t){e.removeEventListener(t.event,t.listener)}))},t}()},"./src/controller/buffer-operation-queue.ts":
/*!**************************************************!*\
	  !*** ./src/controller/buffer-operation-queue.ts ***!
	  \**************************************************/
/*! exports provided: default */function(t,e,n){n.r(e),n.d(e,"default",(function(){return i}));var r=n(/*! ../utils/logger */"./src/utils/logger.ts"),i=function(){function t(t){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=t}var e=t.prototype;return e.append=function(t,e){var n=this.queues[e];n.push(t),1===n.length&&this.buffers[e]&&this.executeNext(e)},e.insertAbort=function(t,e){this.queues[e].unshift(t),this.executeNext(e)},e.appendBlocker=function(t){var e,n=new Promise((function(t){e=t})),r={execute:e,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(r,t),n},e.executeNext=function(t){var e=this.buffers,n=this.queues,i=e[t],a=n[t];if(a.length){var o=a[0];try{o.execute()}catch(e){r.logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),o.onError(e),i&&i.updating||(a.shift(),this.executeNext(t))}}},e.shiftAndExecuteNext=function(t){this.queues[t].shift(),this.executeNext(t)},e.current=function(t){return this.queues[t][0]},t}()},"./src/controller/cap-level-controller.ts":
/*!************************************************!*\
	  !*** ./src/controller/cap-level-controller.ts ***!
	  \************************************************/
/*! exports provided: default */function(t,e,n){n.r(e);var r=n(/*! ../events */"./src/events.ts");function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(t){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=t,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var e,n,a,o=t.prototype;return o.setStreamController=function(t){this.streamController=t},o.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},o.registerListeners=function(){var t=this.hls;t.on(r.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.on(r.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.on(r.Events.BUFFER_CODECS,this.onBufferCodecs,this),t.on(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},o.unregisterListener=function(){var t=this.hls;t.off(r.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.off(r.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.off(r.Events.BUFFER_CODECS,this.onBufferCodecs,this),t.off(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},o.onFpsDropLevelCapping=function(e,n){t.isLevelAllowed(n.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(n.droppedLevel)},o.onMediaAttaching=function(t,e){this.media=e.media instanceof HTMLVideoElement?e.media:null},o.onManifestParsed=function(t,e){var n=this.hls;this.restrictedLevels=[],this.firstLevel=e.firstLevel,n.config.capLevelToPlayerSize&&e.video&&this.startCapping()},o.onBufferCodecs=function(t,e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()},o.onMediaDetaching=function(){this.stopCapping()},o.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var t=this.hls.levels;if(t.length){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t.length-1),e.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},o.getMaxLevel=function(e){var n=this,r=this.hls.levels;if(!r.length)return-1;var i=r.filter((function(r,i){return t.isLevelAllowed(i,n.restrictedLevels)&&i<=e}));return this.clientRect=null,t.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)},o.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},o.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},o.getDimensions=function(){if(this.clientRect)return this.clientRect;var t=this.media,e={width:0,height:0};if(t){var n=t.getBoundingClientRect();e.width=n.width,e.height=n.height,e.width||e.height||(e.width=n.right-n.left||t.width||0,e.height=n.bottom-n.top||t.height||0)}return this.clientRect=e,e},t.isLevelAllowed=function(t,e){return void 0===e&&(e=[]),-1===e.indexOf(t)},t.getMaxLevelByMediaSize=function(t,e,n){if(!t||!t.length)return-1;for(var r,i,a=t.length-1,o=0;o<t.length;o+=1){var s=t[o];if((s.width>=e||s.height>=n)&&(r=s,!(i=t[o+1])||r.width!==i.width||r.height!==i.height)){a=o;break}}return a},e=t,a=[{key:"contentScaleFactor",get:function(){var t=1;try{t=self.devicePixelRatio}catch(t){}return t}}],(n=[{key:"mediaWidth",get:function(){return this.getDimensions().width*t.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*t.contentScaleFactor}}])&&i(e.prototype,n),a&&i(e,a),t}();e.default=a},"./src/controller/eme-controller.ts":
/*!******************************************!*\
	  !*** ./src/controller/eme-controller.ts ***!
	  \******************************************/
/*! exports provided: default */function(t,e,n){n.r(e);var r=n(/*! ../events */"./src/events.ts"),i=n(/*! ../errors */"./src/errors.ts"),a=n(/*! ../utils/logger */"./src/utils/logger.ts"),o=n(/*! ../utils/mediakeys-helper */"./src/utils/mediakeys-helper.ts");function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var l=function(){function t(t){this.hls=void 0,this._widevineLicenseUrl=void 0,this._licenseXhrSetup=void 0,this._licenseResponseCallback=void 0,this._emeEnabled=void 0,this._requestMediaKeySystemAccess=void 0,this._drmSystemOptions=void 0,this._config=void 0,this._mediaKeysList=[],this._media=null,this._hasSetMediaKeys=!1,this._requestLicenseFailureCount=0,this.mediaKeysPromise=null,this._onMediaEncrypted=this.onMediaEncrypted.bind(this),this.hls=t,this._config=t.config,this._widevineLicenseUrl=this._config.widevineLicenseUrl,this._licenseXhrSetup=this._config.licenseXhrSetup,this._licenseResponseCallback=this._config.licenseResponseCallback,this._emeEnabled=this._config.emeEnabled,this._requestMediaKeySystemAccess=this._config.requestMediaKeySystemAccessFunc,this._drmSystemOptions=this._config.drmSystemOptions,this._registerListeners()}var e,n,l,u=t.prototype;return u.destroy=function(){this._unregisterListeners(),this.hls=this._onMediaEncrypted=null,this._requestMediaKeySystemAccess=null},u._registerListeners=function(){this.hls.on(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(r.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(r.Events.MANIFEST_PARSED,this.onManifestParsed,this)},u._unregisterListeners=function(){this.hls.off(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(r.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(r.Events.MANIFEST_PARSED,this.onManifestParsed,this)},u.getLicenseServerUrl=function(t){switch(t){case o.KeySystems.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+t+'"')},u._attemptKeySystemAccess=function(t,e,n){var r=this,i=function(t,e,n,r){switch(t){case o.KeySystems.WIDEVINE:return function(t,e,n){var r={audioCapabilities:[],videoCapabilities:[]};return t.forEach((function(t){r.audioCapabilities.push({contentType:'audio/mp4; codecs="'+t+'"',robustness:n.audioRobustness||""})})),e.forEach((function(t){r.videoCapabilities.push({contentType:'video/mp4; codecs="'+t+'"',robustness:n.videoRobustness||""})})),[r]}(e,n,r);default:throw new Error("Unknown key-system: "+t)}}(t,e,n,this._drmSystemOptions);a.logger.log("Requesting encrypted media key-system access");var s=this.requestMediaKeySystemAccess(t,i);this.mediaKeysPromise=s.then((function(e){return r._onMediaKeySystemAccessObtained(t,e)})),s.catch((function(e){a.logger.error('Failed to obtain key-system "'+t+'" access:',e)}))},u._onMediaKeySystemAccessObtained=function(t,e){var n=this;a.logger.log('Access for key-system "'+t+'" obtained');var r={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:e,mediaKeySystemDomain:t};this._mediaKeysList.push(r);var i=Promise.resolve().then((function(){return e.createMediaKeys()})).then((function(e){return r.mediaKeys=e,a.logger.log('Media-keys created for key-system "'+t+'"'),n._onMediaKeysCreated(),e}));return i.catch((function(t){a.logger.error("Failed to create media-keys:",t)})),i},u._onMediaKeysCreated=function(){var t=this;this._mediaKeysList.forEach((function(e){e.mediaKeysSession||(e.mediaKeysSession=e.mediaKeys.createSession(),t._onNewMediaKeySession(e.mediaKeysSession))}))},u._onNewMediaKeySession=function(t){var e=this;a.logger.log("New key-system session "+t.sessionId),t.addEventListener("message",(function(n){e._onKeySessionMessage(t,n.message)}),!1)},u._onKeySessionMessage=function(t,e){a.logger.log("Got EME message event, creating license request"),this._requestLicense(e,(function(e){a.logger.log("Received license data (length: "+(e?e.byteLength:e)+"), updating key-session"),t.update(e)}))},u.onMediaEncrypted=function(t){var e=this;if(a.logger.log('Media is encrypted using "'+t.initDataType+'" init data type'),!this.mediaKeysPromise)return a.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});var n=function(n){e._media&&(e._attemptSetMediaKeys(n),e._generateRequestWithPreferredKeySession(t.initDataType,t.initData))};this.mediaKeysPromise.then(n).catch(n)},u._attemptSetMediaKeys=function(t){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return a.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});a.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},u._generateRequestWithPreferredKeySession=function(t,e){var n=this,o=this._mediaKeysList[0];if(!o)return a.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(o.mediaKeysSessionInitialized)a.logger.warn("Key-Session already initialized but requested again");else{var s=o.mediaKeysSession;if(!s)return a.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!e)return a.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});a.logger.log('Generating key-session request for "'+t+'" init data type'),o.mediaKeysSessionInitialized=!0,s.generateRequest(t,e).then((function(){a.logger.debug("Key-session generation succeeded")})).catch((function(t){a.logger.error("Error generating key-session request:",t),n.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},u._createLicenseXhr=function(t,e,n){var r=new XMLHttpRequest;r.responseType="arraybuffer",r.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,r,t,e,n);var i=this._licenseXhrSetup;if(i)try{i.call(this.hls,r,t),i=void 0}catch(t){a.logger.error(t)}try{r.readyState||r.open("POST",t,!0),i&&i.call(this.hls,r,t)}catch(t){throw new Error("issue setting up KeySystem license XHR "+t)}return r},u._onLicenseRequestReadyStageChange=function(t,e,n,o){switch(t.readyState){case 4:if(200===t.status){this._requestLicenseFailureCount=0,a.logger.log("License request succeeded");var s=t.response,l=this._licenseResponseCallback;if(l)try{s=l.call(this.hls,t,e)}catch(t){a.logger.error(t)}o(s)}else{if(a.logger.error("License Request XHR failed ("+e+"). Status: "+t.status+" ("+t.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var u=3-this._requestLicenseFailureCount+1;a.logger.warn("Retrying license request, "+u+" attempts left"),this._requestLicense(n,o)}}},u._generateLicenseRequestChallenge=function(t,e){switch(t.mediaKeySystemDomain){case o.KeySystems.WIDEVINE:return e}throw new Error("unsupported key-system: "+t.mediaKeySystemDomain)},u._requestLicense=function(t,e){a.logger.log("Requesting content license for key-system");var n=this._mediaKeysList[0];if(!n)return a.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var o=this.getLicenseServerUrl(n.mediaKeySystemDomain),s=this._createLicenseXhr(o,t,e);a.logger.log("Sending license request to URL: "+o);var l=this._generateLicenseRequestChallenge(n,t);s.send(l)}catch(t){a.logger.error("Failure requesting DRM license: "+t),this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},u.onMediaAttached=function(t,e){if(this._emeEnabled){var n=e.media;this._media=n,n.addEventListener("encrypted",this._onMediaEncrypted)}},u.onMediaDetached=function(){var t=this._media,e=this._mediaKeysList;t&&(t.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(e.map((function(t){if(t.mediaKeysSession)return t.mediaKeysSession.close().catch((function(){}))}))).then((function(){return t.setMediaKeys(null)})).catch((function(){})))},u.onManifestParsed=function(t,e){if(this._emeEnabled){var n=e.levels.map((function(t){return t.audioCodec})).filter((function(t){return!!t})),r=e.levels.map((function(t){return t.videoCodec})).filter((function(t){return!!t}));this._attemptKeySystemAccess(o.KeySystems.WIDEVINE,n,r)}},e=t,(n=[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}])&&s(e.prototype,n),l&&s(e,l),t}();e.default=l},"./src/controller/fps-controller.ts":
/*!******************************************!*\
	  !*** ./src/controller/fps-controller.ts ***!
	  \******************************************/
/*! exports provided: default */function(t,e,n){n.r(e);var r=n(/*! ../events */"./src/events.ts"),i=n(/*! ../utils/logger */"./src/utils/logger.ts"),a=function(){function t(t){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=t,this.registerListeners()}var e=t.prototype;return e.setStreamController=function(t){this.streamController=t},e.registerListeners=function(){this.hls.on(r.Events.MEDIA_ATTACHING,this.onMediaAttaching,this)},e.unregisterListeners=function(){this.hls.off(r.Events.MEDIA_ATTACHING,this.onMediaAttaching)},e.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},e.onMediaAttaching=function(t,e){var n=this.hls.config;if(n.capLevelOnFPSDrop){var r=e.media instanceof self.HTMLVideoElement?e.media:null;this.media=r,r&&"function"==typeof r.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}},e.checkFPS=function(t,e,n){var a=performance.now();if(e){if(this.lastTime){var o=a-this.lastTime,s=n-this.lastDroppedFrames,l=e-this.lastDecodedFrames,u=1e3*s/o,c=this.hls;if(c.trigger(r.Events.FPS_DROP,{currentDropped:s,currentDecoded:l,totalDroppedFrames:n}),u>0&&s>c.config.fpsDroppedMonitoringThreshold*l){var d=c.currentLevel;i.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===c.autoLevelCapping||c.autoLevelCapping>=d)&&(d-=1,c.trigger(r.Events.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:c.currentLevel}),c.autoLevelCapping=d,this.streamController.nextLevelSwitch())}}this.lastTime=a,this.lastDroppedFrames=n,this.lastDecodedFrames=e}},e.checkFPSInterval=function(){var t=this.media;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},t}();e.default=a},"./src/controller/fragment-finders.ts":
/*!********************************************!*\
	  !*** ./src/controller/fragment-finders.ts ***!
	  \********************************************/
/*! exports provided: findFragmentByPDT, findFragmentByPTS, fragmentWithinToleranceTest, pdtWithinToleranceTest, findFragWithCC */function(t,e,n){n.r(e),n.d(e,"findFragmentByPDT",(function(){return a})),n.d(e,"findFragmentByPTS",(function(){return o})),n.d(e,"fragmentWithinToleranceTest",(function(){return s})),n.d(e,"pdtWithinToleranceTest",(function(){return l})),n.d(e,"findFragWithCC",(function(){return u}));var r=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),i=n(/*! ../utils/binary-search */"./src/utils/binary-search.ts");function a(t,e,n){if(null===e||!Array.isArray(t)||!t.length||!Object(r.isFiniteNumber)(e))return null;if(e<(t[0].programDateTime||0))return null;if(e>=(t[t.length-1].endProgramDateTime||0))return null;n=n||0;for(var i=0;i<t.length;++i){var a=t[i];if(l(e,n,a))return a}return null}function o(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var a=null;if(t?a=e[t.sn-e[0].sn+1]||null:0===n&&0===e[0].start&&(a=e[0]),a&&0===s(n,r,a))return a;var o=i.default.search(e,s.bind(null,n,r));return o||a}function s(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0);var r=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=t?1:n.start-r>t&&n.start?-1:0}function l(t,e,n){var r=1e3*Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0));return(n.endProgramDateTime||0)-r>t}function u(t,e){return i.default.search(t,(function(t){return t.cc<e?1:t.cc>e?-1:0}))}},"./src/controller/fragment-tracker.ts":
/*!********************************************!*\
	  !*** ./src/controller/fragment-tracker.ts ***!
	  \********************************************/
/*! exports provided: FragmentState, FragmentTracker */function(t,e,n){n.r(e),n.d(e,"FragmentState",(function(){return r})),n.d(e,"FragmentTracker",(function(){return o}));var r,i=n(/*! ../events */"./src/events.ts"),a=n(/*! ../types/loader */"./src/types/loader.ts");!function(t){t.NOT_LOADED="NOT_LOADED",t.BACKTRACKED="BACKTRACKED",t.APPENDING="APPENDING",t.PARTIAL="PARTIAL",t.OK="OK"}(r||(r={}));var o=function(){function t(t){this.activeFragment=null,this.activeParts=null,this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=t,this._registerListeners()}var e=t.prototype;return e._registerListeners=function(){var t=this.hls;t.on(i.Events.BUFFER_APPENDED,this.onBufferAppended,this),t.on(i.Events.FRAG_BUFFERED,this.onFragBuffered,this),t.on(i.Events.FRAG_LOADED,this.onFragLoaded,this)},e._unregisterListeners=function(){var t=this.hls;t.off(i.Events.BUFFER_APPENDED,this.onBufferAppended,this),t.off(i.Events.FRAG_BUFFERED,this.onFragBuffered,this),t.off(i.Events.FRAG_LOADED,this.onFragLoaded,this)},e.destroy=function(){this._unregisterListeners(),this.fragments=this.timeRanges=null},e.getAppendedFrag=function(t,e){if(e===a.PlaylistLevelType.MAIN){var n=this.activeFragment,r=this.activeParts;if(!n)return null;if(r)for(var i=r.length;i--;){var o=r[i],s=o?o.end:n.appendedPTS;if(o.start<=t&&void 0!==s&&t<=s)return i>9&&(this.activeParts=r.slice(i-9)),o}else if(n.start<=t&&void 0!==n.appendedPTS&&t<=n.appendedPTS)return n}return this.getBufferedFrag(t,e)},e.getBufferedFrag=function(t,e){for(var n=this.fragments,r=Object.keys(n),i=r.length;i--;){var a=n[r[i]];if((null==a?void 0:a.body.type)===e&&a.buffered){var o=a.body;if(o.start<=t&&t<=o.end)return o}}return null},e.detectEvictedFragments=function(t,e,n){var r=this;Object.keys(this.fragments).forEach((function(i){var a=r.fragments[i];if(a)if(a.buffered){var o=a.range[t];o&&o.time.some((function(t){var n=!r.isTimeBuffered(t.startPTS,t.endPTS,e);return n&&r.removeFragment(a.body),n}))}else a.body.type===n&&r.removeFragment(a.body)}))},e.detectPartialFragments=function(t){var e=this,n=this.timeRanges,r=t.frag,i=t.part;if(n&&"initSegment"!==r.sn){var a=l(r),o=this.fragments[a];o&&(Object.keys(n).forEach((function(t){var a=r.elementaryStreams[t];if(a){var s=n[t],l=null!==i||!0===a.partial;o.range[t]=e.getBufferedTimes(r,i,l,s)}})),o.backtrack=o.loaded=null,Object.keys(o.range).length?o.buffered=!0:this.removeFragment(o.body))}},e.fragBuffered=function(t){var e=l(t),n=this.fragments[e];n&&(n.backtrack=n.loaded=null,n.buffered=!0)},e.getBufferedTimes=function(t,e,n,r){for(var i={time:[],partial:n},a=e?e.start:t.start,o=e?e.end:t.end,s=t.minEndPTS||o,l=t.maxStartPTS||a,u=0;u<r.length;u++){var c=r.start(u)-this.bufferPadding,d=r.end(u)+this.bufferPadding;if(l>=c&&s<=d){i.time.push({startPTS:Math.max(a,r.start(u)),endPTS:Math.min(o,r.end(u))});break}if(a<d&&o>c)i.partial=!0,i.time.push({startPTS:Math.max(a,r.start(u)),endPTS:Math.min(o,r.end(u))});else if(o<=c)break}return i},e.getPartialFragment=function(t){var e,n,r,i=null,a=0,o=this.bufferPadding,l=this.fragments;return Object.keys(l).forEach((function(u){var c=l[u];c&&s(c)&&(n=c.body.start-o,r=c.body.end+o,t>=n&&t<=r&&(e=Math.min(t-n,r-t),a<=e&&(i=c.body,a=e)))})),i},e.getState=function(t){var e=l(t),n=this.fragments[e];return n?n.buffered?s(n)?r.PARTIAL:r.OK:n.backtrack?r.BACKTRACKED:r.APPENDING:r.NOT_LOADED},e.backtrack=function(t,e){var n=l(t),r=this.fragments[n];if(!r||r.backtrack)return null;var i=r.backtrack=e||r.loaded;return r.loaded=null,i},e.getBacktrackData=function(t){var e=l(t),n=this.fragments[e];if(n){var r,i=n.backtrack;if(null!=i&&null!==(r=i.payload)&&void 0!==r&&r.byteLength)return i;this.removeFragment(t)}return null},e.isTimeBuffered=function(t,e,n){for(var r,i,a=0;a<n.length;a++){if(r=n.start(a)-this.bufferPadding,i=n.end(a)+this.bufferPadding,t>=r&&e<=i)return!0;if(e<=r)return!1}return!1},e.onFragLoaded=function(t,e){var n=e.frag,r=e.part;if("initSegment"!==n.sn&&!n.bitrateTest&&!r){var i=l(n);this.fragments[i]={body:n,loaded:e,backtrack:null,buffered:!1,range:Object.create(null)}}},e.onBufferAppended=function(t,e){var n=this,r=e.frag,i=e.part,o=e.timeRanges;if(r.type===a.PlaylistLevelType.MAIN)if(this.activeFragment=r,i){var s=this.activeParts;s||(this.activeParts=s=[]),s.push(i)}else this.activeParts=null;this.timeRanges=o,Object.keys(o).forEach((function(t){var e=o[t];if(n.detectEvictedFragments(t,e),!i)for(var a=0;a<e.length;a++)r.appendedPTS=Math.max(e.end(a),r.appendedPTS||0)}))},e.onFragBuffered=function(t,e){this.detectPartialFragments(e)},e.hasFragment=function(t){var e=l(t);return!!this.fragments[e]},e.removeFragmentsInRange=function(t,e,n){var r=this;Object.keys(this.fragments).forEach((function(i){var a=r.fragments[i];if(a&&a.buffered){var o=a.body;o.type===n&&o.start<e&&o.end>t&&r.removeFragment(o)}}))},e.removeFragment=function(t){var e=l(t);t.stats.loaded=0,t.clearElementaryStreamInfo(),delete this.fragments[e]},e.removeAllFragments=function(){this.fragments=Object.create(null),this.activeFragment=null,this.activeParts=null},t}();function s(t){var e,n;return t.buffered&&((null===(e=t.range.video)||void 0===e?void 0:e.partial)||(null===(n=t.range.audio)||void 0===n?void 0:n.partial))}function l(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn}},"./src/controller/gap-controller.ts":
/*!******************************************!*\
	  !*** ./src/controller/gap-controller.ts ***!
	  \******************************************/
/*! exports provided: STALL_MINIMUM_DURATION_MS, MAX_START_GAP_JUMP, SKIP_BUFFER_HOLE_STEP_SECONDS, SKIP_BUFFER_RANGE_START, default */function(t,e,n){n.r(e),n.d(e,"STALL_MINIMUM_DURATION_MS",(function(){return s})),n.d(e,"MAX_START_GAP_JUMP",(function(){return l})),n.d(e,"SKIP_BUFFER_HOLE_STEP_SECONDS",(function(){return u})),n.d(e,"SKIP_BUFFER_RANGE_START",(function(){return c})),n.d(e,"default",(function(){return d}));var r=n(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.ts"),i=n(/*! ../errors */"./src/errors.ts"),a=n(/*! ../events */"./src/events.ts"),o=n(/*! ../utils/logger */"./src/utils/logger.ts"),s=250,l=2,u=.1,c=.05,d=function(){function t(t,e,n,r){this.config=void 0,this.media=void 0,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=t,this.media=e,this.fragmentTracker=n,this.hls=r}var e=t.prototype;return e.destroy=function(){this.hls=this.fragmentTracker=this.media=null},e.poll=function(t){var e=this.config,n=this.media,i=this.stalled,a=n.currentTime,u=n.seeking,c=this.seeking&&!u,d=!this.seeking&&u;if(this.seeking=u,a===t){if((d||c)&&(this.stalled=null),!n.paused&&!n.ended&&0!==n.playbackRate&&r.BufferHelper.getBuffered(n).length){var h=r.BufferHelper.bufferInfo(n,a,0),f=h.len>0,p=h.nextStart||0;if(f||p){if(u){var g=h.len>l,v=!p||p-a>l&&!this.fragmentTracker.getPartialFragment(a);if(g||v)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var m,y=Math.max(p,h.start||0)-a,b=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,S=(null==b||null===(m=b.details)||void 0===m?void 0:m.live)?2*b.details.targetduration:l;if(y>0&&y<=S)return void this._trySkipBufferHole(null)}var E=self.performance.now();if(null!==i){var T=E-i;!u&&T>=s&&this._reportStall(h.len);var _=r.BufferHelper.bufferInfo(n,a,e.maxBufferHole);this._tryFixBufferStall(_,T)}else this.stalled=E}}}else if(this.moved=!0,null!==i){if(this.stallReported){var x=self.performance.now()-i;o.logger.warn("playback not stuck anymore @"+a+", after "+Math.round(x)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},e._tryFixBufferStall=function(t,e){var n=this.config,r=this.fragmentTracker,i=this.media.currentTime,a=r.getPartialFragment(i);a&&this._trySkipBufferHole(a)||t.len>n.maxBufferHole&&e>1e3*n.highBufferWatchdogPeriod&&(o.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},e._reportStall=function(t){var e=this.hls,n=this.media;this.stallReported||(this.stallReported=!0,o.logger.warn("Playback stalling at @"+n.currentTime+" due to low buffer (buffer="+t+")"),e.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:t}))},e._trySkipBufferHole=function(t){for(var e=this.config,n=this.hls,s=this.media,l=s.currentTime,d=0,h=r.BufferHelper.getBuffered(s),f=0;f<h.length;f++){var p=h.start(f);if(l+e.maxBufferHole>=d&&l<p){var g=Math.max(p+c,s.currentTime+u);return o.logger.warn("skipping hole, adjusting currentTime from "+l+" to "+g),this.moved=!0,this.stalled=null,s.currentTime=g,t&&n.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+l+" to "+g,frag:t}),g}d=h.end(f)}return 0},e._tryNudgeBuffer=function(){var t=this.config,e=this.hls,n=this.media,r=n.currentTime,s=(this.nudgeRetry||0)+1;if(this.nudgeRetry=s,s<t.nudgeMaxRetry){var l=r+s*t.nudgeOffset;o.logger.warn("Nudging 'currentTime' from "+r+" to "+l),n.currentTime=l,e.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else o.logger.error("Playhead still not moving while enough data buffered @"+r+" after "+t.nudgeMaxRetry+" nudges"),e.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},t}()},"./src/controller/id3-track-controller.ts":
/*!************************************************!*\
	  !*** ./src/controller/id3-track-controller.ts ***!
	  \************************************************/
/*! exports provided: default */function(t,e,n){n.r(e);var r=n(/*! ../events */"./src/events.ts"),i=n(/*! ../utils/texttrack-utils */"./src/utils/texttrack-utils.ts"),a=n(/*! ../demux/id3 */"./src/demux/id3.ts"),o=function(){function t(t){this.hls=void 0,this.id3Track=null,this.media=null,this.hls=t,this._registerListeners()}var e=t.prototype;return e.destroy=function(){this._unregisterListeners()},e._registerListeners=function(){var t=this.hls;t.on(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(r.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.on(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},e._unregisterListeners=function(){var t=this.hls;t.off(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(r.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.off(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},e.onMediaAttached=function(t,e){this.media=e.media},e.onMediaDetaching=function(){this.id3Track&&(Object(i.clearCurrentCues)(this.id3Track),this.id3Track=null,this.media=null)},e.getID3Track=function(t){if(this.media){for(var e=0;e<t.length;e++){var n=t[e];if("metadata"===n.kind&&"id3"===n.label)return Object(i.sendAddTrackEvent)(n,this.media),n}return this.media.addTextTrack("metadata","id3")}},e.onFragParsingMetadata=function(t,e){if(this.media){var n=e.frag,r=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var i=self.WebKitDataCue||self.VTTCue||self.TextTrackCue,o=0;o<r.length;o++){var s=a.getID3Frames(r[o].data);if(s){var l=r[o].pts,u=o<r.length-1?r[o+1].pts:n.end;u-l<=0&&(u=l+.25);for(var c=0;c<s.length;c++){var d=s[c];if(!a.isTimeStampFrame(d)){var h=new i(l,u,"");h.value=d,this.id3Track.addCue(h)}}}}}},e.onBufferFlushing=function(t,e){var n=e.startOffset,r=e.endOffset,a=e.type;if(!a||"audio"===a){var o=this.id3Track;o&&Object(i.removeCuesInRange)(o,n,r)}},t}();e.default=o},"./src/controller/latency-controller.ts":
/*!**********************************************!*\
	  !*** ./src/controller/latency-controller.ts ***!
	  \**********************************************/
/*! exports provided: default */function(t,e,n){n.r(e),n.d(e,"default",(function(){return s}));var r=n(/*! ../errors */"./src/errors.ts"),i=n(/*! ../events */"./src/events.ts"),a=n(/*! ../utils/logger */"./src/utils/logger.ts");function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(t){var e=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return e.timeupdate()},this.hls=t,this.config=t.config,this.registerListeners()}var e,n,s,l=t.prototype;return l.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},l.registerListeners=function(){this.hls.on(i.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(i.Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(i.Events.ERROR,this.onError,this)},l.unregisterListeners=function(){this.hls.off(i.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(i.Events.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(i.Events.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(i.Events.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(i.Events.ERROR,this.onError)},l.onMediaAttached=function(t,e){this.media=e.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},l.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},l.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},l.onLevelUpdated=function(t,e){var n=e.details;this.levelDetails=n,n.advanced&&this.timeupdate(),!n.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},l.onError=function(t,e){e.details===r.ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,a.logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},l.timeupdate=function(){var t=this.media,e=this.levelDetails;if(t&&e){this.currentTime=t.currentTime;var n=this.computeLatency();if(null!==n){this._latency=n;var r=this.config,i=r.lowLatencyMode,a=r.maxLiveSyncPlaybackRate;if(i&&1!==a){var o=this.targetLatency;if(null!==o){var s=n-o,l=s<Math.min(this.maxLatency,o+e.targetduration);if(e.live&&l&&s>.05&&this.forwardBufferLength>1){var u=Math.min(2,Math.max(1,a)),c=Math.round(2/(1+Math.exp(-.75*s-this.edgeStalled))*20)/20;t.playbackRate=Math.min(u,Math.max(1,c))}else 1!==t.playbackRate&&0!==t.playbackRate&&(t.playbackRate=1)}}}}},l.estimateLiveEdge=function(){var t=this.levelDetails;return null===t?null:t.edge+t.age},l.computeLatency=function(){var t=this.estimateLiveEdge();return null===t?null:t-this.currentTime},e=t,(n=[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var t=this.config,e=this.levelDetails;return void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:e?t.liveMaxLatencyDurationCount*e.targetduration:0}},{key:"targetLatency",get:function(){var t=this.levelDetails;if(null===t)return null;var e=t.holdBack,n=t.partHoldBack,r=t.targetduration,i=this.config,a=i.liveSyncDuration,o=i.liveSyncDurationCount,s=i.lowLatencyMode,l=this.hls.userConfig,u=s&&n||e;(l.liveSyncDuration||l.liveSyncDurationCount||0===u)&&(u=void 0!==a?a:o*r);var c=r;return u+Math.min(1*this.stallCount,c)}},{key:"liveSyncPosition",get:function(){var t=this.estimateLiveEdge(),e=this.targetLatency,n=this.levelDetails;if(null===t||null===e||null===n)return null;var r=n.edge,i=t-e-this.edgeStalled,a=r-n.totalduration,o=r-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(a,i),o)}},{key:"drift",get:function(){var t=this.levelDetails;return null===t?1:t.drift}},{key:"edgeStalled",get:function(){var t=this.levelDetails;if(null===t)return 0;var e=3*(this.config.lowLatencyMode&&t.partTarget||t.targetduration);return Math.max(t.age-e,0)}},{key:"forwardBufferLength",get:function(){var t=this.media,e=this.levelDetails;if(!t||!e)return 0;var n=t.buffered.length;return n?t.buffered.end(n-1):e.edge-this.currentTime}}])&&o(e.prototype,n),s&&o(e,s),t}()},"./src/controller/level-controller.ts":
/*!********************************************!*\
	  !*** ./src/controller/level-controller.ts ***!
	  \********************************************/
/*! exports provided: default */function(t,e,n){n.r(e),n.d(e,"default",(function(){return p}));var r=n(/*! ../types/level */"./src/types/level.ts"),i=n(/*! ../events */"./src/events.ts"),a=n(/*! ../errors */"./src/errors.ts"),o=n(/*! ../utils/codecs */"./src/utils/codecs.ts"),s=n(/*! ./level-helper */"./src/controller/level-helper.ts"),l=n(/*! ./base-playlist-controller */"./src/controller/base-playlist-controller.ts"),u=n(/*! ../types/loader */"./src/types/loader.ts");function c(){return(c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),p=function(t){var e,n;function l(e){var n;return(n=t.call(this,e,"[level-controller]")||this)._levels=[],n._firstLevel=-1,n._startLevel=void 0,n.currentLevelIndex=-1,n.manualLevelIndex=-1,n.onParsedComplete=void 0,n._registerListeners(),n}n=t,(e=l).prototype=Object.create(n.prototype),e.prototype.constructor=e,h(e,n);var p,g,v,m=l.prototype;return m._registerListeners=function(){var t=this.hls;t.on(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(i.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.on(i.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(i.Events.FRAG_LOADED,this.onFragLoaded,this),t.on(i.Events.ERROR,this.onError,this)},m._unregisterListeners=function(){var t=this.hls;t.off(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(i.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.off(i.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(i.Events.FRAG_LOADED,this.onFragLoaded,this),t.off(i.Events.ERROR,this.onError,this)},m.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,t.prototype.destroy.call(this)},m.startLoad=function(){this._levels.forEach((function(t){t.loadError=0})),t.prototype.startLoad.call(this)},m.onManifestLoaded=function(t,e){var n,l,u=[],c=[],d=[],h={},p=!1,g=!1,v=!1;if(e.levels.forEach((function(t){var e=t.attrs;p=p||!(!t.width||!t.height),g=g||!!t.videoCodec,v=v||!!t.audioCodec,f&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0);var n=t.bitrate+"-"+t.attrs.RESOLUTION+"-"+t.attrs.CODECS;(l=h[n])?l.url.push(t.url):(l=new r.Level(t),h[n]=l,u.push(l)),e&&(e.AUDIO&&Object(s.addGroupId)(l,"audio",e.AUDIO),e.SUBTITLES&&Object(s.addGroupId)(l,"text",e.SUBTITLES))})),(p||g)&&v&&(u=u.filter((function(t){var e=t.videoCodec,n=t.width,r=t.height;return!!e||!(!n||!r)}))),u=u.filter((function(t){var e=t.audioCodec,n=t.videoCodec;return(!e||Object(o.isCodecSupportedInMp4)(e,"audio"))&&(!n||Object(o.isCodecSupportedInMp4)(n,"video"))})),e.audioTracks&&(c=e.audioTracks.filter((function(t){return!t.audioCodec||Object(o.isCodecSupportedInMp4)(t.audioCodec,"audio")})),Object(s.assignTrackIdsByGroup)(c)),e.subtitles&&(d=e.subtitles,Object(s.assignTrackIdsByGroup)(d)),u.length>0){n=u[0].bitrate,u.sort((function(t,e){return t.bitrate-e.bitrate})),this._levels=u;for(var m=0;m<u.length;m++)if(u[m].bitrate===n){this._firstLevel=m,this.log("manifest loaded, "+u.length+" level(s) found, first bitrate: "+n);break}var y=v&&!g,b={levels:u,audioTracks:c,subtitleTracks:d,firstLevel:this._firstLevel,stats:e.stats,audio:v,video:g,altAudio:!y&&c.some((function(t){return!!t.url}))};this.hls.trigger(i.Events.MANIFEST_PARSED,b),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(i.Events.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:e.url,reason:"no level with compatible codecs found in manifest"})},m.onError=function(e,n){if(t.prototype.onError.call(this,e,n),!n.fatal){var r=n.context,i=this._levels[this.currentLevelIndex];if(r&&(r.type===u.PlaylistContextType.AUDIO_TRACK&&i.audioGroupIds&&r.groupId===i.audioGroupIds[i.urlId]||r.type===u.PlaylistContextType.SUBTITLE_TRACK&&i.textGroupIds&&r.groupId===i.textGroupIds[i.urlId]))this.redundantFailover(this.currentLevelIndex);else{var o,s=!1,l=!0;switch(n.details){case a.ErrorDetails.FRAG_LOAD_ERROR:case a.ErrorDetails.FRAG_LOAD_TIMEOUT:case a.ErrorDetails.KEY_LOAD_ERROR:case a.ErrorDetails.KEY_LOAD_TIMEOUT:if(n.frag){var c=this._levels[n.frag.level];c?(c.fragmentError++,c.fragmentError>this.hls.config.fragLoadingMaxRetry&&(o=n.frag.level)):o=n.frag.level}break;case a.ErrorDetails.LEVEL_LOAD_ERROR:case a.ErrorDetails.LEVEL_LOAD_TIMEOUT:r&&(r.deliveryDirectives&&(l=!1),o=r.level),s=!0;break;case a.ErrorDetails.REMUX_ALLOC_ERROR:o=n.level,s=!0}void 0!==o&&this.recoverLevel(n,o,s,l)}}},m.recoverLevel=function(t,e,n,r){var i=t.details,a=this._levels[e];if(a.loadError++,n){if(!this.retryLoadingOrFail(t))return void(this.currentLevelIndex=-1);t.levelRetry=!0}if(r){var o=a.url.length;if(o>1&&a.loadError<o)t.levelRetry=!0,this.redundantFailover(e);else if(-1===this.manualLevelIndex){var s=0===e?this._levels.length-1:e-1;this.currentLevelIndex!==s&&0===this._levels[s].loadError&&(this.warn(i+": switch to "+s),t.levelRetry=!0,this.hls.nextAutoLevel=s)}}},m.redundantFailover=function(t){var e=this._levels[t],n=e.url.length;if(n>1){var r=(e.urlId+1)%n;this.warn("Switching to redundant URL-id "+r),this._levels.forEach((function(t){t.urlId=r})),this.level=t}},m.onFragLoaded=function(t,e){var n=e.frag;if(void 0!==n&&n.type===u.PlaylistLevelType.MAIN){var r=this._levels[n.level];void 0!==r&&(r.fragmentError=0,r.loadError=0)}},m.onLevelLoaded=function(t,e){var n,r,i=e.level,a=e.details,o=this._levels[i];if(!o)return this.warn("Invalid level index "+i),void(null!==(r=e.deliveryDirectives)&&void 0!==r&&r.skip&&(a.deltaUpdateFailed=!0));i===this.currentLevelIndex?(0===o.fragmentError&&(o.loadError=0,this.retryCount=0),this.playlistLoaded(i,e,o.details)):null!==(n=e.deliveryDirectives)&&void 0!==n&&n.skip&&(a.deltaUpdateFailed=!0)},m.onAudioTrackSwitched=function(t,e){var n=this.hls.levels[this.currentLevelIndex];if(n&&n.audioGroupIds){for(var r=-1,i=this.hls.audioTracks[e.id].groupId,a=0;a<n.audioGroupIds.length;a++)if(n.audioGroupIds[a]===i){r=a;break}r!==n.urlId&&(n.urlId=r,this.startLoad())}},m.loadPlaylist=function(t){var e=this.currentLevelIndex,n=this._levels[e];if(this.canLoad&&n&&n.url.length>0){var r=n.urlId,a=n.url[r];if(t)try{a=t.addDirectives(a)}catch(t){this.warn("Could not construct new URL with HLS Delivery Directives: "+t)}this.log("Attempt loading level index "+e+(t?" at sn "+t.msn+" part "+t.part:"")+" with URL-id "+r+" "+a),this.clearTimer(),this.hls.trigger(i.Events.LEVEL_LOADING,{url:a,level:e,id:r,deliveryDirectives:t||null})}},m.removeLevel=function(t,e){var n=function(t,n){return n!==e},r=this._levels.filter((function(r,i){return i!==t||r.url.length>1&&void 0!==e&&(r.url=r.url.filter(n),r.audioGroupIds&&(r.audioGroupIds=r.audioGroupIds.filter(n)),r.textGroupIds&&(r.textGroupIds=r.textGroupIds.filter(n)),r.urlId=0,!0)})).map((function(t,e){var n=t.details;return null!=n&&n.fragments&&n.fragments.forEach((function(t){t.level=e})),t}));this._levels=r,this.hls.trigger(i.Events.LEVELS_UPDATED,{levels:r})},p=l,(g=[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e,n=this._levels;if(0!==n.length&&(this.currentLevelIndex!==t||null===(e=n[t])||void 0===e||!e.details)){if(t<0||t>=n.length){var r=t<0;if(this.hls.trigger(i.Events.ERROR,{type:a.ErrorTypes.OTHER_ERROR,details:a.ErrorDetails.LEVEL_SWITCH_ERROR,level:t,fatal:r,reason:"invalid level idx"}),r)return;t=Math.min(t,n.length-1)}this.clearTimer();var o=this.currentLevelIndex,s=n[o],l=n[t];this.log("switching to level "+t+" from "+o),this.currentLevelIndex=t;var u=c({},l,{level:t,maxBitrate:l.maxBitrate,uri:l.uri,urlId:l.urlId});delete u._urlId,this.hls.trigger(i.Events.LEVEL_SWITCHING,u);var d=l.details;if(!d||d.live){var h=this.switchParams(l.uri,null==s?void 0:s.details);this.loadPlaylist(h)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}])&&d(p.prototype,g),v&&d(p,v),l}(l.default)},"./src/controller/level-helper.ts":
/*!****************************************!*\
	  !*** ./src/controller/level-helper.ts ***!
	  \****************************************/
/*! exports provided: addGroupId, assignTrackIdsByGroup, updatePTS, updateFragPTSDTS, mergeDetails, mapPartIntersection, mapFragmentIntersection, adjustSliding, addSliding, computeReloadInterval, getFragmentWithSN, getPartWith */function(t,e,n){n.r(e),n.d(e,"addGroupId",(function(){return a})),n.d(e,"assignTrackIdsByGroup",(function(){return o})),n.d(e,"updatePTS",(function(){return s})),n.d(e,"updateFragPTSDTS",(function(){return u})),n.d(e,"mergeDetails",(function(){return c})),n.d(e,"mapPartIntersection",(function(){return d})),n.d(e,"mapFragmentIntersection",(function(){return h})),n.d(e,"adjustSliding",(function(){return f})),n.d(e,"addSliding",(function(){return p})),n.d(e,"computeReloadInterval",(function(){return g})),n.d(e,"getFragmentWithSN",(function(){return v})),n.d(e,"getPartWith",(function(){return m}));var r=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),i=n(/*! ../utils/logger */"./src/utils/logger.ts");function a(t,e,n){switch(e){case"audio":t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds.push(n);break;case"text":t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds.push(n)}}function o(t){var e={};t.forEach((function(t){var n=t.groupId||"";t.id=e[n]=e[n]||0,e[n]++}))}function s(t,e,n){l(t[e],t[n])}function l(t,e){var n=e.startPTS;if(Object(r.isFiniteNumber)(n)){var i,a=0;e.sn>t.sn?(a=n-t.start,i=t):(a=t.start-n,i=e),i.duration!==a&&(i.duration=a)}else e.sn>t.sn?t.cc===e.cc&&t.minEndPTS?e.start=t.start+(t.minEndPTS-t.start):e.start=t.start+t.duration:e.start=Math.max(t.start-e.duration,0)}function u(t,e,n,a,o,s){a-n<=0&&(i.logger.warn("Fragment should have a positive duration",e),a=n+e.duration,s=o+e.duration);var u=n,c=a,d=e.startPTS,h=e.endPTS;if(Object(r.isFiniteNumber)(d)){var f=Math.abs(d-n);Object(r.isFiniteNumber)(e.deltaPTS)?e.deltaPTS=Math.max(f,e.deltaPTS):e.deltaPTS=f,u=Math.max(n,d),n=Math.min(n,d),o=Math.min(o,e.startDTS),c=Math.min(a,h),a=Math.max(a,h),s=Math.max(s,e.endDTS)}e.duration=a-n;var p=n-e.start;e.appendedPTS=a,e.start=e.startPTS=n,e.maxStartPTS=u,e.startDTS=o,e.endPTS=a,e.minEndPTS=c,e.endDTS=s;var g,v=e.sn;if(!t||v<t.startSN||v>t.endSN)return 0;var m=v-t.startSN,y=t.fragments;for(y[m]=e,g=m;g>0;g--)l(y[g],y[g-1]);for(g=m;g<y.length-1;g++)l(y[g],y[g+1]);return t.fragmentHint&&l(y[y.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,p}function c(t,e){for(var n=null,a=t.fragments,o=a.length-1;o>=0;o--){var s=a[o].initSegment;if(s){n=s;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;var l,c=0;if(h(t,e,(function(t,i){var a;t.relurl&&(c=t.cc-i.cc),Object(r.isFiniteNumber)(t.startPTS)&&Object(r.isFiniteNumber)(t.endPTS)&&(i.start=i.startPTS=t.startPTS,i.startDTS=t.startDTS,i.appendedPTS=t.appendedPTS,i.maxStartPTS=t.maxStartPTS,i.endPTS=t.endPTS,i.endDTS=t.endDTS,i.minEndPTS=t.minEndPTS,i.duration=t.endPTS-t.startPTS,i.duration&&(l=i),e.PTSKnown=e.alignedSliding=!0),i.elementaryStreams=t.elementaryStreams,i.loader=t.loader,i.stats=t.stats,i.urlId=t.urlId,t.initSegment?(i.initSegment=t.initSegment,n=t.initSegment):i.initSegment&&i.initSegment.relurl!=(null===(a=n)||void 0===a?void 0:a.relurl)||(i.initSegment=n)})),e.skippedSegments&&(e.deltaUpdateFailed=e.fragments.some((function(t){return!t})),e.deltaUpdateFailed)){i.logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var p=e.skippedSegments;p--;)e.fragments.shift();e.startSN=e.fragments[0].sn,e.startCC=e.fragments[0].cc}var g=e.fragments;if(c){i.logger.warn("discontinuity sliding from playlist, take drift into account");for(var v=0;v<g.length;v++)g[v].cc+=c}e.skippedSegments&&(e.startCC=e.fragments[0].cc),d(t.partList,e.partList,(function(t,e){e.elementaryStreams=t.elementaryStreams,e.stats=t.stats})),l?u(e,l,l.startPTS,l.endPTS,l.startDTS,l.endDTS):f(t,e),g.length&&(e.totalduration=e.edge-g[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;var m=e.advancedDateTime;if(e.advanced&&m){var y=e.edge;e.driftStart||(e.driftStartTime=m,e.driftStart=y),e.driftEndTime=m,e.driftEnd=y}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime}function d(t,e,n){if(t&&e)for(var r=0,i=0,a=t.length;i<=a;i++){var o=t[i],s=e[i+r];o&&s&&o.index===s.index&&o.fragment.sn===s.fragment.sn?n(o,s):r--}}function h(t,e,n){for(var r=e.skippedSegments,i=Math.max(t.startSN,e.startSN)-e.startSN,a=(t.fragmentHint?1:0)+(r?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,o=e.startSN-t.startSN,s=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,u=i;u<=a;u++){var c=l[o+u],d=s[u];r&&!d&&u<r&&(d=e.fragments[u]=c),c&&d&&n(c,d)}}function f(t,e){var n=e.startSN+e.skippedSegments-t.startSN,r=t.fragments;n<0||n>=r.length||p(e,r[n].start)}function p(t,e){if(e){for(var n=t.fragments,r=t.skippedSegments;r<n.length;r++)n[r].start+=e;t.fragmentHint&&(t.fragmentHint.start+=e)}}function g(t,e){var n,r=1e3*t.levelTargetDuration,i=r/2,a=t.age,o=a>0&&a<3*r,s=e.loading.end-e.loading.start,l=t.availabilityDelay;if(!1===t.updated)if(o){var u=333*t.misses;n=Math.max(Math.min(i,2*s),u),t.availabilityDelay=(t.availabilityDelay||0)+n}else n=i;else o?(l=Math.min(l||r/2,a),t.availabilityDelay=l,n=l+r-a):n=r-s;return Math.round(n)}function v(t,e,n){if(!t||!t.details)return null;var r=t.details,i=r.fragments[e-r.startSN];return i||((i=r.fragmentHint)&&i.sn===e?i:e<r.startSN&&n&&n.sn===e?n:null)}function m(t,e,n){if(!t||!t.details)return null;var r=t.details.partList;if(r)for(var i=r.length;i--;){var a=r[i];if(a.index===n&&a.fragment.sn===e)return a}return null}},"./src/controller/stream-controller.ts":
/*!*********************************************!*\
	  !*** ./src/controller/stream-controller.ts ***!
	  \*********************************************/
/*! exports provided: default */function(t,e,n){n.r(e),n.d(e,"default",(function(){return y}));var r=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),i=n(/*! ./base-stream-controller */"./src/controller/base-stream-controller.ts"),a=n(/*! ../is-supported */"./src/is-supported.ts"),o=n(/*! ../events */"./src/events.ts"),s=n(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.ts"),l=n(/*! ./fragment-tracker */"./src/controller/fragment-tracker.ts"),u=n(/*! ../types/loader */"./src/types/loader.ts"),c=n(/*! ../loader/fragment */"./src/loader/fragment.ts"),d=n(/*! ../demux/transmuxer-interface */"./src/demux/transmuxer-interface.ts"),h=n(/*! ../types/transmuxer */"./src/types/transmuxer.ts"),f=n(/*! ./gap-controller */"./src/controller/gap-controller.ts"),p=n(/*! ../errors */"./src/errors.ts"),g=n(/*! ../utils/logger */"./src/utils/logger.ts");function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=function(t){var e,n;function y(e,n){var r;return(r=t.call(this,e,n,"[stream-controller]")||this).audioCodecSwap=!1,r.gapController=null,r.level=-1,r._forceStartLoad=!1,r.altAudio=!1,r.audioOnly=!1,r.fragPlaying=null,r.onvplaying=null,r.onvseeked=null,r.fragLastKbps=0,r.stalled=!1,r.couldBacktrack=!1,r.audioCodecSwitch=!1,r.videoBuffer=null,r._registerListeners(),r}n=t,(e=y).prototype=Object.create(n.prototype),e.prototype.constructor=e,m(e,n);var b,S,E,T=y.prototype;return T._registerListeners=function(){var t=this.hls;t.on(o.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(o.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(o.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(o.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.on(o.Events.LEVEL_LOADING,this.onLevelLoading,this),t.on(o.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.on(o.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.on(o.Events.ERROR,this.onError,this),t.on(o.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(o.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(o.Events.BUFFER_CREATED,this.onBufferCreated,this),t.on(o.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(o.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(o.Events.FRAG_BUFFERED,this.onFragBuffered,this)},T._unregisterListeners=function(){var t=this.hls;t.off(o.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(o.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(o.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(o.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.off(o.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.off(o.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.off(o.Events.ERROR,this.onError,this),t.off(o.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(o.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(o.Events.BUFFER_CREATED,this.onBufferCreated,this),t.off(o.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(o.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(o.Events.FRAG_BUFFERED,this.onFragBuffered,this)},T.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},T.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var r=n.startLevel;-1===r&&(n.config.testBandwidth?(r=0,this.bitrateTest=!0):r=n.nextAutoLevel),this.level=n.nextLoadLevel=r,this.loadedmetadata=!1}e>0&&-1===t&&(this.log("Override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=i.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this._forceStartLoad=!0,this.state=i.State.STOPPED},T.stopLoad=function(){this._forceStartLoad=!1,t.prototype.stopLoad.call(this)},T.doTick=function(){switch(this.state){case i.State.IDLE:this.doTickIdle();break;case i.State.WAITING_LEVEL:var t,e=this.levels,n=this.level,r=null==e||null===(t=e[n])||void 0===t?void 0:t.details;if(r&&(!r.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(r))break;this.state=i.State.IDLE;break}break;case i.State.FRAG_LOADING_WAITING_RETRY:var a,o=self.performance.now(),s=this.retryDate;(!s||o>=s||null!==(a=this.media)&&void 0!==a&&a.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.state=i.State.IDLE)}this.onTickEnd()},T.onTickEnd=function(){t.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},T.doTickIdle=function(){var t,e,n=this.hls,r=this.levelLastLoaded,a=this.levels,s=this.media,d=n.config,h=n.nextLoadLevel;if(null!==r&&(s||!this.startFragRequested&&d.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&a&&a[h]){var f=a[h];this.level=n.nextLoadLevel=h;var p=f.details;if(!p||this.state===i.State.WAITING_LEVEL||p.live&&this.levelLastLoaded!==h)this.state=i.State.WAITING_LEVEL;else{var g=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:s,u.PlaylistLevelType.MAIN);if(null!==g&&!(g.len>=this.getMaxBufferLength(f.maxBitrate))){if(this._streamEnded(g,p)){var v={};return this.altAudio&&(v.type="video"),this.hls.trigger(o.Events.BUFFER_EOS,v),void(this.state=i.State.ENDED)}var m=g.end,y=this.getNextFragment(m,p);if(this.couldBacktrack&&!this.fragPrevious&&y&&"initSegment"!==y.sn){var b=y.sn-p.startSN;b>1&&(y=p.fragments[b-1],this.fragmentTracker.removeFragment(y))}if(y&&this.fragmentTracker.getState(y)===l.FragmentState.OK&&this.nextLoadPosition>m){var S=this.audioOnly&&!this.altAudio?c.ElementaryStreamTypes.AUDIO:c.ElementaryStreamTypes.VIDEO;this.afterBufferFlushed(s,S,u.PlaylistLevelType.MAIN),y=this.getNextFragment(this.nextLoadPosition,p)}y&&(!y.initSegment||y.initSegment.data||this.bitrateTest||(y=y.initSegment),"identity"!==(null===(t=y.decryptdata)||void 0===t?void 0:t.keyFormat)||null!==(e=y.decryptdata)&&void 0!==e&&e.key?this.loadFragment(y,p,m):this.loadKey(y,p))}}}},T.loadFragment=function(e,n,r){var i,a=this.fragmentTracker.getState(e);if(this.fragCurrent=e,a===l.FragmentState.BACKTRACKED){var o=this.fragmentTracker.getBacktrackData(e);if(o)return this._handleFragmentLoadProgress(o),void this._handleFragmentLoadComplete(o);a=l.FragmentState.NOT_LOADED}a===l.FragmentState.NOT_LOADED||a===l.FragmentState.PARTIAL?"initSegment"===e.sn?this._loadInitSegment(e):this.bitrateTest?(e.bitrateTest=!0,this.log("Fragment "+e.sn+" of level "+e.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(e)):(this.startFragRequested=!0,t.prototype.loadFragment.call(this,e,n,r)):a===l.FragmentState.APPENDING?this.reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e):0===(null===(i=this.media)||void 0===i?void 0:i.buffered.length)&&this.fragmentTracker.removeAllFragments()},T.getAppendedFrag=function(t){var e=this.fragmentTracker.getAppendedFrag(t,u.PlaylistLevelType.MAIN);return e&&"fragment"in e?e.fragment:e},T.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,u.PlaylistLevelType.MAIN)},T.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.end+.5):null},T.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},T.nextLevelSwitch=function(){var t=this.levels,e=this.media;if(null!=e&&e.readyState){var n,r=this.getAppendedFrag(e.currentTime);if(r&&r.start>1&&this.flushMainBuffer(0,r.start-1),!e.paused&&t){var i=t[this.hls.nextLoadLevel],a=this.fragLastKbps;n=a&&this.fragCurrent?this.fragCurrent.duration*i.maxBitrate/(1e3*a)+1:0}else n=0;var o=this.getBufferedFrag(e.currentTime+n);if(o){var s=this.followingBufferedFrag(o);if(s){this.abortCurrentFrag();var l=s.maxStartPTS?s.maxStartPTS:s.start,u=s.duration,c=Math.max(o.end,l+Math.min(Math.max(u-this.config.maxFragLookUpTolerance,.5*u),.75*u));this.flushMainBuffer(c,Number.POSITIVE_INFINITY)}}}},T.abortCurrentFrag=function(){var t=this.fragCurrent;this.fragCurrent=null,null!=t&&t.loader&&t.loader.abort(),this.state===i.State.KEY_LOADING&&(this.state=i.State.IDLE),this.nextLoadPosition=this.getLoadPosition()},T.flushMainBuffer=function(e,n){t.prototype.flushMainBuffer.call(this,e,n,this.altAudio?"video":null)},T.onMediaAttached=function(e,n){t.prototype.onMediaAttached.call(this,e,n);var r=n.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),r.addEventListener("playing",this.onvplaying),r.addEventListener("seeked",this.onvseeked),this.gapController=new f.default(this.config,r,this.fragmentTracker,this.hls)},T.onMediaDetaching=function(){var e=this.media;e&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),t.prototype.onMediaDetaching.call(this)},T.onMediaPlaying=function(){this.tick()},T.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:null;Object(r.isFiniteNumber)(e)&&this.log("Media seeked to "+e.toFixed(3)),this.tick()},T.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(o.Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=this.stalled=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null},T.onManifestParsed=function(t,e){var n,r=!1,i=!1;e.levels.forEach((function(t){(n=t.audioCodec)&&(-1!==n.indexOf("mp4a.40.2")&&(r=!0),-1!==n.indexOf("mp4a.40.5")&&(i=!0))})),this.audioCodecSwitch=r&&i&&!Object(a.changeTypeSupported)(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1},T.onLevelLoading=function(t,e){var n=this.levels;if(n&&this.state===i.State.IDLE){var r=n[e.level];(!r.details||r.details.live&&this.levelLastLoaded!==e.level||this.waitForCdnTuneIn(r.details))&&(this.state=i.State.WAITING_LEVEL)}},T.onLevelLoaded=function(t,e){var n,r=this.levels,a=e.level,s=e.details,l=s.totalduration;if(r){this.log("Level "+a+" loaded ["+s.startSN+","+s.endSN+"], cc ["+s.startCC+", "+s.endCC+"] duration:"+l);var u=this.fragCurrent;!u||this.state!==i.State.FRAG_LOADING&&this.state!==i.State.FRAG_LOADING_WAITING_RETRY||u.level!==e.level&&u.loader&&(this.state=i.State.IDLE,u.loader.abort());var c=r[a],d=0;if(s.live||null!==(n=c.details)&&void 0!==n&&n.live){if(s.fragments[0]||(s.deltaUpdateFailed=!0),s.deltaUpdateFailed)return;d=this.alignPlaylists(s,c.details)}if(c.details=s,this.levelLastLoaded=a,this.hls.trigger(o.Events.LEVEL_UPDATED,{details:s,level:a}),this.state===i.State.WAITING_LEVEL){if(this.waitForCdnTuneIn(s))return;this.state=i.State.IDLE}this.startFragRequested?s.live&&this.synchronizeToLiveEdge(s):this.setStartPosition(s,d),this.tick()}else this.warn("Levels were reset while loading level "+a)},T._handleFragmentLoadProgress=function(t){var e,n=t.frag,r=t.part,i=t.payload,a=this.levels;if(a){var o=a[n.level],s=o.details;if(s){var l=o.videoCodec,c=s.PTSKnown||!s.live,f=null===(e=n.initSegment)||void 0===e?void 0:e.data,p=this._getAudioCodec(o),g=this.transmuxer=this.transmuxer||new d.default(this.hls,u.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),v=r?r.index:-1,m=-1!==v,y=new h.ChunkMetadata(n.level,n.sn,n.stats.chunkCount,i.byteLength,v,m),b=this.initPTS[n.cc];g.push(i,f,p,l,n,r,s.totalduration,c,y,b)}else this.warn("Dropping fragment "+n.sn+" of level "+n.level+" after level details were reset")}else this.warn("Levels were reset while fragment load was in progress. Fragment "+n.sn+" of level "+n.level+" will not be buffered")},T.onAudioTrackSwitching=function(t,e){var n=this.altAudio,r=!!e.url,i=e.id;if(!r){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var a=this.fragCurrent;null!=a&&a.loader&&(this.log("Switching to main audio track, cancel main fragment load"),a.loader.abort()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var s=this.hls;n&&s.trigger(o.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),s.trigger(o.Events.AUDIO_TRACK_SWITCHED,{id:i})}},T.onAudioTrackSwitched=function(t,e){var n=e.id,r=!!this.hls.audioTracks[n].url;if(r){var i=this.videoBuffer;i&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=r,this.tick()},T.onBufferCreated=function(t,e){var n,r,i=e.tracks,a=!1;for(var o in i){var s=i[o];if("main"===s.id){if(r=o,n=s,"video"===o){var l=i[o];l&&(this.videoBuffer=l.buffer)}}else a=!0}a&&n?(this.log("Alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media},T.onFragBuffered=function(t,e){var n=e.frag,r=e.part;if(!n||n.type===u.PlaylistLevelType.MAIN){if(this.fragContextChanged(n))return this.warn("Fragment "+n.sn+(r?" p: "+r.index:"")+" of level "+n.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===i.State.PARSED&&(this.state=i.State.IDLE));var a=r?r.stats:n.stats;this.fragLastKbps=Math.round(8*a.total/(a.buffering.end-a.loading.first)),"initSegment"!==n.sn&&(this.fragPrevious=n),this.fragBufferedComplete(n,r)}},T.onError=function(t,e){switch(e.details){case p.ErrorDetails.FRAG_LOAD_ERROR:case p.ErrorDetails.FRAG_LOAD_TIMEOUT:case p.ErrorDetails.KEY_LOAD_ERROR:case p.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(u.PlaylistLevelType.MAIN,e);break;case p.ErrorDetails.LEVEL_LOAD_ERROR:case p.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==i.State.ERROR&&(e.fatal?(this.warn(""+e.details),this.state=i.State.ERROR):e.levelRetry||this.state!==i.State.WAITING_LEVEL||(this.state=i.State.IDLE));break;case p.ErrorDetails.BUFFER_FULL_ERROR:if("main"===e.parent&&(this.state===i.State.PARSING||this.state===i.State.PARSED)){var n=!0,r=this.getFwdBufferInfo(this.media,u.PlaylistLevelType.MAIN);r&&r.len>.5&&(n=!this.reduceMaxBufferLength(r.len)),n&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}}},T.checkBuffer=function(){var t=this.media,e=this.gapController;if(t&&e&&t.readyState){var n=s.BufferHelper.getBuffered(t);!this.loadedmetadata&&n.length?(this.loadedmetadata=!0,this.seekToStartPos()):e.poll(this.lastCurrentTime),this.lastCurrentTime=t.currentTime}},T.onFragLoadEmergencyAborted=function(){this.state=i.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},T.onBufferFlushed=function(t,e){var n=e.type;if(n!==c.ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio){var r=(n===c.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(r,n,u.PlaylistLevelType.MAIN)}},T.onLevelsUpdated=function(t,e){this.levels=e.levels},T.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},T.seekToStartPos=function(){var t=this.media,e=t.currentTime,n=this.startPosition;if(n>=0&&e<n){if(t.seeking)return void g.logger.log("could not seek to "+n+", already seeking at "+e);var r=s.BufferHelper.getBuffered(t),i=(r.length?r.start(0):0)-n;i>0&&i<this.config.maxBufferHole&&(g.logger.log("adjusting start position by "+i+" to match buffer start"),n+=i,this.startPosition=n),this.log("seek to target start position "+n+" from current time "+e),t.currentTime=n}},T._getAudioCodec=function(t){var e=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&e&&(this.log("Swapping audio codec"),e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),e},T._loadBitrateTestFrag=function(t){var e=this;this._doFragLoad(t).then((function(n){var r=e.hls;if(n&&!r.nextLoadLevel&&!e.fragContextChanged(t)){e.fragLoadError=0,e.state=i.State.IDLE,e.startFragRequested=!1,e.bitrateTest=!1;var a=t.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),r.trigger(o.Events.FRAG_LOADED,n)}}))},T._handleTransmuxComplete=function(t){var e,n="main",a=this.hls,s=t.remuxResult,l=t.chunkMeta,u=this.getCurrentContext(l);if(!u)return this.warn("The loading context changed while buffering fragment "+l.sn+" of level "+l.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(l.level);var d=u.frag,h=u.part,f=u.level,p=s.video,g=s.text,v=s.id3,m=s.initSegment,y=this.altAudio?void 0:s.audio;if(!this.fragContextChanged(d)){if(this.state=i.State.PARSING,m){m.tracks&&(this._bufferInitSegment(f,m.tracks,d,l),a.trigger(o.Events.FRAG_PARSING_INIT_SEGMENT,{frag:d,id:n,tracks:m.tracks}));var b=m.initPTS,S=m.timescale;Object(r.isFiniteNumber)(b)&&(this.initPTS[d.cc]=b,a.trigger(o.Events.INIT_PTS_FOUND,{frag:d,id:n,initPTS:b,timescale:S}))}if(p&&!1!==s.independent){if(f.details){var E=p.startPTS,T=p.endPTS,_=p.startDTS,x=p.endDTS;if(h)h.elementaryStreams[p.type]={startPTS:E,endPTS:T,startDTS:_,endDTS:x};else if(p.firstKeyFrame&&p.independent&&(this.couldBacktrack=!0),p.dropped&&p.independent){if(this.getLoadPosition()+this.config.maxBufferHole<E)return void this.backtrack(d);d.setElementaryStreamInfo(p.type,d.start,T,d.start,x,!0)}d.setElementaryStreamInfo(p.type,E,T,_,x),this.bufferFragmentData(p,d,h,l)}}else if(!1===s.independent)return void this.backtrack(d);if(y){var w=y.startPTS,k=y.endPTS,A=y.startDTS,C=y.endDTS;h&&(h.elementaryStreams[c.ElementaryStreamTypes.AUDIO]={startPTS:w,endPTS:k,startDTS:A,endDTS:C}),d.setElementaryStreamInfo(c.ElementaryStreamTypes.AUDIO,w,k,A,C),this.bufferFragmentData(y,d,h,l)}if(null!=v&&null!==(e=v.samples)&&void 0!==e&&e.length){var D={frag:d,id:n,samples:v.samples};a.trigger(o.Events.FRAG_PARSING_METADATA,D)}if(g){var L={frag:d,id:n,samples:g.samples};a.trigger(o.Events.FRAG_PARSING_USERDATA,L)}}},T._bufferInitSegment=function(t,e,n,r){var a=this;if(this.state===i.State.PARSING){this.audioOnly=!!e.audio&&!e.video,this.altAudio&&!this.audioOnly&&delete e.audio;var s=e.audio,l=e.video,u=e.audiovideo;if(s){var c=t.audioCodec,d=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(c&&(c=-1!==c.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==s.metadata.channelCount&&-1===d.indexOf("firefox")&&(c="mp4a.40.5")),-1!==d.indexOf("android")&&"audio/mpeg"!==s.container&&(c="mp4a.40.2",this.log("Android: force audio codec to "+c)),t.audioCodec&&t.audioCodec!==c&&this.log('Swapping manifest audio codec "'+t.audioCodec+'" for "'+c+'"'),s.levelCodec=c,s.id="main",this.log("Init audio buffer, container:"+s.container+", codecs[selected/level/parsed]=["+(c||"")+"/"+(t.audioCodec||"")+"/"+s.codec+"]")}l&&(l.levelCodec=t.videoCodec,l.id="main",this.log("Init video buffer, container:"+l.container+", codecs[level/parsed]=["+(t.videoCodec||"")+"/"+l.codec+"]")),u&&this.log("Init audiovideo buffer, container:"+u.container+", codecs[level/parsed]=["+(t.attrs.CODECS||"")+"/"+u.codec+"]"),this.hls.trigger(o.Events.BUFFER_CODECS,e),Object.keys(e).forEach((function(t){var i=e[t].initSegment;null!=i&&i.byteLength&&a.hls.trigger(o.Events.BUFFER_APPENDING,{type:t,data:i,frag:n,part:null,chunkMeta:r,parent:n.type})})),this.tick()}},T.backtrack=function(t){this.couldBacktrack=!0,this.resetTransmuxer(),this.flushBufferGap(t);var e=this.fragmentTracker.backtrack(t);this.fragPrevious=null,this.nextLoadPosition=t.start,e?this.resetFragmentLoading(t):this.state=i.State.BACKTRACKING},T.checkFragmentChanged=function(){var t=this.media,e=null;if(t&&t.readyState>1&&!1===t.seeking){var n=t.currentTime;if(s.BufferHelper.isBuffered(t,n)?e=this.getAppendedFrag(n):s.BufferHelper.isBuffered(t,n+.1)&&(e=this.getAppendedFrag(n+.1)),e){var r=this.fragPlaying,i=e.level;r&&e.sn===r.sn&&r.level===i&&e.urlId===r.urlId||(this.hls.trigger(o.Events.FRAG_CHANGED,{frag:e}),r&&r.level===i||this.hls.trigger(o.Events.LEVEL_SWITCHED,{level:i}),this.fragPlaying=e)}}},b=y,(S=[{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getAppendedFrag(t.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;if(t){var e=this.getAppendedFrag(t.currentTime);return this.followingBufferedFrag(e)}return null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}])&&v(b.prototype,S),E&&v(b,E),y}(i.default)},"./src/controller/subtitle-stream-controller.ts":
/*!******************************************************!*\
	  !*** ./src/controller/subtitle-stream-controller.ts ***!
	  \******************************************************/
/*! exports provided: SubtitleStreamController */function(t,e,n){n.r(e),n.d(e,"SubtitleStreamController",(function(){return g}));var r=n(/*! ../events */"./src/events.ts"),i=n(/*! ../utils/logger */"./src/utils/logger.ts"),a=n(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.ts"),o=n(/*! ./fragment-finders */"./src/controller/fragment-finders.ts"),s=n(/*! ../utils/discontinuities */"./src/utils/discontinuities.ts"),l=n(/*! ./level-helper */"./src/controller/level-helper.ts"),u=n(/*! ./fragment-tracker */"./src/controller/fragment-tracker.ts"),c=n(/*! ./base-stream-controller */"./src/controller/base-stream-controller.ts"),d=n(/*! ../types/loader */"./src/types/loader.ts"),h=n(/*! ../types/level */"./src/types/level.ts");function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var g=function(t){var e,n;function g(e,n){var r;return(r=t.call(this,e,n,"[subtitle-stream-controller]")||this).levels=[],r.currentTrackId=-1,r.tracksBuffered=[],r.mainDetails=null,r._registerListeners(),r}n=t,(e=g).prototype=Object.create(n.prototype),e.prototype.constructor=e,p(e,n);var v,m,y,b=g.prototype;return b.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},b._registerListeners=function(){var t=this.hls;t.on(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(r.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.on(r.Events.ERROR,this.onError,this),t.on(r.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(r.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.on(r.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(r.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.on(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},b._unregisterListeners=function(){var t=this.hls;t.off(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(r.Events.LEVEL_LOADED,this.onLevelLoaded,this),t.off(r.Events.ERROR,this.onError,this),t.off(r.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(r.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.off(r.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(r.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.off(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},b.startLoad=function(){this.stopLoad(),this.state=c.State.IDLE,this.setInterval(500),this.tick()},b.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},b.onLevelLoaded=function(t,e){this.mainDetails=e.details},b.onSubtitleFragProcessed=function(t,e){var n=e.frag,r=e.success;if(this.fragPrevious=n,this.state=c.State.IDLE,r){var i=this.tracksBuffered[this.currentTrackId];if(i){for(var a,o=n.start,s=0;s<i.length;s++)if(o>=i[s].start&&o<=i[s].end){a=i[s];break}var l=n.start+n.duration;a?a.end=l:(a={start:o,end:l},i.push(a)),this.fragmentTracker.fragBuffered(n)}}},b.onBufferFlushing=function(t,e){var n=e.startOffset,r=e.endOffset;if(0===n&&r!==Number.POSITIVE_INFINITY){var i=this.currentTrackId,a=this.levels;if(!a.length||!a[i]||!a[i].details)return;var o=r-a[i].details.targetduration;if(o<=0)return;e.endOffsetSubtitles=Math.max(0,o),this.tracksBuffered.forEach((function(t){for(var e=0;e<t.length;)if(t[e].end<=o)t.shift();else{if(!(t[e].start<o))break;t[e].start=o,e++}})),this.fragmentTracker.removeFragmentsInRange(n,o,d.PlaylistLevelType.SUBTITLE)}},b.onError=function(t,e){var n,r=e.frag;r&&r.type===d.PlaylistLevelType.SUBTITLE&&(null!==(n=this.fragCurrent)&&void 0!==n&&n.loader&&this.fragCurrent.loader.abort(),this.state=c.State.IDLE)},b.onSubtitleTracksUpdated=function(t,e){var n=this,r=e.subtitleTracks;this.tracksBuffered=[],this.levels=r.map((function(t){return new h.Level(t)})),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach((function(t){n.tracksBuffered[t.id]=[]})),this.mediaBuffer=null},b.onSubtitleTrackSwitch=function(t,e){if(this.currentTrackId=e.id,this.levels.length&&-1!==this.currentTrackId){var n=this.levels[this.currentTrackId];null!=n&&n.details?(this.mediaBuffer=this.mediaBufferTimeRanges,this.setInterval(500)):this.mediaBuffer=null}else this.clearInterval()},b.onSubtitleTrackLoaded=function(t,e){var n,r=e.details,i=e.id,a=this.currentTrackId,u=this.levels;if(u.length){var d=u[a];if(!(i>=u.length||i!==a)&&d){if(this.mediaBuffer=this.mediaBufferTimeRanges,r.live||null!==(n=d.details)&&void 0!==n&&n.live){var h=this.mainDetails;if(r.deltaUpdateFailed||!h)return;var f=h.fragments[0];d.details?0===this.alignPlaylists(r,d.details)&&f&&Object(l.addSliding)(r,f.start):r.hasProgramDateTime&&h.hasProgramDateTime?Object(s.alignPDT)(r,h):f&&Object(l.addSliding)(r,f.start)}d.details=r,this.levelLastLoaded=i,this.tick(),r.live&&!this.fragCurrent&&this.media&&this.state===c.State.IDLE&&(Object(o.findFragmentByPTS)(null,r.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),d.details=void 0))}}},b._handleFragmentLoadComplete=function(t){var e=t.frag,n=t.payload,i=e.decryptdata,a=this.hls;if(!this.fragContextChanged(e)&&n&&n.byteLength>0&&i&&i.key&&i.iv&&"AES-128"===i.method){var o=performance.now();this.decrypter.webCryptoDecrypt(new Uint8Array(n),i.key.buffer,i.iv.buffer).then((function(t){var n=performance.now();a.trigger(r.Events.FRAG_DECRYPTED,{frag:e,payload:t,stats:{tstart:o,tdecrypt:n}})}))}},b.doTick=function(){if(this.media){if(this.state===c.State.IDLE){var t,e=this.currentTrackId,n=this.levels;if(!n.length||!n[e]||!n[e].details)return;var s=n[e].details,l=s.targetduration,d=this.config,h=this.media,f=a.BufferHelper.bufferedInfo(this.mediaBufferTimeRanges,h.currentTime-l,d.maxBufferHole),p=f.end;if(f.len>this.getMaxBufferLength()+l)return;console.assert(s,"Subtitle track details are defined on idle subtitle stream controller tick");var g,v=s.fragments,m=v.length,y=s.edge,b=this.fragPrevious;if(p<y){var S=d.maxFragLookUpTolerance;b&&s.hasProgramDateTime&&(g=Object(o.findFragmentByPDT)(v,b.endProgramDateTime,S)),g||!(g=Object(o.findFragmentByPTS)(b,v,p,S))&&b&&b.start<v[0].start&&(g=v[0])}else g=v[m-1];null!==(t=g)&&void 0!==t&&t.encrypted?(i.logger.log("Loading key for "+g.sn),this.state=c.State.KEY_LOADING,this.hls.trigger(r.Events.KEY_LOADING,{frag:g})):g&&this.fragmentTracker.getState(g)===u.FragmentState.NOT_LOADED&&this.loadFragment(g,s,p)}}else this.state=c.State.IDLE},b.loadFragment=function(e,n,r){this.fragCurrent=e,t.prototype.loadFragment.call(this,e,n,r)},v=g,(m=[{key:"mediaBufferTimeRanges",get:function(){return this.tracksBuffered[this.currentTrackId]||[]}}])&&f(v.prototype,m),y&&f(v,y),g}(c.default)},"./src/controller/subtitle-track-controller.ts":
/*!*****************************************************!*\
	  !*** ./src/controller/subtitle-track-controller.ts ***!
	  \*****************************************************/
/*! exports provided: default */function(t,e,n){n.r(e);var r=n(/*! ../events */"./src/events.ts"),i=n(/*! ../utils/texttrack-utils */"./src/utils/texttrack-utils.ts"),a=n(/*! ./base-playlist-controller */"./src/controller/base-playlist-controller.ts"),o=n(/*! ../types/loader */"./src/types/loader.ts");function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=function(t){var e,n;function a(e){var n;return(n=t.call(this,e,"[subtitle-track-controller]")||this).media=null,n.tracks=[],n.groupId=null,n.tracksInGroup=[],n.trackId=-1,n.selectDefaultTrack=!0,n.queuedDefaultTrack=-1,n.trackChangeListener=function(){return n.onTextTracksChanged()},n.asyncPollTrackChange=function(){return n.pollTrackChange(0)},n.useTextTrackPolling=!1,n.subtitlePollingInterval=-1,n.subtitleDisplay=!0,n.registerListeners(),n}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,l(e,n);var u,d,h,f=a.prototype;return f.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,t.prototype.destroy.call(this)},f.registerListeners=function(){var t=this.hls;t.on(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.on(r.Events.LEVEL_LOADING,this.onLevelLoading,this),t.on(r.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(r.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(r.Events.ERROR,this.onError,this)},f.unregisterListeners=function(){var t=this.hls;t.off(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),t.off(r.Events.LEVEL_LOADING,this.onLevelLoading,this),t.off(r.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(r.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(r.Events.ERROR,this.onError,this)},f.onMediaAttached=function(t,e){this.media=e.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},f.pollTrackChange=function(t){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,t)},f.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),c(this.media.textTracks).forEach((function(t){Object(i.clearCurrentCues)(t)})),this.subtitleTrack=-1,this.media=null)},f.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},f.onManifestParsed=function(t,e){this.tracks=e.subtitleTracks},f.onSubtitleTrackLoaded=function(t,e){var n=e.id,r=e.details,i=this.trackId,a=this.tracksInGroup[i];if(a){var o=a.details;a.details=e.details,this.log("subtitle track "+n+" loaded ["+r.startSN+"-"+r.endSN+"]"),n===this.trackId&&(this.retryCount=0,this.playlistLoaded(n,e,o))}else this.warn("Invalid subtitle track id "+n)},f.onLevelLoading=function(t,e){this.switchLevel(e.level)},f.onLevelSwitching=function(t,e){this.switchLevel(e.level)},f.switchLevel=function(t){var e=this.hls.levels[t];if(null!=e&&e.textGroupIds){var n=e.textGroupIds[e.urlId];if(this.groupId!==n){var i=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,a=this.tracks.filter((function(t){return!n||t.groupId===n}));this.tracksInGroup=a;var o=this.findTrackId(null==i?void 0:i.name)||this.findTrackId();this.groupId=n;var s={subtitleTracks:a};this.log("Updating subtitle tracks, "+a.length+' track(s) found in "'+n+'" group-id'),this.hls.trigger(r.Events.SUBTITLE_TRACKS_UPDATED,s),-1!==o&&this.setSubtitleTrack(o,i)}}},f.findTrackId=function(t){for(var e=this.tracksInGroup,n=0;n<e.length;n++){var r=e[n];if((!this.selectDefaultTrack||r.default)&&(!t||t===r.name))return r.id}return-1},f.onError=function(e,n){t.prototype.onError.call(this,e,n),!n.fatal&&n.context&&n.context.type===o.PlaylistContextType.SUBTITLE_TRACK&&n.context.id===this.trackId&&n.context.groupId===this.groupId&&this.retryLoadingOrFail(n)},f.loadPlaylist=function(t){var e=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(e)){var n=e.id,i=e.groupId,a=e.url;if(t)try{a=t.addDirectives(a)}catch(t){this.warn("Could not construct new URL with HLS Delivery Directives: "+t)}this.log("Loading subtitle playlist for id "+n),this.hls.trigger(r.Events.SUBTITLE_TRACK_LOADING,{url:a,id:n,groupId:i,deliveryDirectives:t||null})}},f.toggleTrackModes=function(t){var e=this,n=this.media,r=this.subtitleDisplay,i=this.trackId;if(n){var a=c(n.textTracks),o=a.filter((function(t){return t.groupId===e.groupId}));if(-1===t)[].slice.call(a).forEach((function(t){t.mode="disabled"}));else{var s=o[i];s&&(s.mode="disabled")}var l=o[t];l&&(l.mode=r?"showing":"hidden")}},f.setSubtitleTrack=function(t,e){var n,i=this.tracksInGroup;if(this.media){if(this.trackId!==t&&this.toggleTrackModes(t),!(this.trackId===t&&(-1===t||null!==(n=i[t])&&void 0!==n&&n.details)||t<-1||t>=i.length)){this.clearTimer();var a=i[t];if(this.log("Switching to subtitle track "+t),this.trackId=t,a){var o=a.id,s=a.groupId,l=void 0===s?"":s,u=a.name,c=a.type,d=a.url;this.hls.trigger(r.Events.SUBTITLE_TRACK_SWITCH,{id:o,groupId:l,name:u,type:c,url:d});var h=this.switchParams(a.url,null==e?void 0:e.details);this.loadPlaylist(h)}else this.hls.trigger(r.Events.SUBTITLE_TRACK_SWITCH,{id:t})}}else this.queuedDefaultTrack=t},f.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var t=-1,e=c(this.media.textTracks),n=0;n<e.length;n++)if("hidden"===e[n].mode)t=n;else if("showing"===e[n].mode){t=n;break}this.subtitleTrack!==t&&(this.subtitleTrack=t)}},u=a,(d=[{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.selectDefaultTrack=!1;var e=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(t,e)}}])&&s(u.prototype,d),h&&s(u,h),a}(a.default);function c(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];"subtitles"===r.kind&&r.label&&e.push(t[n])}return e}e.default=u},"./src/controller/timeline-controller.ts":
/*!***********************************************!*\
	  !*** ./src/controller/timeline-controller.ts ***!
	  \***********************************************/
/*! exports provided: TimelineController */function(t,e,n){n.r(e),n.d(e,"TimelineController",(function(){return h}));var r=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),i=n(/*! ../events */"./src/events.ts"),a=n(/*! ../utils/cea-608-parser */"./src/utils/cea-608-parser.ts"),o=n(/*! ../utils/output-filter */"./src/utils/output-filter.ts"),s=n(/*! ../utils/webvtt-parser */"./src/utils/webvtt-parser.ts"),l=n(/*! ../utils/texttrack-utils */"./src/utils/texttrack-utils.ts"),u=n(/*! ../utils/imsc1-ttml-parser */"./src/utils/imsc1-ttml-parser.ts"),c=n(/*! ../types/loader */"./src/types/loader.ts"),d=n(/*! ../utils/logger */"./src/utils/logger.ts"),h=function(){function t(t){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this.captionsProperties=void 0,this.hls=t,this.config=t.config,this.Cues=t.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var e=new o.default(this,"textTrack1"),n=new o.default(this,"textTrack2"),r=new o.default(this,"textTrack3"),s=new o.default(this,"textTrack4");this.cea608Parser1=new a.default(1,e,n),this.cea608Parser2=new a.default(3,r,s)}t.on(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(i.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(i.Events.FRAG_LOADING,this.onFragLoading,this),t.on(i.Events.FRAG_LOADED,this.onFragLoaded,this),t.on(i.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.on(i.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),t.on(i.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(i.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.on(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}var e=t.prototype;return e.destroy=function(){var t=this.hls;t.off(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(i.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(i.Events.FRAG_LOADING,this.onFragLoading,this),t.off(i.Events.FRAG_LOADED,this.onFragLoaded,this),t.off(i.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.off(i.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),t.off(i.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(i.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.off(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},e.addCues=function(t,e,n,r,a){for(var o,s,l,u,c=!1,d=a.length;d--;){var h=a[d],f=(o=h[0],s=h[1],l=e,u=n,Math.min(s,u)-Math.max(o,l));if(f>=0&&(h[0]=Math.min(h[0],e),h[1]=Math.max(h[1],n),c=!0,f/(n-e)>.5))return}if(c||a.push([e,n]),this.config.renderTextTracksNatively){var p=this.captionsTracks[t];this.Cues.newCue(p,e,n,r)}else{var g=this.Cues.newCue(null,e,n,r);this.hls.trigger(i.Events.CUES_PARSED,{type:"captions",cues:g,track:t})}},e.onInitPtsFound=function(t,e){var n=this,r=e.frag,a=e.id,o=e.initPTS,s=e.timescale,l=this.unparsedVttFrags;"main"===a&&(this.initPTS[r.cc]=o,this.timescale[r.cc]=s),l.length&&(this.unparsedVttFrags=[],l.forEach((function(t){n.onFragLoaded(i.Events.FRAG_LOADED,t)})))},e.getExistingTrack=function(t){var e=this.media;if(e)for(var n=0;n<e.textTracks.length;n++){var r=e.textTracks[n];if(r[t])return r}return null},e.createCaptionsTrack=function(t){this.config.renderTextTracksNatively?this.createNativeTrack(t):this.createNonNativeTrack(t)},e.createNativeTrack=function(t){if(!this.captionsTracks[t]){var e=this.captionsProperties,n=this.captionsTracks,r=this.media,i=e[t],a=i.label,o=i.languageCode,s=this.getExistingTrack(t);if(s)n[t]=s,Object(l.clearCurrentCues)(n[t]),Object(l.sendAddTrackEvent)(n[t],r);else{var u=this.createTextTrack("captions",a,o);u&&(u[t]=!0,n[t]=u)}}},e.createNonNativeTrack=function(t){if(!this.nonNativeCaptionsTracks[t]){var e=this.captionsProperties[t];if(e){var n={_id:t,label:e.label,kind:"captions",default:!!e.media&&!!e.media.default,closedCaptions:e.media};this.nonNativeCaptionsTracks[t]=n,this.hls.trigger(i.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[n]})}}},e.createTextTrack=function(t,e,n){var r=this.media;if(r)return r.addTextTrack(t,e,n)},e.onMediaAttaching=function(t,e){this.media=e.media,this._cleanTracks()},e.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach((function(e){Object(l.clearCurrentCues)(t[e]),delete t[e]})),this.nonNativeCaptionsTracks={}},e.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},e._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var n=0;n<e.length;n++)Object(l.clearCurrentCues)(e[n])}},e.onSubtitleTracksUpdated=function(t,e){var n=this;this.textTracks=[];var r=e.subtitleTracks||[],a=r.some((function(t){return t.textCodec===u.IMSC1_CODEC}));if(this.config.enableWebVTT||a&&this.config.enableIMSC1){var o=this.tracks&&r&&this.tracks.length===r.length;if(this.tracks=r||[],this.config.renderTextTracksNatively){var s=this.media?this.media.textTracks:[];this.tracks.forEach((function(t,e){var r;if(e<s.length){for(var i=null,a=0;a<s.length;a++)if(f(s[a],t)){i=s[a];break}i&&(r=i)}r?Object(l.clearCurrentCues)(r):(r=n.createTextTrack("subtitles",t.name,t.lang))&&(r.mode="disabled"),r&&(r.groupId=t.groupId,n.textTracks.push(r))}))}else if(!o&&this.tracks&&this.tracks.length){var c=this.tracks.map((function(t){return{label:t.name,kind:t.type.toLowerCase(),default:t.default,subtitleTrack:t}}));this.hls.trigger(i.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:c})}}},e.onManifestLoaded=function(t,e){var n=this;this.config.enableCEA708Captions&&e.captions&&e.captions.forEach((function(t){var e=/(?:CC|SERVICE)([1-4])/.exec(t.instreamId);if(e){var r="textTrack"+e[1],i=n.captionsProperties[r];i&&(i.label=t.name,t.lang&&(i.languageCode=t.lang),i.media=t)}}))},e.onFragLoading=function(t,e){var n=this.cea608Parser1,r=this.cea608Parser2,i=this.lastSn;if(this.enabled&&n&&r&&e.frag.type===c.PlaylistLevelType.MAIN){var a=e.frag.sn;a!==i+1&&(n.reset(),r.reset()),this.lastSn=a}},e.onFragLoaded=function(t,e){var n=e.frag,a=e.payload,o=this.initPTS,s=this.unparsedVttFrags;if(n.type===c.PlaylistLevelType.SUBTITLE)if(a.byteLength){if(!Object(r.isFiniteNumber)(o[n.cc]))return s.push(e),void(o.length&&this.hls.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Missing initial subtitle PTS")}));var l=n.decryptdata;if(null==l||null==l.key||"AES-128"!==l.method){var d=this.tracks[n.level],h=this.vttCCs;h[n.cc]||(h[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),d&&d.textCodec===u.IMSC1_CODEC?this._parseIMSC1(n,a):this._parseVTTs(n,a,h)}}else this.hls.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})},e._parseIMSC1=function(t,e){var n=this,r=this.hls;Object(u.parseIMSC1)(e,this.initPTS[t.cc],this.timescale[t.cc],(function(e){n._appendCues(e,t.level),r.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})}),(function(e){d.logger.log("Failed to parse IMSC1: "+e),r.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:e})}))},e._parseVTTs=function(t,e,n){var r=this,a=this.hls;Object(s.parseWebVTT)(e,this.initPTS[t.cc],this.timescale[t.cc],n,t.cc,t.start,(function(e){r._appendCues(e,t.level),a.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})}),(function(n){r._fallbackToIMSC1(t,e),d.logger.log("Failed to parse VTT cue: "+n),a.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:n})}))},e._fallbackToIMSC1=function(t,e){var n=this,r=this.tracks[t.level];r.textCodec||Object(u.parseIMSC1)(e,this.initPTS[t.cc],this.timescale[t.cc],(function(){r.textCodec=u.IMSC1_CODEC,n._parseIMSC1(t,e)}),(function(){r.textCodec="wvtt"}))},e._appendCues=function(t,e){var n=this.hls;if(this.config.renderTextTracksNatively){var r=this.textTracks[e];if("disabled"===r.mode)return;t.forEach((function(t){return Object(l.addCueToTrack)(r,t)}))}else{var a=this.tracks[e].default?"default":"subtitles"+e;n.trigger(i.Events.CUES_PARSED,{type:"subtitles",cues:t,track:a})}},e.onFragDecrypted=function(t,e){var n=e.frag;if(n.type===c.PlaylistLevelType.SUBTITLE){if(!Object(r.isFiniteNumber)(this.initPTS[n.cc]))return void this.unparsedVttFrags.push(e);this.onFragLoaded(i.Events.FRAG_LOADED,e)}},e.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},e.onFragParsingUserdata=function(t,e){var n=this.cea608Parser1,r=this.cea608Parser2;if(this.enabled&&n&&r)for(var i=0;i<e.samples.length;i++){var a=e.samples[i].bytes;if(a){var o=this.extractCea608Data(a);n.addData(e.samples[i].pts,o[0]),r.addData(e.samples[i].pts,o[1])}}},e.onBufferFlushing=function(t,e){var n=e.startOffset,r=e.endOffset,i=e.endOffsetSubtitles,a=e.type,o=this.media;if(o&&!(o.currentTime<r)){if(!a||"video"===a){var s=this.captionsTracks;Object.keys(s).forEach((function(t){return Object(l.removeCuesInRange)(s[t],n,r)}))}if(this.config.renderTextTracksNatively&&0===n&&void 0!==i){var u=this.textTracks;Object.keys(u).forEach((function(t){return Object(l.removeCuesInRange)(u[t],n,i)}))}}},e.extractCea608Data=function(t){for(var e=31&t[0],n=2,r=[[],[]],i=0;i<e;i++){var a=t[n++],o=127&t[n++],s=127&t[n++],l=3&a;0===o&&0===s||0!=(4&a)&&(0!==l&&1!==l||(r[l].push(o),r[l].push(s)))}return r},t}();function f(t,e){return t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}},"./src/crypt/aes-crypto.ts":
/*!*********************************!*\
	  !*** ./src/crypt/aes-crypto.ts ***!
	  \*********************************/
/*! exports provided: default */function(t,e,n){n.r(e),n.d(e,"default",(function(){return r}));var r=function(){function t(t,e){this.subtle=void 0,this.aesIV=void 0,this.subtle=t,this.aesIV=e}return t.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}()},"./src/crypt/aes-decryptor.ts":
/*!************************************!*\
	  !*** ./src/crypt/aes-decryptor.ts ***!
	  \************************************/
/*! exports provided: removePadding, default */function(t,e,n){n.r(e),n.d(e,"removePadding",(function(){return i})),n.d(e,"default",(function(){return a}));var r=n(/*! ../utils/typed-array */"./src/utils/typed-array.ts");function i(t){var e=t.byteLength,n=e&&new DataView(t.buffer).getUint8(e-1);return n?Object(r.sliceUint8)(t,0,e-n):t}var a=function(){function t(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var e=t.prototype;return e.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),n=new Uint32Array(4),r=0;r<4;r++)n[r]=e.getUint32(4*r);return n},e.initTable=function(){var t=this.sBox,e=this.invSBox,n=this.subMix,r=n[0],i=n[1],a=n[2],o=n[3],s=this.invSubMix,l=s[0],u=s[1],c=s[2],d=s[3],h=new Uint32Array(256),f=0,p=0,g=0;for(g=0;g<256;g++)h[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var v=p^p<<1^p<<2^p<<3^p<<4;v=v>>>8^255&v^99,t[f]=v,e[v]=f;var m=h[f],y=h[m],b=h[y],S=257*h[v]^16843008*v;r[f]=S<<24|S>>>8,i[f]=S<<16|S>>>16,a[f]=S<<8|S>>>24,o[f]=S,S=16843009*b^65537*y^257*m^16843008*f,l[v]=S<<24|S>>>8,u[v]=S<<16|S>>>16,c[v]=S<<8|S>>>24,d[v]=S,f?(f=m^h[h[h[b^m]]],p^=h[h[p]]):f=p=1}},e.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),n=!0,r=0;r<e.length&&n;)n=e[r]===this.key[r],r++;if(!n){this.key=e;var i=this.keySize=e.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var a,o,s,l,u=this.ksRows=4*(i+6+1),c=this.keySchedule=new Uint32Array(u),d=this.invKeySchedule=new Uint32Array(u),h=this.sBox,f=this.rcon,p=this.invSubMix,g=p[0],v=p[1],m=p[2],y=p[3];for(a=0;a<u;a++)a<i?s=c[a]=e[a]:(l=s,a%i==0?(l=h[(l=l<<8|l>>>24)>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l],l^=f[a/i|0]<<24):i>6&&a%i==4&&(l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l]),c[a]=s=(c[a-i]^l)>>>0);for(o=0;o<u;o++)a=u-o,l=3&o?c[a]:c[a-4],d[o]=o<4||a<=4?l:g[h[l>>>24]]^v[h[l>>>16&255]]^m[h[l>>>8&255]]^y[h[255&l]],d[o]=d[o]>>>0}},e.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},e.decrypt=function(t,e,n){for(var r,i,a,o,s,l,u,c,d,h,f,p,g,v,m=this.keySize+6,y=this.invKeySchedule,b=this.invSBox,S=this.invSubMix,E=S[0],T=S[1],_=S[2],x=S[3],w=this.uint8ArrayToUint32Array_(n),k=w[0],A=w[1],C=w[2],D=w[3],L=new Int32Array(t),$=new Int32Array(L.length),O=this.networkToHostOrderSwap;e<L.length;){for(d=O(L[e]),h=O(L[e+1]),f=O(L[e+2]),p=O(L[e+3]),s=d^y[0],l=p^y[1],u=f^y[2],c=h^y[3],g=4,v=1;v<m;v++)r=E[s>>>24]^T[l>>16&255]^_[u>>8&255]^x[255&c]^y[g],i=E[l>>>24]^T[u>>16&255]^_[c>>8&255]^x[255&s]^y[g+1],a=E[u>>>24]^T[c>>16&255]^_[s>>8&255]^x[255&l]^y[g+2],o=E[c>>>24]^T[s>>16&255]^_[l>>8&255]^x[255&u]^y[g+3],s=r,l=i,u=a,c=o,g+=4;r=b[s>>>24]<<24^b[l>>16&255]<<16^b[u>>8&255]<<8^b[255&c]^y[g],i=b[l>>>24]<<24^b[u>>16&255]<<16^b[c>>8&255]<<8^b[255&s]^y[g+1],a=b[u>>>24]<<24^b[c>>16&255]<<16^b[s>>8&255]<<8^b[255&l]^y[g+2],o=b[c>>>24]<<24^b[s>>16&255]<<16^b[l>>8&255]<<8^b[255&u]^y[g+3],$[e]=O(r^k),$[e+1]=O(o^A),$[e+2]=O(a^C),$[e+3]=O(i^D),k=d,A=h,C=f,D=p,e+=4}return $.buffer},t}()},"./src/crypt/decrypter.ts":
/*!********************************!*\
	  !*** ./src/crypt/decrypter.ts ***!
	  \********************************/
/*! exports provided: default */function(t,e,n){n.r(e),n.d(e,"default",(function(){return u}));var r=n(/*! ./aes-crypto */"./src/crypt/aes-crypto.ts"),i=n(/*! ./fast-aes-key */"./src/crypt/fast-aes-key.ts"),a=n(/*! ./aes-decryptor */"./src/crypt/aes-decryptor.ts"),o=n(/*! ../utils/logger */"./src/utils/logger.ts"),s=n(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),l=n(/*! ../utils/typed-array */"./src/utils/typed-array.ts"),u=function(){function t(t,e,n){var r=(void 0===n?{}:n).removePKCS7Padding,i=void 0===r||r;if(this.logEnabled=!0,this.observer=void 0,this.config=void 0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.observer=t,this.config=e,this.removePKCS7Padding=i,i)try{var a=self.crypto;a&&(this.subtle=a.subtle||a.webkitSubtle)}catch(t){}null===this.subtle&&(this.config.enableSoftwareAES=!0)}var e=t.prototype;return e.destroy=function(){this.observer=null},e.isSync=function(){return this.config.enableSoftwareAES},e.flush=function(){var t=this.currentResult;if(t){var e=new Uint8Array(t);return this.reset(),this.removePKCS7Padding?Object(a.removePadding)(e):e}this.reset()},e.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},e.decrypt=function(t,e,n,r){if(this.config.enableSoftwareAES){this.softwareDecrypt(new Uint8Array(t),e,n);var i=this.flush();i&&r(i.buffer)}else this.webCryptoDecrypt(new Uint8Array(t),e,n).then(r)},e.softwareDecrypt=function(t,e,n){var r=this.currentIV,i=this.currentResult,o=this.remainderData;this.logOnce("JS AES decrypt"),o&&(t=Object(s.appendUint8Array)(o,t),this.remainderData=null);var u=this.getValidChunk(t);if(!u.length)return null;r&&(n=r);var c=this.softwareDecrypter;c||(c=this.softwareDecrypter=new a.default),c.expandKey(e);var d=i;return this.currentResult=c.decrypt(u.buffer,0,n),this.currentIV=Object(l.sliceUint8)(u,-16).buffer,d||null},e.webCryptoDecrypt=function(t,e,n){var a=this,o=this.subtle;return this.key===e&&this.fastAesKey||(this.key=e,this.fastAesKey=new i.default(o,e)),this.fastAesKey.expandKey().then((function(e){return o?new r.default(o,n).decrypt(t.buffer,e):Promise.reject(new Error("web crypto not initialized"))})).catch((function(r){return a.onWebCryptoError(r,t,e,n)}))},e.onWebCryptoError=function(t,e,n,r){return o.logger.warn("[decrypter.ts]: WebCrypto Error, disable WebCrypto API:",t),this.config.enableSoftwareAES=!0,this.logEnabled=!0,this.softwareDecrypt(e,n,r)},e.getValidChunk=function(t){var e=t,n=t.length-t.length%16;return n!==t.length&&(e=Object(l.sliceUint8)(t,0,n),this.remainderData=Object(l.sliceUint8)(t,n)),e},e.logOnce=function(t){this.logEnabled&&(o.logger.log("[decrypter.ts]: "+t),this.logEnabled=!1)},t}()},"./src/crypt/fast-aes-key.ts":
/*!***********************************!*\
	  !*** ./src/crypt/fast-aes-key.ts ***!
	  \***********************************/
/*! exports provided: default */function(t,e,n){n.r(e),n.d(e,"default",(function(){return r}));var r=function(){function t(t,e){this.subtle=void 0,this.key=void 0,this.subtle=t,this.key=e}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}()},"./src/demux/aacdemuxer.ts":
/*!*********************************!*\
	  !*** ./src/demux/aacdemuxer.ts ***!
	  \*********************************/
/*! exports provided: default */function(t,e,n){n.r(e);var r=n(/*! ./base-audio-demuxer */"./src/demux/base-audio-demuxer.ts"),i=n(/*! ./adts */"./src/demux/adts.ts"),a=n(/*! ../utils/logger */"./src/utils/logger.ts"),o=n(/*! ../demux/id3 */"./src/demux/id3.ts");function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){var e,n;function r(e,n){var r;return(r=t.call(this)||this).observer=void 0,r.config=void 0,r.observer=e,r.config=n,r}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,s(e,n);var l=r.prototype;return l.resetInitSegment=function(e,n,r){t.prototype.resetInitSegment.call(this,e,n,r),this._audioTrack={container:"audio/adts",type:"audio",id:0,pid:-1,sequenceNumber:0,isAAC:!0,samples:[],manifestCodec:e,duration:r,inputTimeScale:9e4,dropped:0}},r.probe=function(t){if(!t)return!1;for(var e=(o.getID3Data(t,0)||[]).length,n=t.length;e<n;e++)if(i.probe(t,e))return a.logger.log("ADTS sync word found !"),!0;return!1},l.canParse=function(t,e){return i.canParse(t,e)},l.appendFrame=function(t,e,n){i.initTrackConfig(t,this.observer,e,n,t.manifestCodec);var r=i.appendFrame(t,e,n,this.initPTS,this.frameIndex);if(r&&0===r.missing)return r},r}(r.default);l.minProbeByteLength=9,e.default=l},"./src/demux/adts.ts":
/*!***************************!*\
	  !*** ./src/demux/adts.ts ***!
	  \***************************/
/*! exports provided: getAudioConfig, isHeaderPattern, getHeaderLength, getFullFrameLength, canGetFrameLength, isHeader, canParse, probe, initTrackConfig, getFrameDuration, parseFrameHeader, appendFrame */function(t,e,n){n.r(e),n.d(e,"getAudioConfig",(function(){return o})),n.d(e,"isHeaderPattern",(function(){return s})),n.d(e,"getHeaderLength",(function(){return l})),n.d(e,"getFullFrameLength",(function(){return u})),n.d(e,"canGetFrameLength",(function(){return c})),n.d(e,"isHeader",(function(){return d})),n.d(e,"canParse",(function(){return h})),n.d(e,"probe",(function(){return f})),n.d(e,"initTrackConfig",(function(){return p})),n.d(e,"getFrameDuration",(function(){return g})),n.d(e,"parseFrameHeader",(function(){return v})),n.d(e,"appendFrame",(function(){return m}));var r=n(/*! ../utils/logger */"./src/utils/logger.ts"),i=n(/*! ../errors */"./src/errors.ts"),a=n(/*! ../events */"./src/events.ts");function o(t,e,n,o){var s,l,u,c,d=navigator.userAgent.toLowerCase(),h=o,f=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];s=1+((192&e[n+2])>>>6);var p=(60&e[n+2])>>>2;if(!(p>f.length-1))return u=(1&e[n+2])<<2,u|=(192&e[n+3])>>>6,r.logger.log("manifest codec:"+o+", ADTS type:"+s+", samplingIndex:"+p),/firefox/i.test(d)?p>=6?(s=5,c=new Array(4),l=p-3):(s=2,c=new Array(2),l=p):-1!==d.indexOf("android")?(s=2,c=new Array(2),l=p):(s=5,c=new Array(4),o&&(-1!==o.indexOf("mp4a.40.29")||-1!==o.indexOf("mp4a.40.5"))||!o&&p>=6?l=p-3:((o&&-1!==o.indexOf("mp4a.40.2")&&(p>=6&&1===u||/vivaldi/i.test(d))||!o&&1===u)&&(s=2,c=new Array(2)),l=p)),c[0]=s<<3,c[0]|=(14&p)>>1,c[1]|=(1&p)<<7,c[1]|=u<<3,5===s&&(c[1]|=(14&l)>>1,c[2]=(1&l)<<7,c[2]|=8,c[3]=0),{config:c,samplerate:f[p],channelCount:u,codec:"mp4a.40."+s,manifestCodec:h};t.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+p})}function s(t,e){return 255===t[e]&&240==(246&t[e+1])}function l(t,e){return 1&t[e+1]?7:9}function u(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function c(t,e){return e+5<t.length}function d(t,e){return e+1<t.length&&s(t,e)}function h(t,e){return c(t,e)&&s(t,e)&&u(t,e)<=t.length-e}function f(t,e){if(d(t,e)){var n=l(t,e);if(e+n>=t.length)return!1;var r=u(t,e);if(r<=n)return!1;var i=e+r;return i===t.length||d(t,i)}return!1}function p(t,e,n,i,a){if(!t.samplerate){var s=o(e,n,i,a);if(!s)return;t.config=s.config,t.samplerate=s.samplerate,t.channelCount=s.channelCount,t.codec=s.codec,t.manifestCodec=s.manifestCodec,r.logger.log("parsed codec:"+t.codec+", rate:"+s.samplerate+", channels:"+s.channelCount)}}function g(t){return 9216e4/t}function v(t,e,n,r,i){var a=l(t,e),o=u(t,e);if((o-=a)>0)return{headerLength:a,frameLength:o,stamp:n+r*i}}function m(t,e,n,r,i){var a=v(e,n,r,i,g(t.samplerate));if(a){var o,s=a.frameLength,l=a.headerLength,u=a.stamp,c=l+s,d=Math.max(0,n+c-e.length);d?(o=new Uint8Array(c-l)).set(e.subarray(n+l,e.length),0):o=e.subarray(n+l,n+c);var h={unit:o,pts:u};return d||t.samples.push(h),{sample:h,length:c,missing:d}}}},"./src/demux/base-audio-demuxer.ts":
/*!*****************************************!*\
	  !*** ./src/demux/base-audio-demuxer.ts ***!
	  \*****************************************/
/*! exports provided: initPTSFn, default */function(t,e,n){n.r(e),n.d(e,"initPTSFn",(function(){return u}));var r=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),i=n(/*! ../demux/id3 */"./src/demux/id3.ts"),a=n(/*! ./dummy-demuxed-track */"./src/demux/dummy-demuxed-track.ts"),o=n(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),s=n(/*! ../utils/typed-array */"./src/utils/typed-array.ts"),l=function(){function t(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.initPTS=null}var e=t.prototype;return e.resetInitSegment=function(t,e,n){this._id3Track={type:"id3",id:0,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},e.resetTimeStamp=function(){},e.resetContiguity=function(){},e.canParse=function(t,e){return!1},e.appendFrame=function(t,e,n){},e.demux=function(t,e){this.cachedData&&(t=Object(o.appendUint8Array)(this.cachedData,t),this.cachedData=null);var n,r,l=i.getID3Data(t,0),c=l?l.length:0,d=this._audioTrack,h=this._id3Track,f=l?i.getTimeStamp(l):void 0,p=t.length;for(0!==this.frameIndex&&null!==this.initPTS||(this.initPTS=u(f,e)),l&&l.length>0&&h.samples.push({pts:this.initPTS,dts:this.initPTS,data:l}),r=this.initPTS;c<p;){if(this.canParse(t,c)){var g=this.appendFrame(d,t,c);g?(this.frameIndex++,r=g.sample.pts,n=c+=g.length):c=p}else i.canParse(t,c)?(l=i.getID3Data(t,c),h.samples.push({pts:r,dts:r,data:l}),n=c+=l.length):c++;if(c===p&&n!==p){var v=Object(s.sliceUint8)(t,n);this.cachedData?this.cachedData=Object(o.appendUint8Array)(this.cachedData,v):this.cachedData=v}}return{audioTrack:d,avcTrack:Object(a.dummyTrack)(),id3Track:h,textTrack:Object(a.dummyTrack)()}},e.demuxSampleAes=function(t,e,n){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},e.flush=function(t){var e=this.cachedData;return e&&(this.cachedData=null,this.demux(e,0)),this.frameIndex=0,{audioTrack:this._audioTrack,avcTrack:Object(a.dummyTrack)(),id3Track:this._id3Track,textTrack:Object(a.dummyTrack)()}},e.destroy=function(){},t}(),u=function(t,e){return Object(r.isFiniteNumber)(t)?90*t:9e4*e};e.default=l},"./src/demux/chunk-cache.ts":
/*!**********************************!*\
	  !*** ./src/demux/chunk-cache.ts ***!
	  \**********************************/
/*! exports provided: default */function(t,e,n){n.r(e),n.d(e,"default",(function(){return r}));var r=function(){function t(){this.chunks=[],this.dataLength=0}var e=t.prototype;return e.push=function(t){this.chunks.push(t),this.dataLength+=t.length},e.flush=function(){var t,e=this.chunks,n=this.dataLength;return e.length?(t=1===e.length?e[0]:function(t,e){for(var n=new Uint8Array(e),r=0,i=0;i<t.length;i++){var a=t[i];n.set(a,r),r+=a.length}return n}(e,n),this.reset(),t):new Uint8Array(0)},e.reset=function(){this.chunks.length=0,this.dataLength=0},t}()},"./src/demux/dummy-demuxed-track.ts":
/*!******************************************!*\
	  !*** ./src/demux/dummy-demuxed-track.ts ***!
	  \******************************************/
/*! exports provided: dummyTrack */function(t,e,n){function r(){return{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}n.r(e),n.d(e,"dummyTrack",(function(){return r}))},"./src/demux/exp-golomb.ts":
/*!*********************************!*\
	  !*** ./src/demux/exp-golomb.ts ***!
	  \*********************************/
/*! exports provided: default */function(t,e,n){n.r(e);var r=n(/*! ../utils/logger */"./src/utils/logger.ts"),i=function(){function t(t){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}var e=t.prototype;return e.loadWord=function(){var t=this.data,e=this.bytesAvailable,n=t.byteLength-e,r=new Uint8Array(4),i=Math.min(4,e);if(0===i)throw new Error("no bytes available");r.set(t.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},e.skipBits=function(t){var e;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,t-=(e=t>>3)>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},e.readBits=function(t){var e=Math.min(this.bitsAvailable,t),n=this.word>>>32-e;return t>32&&r.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),(e=t-e)>0&&this.bitsAvailable?n<<e|this.readBits(e):n},e.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},e.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.skipEG=function(){this.skipBits(1+this.skipLZ())},e.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},e.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},e.readBoolean=function(){return 1===this.readBits(1)},e.readUByte=function(){return this.readBits(8)},e.readUShort=function(){return this.readBits(16)},e.readUInt=function(){return this.readBits(32)},e.skipScalingList=function(t){for(var e=8,n=8,r=0;r<t;r++)0!==n&&(n=(e+this.readEG()+256)%256),e=0===n?e:n},e.readSPS=function(){var t,e,n,r=0,i=0,a=0,o=0,s=this.readUByte.bind(this),l=this.readBits.bind(this),u=this.readUEG.bind(this),c=this.readBoolean.bind(this),d=this.skipBits.bind(this),h=this.skipEG.bind(this),f=this.skipUEG.bind(this),p=this.skipScalingList.bind(this);s();var g=s();if(l(5),d(3),s(),f(),100===g||110===g||122===g||244===g||44===g||83===g||86===g||118===g||128===g){var v=u();if(3===v&&d(1),f(),f(),d(1),c())for(e=3!==v?8:12,n=0;n<e;n++)c()&&p(n<6?16:64)}f();var m=u();if(0===m)u();else if(1===m)for(d(1),h(),h(),t=u(),n=0;n<t;n++)h();f(),d(1);var y=u(),b=u(),S=l(1);0===S&&d(1),d(1),c()&&(r=u(),i=u(),a=u(),o=u());var E=[1,1];if(c()&&c())switch(s()){case 1:E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:E=[s()<<8|s(),s()<<8|s()]}return{width:Math.ceil(16*(y+1)-2*r-2*i),height:(2-S)*(b+1)*16-(S?2:4)*(a+o),pixelRatio:E}},e.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}();e.default=i},"./src/demux/id3.ts":
/*!**************************!*\
	  !*** ./src/demux/id3.ts ***!
	  \**************************/
/*! exports provided: isHeader, isFooter, getID3Data, canParse, getTimeStamp, isTimeStampFrame, getID3Frames, decodeFrame, utf8ArrayToStr, testables */function(t,e,n){n.r(e),n.d(e,"isHeader",(function(){return i})),n.d(e,"isFooter",(function(){return a})),n.d(e,"getID3Data",(function(){return o})),n.d(e,"canParse",(function(){return l})),n.d(e,"getTimeStamp",(function(){return u})),n.d(e,"isTimeStampFrame",(function(){return c})),n.d(e,"getID3Frames",(function(){return h})),n.d(e,"decodeFrame",(function(){return f})),n.d(e,"utf8ArrayToStr",(function(){return y})),n.d(e,"testables",(function(){return b}));var r,i=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},a=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},o=function(t,e){for(var n=e,r=0;i(t,e);)r+=10,r+=s(t,e+6),a(t,e+10)&&(r+=10),e+=r;if(r>0)return t.subarray(n,n+r)},s=function(t,e){var n=0;return n=(127&t[e])<<21,n|=(127&t[e+1])<<14,n|=(127&t[e+2])<<7,n|=127&t[e+3]},l=function(t,e){return i(t,e)&&s(t,e+6)+10<=t.length-e},u=function(t){for(var e=h(t),n=0;n<e.length;n++){var r=e[n];if(c(r))return m(r)}},c=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},d=function(t){var e=String.fromCharCode(t[0],t[1],t[2],t[3]),n=s(t,4);return{type:e,size:n,data:t.subarray(10,10+n)}},h=function(t){for(var e=0,n=[];i(t,e);){for(var r=s(t,e+6),o=(e+=10)+r;e+8<o;){var l=d(t.subarray(e)),u=f(l);u&&n.push(u),e+=l.size+10}a(t,e)&&(e+=10)}return n},f=function(t){return"PRIV"===t.type?p(t):"W"===t.type[0]?v(t):g(t)},p=function(t){if(!(t.size<2)){var e=y(t.data,!0),n=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:n.buffer}}},g=function(t){if(!(t.size<2)){if("TXXX"===t.type){var e=1,n=y(t.data.subarray(e),!0);e+=n.length+1;var r=y(t.data.subarray(e));return{key:t.type,info:n,data:r}}var i=y(t.data.subarray(1));return{key:t.type,data:i}}},v=function(t){if("WXXX"===t.type){if(t.size<2)return;var e=1,n=y(t.data.subarray(e),!0);e+=n.length+1;var r=y(t.data.subarray(e));return{key:t.type,info:n,data:r}}var i=y(t.data);return{key:t.type,data:i}},m=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),n=1&e[3],r=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}},y=function(t,e){void 0===e&&(e=!1);var n=S();if(n){var r=n.decode(t);if(e){var i=r.indexOf("\0");return-1!==i?r.substring(0,i):r}return r.replace(/\0/g,"")}for(var a,o,s,l=t.length,u="",c=0;c<l;){if(0===(a=t[c++])&&e)return u;if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:u+=String.fromCharCode(a);break;case 12:case 13:o=t[c++],u+=String.fromCharCode((31&a)<<6|63&o);break;case 14:o=t[c++],s=t[c++],u+=String.fromCharCode((15&a)<<12|(63&o)<<6|(63&s)<<0)}}return u},b={decodeTextFrame:g};function S(){return r||void 0===self.TextDecoder||(r=new self.TextDecoder("utf-8")),r}},"./src/demux/mp3demuxer.ts":
/*!*********************************!*\
	  !*** ./src/demux/mp3demuxer.ts ***!
	  \*********************************/
/*! exports provided: default */function(t,e,n){n.r(e);var r=n(/*! ./base-audio-demuxer */"./src/demux/base-audio-demuxer.ts"),i=n(/*! ../demux/id3 */"./src/demux/id3.ts"),a=n(/*! ../utils/logger */"./src/utils/logger.ts"),o=n(/*! ./mpegaudio */"./src/demux/mpegaudio.ts");function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){var e,n;function r(){return t.apply(this,arguments)||this}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,s(e,n);var l=r.prototype;return l.resetInitSegment=function(e,n,r){t.prototype.resetInitSegment.call(this,e,n,r),this._audioTrack={container:"audio/mpeg",type:"audio",id:0,pid:-1,sequenceNumber:0,isAAC:!1,samples:[],manifestCodec:e,duration:r,inputTimeScale:9e4,dropped:0}},r.probe=function(t){if(!t)return!1;for(var e=(i.getID3Data(t,0)||[]).length,n=t.length;e<n;e++)if(o.probe(t,e))return a.logger.log("MPEG Audio sync word found !"),!0;return!1},l.canParse=function(t,e){return o.canParse(t,e)},l.appendFrame=function(t,e,n){if(null!==this.initPTS)return o.appendFrame(t,e,n,this.initPTS,this.frameIndex)},r}(r.default);l.minProbeByteLength=4,e.default=l},"./src/demux/mp4demuxer.ts":
/*!*********************************!*\
	  !*** ./src/demux/mp4demuxer.ts ***!
	  \*********************************/
/*! exports provided: default */function(t,e,n){n.r(e);var r=n(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),i=n(/*! ./dummy-demuxed-track */"./src/demux/dummy-demuxed-track.ts"),a=function(){function t(t,e){this.remainderData=null,this.config=void 0,this.config=e}var e=t.prototype;return e.resetTimeStamp=function(){},e.resetInitSegment=function(){},e.resetContiguity=function(){},t.probe=function(t){return Object(r.findBox)({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.demux=function(t){var e=t,n=Object(i.dummyTrack)();if(this.config.progressive){this.remainderData&&(e=Object(r.appendUint8Array)(this.remainderData,t));var a=Object(r.segmentValidRange)(e);this.remainderData=a.remainder,n.samples=a.valid||new Uint8Array}else n.samples=e;return{audioTrack:Object(i.dummyTrack)(),avcTrack:n,id3Track:Object(i.dummyTrack)(),textTrack:Object(i.dummyTrack)()}},e.flush=function(){var t=Object(i.dummyTrack)();return t.samples=this.remainderData||new Uint8Array,this.remainderData=null,{audioTrack:Object(i.dummyTrack)(),avcTrack:t,id3Track:Object(i.dummyTrack)(),textTrack:Object(i.dummyTrack)()}},e.demuxSampleAes=function(t,e,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},e.destroy=function(){},t}();a.minProbeByteLength=1024,e.default=a},"./src/demux/mpegaudio.ts":
/*!********************************!*\
	  !*** ./src/demux/mpegaudio.ts ***!
	  \********************************/
/*! exports provided: appendFrame, parseHeader, isHeaderPattern, isHeader, canParse, probe */function(t,e,n){n.r(e),n.d(e,"appendFrame",(function(){return l})),n.d(e,"parseHeader",(function(){return u})),n.d(e,"isHeaderPattern",(function(){return c})),n.d(e,"isHeader",(function(){return d})),n.d(e,"canParse",(function(){return h})),n.d(e,"probe",(function(){return f}));var r=null,i=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],a=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],o=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],s=[0,1,1,4];function l(t,e,n,r,i){if(!(n+24>e.length)){var a=u(e,n);if(a&&n+a.frameLength<=e.length){var o=r+i*(9e4*a.samplesPerFrame/a.sampleRate),s={unit:e.subarray(n,n+a.frameLength),pts:o,dts:o};return t.config=[],t.channelCount=a.channelCount,t.samplerate=a.sampleRate,t.samples.push(s),{sample:s,length:a.frameLength,missing:0}}}}function u(t,e){var n=t[e+1]>>3&3,l=t[e+1]>>1&3,u=t[e+2]>>4&15,c=t[e+2]>>2&3;if(1!==n&&0!==u&&15!==u&&3!==c){var d=t[e+2]>>1&1,h=t[e+3]>>6,f=1e3*i[14*(3===n?3-l:3===l?3:4)+u-1],p=a[3*(3===n?0:2===n?1:2)+c],g=3===h?1:2,v=o[n][l],m=s[l],y=8*v*m,b=Math.floor(v*f/p+d)*m;if(null===r){var S=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);r=S?parseInt(S[1]):0}return!!r&&r<=87&&2===l&&f>=224e3&&0===h&&(t[e+3]=128|t[e+3]),{sampleRate:p,channelCount:g,frameLength:b,samplesPerFrame:y}}}function c(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])}function d(t,e){return e+1<t.length&&c(t,e)}function h(t,e){return c(t,e)&&4<=t.length-e}function f(t,e){if(e+1<t.length&&c(t,e)){var n=u(t,e),r=4;null!=n&&n.frameLength&&(r=n.frameLength);var i=e+r;return i===t.length||d(t,i)}return!1}},"./src/demux/sample-aes.ts":
/*!*********************************!*\
	  !*** ./src/demux/sample-aes.ts ***!
	  \*********************************/
/*! exports provided: default */function(t,e,n){n.r(e);var r=n(/*! ../crypt/decrypter */"./src/crypt/decrypter.ts"),i=n(/*! ./tsdemuxer */"./src/demux/tsdemuxer.ts"),a=function(){function t(t,e,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new r.default(t,e,{removePKCS7Padding:!1})}var e=t.prototype;return e.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.keyData.key.buffer,this.keyData.iv.buffer,e)},e.decryptAacSample=function(t,e,n,r){var i=t[e].unit,a=i.subarray(16,i.length-i.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),s=this;this.decryptBuffer(o,(function(a){var o=new Uint8Array(a);i.set(o,16),r||s.decryptAacSamples(t,e+1,n)}))},e.decryptAacSamples=function(t,e,n){for(;;e++){if(e>=t.length)return void n();if(!(t[e].unit.length<32)){var r=this.decrypter.isSync();if(this.decryptAacSample(t,e,n,r),!r)return}}},e.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,n=new Int8Array(e),r=0,i=32;i<=t.length-16;i+=160,r+=16)n.set(t.subarray(i,i+16),r);return n},e.getAvcDecryptedUnit=function(t,e){for(var n=new Uint8Array(e),r=0,i=32;i<=t.length-16;i+=160,r+=16)t.set(n.subarray(r,r+16),i);return t},e.decryptAvcSample=function(t,e,n,r,a,o){var s=Object(i.discardEPB)(a.data),l=this.getAvcEncryptedData(s),u=this;this.decryptBuffer(l.buffer,(function(i){a.data=u.getAvcDecryptedUnit(s,i),o||u.decryptAvcSamples(t,e,n+1,r)}))},e.decryptAvcSamples=function(t,e,n,r){if(t instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;e++,n=0){if(e>=t.length)return void r();for(var i=t[e].units;!(n>=i.length);n++){var a=i[n];if(!(a.data.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(t,e,n,r,a,o),!o)return}}}},t}();e.default=a},"./src/demux/transmuxer-interface.ts":
/*!*******************************************!*\
	  !*** ./src/demux/transmuxer-interface.ts ***!
	  \*******************************************/
/*! exports provided: default */function(t,e,n){n.r(e),n.d(e,"default",(function(){return d}));var r=n(/*! webworkify-webpack */"./node_modules/webworkify-webpack/index.js"),i=n(/*! ../events */"./src/events.ts"),a=n(/*! ../demux/transmuxer */"./src/demux/transmuxer.ts"),o=n(/*! ../utils/logger */"./src/utils/logger.ts"),s=n(/*! ../errors */"./src/errors.ts"),l=n(/*! ../utils/mediasource-helper */"./src/utils/mediasource-helper.ts"),u=n(/*! eventemitter3 */"./node_modules/eventemitter3/index.js"),c=Object(l.getMediaSource)()||{isTypeSupported:function(){return!1}},d=function(){function t(t,e,n,l){var d=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.hls=t,this.id=e,this.onTransmuxComplete=n,this.onFlush=l;var h=t.config,f=function(e,n){(n=n||{}).frag=d.frag,n.id=d.id,t.trigger(e,n)};this.observer=new u.EventEmitter,this.observer.on(i.Events.FRAG_DECRYPTED,f),this.observer.on(i.Events.ERROR,f);var p={mp4:c.isTypeSupported("video/mp4"),mpeg:c.isTypeSupported("audio/mpeg"),mp3:c.isTypeSupported('audio/mp4; codecs="mp3"')},g=navigator.vendor;if(h.enableWorker&&"undefined"!=typeof Worker){var v;o.logger.log("demuxing in webworker");try{v=this.worker=r(/*! ../demux/transmuxer-worker.ts */"./src/demux/transmuxer-worker.ts"),this.onwmsg=this.onWorkerMessage.bind(this),v.addEventListener("message",this.onwmsg),v.onerror=function(e){t.trigger(i.Events.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",error:new Error(e.message+"  ("+e.filename+":"+e.lineno+")")})},v.postMessage({cmd:"init",typeSupported:p,vendor:g,id:e,config:JSON.stringify(h)})}catch(t){o.logger.warn("Error in worker:",t),o.logger.error("Error while initializing DemuxerWorker, fallback to inline"),v&&self.URL.revokeObjectURL(v.objectURL),this.transmuxer=new a.default(this.observer,p,h,g,e),this.worker=null}}else this.transmuxer=new a.default(this.observer,p,h,g,e)}var e=t.prototype;return e.destroy=function(){var t=this.worker;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.worker=null;else{var e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}var n=this.observer;n&&n.removeAllListeners(),this.observer=null},e.push=function(t,e,n,r,i,s,l,u,c,d){var h=this;c.transmuxing.start=self.performance.now();var f=this.transmuxer,p=this.worker,g=s?s.start:i.start,v=i.decryptdata,m=this.frag,y=!(m&&i.cc===m.cc),b=!(m&&c.level===m.level),S=m?c.sn-m.sn:-1,E=this.part?c.part-this.part.index:1,T=!b&&(1===S||0===S&&1===E),_=self.performance.now();(b||S||0===i.stats.parsing.start)&&(i.stats.parsing.start=_),!s||!E&&T||(s.stats.parsing.start=_);var x=new a.TransmuxState(y,T,u,b,g);if(!T||y){o.logger.log("[transmuxer-interface, "+i.type+"]: Starting new transmux session for sn: "+c.sn+" p: "+c.part+" level: "+c.level+" id: "+c.id+"\n        discontinuity: "+y+"\n        trackSwitch: "+b+"\n        contiguous: "+T+"\n        accurateTimeOffset: "+u+"\n        timeOffset: "+g);var w=new a.TransmuxConfig(n,r,e,l,d);this.configureTransmuxer(w)}if(this.frag=i,this.part=s,p)p.postMessage({cmd:"demux",data:t,decryptdata:v,chunkMeta:c,state:x},t instanceof ArrayBuffer?[t]:[]);else if(f){var k=f.push(t,v,c,x);Object(a.isPromise)(k)?k.then((function(t){h.handleTransmuxComplete(t)})):this.handleTransmuxComplete(k)}},e.flush=function(t){var e=this;t.transmuxing.start=self.performance.now();var n=this.transmuxer,r=this.worker;if(r)r.postMessage({cmd:"flush",chunkMeta:t});else if(n){var i=n.flush(t);Object(a.isPromise)(i)?i.then((function(n){e.handleFlushResult(n,t)})):this.handleFlushResult(i,t)}},e.handleFlushResult=function(t,e){var n=this;t.forEach((function(t){n.handleTransmuxComplete(t)})),this.onFlush(e)},e.onWorkerMessage=function(t){var e=t.data,n=this.hls;switch(e.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(e.data);break;case"flush":this.onFlush(e.data);break;default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,n.trigger(e.event,e.data)}},e.configureTransmuxer=function(t){var e=this.worker,n=this.transmuxer;e?e.postMessage({cmd:"configure",config:t}):n&&n.configure(t)},e.handleTransmuxComplete=function(t){t.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(t)},t}()},"./src/demux/transmuxer-worker.ts":
/*!****************************************!*\
	  !*** ./src/demux/transmuxer-worker.ts ***!
	  \****************************************/
/*! exports provided: default */function(t,e,n){n.r(e),n.d(e,"default",(function(){return s}));var r=n(/*! ../demux/transmuxer */"./src/demux/transmuxer.ts"),i=n(/*! ../events */"./src/events.ts"),a=n(/*! ../utils/logger */"./src/utils/logger.ts"),o=n(/*! eventemitter3 */"./node_modules/eventemitter3/index.js");function s(t){var e=new o.EventEmitter,n=function(e,n){t.postMessage({event:e,data:n})};e.on(i.Events.FRAG_DECRYPTED,n),e.on(i.Events.ERROR,n),t.addEventListener("message",(function(i){var o=i.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);t.transmuxer=new r.default(e,o.typeSupported,s,o.vendor,o.id),Object(a.enableLogs)(s.debug),n("init",null);break;case"configure":t.transmuxer.configure(o.config);break;case"demux":var u=t.transmuxer.push(o.data,o.decryptdata,o.chunkMeta,o.state);Object(r.isPromise)(u)?u.then((function(e){l(t,e)})):l(t,u);break;case"flush":var d=o.chunkMeta,h=t.transmuxer.flush(d);Object(r.isPromise)(h)?h.then((function(e){c(t,e,d)})):c(t,h,d)}}))}function l(t,e){if((n=e.remuxResult).audio||n.video||n.text||n.id3||n.initSegment){var n,r=[],i=e.remuxResult,a=i.audio,o=i.video;a&&u(r,a),o&&u(r,o),t.postMessage({event:"transmuxComplete",data:e},r)}}function u(t,e){e.data1&&t.push(e.data1.buffer),e.data2&&t.push(e.data2.buffer)}function c(t,e,n){e.forEach((function(e){l(t,e)})),t.postMessage({event:"flush",data:n})}},"./src/demux/transmuxer.ts":
/*!*********************************!*\
	  !*** ./src/demux/transmuxer.ts ***!
	  \*********************************/
/*! exports provided: default, isPromise, TransmuxConfig, TransmuxState */function(t,e,n){n.r(e),n.d(e,"default",(function(){return y})),n.d(e,"isPromise",(function(){return S})),n.d(e,"TransmuxConfig",(function(){return E})),n.d(e,"TransmuxState",(function(){return T}));var r,i=n(/*! ../events */"./src/events.ts"),a=n(/*! ../errors */"./src/errors.ts"),o=n(/*! ../crypt/decrypter */"./src/crypt/decrypter.ts"),s=n(/*! ../demux/aacdemuxer */"./src/demux/aacdemuxer.ts"),l=n(/*! ../demux/mp4demuxer */"./src/demux/mp4demuxer.ts"),u=n(/*! ../demux/tsdemuxer */"./src/demux/tsdemuxer.ts"),c=n(/*! ../demux/mp3demuxer */"./src/demux/mp3demuxer.ts"),d=n(/*! ../remux/mp4-remuxer */"./src/remux/mp4-remuxer.ts"),h=n(/*! ../remux/passthrough-remuxer */"./src/remux/passthrough-remuxer.ts"),f=n(/*! ./chunk-cache */"./src/demux/chunk-cache.ts"),p=n(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),g=n(/*! ../utils/logger */"./src/utils/logger.ts");try{r=self.performance.now.bind(self.performance)}catch(t){g.logger.debug("Unable to use Performance API on this environment"),r=self.Date.now}var v=[{demux:u.default,remux:d.default},{demux:l.default,remux:h.default},{demux:s.default,remux:d.default},{demux:c.default,remux:d.default}],m=1024;v.forEach((function(t){var e=t.demux;m=Math.max(m,e.minProbeByteLength)}));var y=function(){function t(t,e,n,r,i){this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.cache=new f.default,this.observer=t,this.typeSupported=e,this.config=n,this.vendor=r,this.id=i}var e=t.prototype;return e.configure=function(t){this.transmuxConfig=t,this.decrypter&&this.decrypter.reset()},e.push=function(t,e,n,i){var a=this,o=n.transmuxing;o.executeStart=r();var s=new Uint8Array(t),l=this.cache,u=this.config,c=this.currentTransmuxState,d=this.transmuxConfig;i&&(this.currentTransmuxState=i);var h=function(t,e){var n=null;return t.byteLength>0&&null!=e&&null!=e.key&&null!==e.iv&&null!=e.method&&(n=e),n}(s,e);if(h&&"AES-128"===h.method){var f=this.getDecrypter();if(!u.enableSoftwareAES)return this.decryptionPromise=f.webCryptoDecrypt(s,h.key.buffer,h.iv.buffer).then((function(t){var e=a.push(t,null,n);return a.decryptionPromise=null,e})),this.decryptionPromise;var g=f.softwareDecrypt(s,h.key.buffer,h.iv.buffer);if(!g)return o.executeEnd=r(),b(n);s=new Uint8Array(g)}var v=i||c,m=v.contiguous,y=v.discontinuity,S=v.trackSwitch,E=v.accurateTimeOffset,T=v.timeOffset,_=d.audioCodec,x=d.videoCodec,w=d.defaultInitPts,k=d.duration,A=d.initSegmentData;if((y||S)&&this.resetInitSegment(A,_,x,k),y&&this.resetInitialTimestamp(w),m||this.resetContiguity(),this.needsProbing(s,y,S)){if(l.dataLength){var C=l.flush();s=Object(p.appendUint8Array)(C,s)}this.configureTransmuxer(s,d)}var D=this.transmux(s,h,T,E,n),L=this.currentTransmuxState;return L.contiguous=!0,L.discontinuity=!1,L.trackSwitch=!1,o.executeEnd=r(),D},e.flush=function(t){var e=this,n=t.transmuxing;n.executeStart=r();var o=this.decrypter,s=this.cache,l=this.currentTransmuxState,u=this.decryptionPromise;if(u)return u.then((function(){return e.flush(t)}));var c=[],d=l.timeOffset;if(o){var h=o.flush();h&&c.push(this.push(h,null,t))}var f=s.dataLength;s.reset();var p=this.demuxer,g=this.remuxer;if(!p||!g)return f>=m&&this.observer.emit(i.Events.ERROR,i.Events.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),n.executeEnd=r(),[b(t)];var v=p.flush(d);return S(v)?v.then((function(n){return e.flushRemux(c,n,t),c})):(this.flushRemux(c,v,t),c)},e.flushRemux=function(t,e,n){var i=e.audioTrack,a=e.avcTrack,o=e.id3Track,s=e.textTrack,l=this.currentTransmuxState,u=l.accurateTimeOffset,c=l.timeOffset;g.logger.log("[transmuxer.ts]: Flushed fragment "+n.sn+(n.part>-1?" p: "+n.part:"")+" of level "+n.level);var d=this.remuxer.remux(i,a,o,s,c,u,!0,this.id);t.push({remuxResult:d,chunkMeta:n}),n.transmuxing.executeEnd=r()},e.resetInitialTimestamp=function(t){var e=this.demuxer,n=this.remuxer;e&&n&&(e.resetTimeStamp(t),n.resetTimeStamp(t))},e.resetContiguity=function(){var t=this.demuxer,e=this.remuxer;t&&e&&(t.resetContiguity(),e.resetNextTimestamp())},e.resetInitSegment=function(t,e,n,r){var i=this.demuxer,a=this.remuxer;i&&a&&(i.resetInitSegment(e,n,r),a.resetInitSegment(t,e,n))},e.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},e.transmux=function(t,e,n,r,i){return e&&"SAMPLE-AES"===e.method?this.transmuxSampleAes(t,e,n,r,i):this.transmuxUnencrypted(t,n,r,i)},e.transmuxUnencrypted=function(t,e,n,r){var i=this.demuxer.demux(t,e,!1,!this.config.progressive),a=i.audioTrack,o=i.avcTrack,s=i.id3Track,l=i.textTrack;return{remuxResult:this.remuxer.remux(a,o,s,l,e,n,!1,this.id),chunkMeta:r}},e.transmuxSampleAes=function(t,e,n,r,i){var a=this;return this.demuxer.demuxSampleAes(t,e,n).then((function(t){return{remuxResult:a.remuxer.remux(t.audioTrack,t.avcTrack,t.id3Track,t.textTrack,n,r,!1,a.id),chunkMeta:i}}))},e.configureTransmuxer=function(t,e){for(var n,r=this.config,i=this.observer,a=this.typeSupported,o=this.vendor,s=e.audioCodec,u=e.defaultInitPts,c=e.duration,d=e.initSegmentData,f=e.videoCodec,p=0,m=v.length;p<m;p++)if(v[p].demux.probe(t)){n=v[p];break}n||(g.logger.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),n={demux:l.default,remux:h.default});var y=this.demuxer,b=this.remuxer,S=n.remux,E=n.demux;b&&b instanceof S||(this.remuxer=new S(i,r,a,o)),y&&y instanceof E||(this.demuxer=new E(i,r,a),this.probe=E.probe),this.resetInitSegment(d,s,f,c),this.resetInitialTimestamp(u)},e.needsProbing=function(t,e,n){return!this.demuxer||!this.remuxer||e||n},e.getDecrypter=function(){var t=this.decrypter;return t||(t=this.decrypter=new o.default(this.observer,this.config)),t},t}(),b=function(t){return{remuxResult:{},chunkMeta:t}};function S(t){return"then"in t&&t.then instanceof Function}var E=function(t,e,n,r,i){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=t,this.videoCodec=e,this.initSegmentData=n,this.duration=r,this.defaultInitPts=i},T=function(t,e,n,r,i){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.discontinuity=t,this.contiguous=e,this.accurateTimeOffset=n,this.trackSwitch=r,this.timeOffset=i}},"./src/demux/tsdemuxer.ts":
/*!********************************!*\
	  !*** ./src/demux/tsdemuxer.ts ***!
	  \********************************/
/*! exports provided: discardEPB, default */function(t,e,n){n.r(e),n.d(e,"discardEPB",(function(){return S}));var r=n(/*! ./adts */"./src/demux/adts.ts"),i=n(/*! ./mpegaudio */"./src/demux/mpegaudio.ts"),a=n(/*! ./exp-golomb */"./src/demux/exp-golomb.ts"),o=n(/*! ./id3 */"./src/demux/id3.ts"),s=n(/*! ./sample-aes */"./src/demux/sample-aes.ts"),l=n(/*! ../events */"./src/events.ts"),u=n(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),c=n(/*! ../utils/logger */"./src/utils/logger.ts"),d=n(/*! ../errors */"./src/errors.ts"),h={video:1,audio:2,id3:3,text:4},f=function(){function t(t,e,n){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this.aacLastPTS=null,this._initPTS=null,this._initDTS=null,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=t,this.config=e,this.typeSupported=n}t.probe=function(e){var n=t.syncOffset(e);return!(n<0||(n&&c.logger.warn("MPEG2-TS detected but first sync word found @ offset "+n+", junk ahead ?"),0))},t.syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),n=0;n<e;){if(71===t[n]&&71===t[n+188]&&71===t[n+376])return n;n++}return-1},t.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:h[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===t?e:void 0}};var e=t.prototype;return e.resetInitSegment=function(e,n,r){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=t.createTrack("video",r),this._audioTrack=t.createTrack("audio",r),this._id3Track=t.createTrack("id3",r),this._txtTrack=t.createTrack("text",r),this._audioTrack.isAAC=!0,this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=e,this.videoCodec=n,this._duration=r},e.resetTimeStamp=function(){},e.resetContiguity=function(){var t=this._audioTrack,e=this._avcTrack,n=this._id3Track;t&&(t.pesData=null),e&&(e.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.aacLastPTS=null},e.demux=function(e,n,r,i){var a;void 0===r&&(r=!1),void 0===i&&(i=!1),r||(this.sampleAes=null);var o=this._avcTrack,s=this._audioTrack,h=this._id3Track,f=o.pid,p=o.pesData,y=s.pid,b=h.pid,S=s.pesData,E=h.pesData,T=!1,_=this.pmtParsed,x=this._pmtId,w=e.length;if(this.remainderData&&(w=(e=Object(u.appendUint8Array)(this.remainderData,e)).length,this.remainderData=null),w<188&&!i)return this.remainderData=e,{audioTrack:s,avcTrack:o,id3Track:h,textTrack:this._txtTrack};var k=Math.max(0,t.syncOffset(e));(w-=(w+k)%188)<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,w,e.buffer.byteLength-w));for(var A=k;A<w;A+=188)if(71===e[A]){var C=!!(64&e[A+1]),D=((31&e[A+1])<<8)+e[A+2],L=void 0;if((48&e[A+3])>>4>1){if((L=A+5+e[A+4])===A+188)continue}else L=A+4;switch(D){case f:C&&(p&&(a=m(p))&&this.parseAVCPES(a,!1),p={data:[],size:0}),p&&(p.data.push(e.subarray(L,A+188)),p.size+=A+188-L);break;case y:C&&(S&&(a=m(S))&&(s.isAAC?this.parseAACPES(a):this.parseMPEGPES(a)),S={data:[],size:0}),S&&(S.data.push(e.subarray(L,A+188)),S.size+=A+188-L);break;case b:C&&(E&&(a=m(E))&&this.parseID3PES(a),E={data:[],size:0}),E&&(E.data.push(e.subarray(L,A+188)),E.size+=A+188-L);break;case 0:C&&(L+=e[L]+1),x=this._pmtId=g(e,L);break;case x:C&&(L+=e[L]+1);var $=v(e,L,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,r);(f=$.avc)>0&&(o.pid=f),(y=$.audio)>0&&(s.pid=y,s.isAAC=$.isAAC),(b=$.id3)>0&&(h.pid=b),T&&!_&&(c.logger.log("reparse from beginning"),T=!1,A=k-188),_=this.pmtParsed=!0;break;case 17:case 8191:break;default:T=!0}}else this.observer.emit(l.Events.ERROR,l.Events.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});o.pesData=p,s.pesData=S,h.pesData=E;var O={audioTrack:s,avcTrack:o,id3Track:h,textTrack:this._txtTrack};return i&&this.extractRemainingSamples(O),O},e.flush=function(){var t,e=this.remainderData;return this.remainderData=null,t=e?this.demux(e,-1,!1,!0):{audioTrack:this._audioTrack,avcTrack:this._avcTrack,textTrack:this._txtTrack,id3Track:this._id3Track},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t},e.extractRemainingSamples=function(t){var e,n=t.audioTrack,r=t.avcTrack,i=t.id3Track,a=r.pesData,o=n.pesData,s=i.pesData;a&&(e=m(a))?(this.parseAVCPES(e,!0),r.pesData=null):r.pesData=a,o&&(e=m(o))?(n.isAAC?this.parseAACPES(e):this.parseMPEGPES(e),n.pesData=null):(null!=o&&o.size&&c.logger.log("last AAC PES packet truncated,might overlap between fragments"),n.pesData=o),s&&(e=m(s))?(this.parseID3PES(e),i.pesData=null):i.pesData=s},e.demuxSampleAes=function(t,e,n){var r=this.demux(t,n,!0,!this.config.progressive),i=this.sampleAes=new s.default(this.observer,this.config,e);return this.decrypt(r,i)},e.decrypt=function(t,e){return new Promise((function(n){var r=t.audioTrack,i=t.avcTrack;r.samples&&r.isAAC?e.decryptAacSamples(r.samples,0,(function(){i.samples?e.decryptAvcSamples(i.samples,0,0,(function(){n(t)})):n(t)})):i.samples&&e.decryptAvcSamples(i.samples,0,0,(function(){n(t)}))}))},e.destroy=function(){this._initPTS=this._initDTS=null,this._duration=0},e.parseAVCPES=function(t,e){var n,r=this,i=this._avcTrack,s=this.parseAVCNALu(t.data),l=this.avcSample,u=!1;t.data=null,l&&s.length&&!i.audFound&&(y(l,i),l=this.avcSample=p(!1,t.pts,t.dts,"")),s.forEach((function(e){switch(e.type){case 1:n=!0,l||(l=r.avcSample=p(!0,t.pts,t.dts,"")),l.frame=!0;var s=e.data;if(u&&s.length>4){var c=new a.default(s).readSliceType();2!==c&&4!==c&&7!==c&&9!==c||(l.key=!0)}break;case 5:n=!0,l||(l=r.avcSample=p(!0,t.pts,t.dts,"")),l.key=!0,l.frame=!0;break;case 6:n=!0;var d=new a.default(S(e.data));d.readUByte();for(var h=0,f=0,g=!1,v=0;!g&&d.bytesAvailable>1;){h=0;do{h+=v=d.readUByte()}while(255===v);f=0;do{f+=v=d.readUByte()}while(255===v);if(4===h&&0!==d.bytesAvailable){if(g=!0,181===d.readUByte()&&49===d.readUShort()&&1195456820===d.readUInt()&&3===d.readUByte()){for(var m=d.readUByte(),E=31&m,T=[m,d.readUByte()],_=0;_<E;_++)T.push(d.readUByte()),T.push(d.readUByte()),T.push(d.readUByte());b(r._txtTrack.samples,{type:3,pts:t.pts,bytes:T})}}else if(5===h&&0!==d.bytesAvailable){if(g=!0,f>16){for(var x=[],w=0;w<16;w++)x.push(d.readUByte().toString(16)),3!==w&&5!==w&&7!==w&&9!==w||x.push("-");for(var k=f-16,A=new Uint8Array(k),C=0;C<k;C++)A[C]=d.readUByte();b(r._txtTrack.samples,{pts:t.pts,payloadType:h,uuid:x.join(""),userData:Object(o.utf8ArrayToStr)(A),userDataBytes:A})}}else if(f<d.bytesAvailable)for(var D=0;D<f;D++)d.readUByte()}break;case 7:if(n=!0,u=!0,!i.sps){var L=new a.default(e.data).readSPS();i.width=L.width,i.height=L.height,i.pixelRatio=L.pixelRatio,i.sps=[e.data],i.duration=r._duration;for(var $=e.data.subarray(1,4),O="avc1.",M=0;M<3;M++){var I=$[M].toString(16);I.length<2&&(I="0"+I),O+=I}i.codec=O}break;case 8:n=!0,i.pps||(i.pps=[e.data]);break;case 9:n=!1,i.audFound=!0,l&&y(l,i),l=r.avcSample=p(!1,t.pts,t.dts,"");break;case 12:n=!1;break;default:n=!1,l&&(l.debug+="unknown NAL "+e.type+" ")}l&&n&&l.units.push(e)})),e&&l&&(y(l,i),this.avcSample=null)},e.getLastNalUnit=function(){var t,e,n=this.avcSample;if(!n||0===n.units.length){var r=this._avcTrack.samples;n=r[r.length-1]}if(null!==(t=n)&&void 0!==t&&t.units){var i=n.units;e=i[i.length-1]}return e},e.parseAVCNALu=function(t){var e,n,r=t.byteLength,i=this._avcTrack,a=i.naluState||0,o=a,s=[],l=0,u=-1,c=0;for(-1===a&&(u=0,c=31&t[0],a=0,l=1);l<r;)if(e=t[l++],a)if(1!==a)if(e)if(1===e){if(u>=0){var d={data:t.subarray(u,l-a-1),type:c};s.push(d)}else{var h=this.getLastNalUnit();if(h&&(o&&l<=4-o&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-o)),(n=l-a-1)>0)){var f=new Uint8Array(h.data.byteLength+n);f.set(h.data,0),f.set(t.subarray(0,n),h.data.byteLength),h.data=f}}l<r?(u=l,c=31&t[l],a=0):a=-1}else a=0;else a=3;else a=e?0:2;else a=e?0:1;if(u>=0&&a>=0){var p={data:t.subarray(u,r),type:c,state:a};s.push(p)}if(0===s.length){var g=this.getLastNalUnit();if(g){var v=new Uint8Array(g.data.byteLength+t.byteLength);v.set(g.data,0),v.set(t,g.data.byteLength),g.data=v}}return i.naluState=a,s},e.parseAACPES=function(t){var e,n,i,a,o,s=0,u=this._audioTrack,h=this.aacOverFlow,f=t.data;if(h){this.aacOverFlow=null;var p=h.sample.unit.byteLength,g=Math.min(h.missing,p),v=p-g;h.sample.unit.set(f.subarray(0,g),v),u.samples.push(h.sample),s=h.missing}for(e=s,n=f.length;e<n-1&&!r.isHeader(f,e);e++);if(e===s||(e<n-1?(i="AAC PES did not start with ADTS header,offset:"+e,a=!1):(i="no ADTS header found in AAC PES",a=!0),c.logger.warn("parsing error:"+i),this.observer.emit(l.Events.ERROR,l.Events.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.FRAG_PARSING_ERROR,fatal:a,reason:i}),!a)){if(r.initTrackConfig(u,this.observer,f,e,this.audioCodec),void 0!==t.pts)o=t.pts;else{if(!h)return void c.logger.warn("[tsdemuxer]: AAC PES unknown PTS");var m=r.getFrameDuration(u.samplerate);o=h.sample.pts+m}for(var y=0;e<n;){if(r.isHeader(f,e)){if(e+5<n){var b=r.appendFrame(u,f,e,o,y);if(b){if(!b.missing){e+=b.length,y++;continue}this.aacOverFlow=b}}break}e++}}},e.parseMPEGPES=function(t){var e=t.data,n=e.length,r=0,a=0,o=t.pts;if(void 0!==o)for(;a<n;)if(i.isHeader(e,a)){var s=i.appendFrame(this._audioTrack,e,a,o,r);if(!s)break;a+=s.length,r++}else a++;else c.logger.warn("[tsdemuxer]: MPEG PES unknown PTS")},e.parseID3PES=function(t){void 0!==t.pts?this._id3Track.samples.push(t):c.logger.warn("[tsdemuxer]: ID3 PES unknown PTS")},t}();function p(t,e,n,r){return{key:t,frame:!1,pts:e,dts:n,units:[],debug:r,length:0}}function g(t,e){return(31&t[e+10])<<8|t[e+11]}function v(t,e,n,r){var i={audio:-1,avc:-1,id3:-1,isAAC:!0},a=e+3+((15&t[e+1])<<8|t[e+2])-4;for(e+=12+((15&t[e+10])<<8|t[e+11]);e<a;){var o=(31&t[e+1])<<8|t[e+2];switch(t[e]){case 207:if(!r){c.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===i.audio&&(i.audio=o);break;case 21:-1===i.id3&&(i.id3=o);break;case 219:if(!r){c.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===i.avc&&(i.avc=o);break;case 3:case 4:n?-1===i.audio&&(i.audio=o,i.isAAC=!1):c.logger.log("MPEG audio found, not supported in this browser");break;case 36:c.logger.warn("Unsupported HEVC stream type found")}e+=5+((15&t[e+3])<<8|t[e+4])}return i}function m(t){var e,n,r,i,a,o=0,s=t.data;if(!t||0===t.size)return null;for(;s[0].length<19&&s.length>1;){var l=new Uint8Array(s[0].length+s[1].length);l.set(s[0]),l.set(s[1],s[0].length),s[0]=l,s.splice(1,1)}if(1===((e=s[0])[0]<<16)+(e[1]<<8)+e[2]){if((n=(e[4]<<8)+e[5])&&n>t.size-6)return null;var u=e[7];192&u&&(i=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,64&u?i-(a=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)>54e5&&(c.logger.warn(Math.round((i-a)/9e4)+"s delta between PTS and DTS, align them"),i=a):a=i);var d=(r=e[8])+9;if(t.size<=d)return null;t.size-=d;for(var h=new Uint8Array(t.size),f=0,p=s.length;f<p;f++){var g=(e=s[f]).byteLength;if(d){if(d>g){d-=g;continue}e=e.subarray(d),g-=d,d=0}h.set(e,o),o+=g}return n&&(n-=r+3),{data:h,pts:i,dts:a,len:n}}return null}function y(t,e){if(t.units.length&&t.frame){if(void 0===t.pts){var n=e.samples,r=n.length;if(!r)return void e.dropped++;var i=n[r-1];t.pts=i.pts,t.dts=i.dts}e.samples.push(t)}t.debug.length&&c.logger.log(t.pts+"/"+t.dts+":"+t.debug)}function b(t,e){var n=t.length;if(n>0){if(e.pts>=t[n-1].pts)t.push(e);else for(var r=n-1;r>=0;r--)if(e.pts<t[r].pts){t.splice(r,0,e);break}}else t.push(e)}function S(t){for(var e=t.byteLength,n=[],r=1;r<e-2;)0===t[r]&&0===t[r+1]&&3===t[r+2]?(n.push(r+2),r+=2):r++;if(0===n.length)return t;var i=e-n.length,a=new Uint8Array(i),o=0;for(r=0;r<i;o++,r++)o===n[0]&&(o++,n.shift()),a[r]=t[o];return a}f.minProbeByteLength=188,e.default=f},"./src/errors.ts":
/*!***********************!*\
	  !*** ./src/errors.ts ***!
	  \***********************/
/*! exports provided: ErrorTypes, ErrorDetails */function(t,e,n){var r,i;n.r(e),n.d(e,"ErrorTypes",(function(){return r})),n.d(e,"ErrorDetails",(function(){return i})),function(t){t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError"}(r||(r={})),function(t){t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.UNKNOWN="unknown"}(i||(i={}))},"./src/events.ts":
/*!***********************!*\
	  !*** ./src/events.ts ***!
	  \***********************/
/*! exports provided: Events */function(t,e,n){var r;n.r(e),n.d(e,"Events",(function(){return r})),function(t){t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached"}(r||(r={}))},"./src/hls.ts":
/*!********************!*\
	  !*** ./src/hls.ts ***!
	  \********************/
/*! exports provided: default */function(t,e,n){n.r(e),n.d(e,"default",(function(){return y}));var r=n(/*! url-toolkit */"./node_modules/url-toolkit/src/url-toolkit.js"),i=n(/*! ./loader/playlist-loader */"./src/loader/playlist-loader.ts"),a=n(/*! ./loader/key-loader */"./src/loader/key-loader.ts"),o=n(/*! ./controller/id3-track-controller */"./src/controller/id3-track-controller.ts"),s=n(/*! ./controller/latency-controller */"./src/controller/latency-controller.ts"),l=n(/*! ./controller/level-controller */"./src/controller/level-controller.ts"),u=n(/*! ./controller/fragment-tracker */"./src/controller/fragment-tracker.ts"),c=n(/*! ./controller/stream-controller */"./src/controller/stream-controller.ts"),d=n(/*! ./is-supported */"./src/is-supported.ts"),h=n(/*! ./utils/logger */"./src/utils/logger.ts"),f=n(/*! ./config */"./src/config.ts"),p=n(/*! eventemitter3 */"./node_modules/eventemitter3/index.js"),g=n(/*! ./events */"./src/events.ts"),v=n(/*! ./errors */"./src/errors.ts");function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var y=function(){function t(e){void 0===e&&(e={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new p.EventEmitter,this._autoLevelCapping=void 0,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this._media=null,this.url=null;var n=this.config=Object(f.mergeConfig)(t.DefaultConfig,e);this.userConfig=e,Object(h.enableLogs)(n.debug),this._autoLevelCapping=-1,n.progressive&&Object(f.enableStreamingMode)(n);var r=n.abrController,d=n.bufferController,g=n.capLevelController,v=n.fpsController,m=this.abrController=new r(this),y=this.bufferController=new d(this),b=this.capLevelController=new g(this),S=new v(this),E=new i.default(this),T=new a.default(this),_=new o.default(this),x=this.levelController=new l.default(this),w=new u.FragmentTracker(this),k=this.streamController=new c.default(this,w);b.setStreamController(k),S.setStreamController(k);var A=[x,k];this.networkControllers=A;var C=[E,T,m,y,b,S,_,w];this.audioTrackController=this.createController(n.audioTrackController,null,A),this.createController(n.audioStreamController,w,A),this.subtitleTrackController=this.createController(n.subtitleTrackController,null,A),this.createController(n.subtitleStreamController,w,A),this.createController(n.timelineController,null,C),this.emeController=this.createController(n.emeController,null,C),this.latencyController=this.createController(s.default,null,C),this.coreComponents=C}t.isSupported=function(){return Object(d.isSupported)()};var e,n,y,b=t.prototype;return b.createController=function(t,e,n){if(t){var r=e?new t(this,e):new t(this);return n&&n.push(r),r}return null},b.on=function(t,e,n){void 0===n&&(n=this),this._emitter.on(t,e,n)},b.once=function(t,e,n){void 0===n&&(n=this),this._emitter.once(t,e,n)},b.removeAllListeners=function(t){this._emitter.removeAllListeners(t)},b.off=function(t,e,n,r){void 0===n&&(n=this),this._emitter.off(t,e,n,r)},b.listeners=function(t){return this._emitter.listeners(t)},b.emit=function(t,e,n){return this._emitter.emit(t,e,n)},b.trigger=function(t,e){if(this.config.debug)return this.emit(t,t,e);try{return this.emit(t,t,e)}catch(e){h.logger.error("An internal error happened while handling event "+t+'. Error message: "'+e.message+'". Here is a stacktrace:',e),this.trigger(g.Events.ERROR,{type:v.ErrorTypes.OTHER_ERROR,details:v.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:t,error:e})}return!1},b.listenerCount=function(t){return this._emitter.listenerCount(t)},b.destroy=function(){h.logger.log("destroy"),this.trigger(g.Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((function(t){return t.destroy()})),this.networkControllers.length=0,this.coreComponents.forEach((function(t){return t.destroy()})),this.coreComponents.length=0},b.attachMedia=function(t){h.logger.log("attachMedia"),this._media=t,this.trigger(g.Events.MEDIA_ATTACHING,{media:t})},b.detachMedia=function(){h.logger.log("detachMedia"),this.trigger(g.Events.MEDIA_DETACHING,void 0),this._media=null},b.loadSource=function(t){this.stopLoad();var e=this.media,n=this.url,i=this.url=r.buildAbsoluteURL(self.location.href,t,{alwaysNormalize:!0});h.logger.log("loadSource:"+i),e&&n&&n!==i&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(e)),this.trigger(g.Events.MANIFEST_LOADING,{url:t})},b.startLoad=function(t){void 0===t&&(t=-1),h.logger.log("startLoad("+t+")"),this.networkControllers.forEach((function(e){e.startLoad(t)}))},b.stopLoad=function(){h.logger.log("stopLoad"),this.networkControllers.forEach((function(t){t.stopLoad()}))},b.swapAudioCodec=function(){h.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},b.recoverMediaError=function(){h.logger.log("recoverMediaError");var t=this._media;this.detachMedia(),t&&this.attachMedia(t)},b.removeLevel=function(t,e){void 0===e&&(e=0),this.levelController.removeLevel(t,e)},e=t,y=[{key:"version",get:function(){return"1.0.7"}},{key:"Events",get:function(){return g.Events}},{key:"ErrorTypes",get:function(){return v.ErrorTypes}},{key:"ErrorDetails",get:function(){return v.ErrorDetails}},{key:"DefaultConfig",get:function(){return t.defaultConfig?t.defaultConfig:f.hlsDefaultConfig},set:function(e){t.defaultConfig=e}}],(n=[{key:"levels",get:function(){var t=this.levelController.levels;return t||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){h.logger.log("set currentLevel:"+t),this.loadLevel=t,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){h.logger.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){h.logger.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){h.logger.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){h.logger.log("set startLevel:"+t),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(t){var e=!!t;e!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){this._autoLevelCapping!==t&&(h.logger.log("set autoLevelCapping:"+t),this._autoLevelCapping=t)}},{key:"bandwidthEstimate",get:function(){var t=this.abrController.bwEstimator;return t?t.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var t=this.levels,e=this.config.minAutoBitrate;if(!t)return 0;for(var n=t.length,r=0;r<n;r++)if(t[r].maxBitrate>e)return r;return 0}},{key:"maxAutoLevel",get:function(){var t=this.levels,e=this.autoLevelCapping;return-1===e&&t&&t.length?t.length-1:e}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(t){this.config.lowLatencyMode=t}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}])&&m(e.prototype,n),y&&m(e,y),t}();y.defaultConfig=void 0},"./src/is-supported.ts":
/*!*****************************!*\
	  !*** ./src/is-supported.ts ***!
	  \*****************************/
/*! exports provided: isSupported, changeTypeSupported */function(t,e,n){n.r(e),n.d(e,"isSupported",(function(){return a})),n.d(e,"changeTypeSupported",(function(){return o}));var r=n(/*! ./utils/mediasource-helper */"./src/utils/mediasource-helper.ts");function i(){return self.SourceBuffer||self.WebKitSourceBuffer}function a(){var t=Object(r.getMediaSource)();if(!t)return!1;var e=i(),n=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),a=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return!!n&&!!a}function o(){var t,e=i();return"function"==typeof(null==e||null===(t=e.prototype)||void 0===t?void 0:t.changeType)}},"./src/loader/fragment-loader.ts":
/*!***************************************!*\
	  !*** ./src/loader/fragment-loader.ts ***!
	  \***************************************/
/*! exports provided: default, LoadError */function(t,e,n){n.r(e),n.d(e,"default",(function(){return d})),n.d(e,"LoadError",(function(){return f}));var r=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),i=n(/*! ../errors */"./src/errors.ts");function a(t){var e="function"==typeof Map?new Map:void 0;return(a=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return o(t,arguments,u(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,t)})(t)}function o(t,e,n){return(o=s()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&l(i,n.prototype),i}).apply(null,arguments)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=Math.pow(2,17),d=function(){function t(t){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=t}var e=t.prototype;return e.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},e.abort=function(){this.loader&&this.loader.abort()},e.load=function(t,e){var n=this,r=t.url;if(!r)return Promise.reject(new f({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t,networkDetails:null},"Fragment does not have a "+(r?"part list":"url")));this.abort();var a=this.config,o=a.fLoader,s=a.loader;return new Promise((function(r,l){n.loader&&n.loader.destroy();var u=n.loader=t.loader=o?new o(a):new s(a),d=h(t),p={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout,highWaterMark:c};t.stats=u.stats,u.load(d,p,{onSuccess:function(e,i,a,o){n.resetLoader(t,u),r({frag:t,part:null,payload:e.data,networkDetails:o})},onError:function(e,r,a){n.resetLoader(t,u),l(new f({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t,response:e,networkDetails:a}))},onAbort:function(e,r,a){n.resetLoader(t,u),l(new f({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:t,networkDetails:a}))},onTimeout:function(e,r,a){n.resetLoader(t,u),l(new f({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,networkDetails:a}))},onProgress:function(n,r,i,a){e&&e({frag:t,part:null,payload:i,networkDetails:a})}})}))},e.loadPart=function(t,e,n){var r=this;this.abort();var a=this.config,o=a.fLoader,s=a.loader;return new Promise((function(l,u){r.loader&&r.loader.destroy();var d=r.loader=t.loader=o?new o(a):new s(a),p=h(t,e),g={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout,highWaterMark:c};e.stats=d.stats,d.load(p,g,{onSuccess:function(i,a,o,s){r.resetLoader(t,d),r.updateStatsFromPart(t,e);var u={frag:t,part:e,payload:i.data,networkDetails:s};n(u),l(u)},onError:function(n,a,o){r.resetLoader(t,d),u(new f({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t,part:e,response:n,networkDetails:o}))},onAbort:function(n,a,o){t.stats.aborted=e.stats.aborted,r.resetLoader(t,d),u(new f({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:t,part:e,networkDetails:o}))},onTimeout:function(n,a,o){r.resetLoader(t,d),u(new f({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,part:e,networkDetails:o}))}})}))},e.updateStatsFromPart=function(t,e){var n=t.stats,r=e.stats,i=r.total;if(n.loaded+=r.loaded,i){var a=Math.round(t.duration/e.duration),o=Math.min(Math.round(n.loaded/i),a),s=(a-o)*Math.round(n.loaded/o);n.total=n.loaded+s}else n.total=Math.max(n.loaded,n.total);var l=n.loading,u=r.loading;l.start?l.first+=u.first-u.start:(l.start=u.start,l.first=u.first),l.end=u.end},e.resetLoader=function(t,e){t.loader=null,this.loader===e&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),e.destroy()},t}();function h(t,e){void 0===e&&(e=null);var n=e||t,i={frag:t,part:e,responseType:"arraybuffer",url:n.url,rangeStart:0,rangeEnd:0},a=n.byteRangeStartOffset,o=n.byteRangeEndOffset;return Object(r.isFiniteNumber)(a)&&Object(r.isFiniteNumber)(o)&&(i.rangeStart=a,i.rangeEnd=o),i}var f=function(t){var e,n;function r(e){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return(n=t.call.apply(t,[this].concat(i))||this).data=void 0,n.data=e,n}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,l(e,n),r}(a(Error))},"./src/loader/fragment.ts":
/*!********************************!*\
	  !*** ./src/loader/fragment.ts ***!
	  \********************************/
/*! exports provided: ElementaryStreamTypes, BaseSegment, Fragment, Part */function(t,e,n){n.r(e),n.d(e,"ElementaryStreamTypes",(function(){return r})),n.d(e,"BaseSegment",(function(){return f})),n.d(e,"Fragment",(function(){return p})),n.d(e,"Part",(function(){return g}));var r,i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),a=n(/*! url-toolkit */"./node_modules/url-toolkit/src/url-toolkit.js"),o=n(/*! ../utils/logger */"./src/utils/logger.ts"),s=n(/*! ./level-key */"./src/loader/level-key.ts"),l=n(/*! ./load-stats */"./src/loader/load-stats.ts");function u(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),t}!function(t){t.AUDIO="audio",t.VIDEO="video",t.AUDIOVIDEO="audiovideo"}(r||(r={}));var f=function(){function t(t){var e;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((e={})[r.AUDIO]=null,e[r.VIDEO]=null,e[r.AUDIOVIDEO]=null,e),this.baseurl=t}return t.prototype.setByteRange=function(t,e){var n=t.split("@",2),r=[];1===n.length?r[0]=e?e.byteRangeEndOffset:0:r[0]=parseInt(n[1]),r[1]=parseInt(n[0])+r[0],this._byteRange=r},h(t,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Object(a.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(t){this._url=t}}]),t}(),p=function(t){function e(e,n){var r;return(r=t.call(this,n)||this)._decryptdata=null,r.rawProgramDateTime=null,r.programDateTime=null,r.tagList=[],r.duration=0,r.sn=0,r.levelkey=void 0,r.type=void 0,r.loader=null,r.level=-1,r.cc=0,r.startPTS=void 0,r.endPTS=void 0,r.appendedPTS=void 0,r.startDTS=void 0,r.endDTS=void 0,r.start=0,r.deltaPTS=void 0,r.maxStartPTS=void 0,r.minEndPTS=void 0,r.stats=new l.LoadStats,r.urlId=0,r.data=void 0,r.bitrateTest=!1,r.title=null,r.initSegment=null,r.type=e,r}u(e,t);var n=e.prototype;return n.createInitializationVector=function(t){for(var e=new Uint8Array(16),n=12;n<16;n++)e[n]=t>>8*(15-n)&255;return e},n.setDecryptDataFromLevelKey=function(t,e){var n=t;return"AES-128"===(null==t?void 0:t.method)&&t.uri&&!t.iv&&((n=s.LevelKey.fromURI(t.uri)).method=t.method,n.iv=this.createInitializationVector(e),n.keyFormat="identity"),n},n.setElementaryStreamInfo=function(t,e,n,r,i,a){void 0===a&&(a=!1);var o=this.elementaryStreams,s=o[t];s?(s.startPTS=Math.min(s.startPTS,e),s.endPTS=Math.max(s.endPTS,n),s.startDTS=Math.min(s.startDTS,r),s.endDTS=Math.max(s.endDTS,i)):o[t]={startPTS:e,endPTS:n,startDTS:r,endDTS:i,partial:a}},n.clearElementaryStreamInfo=function(){var t=this.elementaryStreams;t[r.AUDIO]=null,t[r.VIDEO]=null,t[r.AUDIOVIDEO]=null},h(e,[{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var t=this.sn;"number"!=typeof t&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&o.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),t=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,t)}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(i.isFiniteNumber)(this.programDateTime))return null;var t=Object(i.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*t}},{key:"encrypted",get:function(){var t;return!(null===(t=this.decryptdata)||void 0===t||!t.keyFormat||!this.decryptdata.uri)}}]),e}(f),g=function(t){function e(e,n,r,i,a){var o;(o=t.call(this,r)||this).fragOffset=0,o.duration=0,o.gap=!1,o.independent=!1,o.relurl=void 0,o.fragment=void 0,o.index=void 0,o.stats=new l.LoadStats,o.duration=e.decimalFloatingPoint("DURATION"),o.gap=e.bool("GAP"),o.independent=e.bool("INDEPENDENT"),o.relurl=e.enumeratedString("URI"),o.fragment=n,o.index=i;var s=e.enumeratedString("BYTERANGE");return s&&o.setByteRange(s,a),a&&(o.fragOffset=a.fragOffset+a.duration),o}return u(e,t),h(e,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var t=this.elementaryStreams;return!!(t.audio||t.video||t.audiovideo)}}]),e}(f)},"./src/loader/key-loader.ts":
/*!**********************************!*\
	  !*** ./src/loader/key-loader.ts ***!
	  \**********************************/
/*! exports provided: default */function(t,e,n){n.r(e),n.d(e,"default",(function(){return o}));var r=n(/*! ../events */"./src/events.ts"),i=n(/*! ../errors */"./src/errors.ts"),a=n(/*! ../utils/logger */"./src/utils/logger.ts"),o=function(){function t(t){this.hls=void 0,this.loaders={},this.decryptkey=null,this.decrypturl=null,this.hls=t,this._registerListeners()}var e=t.prototype;return e._registerListeners=function(){this.hls.on(r.Events.KEY_LOADING,this.onKeyLoading,this)},e._unregisterListeners=function(){this.hls.off(r.Events.KEY_LOADING,this.onKeyLoading)},e.destroy=function(){for(var t in this._unregisterListeners(),this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={}},e.onKeyLoading=function(t,e){var n=e.frag,i=n.type,o=this.loaders[i];if(n.decryptdata){var s=n.decryptdata.uri;if(s!==this.decrypturl||null===this.decryptkey){var l=this.hls.config;if(o&&(a.logger.warn("abort previous key loader for type:"+i),o.abort()),!s)return void a.logger.warn("key uri is falsy");var u=l.loader,c=n.loader=this.loaders[i]=new u(l);this.decrypturl=s,this.decryptkey=null;var d={url:s,frag:n,responseType:"arraybuffer"},h={timeout:l.fragLoadingTimeOut,maxRetry:0,retryDelay:l.fragLoadingRetryDelay,maxRetryDelay:l.fragLoadingMaxRetryTimeout,highWaterMark:0},f={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};c.load(d,h,f)}else this.decryptkey&&(n.decryptdata.key=this.decryptkey,this.hls.trigger(r.Events.KEY_LOADED,{frag:n}))}else a.logger.warn("Missing decryption data on fragment in onKeyLoading")},e.loadsuccess=function(t,e,n){var i=n.frag;i.decryptdata?(this.decryptkey=i.decryptdata.key=new Uint8Array(t.data),i.loader=null,delete this.loaders[i.type],this.hls.trigger(r.Events.KEY_LOADED,{frag:i})):a.logger.error("after key load, decryptdata unset")},e.loaderror=function(t,e){var n=e.frag,a=n.loader;a&&a.abort(),delete this.loaders[n.type],this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:n,response:t})},e.loadtimeout=function(t,e){var n=e.frag,a=n.loader;a&&a.abort(),delete this.loaders[n.type],this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},t}()},"./src/loader/level-details.ts":
/*!*************************************!*\
	  !*** ./src/loader/level-details.ts ***!
	  \*************************************/
/*! exports provided: LevelDetails */function(t,e,n){n.r(e),n.d(e,"LevelDetails",(function(){return a}));var r=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts");function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(t){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.fragments=[],this.url=t}var e,n,a;return t.prototype.reloaded=function(t){if(!t)return this.advanced=!0,void(this.updated=!0);var e=this.lastPartSn-t.lastPartSn,n=this.lastPartIndex-t.lastPartIndex;this.updated=this.endSN!==t.endSN||!!n||!!e,this.advanced=this.endSN>t.endSN||e>0||0===e&&n>0,this.updated||this.advanced?this.misses=Math.floor(.6*t.misses):this.misses=t.misses+1,this.availabilityDelay=t.availabilityDelay},e=t,(n=[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&Object(r.isFiniteNumber)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var t=this.driftEndTime-this.driftStartTime;return t>0?1e3*(this.driftEnd-this.driftStart)/t:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var t;return null!==(t=this.partList)&&void 0!==t&&t.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var t;return null!==(t=this.fragments)&&void 0!==t&&t.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var t;return null!==(t=this.partList)&&void 0!==t&&t.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var t;return null!==(t=this.partList)&&void 0!==t&&t.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}])&&i(e.prototype,n),a&&i(e,a),t}()},"./src/loader/level-key.ts":
/*!*********************************!*\
	  !*** ./src/loader/level-key.ts ***!
	  \*********************************/
/*! exports provided: LevelKey */function(t,e,n){n.r(e),n.d(e,"LevelKey",(function(){return a}));var r=n(/*! url-toolkit */"./node_modules/url-toolkit/src/url-toolkit.js");function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(t,e){this._uri=null,this.method=null,this.keyFormat=null,this.keyFormatVersions=null,this.keyID=null,this.key=null,this.iv=null,this._uri=e?Object(r.buildAbsoluteURL)(t,e,{alwaysNormalize:!0}):t}var e,n,a;return t.fromURL=function(e,n){return new t(e,n)},t.fromURI=function(e){return new t(e)},e=t,(n=[{key:"uri",get:function(){return this._uri}}])&&i(e.prototype,n),a&&i(e,a),t}()},"./src/loader/load-stats.ts":
/*!**********************************!*\
	  !*** ./src/loader/load-stats.ts ***!
	  \**********************************/
/*! exports provided: LoadStats */function(t,e,n){n.r(e),n.d(e,"LoadStats",(function(){return r}));var r=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},"./src/loader/m3u8-parser.ts":
/*!***********************************!*\
	  !*** ./src/loader/m3u8-parser.ts ***!
	  \***********************************/
/*! exports provided: default */function(t,e,n){n.r(e),n.d(e,"default",(function(){return v}));var r=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),i=n(/*! url-toolkit */"./node_modules/url-toolkit/src/url-toolkit.js"),a=n(/*! ./fragment */"./src/loader/fragment.ts"),o=n(/*! ./level-details */"./src/loader/level-details.ts"),s=n(/*! ./level-key */"./src/loader/level-key.ts"),l=n(/*! ../utils/attr-list */"./src/utils/attr-list.ts"),u=n(/*! ../utils/logger */"./src/utils/logger.ts"),c=n(/*! ../utils/codecs */"./src/utils/codecs.ts"),d=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,h=/#EXT-X-MEDIA:(.*)/g,f=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),p=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(PLAYLIST-TYPE):(.+)/.source,/#EXT-X-(MEDIA-SEQUENCE): *(\d+)/.source,/#EXT-X-(SKIP):(.+)/.source,/#EXT-X-(TARGETDURATION): *(\d+)/.source,/#EXT-X-(KEY):(.+)/.source,/#EXT-X-(START):(.+)/.source,/#EXT-X-(ENDLIST)/.source,/#EXT-X-(DISCONTINUITY-SEQ)UENCE: *(\d+)/.source,/#EXT-X-(DIS)CONTINUITY/.source,/#EXT-X-(VERSION):(\d+)/.source,/#EXT-X-(MAP):(.+)/.source,/#EXT-X-(SERVER-CONTROL):(.+)/.source,/#EXT-X-(PART-INF):(.+)/.source,/#EXT-X-(GAP)/.source,/#EXT-X-(BITRATE):\s*(\d+)/.source,/#EXT-X-(PART):(.+)/.source,/#EXT-X-(PRELOAD-HINT):(.+)/.source,/#EXT-X-(RENDITION-REPORT):(.+)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),g=/\.(mp4|m4s|m4v|m4a)$/i,v=function(){function t(){}return t.findGroup=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.id===e)return r}},t.convertAVC1ToAVCOTI=function(t){var e=t.split(".");if(e.length>2){var n=e.shift()+".";return n+=parseInt(e.shift()).toString(16),n+=("000"+parseInt(e.shift()).toString(16)).substr(-4)}return t},t.resolve=function(t,e){return i.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(e,n){var r,i=[],a={},o=!1;for(d.lastIndex=0;null!=(r=d.exec(e));)if(r[1]){var s=new l.AttrList(r[1]),u={attrs:s,bitrate:s.decimalInteger("AVERAGE-BANDWIDTH")||s.decimalInteger("BANDWIDTH"),name:s.NAME,url:t.resolve(r[2],n)},c=s.decimalResolution("RESOLUTION");c&&(u.width=c.width,u.height=c.height),m((s.CODECS||"").split(/[ ,]+/).filter((function(t){return t})),u),u.videoCodec&&-1!==u.videoCodec.indexOf("avc1")&&(u.videoCodec=t.convertAVC1ToAVCOTI(u.videoCodec)),i.push(u)}else if(r[3]){var h=new l.AttrList(r[3]);h["DATA-ID"]&&(o=!0,a[h["DATA-ID"]]=h)}return{levels:i,sessionData:o?a:null}},t.parseMasterPlaylistMedia=function(e,n,r,i){var a;void 0===i&&(i=[]);var o=[],s=0;for(h.lastIndex=0;null!==(a=h.exec(e));){var u=new l.AttrList(a[1]);if(u.TYPE===r){var c={attrs:u,bitrate:0,id:s++,groupId:u["GROUP-ID"],instreamId:u["INSTREAM-ID"],name:u.NAME||u.LANGUAGE||"",type:r,default:u.bool("DEFAULT"),autoselect:u.bool("AUTOSELECT"),forced:u.bool("FORCED"),lang:u.LANGUAGE,url:u.URI?t.resolve(u.URI,n):""};if(i.length){var d=t.findGroup(i,c.groupId)||i[0];y(c,d,"audioCodec"),y(c,d,"textCodec")}o.push(c)}}return o},t.parseLevelPlaylist=function(t,e,n,c,d){var h,v,m,y=new o.LevelDetails(e),S=y.fragments,E=null,T=0,_=0,x=0,w=0,k=null,A=new a.Fragment(c,e),C=-1,D=!1;for(f.lastIndex=0,y.m3u8=t;null!==(h=f.exec(t));){D&&(D=!1,(A=new a.Fragment(c,e)).start=x,A.sn=T,A.cc=w,A.level=n,E&&(A.initSegment=E,A.rawProgramDateTime=E.rawProgramDateTime));var L=h[1];if(L){A.duration=parseFloat(L);var $=(" "+h[2]).slice(1);A.title=$||null,A.tagList.push($?["INF",L,$]:["INF",L])}else if(h[3])Object(r.isFiniteNumber)(A.duration)&&(A.start=x,m&&(A.levelkey=m),A.sn=T,A.level=n,A.cc=w,A.urlId=d,S.push(A),A.relurl=(" "+h[3]).slice(1),b(A,k),k=A,x+=A.duration,T++,_=0,D=!0);else if(h[4]){var O=(" "+h[4]).slice(1);k?A.setByteRange(O,k):A.setByteRange(O)}else if(h[5])A.rawProgramDateTime=(" "+h[5]).slice(1),A.tagList.push(["PROGRAM-DATE-TIME",A.rawProgramDateTime]),-1===C&&(C=S.length);else{if(!(h=h[0].match(p))){u.logger.warn("No matches on slow regex match for level playlist!");continue}for(v=1;v<h.length&&void 0===h[v];v++);var M=(" "+h[v]).slice(1),I=(" "+h[v+1]).slice(1),R=h[v+2]?(" "+h[v+2]).slice(1):"";switch(M){case"PLAYLIST-TYPE":y.type=I.toUpperCase();break;case"MEDIA-SEQUENCE":T=y.startSN=parseInt(I);break;case"SKIP":var P=new l.AttrList(I),F=P.decimalInteger("SKIPPED-SEGMENTS");if(Object(r.isFiniteNumber)(F)){y.skippedSegments=F;for(var N=F;N--;)S.unshift(null);T+=F}var U=P.enumeratedString("RECENTLY-REMOVED-DATERANGES");U&&(y.recentlyRemovedDateranges=U.split("\t"));break;case"TARGETDURATION":y.targetduration=parseFloat(I);break;case"VERSION":y.version=parseInt(I);break;case"EXTM3U":break;case"ENDLIST":y.live=!1;break;case"#":(I||R)&&A.tagList.push(R?[I,R]:[I]);break;case"DIS":w++;case"GAP":A.tagList.push([M]);break;case"BITRATE":A.tagList.push([M,I]);break;case"DISCONTINUITY-SEQ":w=parseInt(I);break;case"KEY":var B,j=new l.AttrList(I),V=j.enumeratedString("METHOD"),H=j.URI,G=j.hexadecimalInteger("IV"),W=j.enumeratedString("KEYFORMATVERSIONS"),z=j.enumeratedString("KEYID"),Y=null!=(B=j.enumeratedString("KEYFORMAT"))?B:"identity";if(["com.apple.streamingkeydelivery","com.microsoft.playready","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine"].indexOf(Y)>-1){u.logger.warn("Keyformat "+Y+" is not supported from the manifest");continue}if("identity"!==Y)continue;V&&(m=s.LevelKey.fromURL(e,H),H&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(V)>=0&&(m.method=V,m.keyFormat=Y,z&&(m.keyID=z),W&&(m.keyFormatVersions=W),m.iv=G));break;case"START":var q=new l.AttrList(I).decimalFloatingPoint("TIME-OFFSET");Object(r.isFiniteNumber)(q)&&(y.startTimeOffset=q);break;case"MAP":var K=new l.AttrList(I);A.relurl=K.URI,K.BYTERANGE&&A.setByteRange(K.BYTERANGE),A.level=n,A.sn="initSegment",m&&(A.levelkey=m),A.initSegment=null,E=A,D=!0;break;case"SERVER-CONTROL":var X=new l.AttrList(I);y.canBlockReload=X.bool("CAN-BLOCK-RELOAD"),y.canSkipUntil=X.optionalFloat("CAN-SKIP-UNTIL",0),y.canSkipDateRanges=y.canSkipUntil>0&&X.bool("CAN-SKIP-DATERANGES"),y.partHoldBack=X.optionalFloat("PART-HOLD-BACK",0),y.holdBack=X.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var Z=new l.AttrList(I);y.partTarget=Z.decimalFloatingPoint("PART-TARGET");break;case"PART":var J=y.partList;J||(J=y.partList=[]);var Q=_>0?J[J.length-1]:void 0,tt=_++,et=new a.Part(new l.AttrList(I),A,e,tt,Q);J.push(et),A.duration+=et.duration;break;case"PRELOAD-HINT":var nt=new l.AttrList(I);y.preloadHint=nt;break;case"RENDITION-REPORT":var rt=new l.AttrList(I);y.renditionReports=y.renditionReports||[],y.renditionReports.push(rt);break;default:u.logger.warn("line parsed but not handled: "+h)}}}k&&!k.relurl?(S.pop(),x-=k.duration,y.partList&&(y.fragmentHint=k)):y.partList&&(b(A,k),A.cc=w,y.fragmentHint=A);var it=S.length,at=S[0],ot=S[it-1];if((x+=y.skippedSegments*y.targetduration)>0&&it&&ot){y.averagetargetduration=x/it;var st=ot.sn;y.endSN="initSegment"!==st?st:0,at&&(y.startCC=at.cc,at.initSegment||y.fragments.every((function(t){return t.relurl&&function(t){var e,n;return g.test(null!=(e=null===(n=i.parseURL(t))||void 0===n?void 0:n.path)?e:"")}(t.relurl)}))&&(u.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(A=new a.Fragment(c,e)).relurl=ot.relurl,A.level=n,A.sn="initSegment",at.initSegment=A,y.needSidxRanges=!0))}else y.endSN=0,y.startCC=0;return y.fragmentHint&&(x+=y.fragmentHint.duration),y.totalduration=x,y.endCC=w,C>0&&function(t,e){for(var n=t[e],r=e;r--;){var i=t[r];if(!i)return;i.programDateTime=n.programDateTime-1e3*i.duration,n=i}}(S,C),y},t}();function m(t,e){["video","audio","text"].forEach((function(n){var r=t.filter((function(t){return Object(c.isCodecType)(t,n)}));if(r.length){var i=r.filter((function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)}));e[n+"Codec"]=i.length>0?i[0]:r[0],t=t.filter((function(t){return-1===r.indexOf(t)}))}})),e.unknownCodecs=t}function y(t,e,n){var r=e[n];r&&(t[n]=r)}function b(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):null!=e&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime),Object(r.isFiniteNumber)(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}},"./src/loader/playlist-loader.ts":
/*!***************************************!*\
	  !*** ./src/loader/playlist-loader.ts ***!
	  \***************************************/
/*! exports provided: default */function(t,e,n){n.r(e);var r=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),i=n(/*! ../events */"./src/events.ts"),a=n(/*! ../errors */"./src/errors.ts"),o=n(/*! ../utils/logger */"./src/utils/logger.ts"),s=n(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),l=n(/*! ./m3u8-parser */"./src/loader/m3u8-parser.ts"),u=n(/*! ../types/loader */"./src/types/loader.ts"),c=n(/*! ../utils/attr-list */"./src/utils/attr-list.ts");function d(t,e){var n=t.url;return void 0!==n&&0!==n.indexOf("data:")||(n=e.url),n}var h=function(){function t(t){this.hls=void 0,this.loaders=Object.create(null),this.hls=t,this.registerListeners()}var e=t.prototype;return e.registerListeners=function(){var t=this.hls;t.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.on(i.Events.LEVEL_LOADING,this.onLevelLoading,this),t.on(i.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.on(i.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},e.unregisterListeners=function(){var t=this.hls;t.off(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),t.off(i.Events.LEVEL_LOADING,this.onLevelLoading,this),t.off(i.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.off(i.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},e.createInternalLoader=function(t){var e=this.hls.config,n=e.pLoader,r=e.loader,i=new(n||r)(e);return t.loader=i,this.loaders[t.type]=i,i},e.getInternalLoader=function(t){return this.loaders[t.type]},e.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},e.destroyInternalLoaders=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}},e.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},e.onManifestLoading=function(t,e){var n=e.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:u.PlaylistContextType.MANIFEST,url:n,deliveryDirectives:null})},e.onLevelLoading=function(t,e){var n=e.id,r=e.level,i=e.url,a=e.deliveryDirectives;this.load({id:n,groupId:null,level:r,responseType:"text",type:u.PlaylistContextType.LEVEL,url:i,deliveryDirectives:a})},e.onAudioTrackLoading=function(t,e){var n=e.id,r=e.groupId,i=e.url,a=e.deliveryDirectives;this.load({id:n,groupId:r,level:null,responseType:"text",type:u.PlaylistContextType.AUDIO_TRACK,url:i,deliveryDirectives:a})},e.onSubtitleTrackLoading=function(t,e){var n=e.id,r=e.groupId,i=e.url,a=e.deliveryDirectives;this.load({id:n,groupId:r,level:null,responseType:"text",type:u.PlaylistContextType.SUBTITLE_TRACK,url:i,deliveryDirectives:a})},e.load=function(t){var e,n,r,i,a,s,l=this.hls.config,c=this.getInternalLoader(t);if(c){var d=c.context;if(d&&d.url===t.url)return void o.logger.trace("[playlist-loader]: playlist request ongoing");o.logger.log("[playlist-loader]: aborting previous loader for type: "+t.type),c.abort()}switch(t.type){case u.PlaylistContextType.MANIFEST:n=l.manifestLoadingMaxRetry,r=l.manifestLoadingTimeOut,i=l.manifestLoadingRetryDelay,a=l.manifestLoadingMaxRetryTimeout;break;case u.PlaylistContextType.LEVEL:case u.PlaylistContextType.AUDIO_TRACK:case u.PlaylistContextType.SUBTITLE_TRACK:n=0,r=l.levelLoadingTimeOut;break;default:n=l.levelLoadingMaxRetry,r=l.levelLoadingTimeOut,i=l.levelLoadingRetryDelay,a=l.levelLoadingMaxRetryTimeout}if(c=this.createInternalLoader(t),null!==(e=t.deliveryDirectives)&&void 0!==e&&e.part&&(t.type===u.PlaylistContextType.LEVEL&&null!==t.level?s=this.hls.levels[t.level].details:t.type===u.PlaylistContextType.AUDIO_TRACK&&null!==t.id?s=this.hls.audioTracks[t.id].details:t.type===u.PlaylistContextType.SUBTITLE_TRACK&&null!==t.id&&(s=this.hls.subtitleTracks[t.id].details),s)){var h=s.partTarget,f=s.targetduration;h&&f&&(r=Math.min(1e3*Math.max(3*h,.8*f),r))}var p={timeout:r,maxRetry:n,retryDelay:i,maxRetryDelay:a,highWaterMark:0},g={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};c.load(t,p,g)},e.loadsuccess=function(t,e,n,r){if(void 0===r&&(r=null),n.isSidxRequest)return this.handleSidxRequest(t,n),void this.handlePlaylistLoaded(t,e,n,r);this.resetInternalLoader(n.type);var i=t.data;0===i.indexOf("#EXTM3U")?(e.parsing.start=performance.now(),i.indexOf("#EXTINF:")>0||i.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(t,e,n,r):this.handleMasterPlaylist(t,e,n,r)):this.handleManifestParsingError(t,n,"no EXTM3U delimiter",r)},e.loaderror=function(t,e,n){void 0===n&&(n=null),this.handleNetworkError(e,n,!1,t)},e.loadtimeout=function(t,e,n){void 0===n&&(n=null),this.handleNetworkError(e,n,!0)},e.handleMasterPlaylist=function(t,e,n,r){var a=this.hls,s=t.data,u=d(t,n),h=l.default.parseMasterPlaylist(s,u),f=h.levels,p=h.sessionData;if(f.length){var g=f.map((function(t){return{id:t.attrs.AUDIO,audioCodec:t.audioCodec}})),v=f.map((function(t){return{id:t.attrs.SUBTITLES,textCodec:t.textCodec}})),m=l.default.parseMasterPlaylistMedia(s,u,"AUDIO",g),y=l.default.parseMasterPlaylistMedia(s,u,"SUBTITLES",v),b=l.default.parseMasterPlaylistMedia(s,u,"CLOSED-CAPTIONS");m.length&&(m.some((function(t){return!t.url}))||!f[0].audioCodec||f[0].attrs.AUDIO||(o.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),m.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new c.AttrList({}),bitrate:0,url:""}))),a.trigger(i.Events.MANIFEST_LOADED,{levels:f,audioTracks:m,subtitles:y,captions:b,url:u,stats:e,networkDetails:r,sessionData:p})}else this.handleManifestParsingError(t,n,"no level found in manifest",r)},e.handleTrackOrLevelPlaylist=function(t,e,n,o){var s=this.hls,h=n.id,f=n.level,p=n.type,g=d(t,n),v=Object(r.isFiniteNumber)(h)?h:0,m=Object(r.isFiniteNumber)(f)?f:v,y=function(t){switch(t.type){case u.PlaylistContextType.AUDIO_TRACK:return u.PlaylistLevelType.AUDIO;case u.PlaylistContextType.SUBTITLE_TRACK:return u.PlaylistLevelType.SUBTITLE;default:return u.PlaylistLevelType.MAIN}}(n),b=l.default.parseLevelPlaylist(t.data,g,m,y,v);if(b.fragments.length){if(p===u.PlaylistContextType.MANIFEST){var S={attrs:new c.AttrList({}),bitrate:0,details:b,name:"",url:g};s.trigger(i.Events.MANIFEST_LOADED,{levels:[S],audioTracks:[],url:g,stats:e,networkDetails:o,sessionData:null})}if(e.parsing.end=performance.now(),b.needSidxRanges){var E,T=null===(E=b.fragments[0].initSegment)||void 0===E?void 0:E.url;this.load({url:T,isSidxRequest:!0,type:p,level:f,levelDetails:b,id:h,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null})}else n.levelDetails=b,this.handlePlaylistLoaded(t,e,n,o)}else s.trigger(i.Events.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:g,reason:"no fragments found in level",level:"number"==typeof n.level?n.level:void 0})},e.handleSidxRequest=function(t,e){var n=Object(s.parseSegmentIndex)(new Uint8Array(t.data));if(n){var r=n.references,i=e.levelDetails;r.forEach((function(t,e){var r=t.info,a=i.fragments[e];0===a.byteRange.length&&a.setByteRange(String(1+r.end-r.start)+"@"+String(r.start)),a.initSegment&&a.initSegment.setByteRange(String(n.moovEndOffset)+"@0")}))}},e.handleManifestParsingError=function(t,e,n,r){this.hls.trigger(i.Events.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:e.type===u.PlaylistContextType.MANIFEST,url:t.url,reason:n,response:t,context:e,networkDetails:r})},e.handleNetworkError=function(t,e,n,r){void 0===n&&(n=!1),o.logger.warn("[playlist-loader]: A network "+(n?"timeout":"error")+" occurred while loading "+t.type+" level: "+t.level+" id: "+t.id+' group-id: "'+t.groupId+'"');var s=a.ErrorDetails.UNKNOWN,l=!1,c=this.getInternalLoader(t);switch(t.type){case u.PlaylistContextType.MANIFEST:s=n?a.ErrorDetails.MANIFEST_LOAD_TIMEOUT:a.ErrorDetails.MANIFEST_LOAD_ERROR,l=!0;break;case u.PlaylistContextType.LEVEL:s=n?a.ErrorDetails.LEVEL_LOAD_TIMEOUT:a.ErrorDetails.LEVEL_LOAD_ERROR,l=!1;break;case u.PlaylistContextType.AUDIO_TRACK:s=n?a.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:a.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case u.PlaylistContextType.SUBTITLE_TRACK:s=n?a.ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:a.ErrorDetails.SUBTITLE_LOAD_ERROR,l=!1}c&&this.resetInternalLoader(t.type);var d={type:a.ErrorTypes.NETWORK_ERROR,details:s,fatal:l,url:t.url,loader:c,context:t,networkDetails:e};r&&(d.response=r),this.hls.trigger(i.Events.ERROR,d)},e.handlePlaylistLoaded=function(t,e,n,r){var a=n.type,o=n.level,s=n.id,l=n.groupId,c=n.loader,d=n.levelDetails,h=n.deliveryDirectives;if(null!=d&&d.targetduration){if(c)switch(d.live&&(c.getCacheAge&&(d.ageHeader=c.getCacheAge()||0),c.getCacheAge&&!isNaN(d.ageHeader)||(d.ageHeader=0)),a){case u.PlaylistContextType.MANIFEST:case u.PlaylistContextType.LEVEL:this.hls.trigger(i.Events.LEVEL_LOADED,{details:d,level:o||0,id:s||0,stats:e,networkDetails:r,deliveryDirectives:h});break;case u.PlaylistContextType.AUDIO_TRACK:this.hls.trigger(i.Events.AUDIO_TRACK_LOADED,{details:d,id:s||0,groupId:l||"",stats:e,networkDetails:r,deliveryDirectives:h});break;case u.PlaylistContextType.SUBTITLE_TRACK:this.hls.trigger(i.Events.SUBTITLE_TRACK_LOADED,{details:d,id:s||0,groupId:l||"",stats:e,networkDetails:r,deliveryDirectives:h})}}else this.handleManifestParsingError(t,n,"invalid target duration",r)},t}();e.default=h},"./src/polyfills/number.ts":
/*!*********************************!*\
	  !*** ./src/polyfills/number.ts ***!
	  \*********************************/
/*! exports provided: isFiniteNumber, MAX_SAFE_INTEGER */function(t,e,n){n.r(e),n.d(e,"isFiniteNumber",(function(){return r})),n.d(e,"MAX_SAFE_INTEGER",(function(){return i}));var r=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},i=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/remux/aac-helper.ts":
/*!*********************************!*\
	  !*** ./src/remux/aac-helper.ts ***!
	  \*********************************/
/*! exports provided: default */function(t,e,n){n.r(e);var r=function(){function t(){}return t.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},t}();e.default=r},"./src/remux/mp4-generator.ts":
/*!************************************!*\
	  !*** ./src/remux/mp4-generator.ts ***!
	  \************************************/
/*! exports provided: default */function(t,e,n){n.r(e);var r=Math.pow(2,32)-1,i=function(){function t(){}return t.init=function(){var e;for(e in t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:n,audio:r};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=a,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,o,l,o,s),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,i))},t.box=function(t){for(var e=8,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=r.length,o=a;a--;)e+=r[a].byteLength;var s=new Uint8Array(e);for(s[0]=e>>24&255,s[1]=e>>16&255,s[2]=e>>8&255,s[3]=255&e,s.set(t,4),a=0,e=8;a<o;a++)s.set(r[a],e),e+=r[a].byteLength;return s},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,n){n*=e;var i=Math.floor(n/(r+1)),a=Math.floor(n%(r+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,n,r){return t.box(t.types.moof,t.mfhd(e),t.traf(r,n))},t.moov=function(e){for(var n=e.length,r=[];n--;)r[n]=t.trak(e[n]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(r).concat(t.mvex(e)))},t.mvex=function(e){for(var n=e.length,r=[];n--;)r[n]=t.trex(e[n]);return t.box.apply(null,[t.types.mvex].concat(r))},t.mvhd=function(e,n){n*=e;var i=Math.floor(n/(r+1)),a=Math.floor(n%(r+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,o)},t.sdtp=function(e){var n,r,i=e.samples||[],a=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)r=i[n].flags,a[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return t.box(t.types.sdtp,a)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var n,r,i,a=[],o=[];for(n=0;n<e.sps.length;n++)i=(r=e.sps[n]).byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(r));for(n=0;n<e.pps.length;n++)i=(r=e.pps[n]).byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(r));var s=t.box(t.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|e.sps.length].concat(a).concat([e.pps.length]).concat(o))),l=e.width,u=e.height,c=e.pixelRatio[0],d=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var n=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var n=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},t.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.mp3(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))},t.tkhd=function(e){var n=e.id,i=e.duration*e.timescale,a=e.width,o=e.height,s=Math.floor(i/(r+1)),l=Math.floor(i%(r+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,l>>24,l>>16&255,l>>8&255,255&l,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>8&255,255&a,0,0,o>>8&255,255&o,0,0]))},t.traf=function(e,n){var i=t.sdtp(e),a=e.id,o=Math.floor(n/(r+1)),s=Math.floor(n%(r+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s])),t.trun(e,i.length+16+20+8+16+8+8),i)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var n=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,n){var r,i,a,o,s,l,u=e.samples||[],c=u.length,d=12+16*c,h=new Uint8Array(d);for(n+=8+d,h.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),r=0;r<c;r++)a=(i=u[r]).duration,o=i.size,s=i.flags,l=i.cts,h.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*r);return t.box(t.types.trun,h)},t.initSegment=function(e){t.types||t.init();var n=t.moov(e),r=new Uint8Array(t.FTYP.byteLength+n.byteLength);return r.set(t.FTYP),r.set(n,t.FTYP.byteLength),r},t}();i.types=void 0,i.HDLR_TYPES=void 0,i.STTS=void 0,i.STSC=void 0,i.STCO=void 0,i.STSZ=void 0,i.VMHD=void 0,i.SMHD=void 0,i.STSD=void 0,i.FTYP=void 0,i.DINF=void 0,e.default=i},"./src/remux/mp4-remuxer.ts":
/*!**********************************!*\
	  !*** ./src/remux/mp4-remuxer.ts ***!
	  \**********************************/
/*! exports provided: default, normalizePts */function(t,e,n){n.r(e),n.d(e,"default",(function(){return g})),n.d(e,"normalizePts",(function(){return v}));var r=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),i=n(/*! ./aac-helper */"./src/remux/aac-helper.ts"),a=n(/*! ./mp4-generator */"./src/remux/mp4-generator.ts"),o=n(/*! ../events */"./src/events.ts"),s=n(/*! ../errors */"./src/errors.ts"),l=n(/*! ../utils/logger */"./src/utils/logger.ts"),u=n(/*! ../types/loader */"./src/types/loader.ts"),c=n(/*! ../utils/timescale-conversion */"./src/utils/timescale-conversion.ts");function d(){return(d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var h=null,f=null,p=!1,g=function(){function t(t,e,n,r){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=t,this.config=e,this.typeSupported=n,this.ISGenerated=!1,null===h){var i=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);h=i?parseInt(i[1]):0}if(null===f){var a=navigator.userAgent.match(/Safari\/(\d+)/i);f=a?parseInt(a[1]):0}p=!!h&&h<75||!!f&&f<600}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(t){l.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=t},e.resetNextTimestamp=function(){l.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},e.resetInitSegment=function(){l.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},e.getVideoStartPts=function(t){var e=!1,n=t.reduce((function(t,n){var r=n.pts-t;return r<-4294967296?(e=!0,v(t,n.pts)):r>0?t:n.pts}),t[0].pts);return e&&l.logger.debug("PTS rollover detected"),n},e.remux=function(t,e,n,r,i,a,o,s){var c,d,h,f,p,g,m=i,y=i,b=t.pid>-1,S=e.pid>-1,E=e.samples.length,T=t.samples.length>0,_=E>1;if((!b||T)&&(!S||_)||this.ISGenerated||o){this.ISGenerated||(h=this.generateIS(t,e,i));var x=this.isVideoContiguous,w=-1;if(_&&(w=function(t){for(var e=0;e<t.length;e++)if(t[e].key)return e;return-1}(e.samples),!x&&this.config.forceKeyFrameOnDiscontinuity))if(g=!0,w>0){l.logger.warn("[mp4-remuxer]: Dropped "+w+" out of "+E+" video samples due to a missing keyframe");var k=this.getVideoStartPts(e.samples);e.samples=e.samples.slice(w),e.dropped+=w,y+=(e.samples[0].pts-k)/(e.timescale||9e4)}else-1===w&&(l.logger.warn("[mp4-remuxer]: No keyframe found out of "+E+" video samples"),g=!1);if(this.ISGenerated){if(T&&_){var A=this.getVideoStartPts(e.samples),C=(v(t.samples[0].pts,A)-A)/e.inputTimeScale;m+=Math.max(0,C),y+=Math.max(0,-C)}if(T){if(t.samplerate||(l.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),h=this.generateIS(t,e,i)),d=this.remuxAudio(t,m,this.isAudioContiguous,a,S||_||s===u.PlaylistLevelType.AUDIO?y:void 0),_){var D=d?d.endPTS-d.startPTS:0;e.inputTimeScale||(l.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),h=this.generateIS(t,e,i)),c=this.remuxVideo(e,y,x,D)}}else _&&(c=this.remuxVideo(e,y,x,0));c&&(c.firstKeyFrame=w,c.independent=-1!==w)}}return this.ISGenerated&&(n.samples.length&&(p=this.remuxID3(n,i)),r.samples.length&&(f=this.remuxText(r,i))),{audio:d,video:c,initSegment:h,independent:g,text:f,id3:p}},e.generateIS=function(t,e,n){var i,o,s,l=t.samples,u=e.samples,c=this.typeSupported,d={},h=!Object(r.isFiniteNumber)(this._initPTS),f="audio/mp4";if(h&&(i=o=1/0),t.config&&l.length&&(t.timescale=t.samplerate,t.isAAC||(c.mpeg?(f="audio/mpeg",t.codec=""):c.mp3&&(t.codec="mp3")),d.audio={id:"audio",container:f,codec:t.codec,initSegment:!t.isAAC&&c.mpeg?new Uint8Array(0):a.default.initSegment([t]),metadata:{channelCount:t.channelCount}},h&&(s=t.inputTimeScale,i=o=l[0].pts-Math.round(s*n))),e.sps&&e.pps&&u.length&&(e.timescale=e.inputTimeScale,d.video={id:"main",container:"video/mp4",codec:e.codec,initSegment:a.default.initSegment([e]),metadata:{width:e.width,height:e.height}},h)){s=e.inputTimeScale;var p=this.getVideoStartPts(u),g=Math.round(s*n);o=Math.min(o,v(u[0].dts,p)-g),i=Math.min(i,p-g)}if(Object.keys(d).length)return this.ISGenerated=!0,h&&(this._initPTS=i,this._initDTS=o),{tracks:d,initPTS:i,timescale:s}},e.remuxVideo=function(t,e,n,r){var i,u,f,g=t.inputTimeScale,y=t.samples,b=[],S=y.length,E=this._initPTS,T=this.nextAvcDts,_=8,x=Number.POSITIVE_INFINITY,w=Number.NEGATIVE_INFINITY,k=0,A=!1;n&&null!==T||(T=e*g-(y[0].pts-v(y[0].dts,y[0].pts)));for(var C=0;C<S;C++){var D=y[C];D.pts=v(D.pts-E,T),D.dts=v(D.dts-E,T),D.dts>D.pts&&(k=Math.max(Math.min(k,D.pts-D.dts),-18e3)),D.dts<y[C>0?C-1:C].dts&&(A=!0)}A&&y.sort((function(t,e){var n=t.dts-e.dts,r=t.pts-e.pts;return n||r})),u=y[0].dts,f=y[y.length-1].dts;var L=Math.round((f-u)/(S-1));if(k<0){if(k<-2*L){l.logger.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+Object(c.toMsFromMpegTsClock)(-L,!0)+" ms");for(var $=k,O=0;O<S;O++)y[O].dts=$=Math.max($,y[O].pts-L),y[O].pts=Math.max($,y[O].pts)}else{l.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Object(c.toMsFromMpegTsClock)(k,!0)+" ms to overcome this issue");for(var M=0;M<S;M++)y[M].dts=y[M].dts+k}u=y[0].dts}if(n){var I=u-T,R=I>L;if(R||I<-1){R?l.logger.warn("AVC: "+Object(c.toMsFromMpegTsClock)(I,!0)+" ms ("+I+"dts) hole between fragments detected, filling it"):l.logger.warn("AVC: "+Object(c.toMsFromMpegTsClock)(-I,!0)+" ms ("+I+"dts) overlapping between fragments detected"),u=T;var P=y[0].pts-I;y[0].dts=u,y[0].pts=P,l.logger.log("Video: First PTS/DTS adjusted: "+Object(c.toMsFromMpegTsClock)(P,!0)+"/"+Object(c.toMsFromMpegTsClock)(u,!0)+", delta: "+Object(c.toMsFromMpegTsClock)(I,!0)+" ms")}}p&&(u=Math.max(0,u));for(var F=0,N=0,U=0;U<S;U++){for(var B=y[U],j=B.units,V=j.length,H=0,G=0;G<V;G++)H+=j[G].data.length;N+=H,F+=V,B.length=H,B.dts=Math.max(B.dts,u),B.pts=Math.max(B.pts,B.dts,0),x=Math.min(B.pts,x),w=Math.max(B.pts,w)}f=y[S-1].dts;var W,z=N+4*F+8;try{W=new Uint8Array(z)}catch(t){return void this.observer.emit(o.Events.ERROR,o.Events.ERROR,{type:s.ErrorTypes.MUX_ERROR,details:s.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:z,reason:"fail allocating video mdat "+z})}var Y=new DataView(W.buffer);Y.setUint32(0,z),W.set(a.default.types.mdat,4);for(var q=0;q<S;q++){for(var K=y[q],X=K.units,Z=0,J=0,Q=X.length;J<Q;J++){var tt=X[J],et=tt.data,nt=tt.data.byteLength;Y.setUint32(_,nt),_+=4,W.set(et,_),_+=nt,Z+=4+nt}if(q<S-1)i=y[q+1].dts-K.dts;else{var rt=this.config,it=K.dts-y[q>0?q-1:q].dts;if(rt.stretchShortVideoTrack&&null!==this.nextAudioPts){var at=Math.floor(rt.maxBufferHole*g),ot=(r?x+r*g:this.nextAudioPts)-K.pts;ot>at?((i=ot-it)<0&&(i=it),l.logger.log("[mp4-remuxer]: It is approximately "+ot/90+" ms to the next segment; using duration "+i/90+" ms for the last video frame.")):i=it}else i=it}var st=Math.round(K.pts-K.dts);b.push(new m(K.key,i,Z,st))}if(b.length&&h&&h<70){var lt=b[0].flags;lt.dependsOn=2,lt.isNonSync=0}console.assert(void 0!==i,"mp4SampleDuration must be computed"),this.nextAvcDts=T=f+i,this.isVideoContiguous=!0;var ut={data1:a.default.moof(t.sequenceNumber++,u,d({},t,{samples:b})),data2:W,startPTS:x/g,endPTS:(w+i)/g,startDTS:u/g,endDTS:T/g,type:"video",hasAudio:!1,hasVideo:!0,nb:b.length,dropped:t.dropped};return t.samples=[],t.dropped=0,console.assert(W.length,"MDAT length must not be zero"),ut},e.remuxAudio=function(t,e,n,r,u){var c=t.inputTimeScale,h=c/(t.samplerate?t.samplerate:c),f=t.isAAC?1024:1152,p=f*h,g=this._initPTS,y=!t.isAAC&&this.typeSupported.mpeg,b=[],S=t.samples,E=y?0:8,T=this.nextAudioPts||-1,_=e*c;if(this.isAudioContiguous=n=n||S.length&&T>0&&(r&&Math.abs(_-T)<9e3||Math.abs(v(S[0].pts-g,_)-T)<20*p),S.forEach((function(t){t.pts=v(t.pts-g,_)})),!n||T<0){if(!(S=S.filter((function(t){return t.pts>=0}))).length)return;T=0===u?0:r?Math.max(0,_):S[0].pts}if(t.isAAC)for(var x=void 0!==u,w=this.config.maxAudioFramesDrift,k=0,A=T;k<S.length;k++){var C=S[k],D=C.pts,L=D-A,$=Math.abs(1e3*L/c);if(L<=-w*p&&x)0===k&&(l.logger.warn("Audio frame @ "+(D/c).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*L/c)+" ms."),this.nextAudioPts=T=A=D);else if(L>=w*p&&$<1e4&&x){var O=Math.round(L/p);(A=D-O*p)<0&&(O--,A+=p),0===k&&(this.nextAudioPts=T=A),l.logger.warn("[mp4-remuxer]: Injecting "+O+" audio frame @ "+(A/c).toFixed(3)+"s due to "+Math.round(1e3*L/c)+" ms gap.");for(var M=0;M<O;M++){var I=Math.max(A,0),R=i.default.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);R||(l.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),R=C.unit.subarray()),S.splice(k,0,{unit:R,pts:I}),A+=p,k++}}C.pts=A,A+=p}for(var P,F=null,N=null,U=0,B=S.length;B--;)U+=S[B].unit.byteLength;for(var j=0,V=S.length;j<V;j++){var H=S[j],G=H.unit,W=H.pts;if(null!==N)b[j-1].duration=Math.round((W-N)/h);else{if(n&&t.isAAC&&(W=T),F=W,!(U>0))return;U+=E;try{P=new Uint8Array(U)}catch(t){return void this.observer.emit(o.Events.ERROR,o.Events.ERROR,{type:s.ErrorTypes.MUX_ERROR,details:s.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:U,reason:"fail allocating audio mdat "+U})}y||(new DataView(P.buffer).setUint32(0,U),P.set(a.default.types.mdat,4))}P.set(G,E);var z=G.byteLength;E+=z,b.push(new m(!0,f,z,0)),N=W}var Y=b.length;if(Y){var q=b[b.length-1];this.nextAudioPts=T=N+h*q.duration;var K=y?new Uint8Array(0):a.default.moof(t.sequenceNumber++,F/h,d({},t,{samples:b}));t.samples=[];var X=F/c,Z=T/c,J={data1:K,data2:P,startPTS:X,endPTS:Z,startDTS:X,endDTS:Z,type:"audio",hasAudio:!0,hasVideo:!1,nb:Y};return this.isAudioContiguous=!0,console.assert(P.length,"MDAT length must not be zero"),J}},e.remuxEmptyAudio=function(t,e,n,r){var a=t.inputTimeScale,o=a/(t.samplerate?t.samplerate:a),s=this.nextAudioPts,u=(null!==s?s:r.startDTS*a)+this._initDTS,c=r.endDTS*a+this._initDTS,d=1024*o,h=Math.ceil((c-u)/d),f=i.default.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(l.logger.warn("[mp4-remuxer]: remux empty Audio"),f){for(var p=[],g=0;g<h;g++){var v=u+g*d;p.push({unit:f,pts:v,dts:v})}return t.samples=p,this.remuxAudio(t,e,n,!1)}l.logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},e.remuxID3=function(t,e){var n=t.samples.length;if(n){for(var r=t.inputTimeScale,i=this._initPTS,a=this._initDTS,o=0;o<n;o++){var s=t.samples[o];s.pts=v(s.pts-i,e*r)/r,s.dts=v(s.dts-a,e*r)/r}var l=t.samples;return t.samples=[],{samples:l}}},e.remuxText=function(t,e){var n=t.samples.length;if(n){for(var r=t.inputTimeScale,i=this._initPTS,a=0;a<n;a++){var o=t.samples[a];o.pts=v(o.pts-i,e*r)/r}t.samples.sort((function(t,e){return t.pts-e.pts}));var s=t.samples;return t.samples=[],{samples:s}}},t}();function v(t,e){var n;if(null===e)return t;for(n=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=n;return t}var m=function(t,e,n,r){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=e,this.size=n,this.cts=r,this.flags=new y(t)},y=function(t){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=t?2:1,this.isNonSync=t?0:1}},"./src/remux/passthrough-remuxer.ts":
/*!******************************************!*\
	  !*** ./src/remux/passthrough-remuxer.ts ***!
	  \******************************************/
/*! exports provided: default */function(t,e,n){n.r(e);var r=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),i=n(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),a=n(/*! ../loader/fragment */"./src/loader/fragment.ts"),o=n(/*! ../utils/logger */"./src/utils/logger.ts"),s=function(){function t(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndDTS=null}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(t){this.initPTS=t,this.lastEndDTS=null},e.resetNextTimestamp=function(){this.lastEndDTS=null},e.resetInitSegment=function(t,e,n){this.audioCodec=e,this.videoCodec=n,this.generateInitSegment(t),this.emitInitSegment=!0},e.generateInitSegment=function(t){var e=this.audioCodec,n=this.videoCodec;if(!t||!t.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var r=this.initData=Object(i.parseInitSegment)(t);e||(e=u(r.audio,a.ElementaryStreamTypes.AUDIO)),n||(n=u(r.video,a.ElementaryStreamTypes.VIDEO));var s={};r.audio&&r.video?s.audiovideo={container:"video/mp4",codec:e+","+n,initSegment:t,id:"main"}:r.audio?s.audio={container:"audio/mp4",codec:e,initSegment:t,id:"audio"}:r.video?s.video={container:"video/mp4",codec:n,initSegment:t,id:"main"}:o.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=s},e.remux=function(t,e,n,a,s){var u=this.initPTS,c=this.lastEndDTS,d={audio:void 0,video:void 0,text:a,id3:n,initSegment:void 0};Object(r.isFiniteNumber)(c)||(c=this.lastEndDTS=s||0);var h=e.samples;if(!h||!h.length)return d;var f={initPTS:void 0,timescale:1},p=this.initData;if(p&&p.length||(this.generateInitSegment(h),p=this.initData),!p||!p.length)return o.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),d;this.emitInitSegment&&(f.tracks=this.initTracks,this.emitInitSegment=!1),Object(r.isFiniteNumber)(u)||(this.initPTS=f.initPTS=u=l(p,h,c));var g=Object(i.getDuration)(h,p),v=c,m=g+v;Object(i.offsetStartDTS)(p,h,u),g>0?this.lastEndDTS=m:(o.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var y=!!p.audio,b=!!p.video,S="";y&&(S+="audio"),b&&(S+="video");var E={data1:h,startPTS:v,startDTS:v,endPTS:m,endDTS:m,type:S,hasAudio:y,hasVideo:b,nb:1,dropped:0};return d.audio="audio"===E.type?E:void 0,d.video="audio"!==E.type?E:void 0,d.text=a,d.id3=n,d.initSegment=f,d},t}(),l=function(t,e,n){return Object(i.getStartDTS)(t,e)-n};function u(t,e){var n=null==t?void 0:t.codec;return n&&n.length>4?n:"hvc1"===n?"hvc1.1.c.L120.90":"av01"===n?"av01.0.04M.08":"avc1"===n||e===a.ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}e.default=s},"./src/task-loop.ts":
/*!**************************!*\
	  !*** ./src/task-loop.ts ***!
	  \**************************/
/*! exports provided: default */function(t,e,n){n.r(e),n.d(e,"default",(function(){return r}));var r=function(){function t(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var e=t.prototype;return e.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},e.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},e.onHandlerDestroyed=function(){},e.hasInterval=function(){return!!this._tickInterval},e.hasNextTick=function(){return!!this._tickTimer},e.setInterval=function(t){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,t),!0)},e.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},e.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},e.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},e.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},e.doTick=function(){},t}()},"./src/types/level.ts":
/*!****************************!*\
	  !*** ./src/types/level.ts ***!
	  \****************************/
/*! exports provided: HlsSkip, getSkipValue, HlsUrlParameters, Level */function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i;function a(t,e){var n=t.canSkipUntil,r=t.canSkipDateRanges,a=t.endSN;return n&&(void 0!==e?e-a:0)<n?r?i.v2:i.Yes:i.No}n.r(e),n.d(e,"HlsSkip",(function(){return i})),n.d(e,"getSkipValue",(function(){return a})),n.d(e,"HlsUrlParameters",(function(){return o})),n.d(e,"Level",(function(){return s})),function(t){t.No="",t.Yes="YES",t.v2="v2"}(i||(i={}));var o=function(){function t(t,e,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=t,this.part=e,this.skip=n}return t.prototype.addDirectives=function(t){var e=new self.URL(t);return void 0!==this.msn&&e.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&e.searchParams.set("_HLS_part",this.part.toString()),this.skip&&e.searchParams.set("_HLS_skip",this.skip),e.toString()},t}(),s=function(){function t(t){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[t.url],this.attrs=t.attrs,this.bitrate=t.bitrate,t.details&&(this.details=t.details),this.id=t.id||0,this.name=t.name,this.width=t.width||0,this.height=t.height||0,this.audioCodec=t.audioCodec,this.videoCodec=t.videoCodec,this.unknownCodecs=t.unknownCodecs,this.codecSet=[t.videoCodec,t.audioCodec].filter((function(t){return t})).join(",").replace(/\.[^.,]+/g,"")}var e,n,i;return e=t,(n=[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(t){var e=t%this.url.length;this._urlId!==e&&(this.details=void 0,this._urlId=e)}}])&&r(e.prototype,n),i&&r(e,i),t}()},"./src/types/loader.ts":
/*!*****************************!*\
	  !*** ./src/types/loader.ts ***!
	  \*****************************/
/*! exports provided: PlaylistContextType, PlaylistLevelType */function(t,e,n){var r,i;n.r(e),n.d(e,"PlaylistContextType",(function(){return r})),n.d(e,"PlaylistLevelType",(function(){return i})),function(t){t.MANIFEST="manifest",t.LEVEL="level",t.AUDIO_TRACK="audioTrack",t.SUBTITLE_TRACK="subtitleTrack"}(r||(r={})),function(t){t.MAIN="main",t.AUDIO="audio",t.SUBTITLE="subtitle"}(i||(i={}))},"./src/types/transmuxer.ts":
/*!*********************************!*\
	  !*** ./src/types/transmuxer.ts ***!
	  \*********************************/
/*! exports provided: ChunkMetadata */function(t,e,n){n.r(e),n.d(e,"ChunkMetadata",(function(){return r}));var r=function(t,e,n,r,i,a){void 0===r&&(r=0),void 0===i&&(i=-1),void 0===a&&(a=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=t,this.sn=e,this.id=n,this.size=r,this.part=i,this.partial=a}},"./src/utils/attr-list.ts":
/*!********************************!*\
	  !*** ./src/utils/attr-list.ts ***!
	  \********************************/
/*! exports provided: AttrList */function(t,e,n){n.r(e),n.d(e,"AttrList",(function(){return a}));var r=/^(\d+)x(\d+)$/,i=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,a=function(){function t(e){for(var n in"string"==typeof e&&(e=t.parseAttrList(e)),e)e.hasOwnProperty(n)&&(this[n]=e[n])}var e=t.prototype;return e.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var n=new Uint8Array(e.length/2),r=0;r<e.length/2;r++)n[r]=parseInt(e.slice(2*r,2*r+2),16);return n}return null},e.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.decimalFloatingPoint=function(t){return parseFloat(this[t])},e.optionalFloat=function(t,e){var n=this[t];return n?parseFloat(n):e},e.enumeratedString=function(t){return this[t]},e.bool=function(t){return"YES"===this[t]},e.decimalResolution=function(t){var e=r.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},t.parseAttrList=function(t){var e,n={};for(i.lastIndex=0;null!==(e=i.exec(t));){var r=e[2];0===r.indexOf('"')&&r.lastIndexOf('"')===r.length-1&&(r=r.slice(1,-1)),n[e[1]]=r}return n},t}()},"./src/utils/binary-search.ts":
/*!************************************!*\
	  !*** ./src/utils/binary-search.ts ***!
	  \************************************/
/*! exports provided: default */function(t,e,n){n.r(e),e.default={search:function(t,e){for(var n=0,r=t.length-1,i=null,a=null;n<=r;){var o=e(a=t[i=(n+r)/2|0]);if(o>0)n=i+1;else{if(!(o<0))return a;r=i-1}}return null}}},"./src/utils/buffer-helper.ts":
/*!************************************!*\
	  !*** ./src/utils/buffer-helper.ts ***!
	  \************************************/
/*! exports provided: BufferHelper */function(t,e,n){n.r(e),n.d(e,"BufferHelper",(function(){return a}));var r=n(/*! ./logger */"./src/utils/logger.ts"),i={length:0,start:function(){return 0},end:function(){return 0}},a=function(){function t(){}return t.isBuffered=function(e,n){try{if(e)for(var r=t.getBuffered(e),i=0;i<r.length;i++)if(n>=r.start(i)&&n<=r.end(i))return!0}catch(t){}return!1},t.bufferInfo=function(e,n,r){try{if(e){var i,a=t.getBuffered(e),o=[];for(i=0;i<a.length;i++)o.push({start:a.start(i),end:a.end(i)});return this.bufferedInfo(o,n,r)}}catch(t){}return{len:0,start:n,end:n,nextStart:void 0}},t.bufferedInfo=function(t,e,n){e=Math.max(0,e),t.sort((function(t,e){var n=t.start-e.start;return n||e.end-t.end}));var r=[];if(n)for(var i=0;i<t.length;i++){var a=r.length;if(a){var o=r[a-1].end;t[i].start-o<n?t[i].end>o&&(r[a-1].end=t[i].end):r.push(t[i])}else r.push(t[i])}else r=t;for(var s,l=0,u=e,c=e,d=0;d<r.length;d++){var h=r[d].start,f=r[d].end;if(e+n>=h&&e<f)u=h,l=(c=f)-e;else if(e+n<h){s=h;break}}return{len:l,start:u||0,end:c||0,nextStart:s}},t.getBuffered=function(t){try{return t.buffered}catch(t){return r.logger.log("failed to get media.buffered",t),i}},t}()},"./src/utils/cea-608-parser.ts":
/*!*************************************!*\
	  !*** ./src/utils/cea-608-parser.ts ***!
	  \*************************************/
/*! exports provided: Row, CaptionScreen, default */function(t,e,n){n.r(e),n.d(e,"Row",(function(){return y})),n.d(e,"CaptionScreen",(function(){return b}));var r,i=n(/*! ../utils/logger */"./src/utils/logger.ts"),a={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},o=function(t){var e=t;return a.hasOwnProperty(t)&&(e=a[t]),String.fromCharCode(e)},s=15,l=100,u={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},c={17:2,18:4,21:6,22:8,23:10,19:13,20:15},d={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},h={25:2,26:4,29:6,30:8,31:10,27:13,28:15},f=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(t){t[t.ERROR=0]="ERROR",t[t.TEXT=1]="TEXT",t[t.WARNING=2]="WARNING",t[t.INFO=2]="INFO",t[t.DEBUG=3]="DEBUG",t[t.DATA=3]="DATA"}(r||(r={}));var p=function(){function t(){this.time=null,this.verboseLevel=r.ERROR}return t.prototype.log=function(t,e){this.verboseLevel>=t&&i.logger.log(this.time+" ["+t+"] "+e)},t}(),g=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].toString(16));return e},v=function(){function t(t,e,n,r,i){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=t||"white",this.underline=e||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1}var e=t.prototype;return e.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],n=0;n<e.length;n++){var r=e[n];t.hasOwnProperty(r)&&(this[r]=t[r])}},e.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},e.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},e.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},t}(),m=function(){function t(t,e,n,r,i,a){this.uchar=void 0,this.penState=void 0,this.uchar=t||" ",this.penState=new v(e,n,r,i,a)}var e=t.prototype;return e.reset=function(){this.uchar=" ",this.penState.reset()},e.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},e.setPenState=function(t){this.penState.copy(t)},e.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},e.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},e.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},t}(),y=function(){function t(t){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var e=0;e<l;e++)this.chars.push(new m);this.logger=t,this.pos=0,this.currPenState=new v}var e=t.prototype;return e.equals=function(t){for(var e=!0,n=0;n<l;n++)if(!this.chars[n].equals(t.chars[n])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<l;e++)this.chars[e].copy(t.chars[e])},e.isEmpty=function(){for(var t=!0,e=0;e<l;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},e.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(this.logger.log(r.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>l&&(this.logger.log(r.DEBUG,"Too large cursor position "+this.pos),this.pos=l)},e.moveCursor=function(t){var e=this.pos+t;if(t>1)for(var n=this.pos+1;n<e+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(e)},e.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.insertChar=function(t){t>=144&&this.backSpace();var e=o(t);this.pos>=l?this.logger.log(r.ERROR,"Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1))},e.clearFromPos=function(t){var e;for(e=t;e<l;e++)this.chars[e].reset()},e.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.getTextString=function(){for(var t=[],e=!0,n=0;n<l;n++){var r=this.chars[n].uchar;" "!==r&&(e=!1),t.push(r)}return e?"":t.join("")},e.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},t}(),b=function(){function t(t){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var e=0;e<s;e++)this.rows.push(new y(t));this.logger=t,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var e=t.prototype;return e.reset=function(){for(var t=0;t<s;t++)this.rows[t].clear();this.currRow=14},e.equals=function(t){for(var e=!0,n=0;n<s;n++)if(!this.rows[n].equals(t.rows[n])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<s;e++)this.rows[e].copy(t.rows[e])},e.isEmpty=function(){for(var t=!0,e=0;e<s;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},e.backSpace=function(){this.rows[this.currRow].backSpace()},e.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.insertChar=function(t){this.rows[this.currRow].insertChar(t)},e.setPen=function(t){this.rows[this.currRow].setPenStyles(t)},e.moveCursor=function(t){this.rows[this.currRow].moveCursor(t)},e.setCursor=function(t){this.logger.log(r.INFO,"setCursor: "+t),this.rows[this.currRow].setCursor(t)},e.setPAC=function(t){this.logger.log(r.INFO,"pacData = "+JSON.stringify(t));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var n=0;n<s;n++)this.rows[n].clear();var i=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){var o=a.rows[i].cueStartTime,l=this.logger.time;if(o&&null!==l&&o<l)for(var u=0;u<this.nrRollUpRows;u++)this.rows[e-this.nrRollUpRows+u+1].copy(a.rows[i+u])}}this.currRow=e;var c=this.rows[this.currRow];if(null!==t.indent){var d=t.indent,h=Math.max(d-1,0);c.setCursor(t.indent),t.color=c.chars[h].penState.foreground}var f={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(f)},e.setBkgData=function(t){this.logger.log(r.INFO,"bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},e.setRollUpRows=function(t){this.nrRollUpRows=t},e.rollUp=function(){if(null!==this.nrRollUpRows){this.logger.log(r.TEXT,this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),this.logger.log(r.INFO,"Rolling up")}else this.logger.log(r.DEBUG,"roll_up but nrRollUpRows not set yet")},e.getDisplayText=function(t){t=t||!1;for(var e=[],n="",r=-1,i=0;i<s;i++){var a=this.rows[i].getTextString();a&&(r=i+1,t?e.push("Row "+r+": '"+a+"'"):e.push(a.trim()))}return e.length>0&&(n=t?"["+e.join(" | ")+"]":e.join("\n")),n},e.getTextAndFormat=function(){return this.rows},t}(),S=function(){function t(t,e,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new b(n),this.nonDisplayedMemory=new b(n),this.lastOutputScreen=new b(n),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}var e=t.prototype;return e.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},e.getHandler=function(){return this.outputFilter},e.setHandler=function(t){this.outputFilter=t},e.setPAC=function(t){this.writeScreen.setPAC(t)},e.setBkgData=function(t){this.writeScreen.setBkgData(t)},e.setMode=function(t){t!==this.mode&&(this.mode=t,this.logger.log(r.INFO,"MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},e.insertChars=function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(r.INFO,n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(r.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.ccRCL=function(){this.logger.log(r.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.ccBS=function(){this.logger.log(r.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.ccAOF=function(){},e.ccAON=function(){},e.ccDER=function(){this.logger.log(r.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.ccRU=function(t){this.logger.log(r.INFO,"RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},e.ccFON=function(){this.logger.log(r.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.ccRDC=function(){this.logger.log(r.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.ccTR=function(){this.logger.log(r.INFO,"TR"),this.setMode("MODE_TEXT")},e.ccRTD=function(){this.logger.log(r.INFO,"RTD"),this.setMode("MODE_TEXT")},e.ccEDM=function(){this.logger.log(r.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.ccCR=function(){this.logger.log(r.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.ccENM=function(){this.logger.log(r.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.ccEOC=function(){if(this.logger.log(r.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(r.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},e.ccTO=function(t){this.logger.log(r.INFO,"TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},e.ccMIDROW=function(t){var e={flash:!1};if(e.underline=t%2==1,e.italics=t>=46,e.italics)e.foreground="white";else{var n=Math.floor(t/2)-16;e.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}this.logger.log(r.INFO,"MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},e.outputDataUpdate=function(t){void 0===t&&(t=!1);var e=this.logger.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},e.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},t}(),E=function(){function t(t,e,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var r=new p;this.channels=[null,new S(t,e,r),new S(t+1,n,r)],this.cmdHistory={a:null,b:null},this.logger=r}var e=t.prototype;return e.getHandler=function(t){return this.channels[t].getHandler()},e.setHandler=function(t,e){this.channels[t].setHandler(e)},e.addData=function(t,e){var n,i,a,o=!1;this.logger.time=t;for(var s=0;s<e.length;s+=2)if(i=127&e[s],a=127&e[s+1],0!==i||0!==a){if(this.logger.log(r.DATA,"["+g([e[s],e[s+1]])+"] -> ("+g([i,a])+")"),(n=this.parseCmd(i,a))||(n=this.parseMidrow(i,a)),n||(n=this.parsePAC(i,a)),n||(n=this.parseBackgroundAttributes(i,a)),!n&&(o=this.parseChars(i,a))){var l=this.currentChannel;l&&l>0?this.channels[l].insertChars(o):this.logger.log(r.WARNING,"No channel found yet. TEXT-MODE?")}n||o||this.logger.log(r.WARNING,"Couldn't parse cleaned data "+g([i,a])+" orig: "+g([e[s],e[s+1]]))}},e.parseCmd=function(t,e){var n=this.cmdHistory;if(!((20===t||28===t||21===t||29===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=33&&e<=35))return!1;if(_(t,e,n))return T(null,null,n),this.logger.log(r.DEBUG,"Repeated command ("+g([t,e])+") is dropped"),!0;var i=20===t||21===t||23===t?1:2,a=this.channels[i];return 20===t||21===t||28===t||29===t?32===e?a.ccRCL():33===e?a.ccBS():34===e?a.ccAOF():35===e?a.ccAON():36===e?a.ccDER():37===e?a.ccRU(2):38===e?a.ccRU(3):39===e?a.ccRU(4):40===e?a.ccFON():41===e?a.ccRDC():42===e?a.ccTR():43===e?a.ccRTD():44===e?a.ccEDM():45===e?a.ccCR():46===e?a.ccENM():47===e&&a.ccEOC():a.ccTO(e-32),T(t,e,n),this.currentChannel=i,!0},e.parseMidrow=function(t,e){var n=0;if((17===t||25===t)&&e>=32&&e<=47){if((n=17===t?1:2)!==this.currentChannel)return this.logger.log(r.ERROR,"Mismatch channel in midrow parsing"),!1;var i=this.channels[n];return!!i&&(i.ccMIDROW(e),this.logger.log(r.DEBUG,"MIDROW ("+g([t,e])+")"),!0)}return!1},e.parsePAC=function(t,e){var n,r=this.cmdHistory;if(!((t>=17&&t<=23||t>=25&&t<=31)&&e>=64&&e<=127||(16===t||24===t)&&e>=64&&e<=95))return!1;if(_(t,e,r))return T(null,null,r),!0;var i=t<=23?1:2;n=e>=64&&e<=95?1===i?u[t]:d[t]:1===i?c[t]:h[t];var a=this.channels[i];return!!a&&(a.setPAC(this.interpretPAC(n,e)),T(t,e,r),this.currentChannel=i,!0)},e.interpretPAC=function(t,e){var n,r={color:null,italics:!1,indent:null,underline:!1,row:t};return n=e>95?e-96:e-64,r.underline=1==(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},e.parseChars=function(t,e){var n,i,a=null,s=null;if(t>=25?(n=2,s=t-8):(n=1,s=t),s>=17&&s<=19?(i=17===s?e+80:18===s?e+112:e+144,this.logger.log(r.INFO,"Special char '"+o(i)+"' in channel "+n),a=[i]):t>=32&&t<=127&&(a=0===e?[t]:[t,e]),a){var l=g(a);this.logger.log(r.DEBUG,"Char codes =  "+l.join(",")),T(t,e,this.cmdHistory)}return a},e.parseBackgroundAttributes=function(t,e){var n;if(!((16===t||24===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=45&&e<=47))return!1;var r={};16===t||24===t?(n=Math.floor((e-32)/2),r.background=f[n],e%2==1&&(r.background=r.background+"_semi")):45===e?r.background="transparent":(r.foreground="black",47===e&&(r.underline=!0));var i=t<=23?1:2;return this.channels[i].setBkgData(r),T(t,e,this.cmdHistory),!0},e.reset=function(){for(var t=0;t<Object.keys(this.channels).length;t++){var e=this.channels[t];e&&e.reset()}this.cmdHistory={a:null,b:null}},e.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++){var n=this.channels[e];n&&n.cueSplitAtTime(t)}},t}();function T(t,e,n){n.a=t,n.b=e}function _(t,e,n){return n.a===t&&n.b===e}e.default=E},"./src/utils/codecs.ts":
/*!*****************************!*\
	  !*** ./src/utils/codecs.ts ***!
	  \*****************************/
/*! exports provided: isCodecType, isCodecSupportedInMp4 */function(t,e,n){n.r(e),n.d(e,"isCodecType",(function(){return i})),n.d(e,"isCodecSupportedInMp4",(function(){return a}));var r={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function i(t,e){var n=r[e];return!!n&&!0===n[t.slice(0,4)]}function a(t,e){return MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}},"./src/utils/cues.ts":
/*!***************************!*\
	  !*** ./src/utils/cues.ts ***!
	  \***************************/
/*! exports provided: default */function(t,e,n){n.r(e);var r=n(/*! ./vttparser */"./src/utils/vttparser.ts"),i=n(/*! ./webvtt-parser */"./src/utils/webvtt-parser.ts"),a=n(/*! ./texttrack-utils */"./src/utils/texttrack-utils.ts"),o=/\s/,s={newCue:function(t,e,n,s){for(var l,u,c,d,h,f=[],p=self.VTTCue||self.TextTrackCue,g=0;g<s.rows.length;g++)if(c=!0,d=0,h="",!(l=s.rows[g]).isEmpty()){for(var v=0;v<l.chars.length;v++)o.test(l.chars[v].uchar)&&c?d++:(h+=l.chars[v].uchar,c=!1);l.cueStartTime=e,e===n&&(n+=1e-4),d>=16?d--:d++;var m=Object(r.fixLineBreaks)(h.trim()),y=Object(i.generateCueId)(e,n,m);t&&t.cues&&t.cues.getCueById(y)||((u=new p(e,n,m)).id=y,u.line=g+1,u.align="left",u.position=10+Math.min(80,10*Math.floor(8*d/32)),f.push(u))}return t&&f.length&&(f.sort((function(t,e){return"auto"===t.line||"auto"===e.line?0:t.line>8&&e.line>8?e.line-t.line:t.line-e.line})),f.forEach((function(e){return Object(a.addCueToTrack)(t,e)}))),f}};e.default=s},"./src/utils/discontinuities.ts":
/*!**************************************!*\
	  !*** ./src/utils/discontinuities.ts ***!
	  \**************************************/
/*! exports provided: findFirstFragWithCC, shouldAlignOnDiscontinuities, findDiscontinuousReferenceFrag, adjustSlidingStart, alignStream, alignPDT */function(t,e,n){n.r(e),n.d(e,"findFirstFragWithCC",(function(){return o})),n.d(e,"shouldAlignOnDiscontinuities",(function(){return s})),n.d(e,"findDiscontinuousReferenceFrag",(function(){return l})),n.d(e,"adjustSlidingStart",(function(){return c})),n.d(e,"alignStream",(function(){return d})),n.d(e,"alignPDT",(function(){return h}));var r=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),i=n(/*! ./logger */"./src/utils/logger.ts"),a=n(/*! ../controller/level-helper */"./src/controller/level-helper.ts");function o(t,e){for(var n=null,r=0,i=t.length;r<i;r++){var a=t[r];if(a&&a.cc===e){n=a;break}}return n}function s(t,e,n){return!(!e.details||!(n.endCC>n.startCC||t&&t.cc<n.startCC))}function l(t,e){var n=t.fragments,r=e.fragments;if(r.length&&n.length){var a=o(n,r[0].cc);if(a&&(!a||a.startPTS))return a;i.logger.log("No frag in previous level to align on")}else i.logger.log("No fragments to align")}function u(t,e){if(t){var n=t.start+e;t.start=t.startPTS=n,t.endPTS=n+t.duration}}function c(t,e){for(var n=e.fragments,r=0,i=n.length;r<i;r++)u(n[r],t);e.fragmentHint&&u(e.fragmentHint,t),e.alignedSliding=!0}function d(t,e,n){e&&(function(t,e,n){if(s(t,n,e)){var a=l(n.details,e);a&&Object(r.isFiniteNumber)(a.start)&&(i.logger.log("Adjusting PTS using last level due to CC increase within current level "+e.url),c(a.start,e))}}(t,n,e),!n.alignedSliding&&e.details&&h(n,e.details),n.alignedSliding||!e.details||n.skippedSegments||Object(a.adjustSliding)(e.details,n))}function h(t,e){if(e.fragments.length&&t.hasProgramDateTime&&e.hasProgramDateTime){var n=e.fragments[0].programDateTime,a=t.fragments[0].programDateTime,o=(a-n)/1e3+e.fragments[0].start;o&&Object(r.isFiniteNumber)(o)&&(i.logger.log("Adjusting PTS using programDateTime delta "+(a-n)+"ms, sliding:"+o.toFixed(3)+" "+t.url+" "),c(o,t))}}},"./src/utils/ewma-bandwidth-estimator.ts":
/*!***********************************************!*\
	  !*** ./src/utils/ewma-bandwidth-estimator.ts ***!
	  \***********************************************/
/*! exports provided: default */function(t,e,n){n.r(e);var r=n(/*! ../utils/ewma */"./src/utils/ewma.ts"),i=function(){function t(t,e,n){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new r.default(t),this.fast_=new r.default(e)}var e=t.prototype;return e.update=function(t,e){var n=this.slow_,i=this.fast_;this.slow_.halfLife!==t&&(this.slow_=new r.default(t,n.getEstimate(),n.getTotalWeight())),this.fast_.halfLife!==e&&(this.fast_=new r.default(e,i.getEstimate(),i.getTotalWeight()))},e.sample=function(t,e){var n=(t=Math.max(t,this.minDelayMs_))/1e3,r=8*e/n;this.fast_.sample(n,r),this.slow_.sample(n,r)},e.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},e.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.destroy=function(){},t}();e.default=i},"./src/utils/ewma.ts":
/*!***************************!*\
	  !*** ./src/utils/ewma.ts ***!
	  \***************************/
/*! exports provided: default */function(t,e,n){n.r(e);var r=function(){function t(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=t,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=e,this.totalWeight_=n}var e=t.prototype;return e.sample=function(t,e){var n=Math.pow(this.alpha_,t);this.estimate_=e*(1-n)+n*this.estimate_,this.totalWeight_+=t},e.getTotalWeight=function(){return this.totalWeight_},e.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);if(t)return this.estimate_/t}return this.estimate_},t}();e.default=r},"./src/utils/fetch-loader.ts":
/*!***********************************!*\
	  !*** ./src/utils/fetch-loader.ts ***!
	  \***********************************/
/*! exports provided: fetchSupported, default */function(t,e,n){n.r(e),n.d(e,"fetchSupported",(function(){return d}));var r=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),i=n(/*! ../loader/load-stats */"./src/loader/load-stats.ts"),a=n(/*! ../demux/chunk-cache */"./src/demux/chunk-cache.ts");function o(t){var e="function"==typeof Map?new Map:void 0;return(o=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return s(t,arguments,c(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,t)})(t)}function s(t,e,n){return(s=l()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&u(i,n.prototype),i}).apply(null,arguments)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(t){}return!1}var h=function(){function t(t){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=t.fetchSetup||f,this.controller=new self.AbortController,this.stats=new i.LoadStats}var e=t.prototype;return e.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},e.abortInternal=function(){var t=this.response;t&&t.ok||(this.stats.aborted=!0,this.controller.abort())},e.abort=function(){var t;this.abortInternal(),null!==(t=this.callbacks)&&void 0!==t&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},e.load=function(t,e,n){var i=this,a=this.stats;if(a.loading.start)throw new Error("Loader can only be used once.");a.loading.start=self.performance.now();var o=function(t,e){var n={method:"GET",mode:"cors",credentials:"same-origin",signal:e};return t.rangeEnd&&(n.headers=new self.Headers({Range:"bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)})),n}(t,this.controller.signal),s=n.onProgress,l="arraybuffer"===t.responseType,u=l?"byteLength":"length";this.context=t,this.config=e,this.callbacks=n,this.request=this.fetchSetup(t,o),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout((function(){i.abortInternal(),n.onTimeout(a,t,i.response)}),e.timeout),self.fetch(this.request).then((function(n){if(i.response=i.loader=n,!n.ok){var o=n.status,u=n.statusText;throw new p(u||"fetch, bad network response",o,n)}return a.loading.first=Math.max(self.performance.now(),a.loading.start),a.total=parseInt(n.headers.get("Content-Length")||"0"),s&&Object(r.isFiniteNumber)(e.highWaterMark)?i.loadProgressively(n,a,t,e.highWaterMark,s):l?n.arrayBuffer():n.text()})).then((function(o){var l=i.response;self.clearTimeout(i.requestTimeout),a.loading.end=Math.max(self.performance.now(),a.loading.first),a.loaded=a.total=o[u];var c={url:l.url,data:o};s&&!Object(r.isFiniteNumber)(e.highWaterMark)&&s(a,t,o,l),n.onSuccess(c,a,t,l)})).catch((function(e){if(self.clearTimeout(i.requestTimeout),!a.aborted){var r=e.code||0;n.onError({code:r,text:e.message},t,e.details)}}))},e.getCacheAge=function(){var t=null;if(this.response){var e=this.response.headers.get("age");t=e?parseFloat(e):null}return t},e.loadProgressively=function(t,e,n,r,i){void 0===r&&(r=0);var o=new a.default,s=t.body.getReader();return function a(){return s.read().then((function(s){if(s.done)return o.dataLength&&i(e,n,o.flush(),t),Promise.resolve(new ArrayBuffer(0));var l=s.value,u=l.length;return e.loaded+=u,u<r||o.dataLength?(o.push(l),o.dataLength>=r&&i(e,n,o.flush(),t)):i(e,n,l,t),a()})).catch((function(){return Promise.reject()}))}()},t}();function f(t,e){return new self.Request(t.url,e)}var p=function(t){var e,n;function r(e,n,r){var i;return(i=t.call(this,e)||this).code=void 0,i.details=void 0,i.code=n,i.details=r,i}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,u(e,n),r}(o(Error));e.default=h},"./src/utils/imsc1-ttml-parser.ts":
/*!****************************************!*\
	  !*** ./src/utils/imsc1-ttml-parser.ts ***!
	  \****************************************/
/*! exports provided: IMSC1_CODEC, parseIMSC1 */function(t,e,n){n.r(e),n.d(e,"IMSC1_CODEC",(function(){return c})),n.d(e,"parseIMSC1",(function(){return p}));var r=n(/*! ./mp4-tools */"./src/utils/mp4-tools.ts"),i=n(/*! ./vttparser */"./src/utils/vttparser.ts"),a=n(/*! ./vttcue */"./src/utils/vttcue.ts"),o=n(/*! ../demux/id3 */"./src/demux/id3.ts"),s=n(/*! ./timescale-conversion */"./src/utils/timescale-conversion.ts"),l=n(/*! ./webvtt-parser */"./src/utils/webvtt-parser.ts");function u(){return(u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var c="stpp.ttml.im1t",d=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,h=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,f={left:"start",center:"center",right:"end",start:"start",end:"end"};function p(t,e,n,i,c){var d=Object(r.findBox)(new Uint8Array(t),["mdat"]);if(0!==d.length){var h=d[0],p=Object(o.utf8ArrayToStr)(new Uint8Array(t,h.start,h.end-h.start)),E=Object(s.toTimescaleFromScale)(e,1,n);try{i(function(t,e){var n=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!n)throw new Error("Invalid ttml");var r={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},i=Object.keys(r).reduce((function(t,e){return t[e]=n.getAttribute("ttp:"+e)||r[e],t}),{}),o="preserve"!==n.getAttribute("xml:space"),s=v(g(n,"styling","style")),c=v(g(n,"layout","region")),d=g(n,"body","[begin]");return[].map.call(d,(function(t){var n=m(t,o);if(!n||!t.hasAttribute("begin"))return null;var r=S(t.getAttribute("begin"),i),d=S(t.getAttribute("dur"),i),h=S(t.getAttribute("end"),i);if(null===r)throw b(t);if(null===h){if(null===d)throw b(t);h=r+d}var p=new a.default(r-e,h-e,n);p.id=Object(l.generateCueId)(p.startTime,p.endTime,p.text);var g=c[t.getAttribute("region")],v=s[t.getAttribute("style")];p.position=10,p.size=80;var E=function(t,e){var n="http://www.w3.org/ns/ttml#styling";return["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce((function(r,i){var a=y(e,n,i)||y(t,n,i);return a&&(r[i]=a),r}),{})}(g,v),T=E.textAlign;if(T){var _=f[T];_&&(p.lineAlign=_),p.align=T}return u(p,E),p})).filter((function(t){return null!==t}))}(p,E))}catch(t){c(t)}}else c(new Error("Could not parse IMSC1 mdat"))}function g(t,e,n){var r=t.getElementsByTagName(e)[0];return r?[].slice.call(r.querySelectorAll(n)):[]}function v(t){return t.reduce((function(t,e){var n=e.getAttribute("xml:id");return n&&(t[n]=e),t}),{})}function m(t,e){return[].slice.call(t.childNodes).reduce((function(t,n,r){var i;return"br"===n.nodeName&&r?t+"\n":null!==(i=n.childNodes)&&void 0!==i&&i.length?m(n,e):e?t+n.textContent.trim().replace(/\s+/g," "):t+n.textContent}),"")}function y(t,e,n){return t.hasAttributeNS(e,n)?t.getAttributeNS(e,n):null}function b(t){return new Error("Could not parse ttml timestamp "+t)}function S(t,e){if(!t)return null;var n=Object(i.parseTimeStamp)(t);return null===n&&(d.test(t)?n=function(t,e){var n=d.exec(t),r=(0|n[4])+(0|n[5])/e.subFrameRate;return 3600*(0|n[1])+60*(0|n[2])+(0|n[3])+r/e.frameRate}(t,e):h.test(t)&&(n=function(t,e){var n=h.exec(t),r=Number(n[1]);switch(n[2]){case"h":return 3600*r;case"m":return 60*r;case"ms":return 1e3*r;case"f":return r/e.frameRate;case"t":return r/e.tickRate}return r}(t,e))),n}},"./src/utils/logger.ts":
/*!*****************************!*\
	  !*** ./src/utils/logger.ts ***!
	  \*****************************/
/*! exports provided: enableLogs, logger */function(t,e,n){n.r(e),n.d(e,"enableLogs",(function(){return s})),n.d(e,"logger",(function(){return l}));var r=function(){},i={trace:r,debug:r,log:r,warn:r,info:r,error:r},a=i;function o(t){var e=self.console[t];return e?e.bind(self.console,"["+t+"] >"):r}function s(t){if(self.console&&!0===t||"object"==typeof t){!function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];n.forEach((function(e){a[e]=t[e]?t[e].bind(t):o(e)}))}(t,"debug","log","info","warn","error");try{a.log()}catch(t){a=i}}else a=i}var l=i},"./src/utils/mediakeys-helper.ts":
/*!***************************************!*\
	  !*** ./src/utils/mediakeys-helper.ts ***!
	  \***************************************/
/*! exports provided: KeySystems, requestMediaKeySystemAccess */function(t,e,n){var r;n.r(e),n.d(e,"KeySystems",(function(){return r})),n.d(e,"requestMediaKeySystemAccess",(function(){return i})),function(t){t.WIDEVINE="com.widevine.alpha",t.PLAYREADY="com.microsoft.playready"}(r||(r={}));var i="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null},"./src/utils/mediasource-helper.ts":
/*!*****************************************!*\
	  !*** ./src/utils/mediasource-helper.ts ***!
	  \*****************************************/
/*! exports provided: getMediaSource */function(t,e,n){function r(){return self.MediaSource||self.WebKitMediaSource}n.r(e),n.d(e,"getMediaSource",(function(){return r}))},"./src/utils/mp4-tools.ts":
/*!********************************!*\
	  !*** ./src/utils/mp4-tools.ts ***!
	  \********************************/
/*! exports provided: bin2str, readUint16, readUint32, writeUint32, findBox, parseSegmentIndex, parseInitSegment, getStartDTS, getDuration, computeRawDurationFromSamples, offsetStartDTS, segmentValidRange, appendUint8Array */function(t,e,n){n.r(e),n.d(e,"bin2str",(function(){return s})),n.d(e,"readUint16",(function(){return l})),n.d(e,"readUint32",(function(){return u})),n.d(e,"writeUint32",(function(){return c})),n.d(e,"findBox",(function(){return d})),n.d(e,"parseSegmentIndex",(function(){return h})),n.d(e,"parseInitSegment",(function(){return f})),n.d(e,"getStartDTS",(function(){return p})),n.d(e,"getDuration",(function(){return g})),n.d(e,"computeRawDurationFromSamples",(function(){return v})),n.d(e,"offsetStartDTS",(function(){return m})),n.d(e,"segmentValidRange",(function(){return y})),n.d(e,"appendUint8Array",(function(){return b}));var r=n(/*! ./typed-array */"./src/utils/typed-array.ts"),i=n(/*! ../loader/fragment */"./src/loader/fragment.ts"),a=Math.pow(2,32)-1,o=[].push;function s(t){return String.fromCharCode.apply(null,t)}function l(t,e){"data"in t&&(e+=t.start,t=t.data);var n=t[e]<<8|t[e+1];return n<0?65536+n:n}function u(t,e){"data"in t&&(e+=t.start,t=t.data);var n=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return n<0?4294967296+n:n}function c(t,e,n){"data"in t&&(e+=t.start,t=t.data),t[e]=n>>24,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=255&n}function d(t,e){var n,r,i,a=[];if(!e.length)return a;"data"in t?(n=t.data,r=t.start,i=t.end):(r=0,i=(n=t).byteLength);for(var l=r;l<i;){var c=u(n,l),h=c>1?l+c:i;if(s(n.subarray(l+4,l+8))===e[0])if(1===e.length)a.push({data:n,start:l+8,end:h});else{var f=d({data:n,start:l+8,end:h},e.slice(1));f.length&&o.apply(a,f)}l=h}return a}function h(t){var e=d(t,["moov"])[0],n=e?e.end:null,r=d(t,["sidx"]);if(!r||!r[0])return null;var i=[],a=r[0],o=a.data[0],s=0===o?8:16,c=u(a,s);s+=4,s+=0===o?8:16,s+=2;var h=a.end+0,f=l(a,s);s+=2;for(var p=0;p<f;p++){var g=s,v=u(a,g);g+=4;var m=2147483647&v;if(1==(2147483648&v)>>>31)return console.warn("SIDX has hierarchical references (not supported)"),null;var y=u(a,g);g+=4,i.push({referenceSize:m,subsegmentDuration:y,info:{duration:y/c,start:h,end:h+m-1}}),h+=m,s=g+=4}return{earliestPresentationTime:0,timescale:c,version:o,referencesCount:f,references:i,moovEndOffset:n}}function f(t){for(var e=[],n=d(t,["moov","trak"]),r=0;r<n.length;r++){var a=n[r],o=d(a,["tkhd"])[0];if(o){var l=o.data[o.start],c=0===l?12:20,h=u(o,c),f=d(a,["mdia","mdhd"])[0];if(f){var p=u(f,c=0===(l=f.data[f.start])?12:20),g=d(a,["mdia","hdlr"])[0];if(g){var v=s(g.data.subarray(g.start+8,g.start+12)),m={soun:i.ElementaryStreamTypes.AUDIO,vide:i.ElementaryStreamTypes.VIDEO}[v];if(m){var y=d(a,["mdia","minf","stbl","stsd"])[0],b=void 0;y&&(b=s(y.data.subarray(y.start+12,y.start+16))),e[h]={timescale:p,type:m},e[m]={timescale:p,id:h,codec:b}}}}}}return d(t,["moov","mvex","trex"]).forEach((function(t){var n=u(t,4),r=e[n];r&&(r.default={duration:u(t,12),flags:u(t,20)})})),e}function p(t,e){return d(e,["moof","traf"]).reduce((function(e,n){var r=d(n,["tfdt"])[0],i=r.data[r.start],a=d(n,["tfhd"]).reduce((function(e,n){var a=u(n,4),o=t[a];if(o){var s=u(r,4);1===i&&(s*=Math.pow(2,32),s+=u(r,8));var l=s/(o.timescale||9e4);if(isFinite(l)&&(null===e||l<e))return l}return e}),null);return null!==a&&isFinite(a)&&(null===e||a<e)?a:e}),null)||0}function g(t,e){for(var n=0,r=0,a=0,o=d(t,["moof","traf"]),s=0;s<o.length;s++){var l=o[s],c=d(l,["tfhd"])[0],f=e[u(c,4)];if(f){var p=f.default,g=u(c,0)|(null==p?void 0:p.flags),m=null==p?void 0:p.duration;8&g&&(m=u(c,2&g?12:8));for(var y=f.timescale||9e4,b=d(l,["trun"]),S=0;S<b.length;S++)n=m?m*u(b[S],4):v(b[S]),f.type===i.ElementaryStreamTypes.VIDEO?r+=n/y:f.type===i.ElementaryStreamTypes.AUDIO&&(a+=n/y)}}if(0===r&&0===a){var E=h(t);if(null!=E&&E.references)return E.references.reduce((function(t,e){return t+e.info.duration||0}),0)}return r||a}function v(t){var e=u(t,0),n=8;1&e&&(n+=4),4&e&&(n+=4);for(var r=0,i=u(t,4),a=0;a<i;a++)256&e&&(r+=u(t,n),n+=4),512&e&&(n+=4),1024&e&&(n+=4),2048&e&&(n+=4);return r}function m(t,e,n){d(e,["moof","traf"]).forEach((function(e){d(e,["tfhd"]).forEach((function(r){var i=u(r,4),o=t[i];if(o){var s=o.timescale||9e4;d(e,["tfdt"]).forEach((function(t){var e=t.data[t.start],r=u(t,4);if(0===e)c(t,4,r-n*s);else{r*=Math.pow(2,32),r+=u(t,8),r-=n*s,r=Math.max(r,0);var i=Math.floor(r/(a+1)),o=Math.floor(r%(a+1));c(t,4,i),c(t,8,o)}}))}}))}))}function y(t){var e={valid:null,remainder:null},n=d(t,["moof"]);if(!n)return e;if(n.length<2)return e.remainder=t,e;var i=n[n.length-1];return e.valid=Object(r.sliceUint8)(t,0,i.start-8),e.remainder=Object(r.sliceUint8)(t,i.start-8),e}function b(t,e){var n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}},"./src/utils/output-filter.ts":
/*!************************************!*\
	  !*** ./src/utils/output-filter.ts ***!
	  \************************************/
/*! exports provided: default */function(t,e,n){n.r(e),n.d(e,"default",(function(){return r}));var r=function(){function t(t,e){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=t,this.trackName=e}var e=t.prototype;return e.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},e.newCue=function(t,e,n){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},e.reset=function(){this.cueRanges=[]},t}()},"./src/utils/texttrack-utils.ts":
/*!**************************************!*\
	  !*** ./src/utils/texttrack-utils.ts ***!
	  \**************************************/
/*! exports provided: sendAddTrackEvent, addCueToTrack, clearCurrentCues, removeCuesInRange, getCuesInRange */function(t,e,n){n.r(e),n.d(e,"sendAddTrackEvent",(function(){return i})),n.d(e,"addCueToTrack",(function(){return a})),n.d(e,"clearCurrentCues",(function(){return o})),n.d(e,"removeCuesInRange",(function(){return s})),n.d(e,"getCuesInRange",(function(){return l}));var r=n(/*! ./logger */"./src/utils/logger.ts");function i(t,e){var n;try{n=new Event("addtrack")}catch(t){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=t,e.dispatchEvent(n)}function a(t,e){var n=t.mode;if("disabled"===n&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error("addCue is failed for: "+e)}catch(n){r.logger.debug("[texttrack-utils]: "+n);var i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,t.addCue(i)}"disabled"===n&&(t.mode=n)}function o(t){var e=t.mode;if("disabled"===e&&(t.mode="hidden"),t.cues)for(var n=t.cues.length;n--;)t.removeCue(t.cues[n]);"disabled"===e&&(t.mode=e)}function s(t,e,n){var r=t.mode;if("disabled"===r&&(t.mode="hidden"),t.cues&&t.cues.length>0)for(var i=l(t.cues,e,n),a=0;a<i.length;a++)t.removeCue(i[a]);"disabled"===r&&(t.mode=r)}function l(t,e,n){var r=[],i=function(t,e){if(e<t[0].startTime)return 0;var n=t.length-1;if(e>t[n].endTime)return-1;for(var r=0,i=n;r<=i;){var a=Math.floor((i+r)/2);if(e<t[a].startTime)i=a-1;else{if(!(e>t[a].startTime&&r<n))return a;r=a+1}}return t[r].startTime-e<e-t[i].startTime?r:i}(t,e);if(i>-1)for(var a=i,o=t.length;a<o;a++){var s=t[a];if(s.startTime>=e&&s.endTime<=n)r.push(s);else if(s.startTime>n)return r}return r}},"./src/utils/time-ranges.ts":
/*!**********************************!*\
	  !*** ./src/utils/time-ranges.ts ***!
	  \**********************************/
/*! exports provided: default */function(t,e,n){n.r(e),e.default={toString:function(t){for(var e="",n=t.length,r=0;r<n;r++)e+="["+t.start(r).toFixed(3)+","+t.end(r).toFixed(3)+"]";return e}}},"./src/utils/timescale-conversion.ts":
/*!*******************************************!*\
	  !*** ./src/utils/timescale-conversion.ts ***!
	  \*******************************************/
/*! exports provided: toTimescaleFromBase, toTimescaleFromScale, toMsFromMpegTsClock, toMpegTsClockFromTimescale */function(t,e,n){function r(t,e,n,r){void 0===n&&(n=1),void 0===r&&(r=!1);var i=t*e*n;return r?Math.round(i):i}function i(t,e,n,i){return void 0===n&&(n=1),void 0===i&&(i=!1),r(t,e,1/n,i)}function a(t,e){return void 0===e&&(e=!1),r(t,1e3,1/9e4,e)}function o(t,e){return void 0===e&&(e=1),r(t,9e4,1/e)}n.r(e),n.d(e,"toTimescaleFromBase",(function(){return r})),n.d(e,"toTimescaleFromScale",(function(){return i})),n.d(e,"toMsFromMpegTsClock",(function(){return a})),n.d(e,"toMpegTsClockFromTimescale",(function(){return o}))},"./src/utils/typed-array.ts":
/*!**********************************!*\
	  !*** ./src/utils/typed-array.ts ***!
	  \**********************************/
/*! exports provided: sliceUint8 */function(t,e,n){function r(t,e,n){return Uint8Array.prototype.slice?t.slice(e,n):new Uint8Array(Array.prototype.slice.call(t,e,n))}n.r(e),n.d(e,"sliceUint8",(function(){return r}))},"./src/utils/vttcue.ts":
/*!*****************************!*\
	  !*** ./src/utils/vttcue.ts ***!
	  \*****************************/
/*! exports provided: default */function(t,e,n){n.r(e),e.default=function(){if("undefined"!=typeof self&&self.VTTCue)return self.VTTCue;var t=["","lr","rl"],e=["start","middle","end","left","right"];function n(t,e){if("string"!=typeof e)return!1;if(!Array.isArray(t))return!1;var n=e.toLowerCase();return!!~t.indexOf(n)&&n}function r(t){return n(e,t)}function i(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var o in a)t[o]=a[o]}return t}function a(e,a,o){var s=this,l={enumerable:!0};s.hasBeenReset=!1;var u="",c=!1,d=e,h=a,f=o,p=null,g="",v=!0,m="auto",y="start",b=50,S="middle",E=50,T="middle";Object.defineProperty(s,"id",i({},l,{get:function(){return u},set:function(t){u=""+t}})),Object.defineProperty(s,"pauseOnExit",i({},l,{get:function(){return c},set:function(t){c=!!t}})),Object.defineProperty(s,"startTime",i({},l,{get:function(){return d},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");d=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",i({},l,{get:function(){return h},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");h=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",i({},l,{get:function(){return f},set:function(t){f=""+t,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",i({},l,{get:function(){return p},set:function(t){p=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",i({},l,{get:function(){return g},set:function(e){var r=function(e){return n(t,e)}(e);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");g=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",i({},l,{get:function(){return v},set:function(t){v=!!t,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",i({},l,{get:function(){return m},set:function(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("An invalid number or illegal string was specified.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",i({},l,{get:function(){return y},set:function(t){var e=r(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",i({},l,{get:function(){return b},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",i({},l,{get:function(){return S},set:function(t){var e=r(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");S=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",i({},l,{get:function(){return E},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");E=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",i({},l,{get:function(){return T},set:function(t){var e=r(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");T=e,this.hasBeenReset=!0}})),s.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}()},"./src/utils/vttparser.ts":
/*!********************************!*\
	  !*** ./src/utils/vttparser.ts ***!
	  \********************************/
/*! exports provided: parseTimeStamp, fixLineBreaks, VTTParser */function(t,e,n){n.r(e),n.d(e,"parseTimeStamp",(function(){return a})),n.d(e,"fixLineBreaks",(function(){return d})),n.d(e,"VTTParser",(function(){return h}));var r=n(/*! ./vttcue */"./src/utils/vttcue.ts"),i=function(){function t(){}return t.prototype.decode=function(t,e){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))},t}();function a(t){function e(t,e,n,r){return 3600*(0|t)+60*(0|e)+(0|n)+parseFloat(r||0)}var n=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?e(n[2],n[3],0,n[4]):e(n[1],n[2],n[3],n[4]):null}var o=function(){function t(){this.values=Object.create(null)}var e=t.prototype;return e.set=function(t,e){this.get(t)||""===e||(this.values[t]=e)},e.get=function(t,e,n){return n?this.has(t)?this.values[t]:e[n]:this.has(t)?this.values[t]:e},e.has=function(t){return t in this.values},e.alt=function(t,e,n){for(var r=0;r<n.length;++r)if(e===n[r]){this.set(t,e);break}},e.integer=function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},e.percent=function(t,e){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(e)){var n=parseFloat(e);if(n>=0&&n<=100)return this.set(t,n),!0}return!1},t}();function s(t,e,n,r){var i=r?t.split(r):[t];for(var a in i)if("string"==typeof i[a]){var o=i[a].split(n);2===o.length&&e(o[0],o[1])}}var l=new r.default(0,0,""),u="middle"===l.align?"middle":"center";function c(t,e,n){var r=t;function i(){var e=a(t);if(null===e)throw new Error("Malformed timestamp: "+r);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function c(){t=t.replace(/^\s+/,"")}if(c(),e.startTime=i(),c(),"--\x3e"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);t=t.substr(3),c(),e.endTime=i(),c(),function(t,e){var r=new o;s(t,(function(t,e){var i;switch(t){case"region":for(var a=n.length-1;a>=0;a--)if(n[a].id===e){r.set(t,n[a].region);break}break;case"vertical":r.alt(t,e,["rl","lr"]);break;case"line":i=e.split(","),r.integer(t,i[0]),r.percent(t,i[0])&&r.set("snapToLines",!1),r.alt(t,i[0],["auto"]),2===i.length&&r.alt("lineAlign",i[1],["start",u,"end"]);break;case"position":i=e.split(","),r.percent(t,i[0]),2===i.length&&r.alt("positionAlign",i[1],["start",u,"end","line-left","line-right","auto"]);break;case"size":r.percent(t,e);break;case"align":r.alt(t,e,["start",u,"end","left","right"])}}),/:/,/\s/),e.region=r.get("region",null),e.vertical=r.get("vertical","");var i=r.get("line","auto");"auto"===i&&-1===l.line&&(i=-1),e.line=i,e.lineAlign=r.get("lineAlign","start"),e.snapToLines=r.get("snapToLines",!0),e.size=r.get("size",100),e.align=r.get("align",u);var a=r.get("position","auto");"auto"===a&&50===l.position&&(a="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=a}(t,e)}function d(t){return t.replace(/<br(?: \/)?>/gi,"\n")}var h=function(){function t(){this.state="INITIAL",this.buffer="",this.decoder=new i,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var e=t.prototype;return e.parse=function(t){var e=this;function n(){var t=e.buffer,n=0;for(t=d(t);n<t.length&&"\r"!==t[n]&&"\n"!==t[n];)++n;var r=t.substr(0,n);return"\r"===t[n]&&++n,"\n"===t[n]&&++n,e.buffer=t.substr(n),r}t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));try{var i="";if("INITIAL"===e.state){if(!/\r\n|\n/.test(e.buffer))return this;var a=(i=n()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error("Malformed WebVTT signature.");e.state="HEADER"}for(var o=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(o?o=!1:i=n(),e.state){case"HEADER":/:/.test(i)?s(i,(function(t,e){}),/:/):i||(e.state="ID");continue;case"NOTE":i||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){e.state="NOTE";break}if(!i)continue;if(e.cue=new r.default(0,0,""),e.state="CUE",-1===i.indexOf("--\x3e")){e.cue.id=i;continue}case"CUE":if(!e.cue){e.state="BADCUE";continue}try{c(i,e.cue,e.regionList)}catch(t){e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var l=-1!==i.indexOf("--\x3e");if(!i||l&&(o=!0)){e.oncue&&e.cue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}if(null===e.cue)continue;e.cue.text&&(e.cue.text+="\n"),e.cue.text+=i;continue;case"BADCUE":i||(e.state="ID")}}}catch(t){"CUETEXT"===e.state&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state="INITIAL"===e.state?"BADWEBVTT":"BADCUE"}return this},e.flush=function(){var t=this;try{if((t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state||"BADWEBVTT"===t.state)throw new Error("Malformed WebVTT signature.")}catch(e){t.onparsingerror&&t.onparsingerror(e)}return t.onflush&&t.onflush(),this},t}()},"./src/utils/webvtt-parser.ts":
/*!************************************!*\
	  !*** ./src/utils/webvtt-parser.ts ***!
	  \************************************/
/*! exports provided: generateCueId, parseWebVTT */function(t,e,n){n.r(e),n.d(e,"generateCueId",(function(){return d})),n.d(e,"parseWebVTT",(function(){return h}));var r=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),i=n(/*! ./vttparser */"./src/utils/vttparser.ts"),a=n(/*! ../demux/id3 */"./src/demux/id3.ts"),o=n(/*! ./timescale-conversion */"./src/utils/timescale-conversion.ts"),s=n(/*! ../remux/mp4-remuxer */"./src/remux/mp4-remuxer.ts"),l=/\r\n|\n\r|\n|\r/g,u=function(t,e,n){return void 0===n&&(n=0),t.substr(n,e.length)===e},c=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return(e>>>0).toString()};function d(t,e,n){return c(t.toString())+c(e.toString())+c(n)}function h(t,e,n,c,h,f,p,g){var v,m=new i.VTTParser,y=Object(a.utf8ArrayToStr)(new Uint8Array(t)).trim().replace(l,"\n").split("\n"),b=[],S=Object(o.toMpegTsClockFromTimescale)(e,n),E="00:00.000",T=0,_=0,x=!0,w=!1;m.oncue=function(t){var e=c[h],n=c.ccOffset,r=(T-S)/9e4;if(null!=e&&e.new&&(void 0!==_?n=c.ccOffset=e.start:function(t,e,n){var r=t[e],i=t[r.prevCC];if(!i||!i.new&&r.new)return t.ccOffset=t.presentationOffset=r.start,void(r.new=!1);for(;null!==(a=i)&&void 0!==a&&a.new;){var a;t.ccOffset+=r.start-i.start,r.new=!1,i=t[(r=i).prevCC]}t.presentationOffset=n}(c,h,r)),r&&(n=r-c.presentationOffset),w){var i=t.endTime-t.startTime,a=Object(s.normalizePts)(9e4*(t.startTime+n-_),9e4*f)/9e4;t.startTime=a,t.endTime=a+i}var o=t.text.trim();t.text=decodeURIComponent(encodeURIComponent(o)),t.id||(t.id=d(t.startTime,t.endTime,o)),t.endTime>0&&b.push(t)},m.onparsingerror=function(t){v=t},m.onflush=function(){v?g(v):p(b)},y.forEach((function(t){if(x){if(u(t,"X-TIMESTAMP-MAP=")){x=!1,w=!0,t.substr(16).split(",").forEach((function(t){u(t,"LOCAL:")?E=t.substr(6):u(t,"MPEGTS:")&&(T=parseInt(t.substr(7)))}));try{_=function(t){var e=parseInt(t.substr(-3)),n=parseInt(t.substr(-6,2)),i=parseInt(t.substr(-9,2)),a=t.length>9?parseInt(t.substr(0,t.indexOf(":"))):0;if(!(Object(r.isFiniteNumber)(e)&&Object(r.isFiniteNumber)(n)&&Object(r.isFiniteNumber)(i)&&Object(r.isFiniteNumber)(a)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+t);return e+=1e3*n,(e+=6e4*i)+36e5*a}(E)/1e3}catch(t){w=!1,v=t}return}""===t&&(x=!1)}m.parse(t+"\n")})),m.flush()}},"./src/utils/xhr-loader.ts":
/*!*********************************!*\
	  !*** ./src/utils/xhr-loader.ts ***!
	  \*********************************/
/*! exports provided: default */function(t,e,n){n.r(e);var r=n(/*! ../utils/logger */"./src/utils/logger.ts"),i=n(/*! ../loader/load-stats */"./src/loader/load-stats.ts"),a=/^age:\s*[\d.]+\s*$/m,o=function(){function t(t){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=t?t.xhrSetup:null,this.stats=new i.LoadStats,this.retryDelay=0}var e=t.prototype;return e.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},e.abortInternal=function(){var t=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),t&&(t.onreadystatechange=null,t.onprogress=null,4!==t.readyState&&(this.stats.aborted=!0,t.abort()))},e.abort=function(){var t;this.abortInternal(),null!==(t=this.callbacks)&&void 0!==t&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},e.load=function(t,e,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=t,this.config=e,this.callbacks=n,this.retryDelay=e.retryDelay,this.loadInternal()},e.loadInternal=function(){var t=this.config,e=this.context;if(t){var n=this.loader=new self.XMLHttpRequest,r=this.stats;r.loading.first=0,r.loaded=0;var i=this.xhrSetup;try{if(i)try{i(n,e.url)}catch(t){n.open("GET",e.url,!0),i(n,e.url)}n.readyState||n.open("GET",e.url,!0)}catch(t){return void this.callbacks.onError({code:n.status,text:t.message},e,n)}e.rangeEnd&&n.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),n.onreadystatechange=this.readystatechange.bind(this),n.onprogress=this.loadprogress.bind(this),n.responseType=e.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),t.timeout),n.send()}},e.readystatechange=function(){var t=this.context,e=this.loader,n=this.stats;if(t&&e){var i=e.readyState,a=this.config;if(!n.aborted&&i>=2)if(self.clearTimeout(this.requestTimeout),0===n.loading.first&&(n.loading.first=Math.max(self.performance.now(),n.loading.start)),4===i){e.onreadystatechange=null,e.onprogress=null;var o=e.status;if(o>=200&&o<300){var s,l;if(n.loading.end=Math.max(self.performance.now(),n.loading.first),l="arraybuffer"===t.responseType?(s=e.response).byteLength:(s=e.responseText).length,n.loaded=n.total=l,!this.callbacks)return;var u=this.callbacks.onProgress;if(u&&u(n,t,s,e),!this.callbacks)return;var c={url:e.responseURL,data:s};this.callbacks.onSuccess(c,n,t,e)}else n.retry>=a.maxRetry||o>=400&&o<499?(r.logger.error(o+" while loading "+t.url),this.callbacks.onError({code:o,text:e.statusText},t,e)):(r.logger.warn(o+" while loading "+t.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),n.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),a.timeout)}},e.loadtimeout=function(){r.logger.warn("timeout while loading "+this.context.url);var t=this.callbacks;t&&(this.abortInternal(),t.onTimeout(this.stats,this.context,this.loader))},e.loadprogress=function(t){var e=this.stats;e.loaded=t.loaded,t.lengthComputable&&(e.total=t.total)},e.getCacheAge=function(){var t=null;if(this.loader&&a.test(this.loader.getAllResponseHeaders())){var e=this.loader.getResponseHeader("age");t=e?parseFloat(e):null}return t},t}();e.default=o}}).default},t.exports=n())}(ov);var sv=e(ov.exports);function lv(t,e){return{restrict:"AE",replace:!0,scope:{item:"=item",entity:"=entity",frozen:"=frozen"},link:function(n,r,i){var a=null,o=null,s=null;n.$watch("frozen",(function(t){t?o&&!o.paused&&(o.pause(),a=e((function(){s&&(s.destroy(),s=null,o.remove(),o=null)}),5e3)):(e.cancel(a),s?Promise.resolve(o.play()).catch((function(){})):l())}));var l=function(){"off"===n.entity.state||n.frozen||t.send({type:"camera/stream",entity_id:n.entity.entity_id},(function(t){t.result&&function(t){var e=document.createElement("video");if(e.style.objectFit=n.item.objFit||"fill",e.style.width="100%",e.style.height="100%",e.muted=!0,sv.isSupported()){var i=n.item.bufferLength||5,a={maxBufferLength:i,maxMaxBufferLength:i};s&&s.destroy(),(s=new sv(a)).on(sv.Events.MEDIA_ATTACHED,(function(){s.loadSource(t)})),s.on(sv.Events.MANIFEST_PARSED,(function(){Promise.resolve(e.play()).catch((function(){}))})),s.attachMedia(e)}else e.src=t,e.setAttribute("playsinline","playsinline"),e.addEventListener("loadedmetadata",(function(){Promise.resolve(e.play()).catch((function(){}))}));o&&r[0].removeChild(o),r[0].appendChild(e),o=e}(Dd(t.result.url))}))};n.$watch("entity",l),n.$on("$destroy",(function(){e.cancel(a),s&&s.destroy()}))}}}function uv(t){return{restrict:"E",template:'\n         <div class="clock--h"></div\n         ><div class="clock--colon">:</div\n         ><div class="clock--m"></div\n         ><div class="clock--postfix"></div>\n      ',link:function(e,n,r){var i=n[0].querySelector(".clock--h"),a=n[0].querySelector(".clock--m"),o=n[0].querySelector(".clock--postfix"),s=function(){var e=cu(t("date")(Date.now(),"shortTime").split(":"),2),n=e[0],r=cu(e[1].split(" "),2),s=r[0],l=r[1];i.textContent=n,a.textContent=s,o.textContent=l||""};s();var l=setInterval(s,1e3);e.$on("$destroy",(function(){clearInterval(l)}))}}}function cv(t,e){return{restrict:"E",replace:!0,scope:{format:"<"},template:'<div class="date">{{ date | date:format}}</div>',link:function(n,r,i){n.format=n.format||e.DATETIME_FORMATS.longDate,n.date=new Date,t((function(){n.date=new Date}),6e4)}}}lv.$inject=["Api","$timeout"],uv.$inject=["$filter"],cv.$inject=["$interval","$locale"];function dv(t){return{restrict:"A",replace:!1,scope:{item:"=iframeTile"},link:function(t,e,n){var r=e[0];if(t.item.refresh){var i=t.item.refresh;"function"==typeof i&&(i=i()),i=Math.max(1e3,i);var a=setInterval((function(){r.src=r.src}),i);t.$on("$destroy",(function(){clearInterval(a)}))}}}}dv.$inject=["$interval"];ph.directive("camera",(function(){return{restrict:"AE",replace:!0,scope:{item:"=item",entity:"=entity",frozen:"=frozen"},link:function(t,e,n){var r=0,i=null,a=t.item.refresh||!1,o=null,s=null;"function"==typeof a&&(a=a());var l=function(){if(i&&!(r>1&&t.frozen)){var n=i;(function(n){var r=document.createElement("div");n&&(r.style.backgroundImage='url("'+Dd(n)+'")'),r.style.backgroundSize=t.item.bgSize||"cover",e[0].appendChild(r),s&&e[0].removeChild(s),setTimeout((function(){r.style.opacity=1}),100),s=o,o=r})(n+=(-1===n.indexOf("?")?"?":"&")+"_i="+r++)}};if(t.$watchGroup(["item","entity","entity.attributes.entity_picture"],(function(){var e=t.item.filter?t.item.filter(t.item,t.entity):t.entity&&t.entity.attributes.entity_picture?t.entity.attributes.entity_picture:null;i!==e&&function(t){(i=t)&&l()}(e)})),a){var u=setInterval(l,a);t.$on("$destroy",(function(){clearInterval(u)}))}}}})),ph.directive("cameraStream",lv),ph.directive("clock",uv),ph.directive("date",cv),ph.directive("headerItem",(function(){return{restrict:"AE",replace:!1,scope:"=",template:'<div class="header-item" ng-class="\'-\' + item.type" ng-style="item.styles" ng-if="!isHidden(item,{})">\n   <div ng-if="item.type === HEADER_ITEMS.TIME">\n      <clock></clock>\n   </div>\n   <div ng-if="item.type === HEADER_ITEMS.DATE">\n      <date format="item.dateFormat"></date>\n   </div>\n   <div ng-if="item.type === HEADER_ITEMS.DATETIME">\n      <clock></clock>\n      <date format="item.dateFormat"></date>\n   </div>\n   <div ng-if="item.type === HEADER_ITEMS.CUSTOM_HTML">\n      <div ng-bind-html="item.html"></div>\n   </div>\n   <div ng-if="item.type === HEADER_ITEMS.WEATHER">\n      <div class="header-weather--icon-container">\n         <div class="header-weather--icon" ng-if="(_icon = getWeatherIcon(item, {}))">\n            <div class="wu" ng-class="\'wu-\' + _icon"></div>\n         </div>\n         <div class="header-weather--icon-image" ng-if="(_imgStyles = getWeatherImageStyles(item, {}))">\n            <div ng-style="_imgStyles"></div>\n         </div>\n      </div>\n\n      <div class="header-weather--temperature" ng-if="item.fields.temperature">\n         <span ng-bind="(getWeatherField(\'temperature\', item, {}) | number:1)"></span><span ng-bind="getWeatherField(\'temperatureUnit\', item, {})"></span>\n      </div>\n\n      <div class="header-weather--summary" ng-if="item.fields.summary">\n         <span ng-bind="getWeatherField(\'summary\', item, {})"></span>\n      </div>\n      <div class="header-weather--state" ng-if="!item.fields.summary && (_state = entityState(item, {}))">\n         <span ng-bind="_state"></span>\n      </div>\n   </div>\n</div>\n',link:function(t,e,n){}}})),ph.directive("iframeTile",dv),ph.directive("ngMax",(function(){return{restrict:"A",require:"ngModel",link:function(t,e,n){e.attr("max",n.ngMax)}}})),ph.directive("ngMin",(function(){return{restrict:"A",require:"ngModel",link:function(t,e,n){e.attr("min",n.ngMin)}}})),ph.directive("onScroll",(function(){return{restrict:"A",scope:{onScrollModel:"="},link:function(t,e,n){var r=!1,i=!1,a=function(){var n=0!==e[0].scrollLeft,a=0!==e[0].scrollTop;return(i!==a||r!==n)&&(t.onScrollModel.scrolledHorizontally=r=n,t.onScrollModel.scrolledVertically=i=a,!0)};a(),e.on("scroll",(function(){a()&&t.$apply()}))}}})),ph.directive("tile",(function(){return{restrict:"AE",replace:!1,scope:!0,template:'<div ng-style="itemStyles(page, item, entity)" class="item" ng-click="entityClick(page, item, entity)" hm-press="entityLongPress($event, page, item, entity)" hm-recognizer-options="{time: 600}" ng-if="(entity = getItemEntity(item)) && !isHidden(item, entity)" ng-class="itemClasses(item, entity)">\n   <div class="item-clickable"></div>\n\n   <div ng-if="item.bg || item.bgSuffix" class="item-background" ng-style="itemBgStyles(item, entity)"></div>\n\n   <div class="item-title" ng-bind="_title" ng-if="(_title = entityTitle(item, entity))"></div>\n\n   <div class="item-subtitle" ng-bind="_subtitle" ng-if="(_subtitle = entitySubtitle(item, entity))"></div>\n\n   <div class="item-state" ng-bind="_state" ng-if="(_state = entityState(item, entity))"></div>\n\n   <div class="item-slides-container" ng-if="item.slides.length">\n      <div class="item-slides" ng-class="\'-c\' + item.slides.length" ng-if="item.slides.length" ng-style="slidesStyles(item, $index)">\n         <div class="item-slide" ng-repeat="slide in item.slides track by $index" ng-style="slideStyles(slide, item, entity)"></div>\n      </div>\n   </div>\n\n   <div ng-if="[TYPES.ALARM,\n                TYPES.AUTOMATION,\n                TYPES.COVER_TOGGLE,\n                TYPES.CUSTOM,\n                TYPES.DOOR_ENTRY,\n                TYPES.INPUT_BOOLEAN,\n                TYPES.LOCK,\n                TYPES.POPUP,\n                TYPES.POPUP_IFRAME,\n                TYPES.SCENE,\n                TYPES.SCRIPT,\n                TYPES.SENSOR_ICON,\n                TYPES.SWITCH,\n                TYPES.VACUUM,\n                ].includes(item.type)" class="item-entity-container">\n      <div ng-if="item.customHtml" ng-bind-html="itemField(\'customHtml\', item, entity)"></div>\n\n      <div ng-if="!item.customHtml" class="item-entity">\n         <span class="item-entity--icon mdi" ng-class="entityIcon(item, entity)"></span>\n      </div>\n   </div>\n\n   <div ng-if="item.type === TYPES.DEVICE_TRACKER" class="item-entity-container -below">\n      <div class="item-slides-container" ng-if="hasTrackerCoords(entity)">\n         <div class="item-slides" ng-class="trackerSlidesClass(item, entity)" ng-style="slidesStyles(item, $index)">\n            <div class="item-slide -bg" ng-style="trackerBg(entity)" ng-if="showTrackerBg(item, entity)"></div>\n\n            <div class="item-slide -map" ng-repeat="zoom in trackerZoomLevels(item, entity) track by $index" ng-style="slideMapStyles(item, page, entity.attributes, zoom, entity.state)"></div>\n         </div>\n      </div>\n\n      <div ng-if="!hasTrackerCoords(entity) && entity.attributes.entity_picture" class="item-background" ng-style="trackerBg(entity)"></div>\n   </div>\n\n   <div ng-if="item.type === TYPES.SENSOR" class="item-entity-container">\n      <div class="item-entity">\n         <span ng-bind="entityValue(item, entity)" class="item-entity--value"></span>\n\n         <span ng-if="(_unit = entityUnit(item, entity))" class="item-entity--unit" ng-bind="_unit"></span>\n      </div>\n   </div>\n\n   <div ng-if="item.type === TYPES.COVER" class="item-entity-container">\n      <div class="item-cover">\n         <div class="item-cover--button -open" ng-class="{\'-disabled\': entity.state === \'open\' && (!entity.attributes.current_position || entity.attributes.current_position === 100)}" ng-click="sendCover(\'open_cover\', item, entity)">\n            <i class="mdi mdi-arrow-up"></i>\n         </div>\n\n         <div class="item-cover--button -stop" ng-click="sendCover(\'stop_cover\', item, entity)">\n            <i class="mdi mdi-stop"></i>\n         </div>\n\n         <div class="item-cover--button -close" ng-class="{\'-disabled\': entity.state === \'closed\'}" ng-click="sendCover(\'close_cover\', item, entity)">\n            <i class="mdi mdi-arrow-down"></i>\n         </div>\n      </div>\n   </div>\n\n   <div ng-if="item.type === TYPES.FAN" class="item-entity-container">\n      <div class="item-entity" ng-if="(_icon = entityIcon(item, entity))" ng-class="{\'-with-select\': entity.attributes.speed_list}">\n         <span class="item-entity--icon mdi" ng-class="_icon"></span>\n      </div>\n\n      <div class="item-fan">\n         <div class="item-fan--speed" ng-if="entity.attributes.speed_list" ng-click="openFanSpeedSelect($event, item)">\n            <span ng-bind="entity.attributes.speed"></span>\n         </div>\n      </div>\n\n      <div ng-if="selectOpened(item)" class="item-select" ng-style="itemSelectStyles(entity, entity.attributes.speed_list)">\n         <div class="item-select--option" ng-repeat="option in entity.attributes.speed_list track by $index" ng-class="{\'-active\': option === entity.attributes.speed}" ng-click="setFanSpeed($event, item, entity, option)">\n            <span ng-bind="option"></span>\n         </div>\n      </div>\n   </div>\n\n   <div ng-if="item.type === TYPES.LIGHT" class="item-entity-container">\n      <div ng-if="!item.controlsEnabled">\n         <div ng-if="entity.state === \'on\' && FEATURES.LIGHT.supportsBrightness(entity)">\n            <div class="item-button -center-right" ng-click="increaseBrightness($event, item, entity)">\n               <i class="mdi mdi-plus"></i>\n            </div>\n            <div class="item-button -bottom-right" ng-click="decreaseBrightness($event, item, entity)">\n               <i class="mdi mdi-minus"></i>\n            </div>\n         </div>\n         <div class="item-entity">\n            <span class="item-entity--icon mdi" ng-class="entityIcon(item, entity)"></span>\n         </div>\n      </div>\n      <div ng-if="item.controlsEnabled" class="item-entity-sliders" ng-click="preventClick($event)">\n         <div ng-repeat="slider in item.sliders track by $index" ng-if="(_c = getLightSliderConf(item, entity, slider))" class="item-slider-container">\n            <div class="item-slider-title" ng-if="slider.title">\n               <span ng-bind="slider.title"></span>:\n               <span ng-bind="getLightSliderValue(slider, _c)"></span>\n            </div>\n\n            <div class="item-slider">\n               <input type="range" ng-model="_c.getSetValue" ng-model-options="{ getterSetter: true }" ng-on-touchstart="$event.stopPropagation()" ng-on-touchmove="$event.stopPropagation()" ng-on-pointerdown="$event.stopPropagation()" ng-change="lightSliderChanged(item, entity, slider, _c)" step="{{ _c.step }}" ng-min="{{ _c.min }}" ng-max="{{ _c.max }}">\n            </div>\n         </div>\n\n         <div ng-if="itemField(\'colorpicker\', item, entity)" class="item-entity-colorpicker">\n            <span>Color:</span>\n            <input color-picker color-picker-model="getRGBStringFromArray(entity.attributes.rgb_color)" color-picker-show-value="false" color-picker-output-format="\'rgba\'" color-picker-position="bottom" color-picker-fixed-position="false" color-picker-show-input-spinner="false" color-picker-show-cancel-button="true" color-picker-item="item" ng-style="{background: getRGBStringFromArray(entity.attributes.rgb_color)}">\n         </div>\n\n         <div class="item-entity--back-button" ng-click="closeLightSliders($event, item, entity)">\n            <i class="mdi mdi-chevron-left"></i> Back\n         </div>\n      </div>\n   </div>\n\n   <div ng-if="item.type === TYPES.DIMMER_SWITCH" class="item-entity-container">\n      <div ng-if="entityState(item, entity) && entity.state !== \'off\'">\n         <div class="item-button -center-right" ng-click="dimmerAction(\'plus\', $event, item, entity)">\n            <i class="mdi mdi-plus"></i>\n         </div>\n         <div class="item-button -bottom-right" ng-click="dimmerAction(\'minus\', $event, item, entity)">\n            <i class="mdi mdi-minus"></i>\n         </div>\n      </div>\n\n      <div class="item-entity">\n         <span class="item-entity--icon mdi" ng-class="entityIcon(item, entity)"></span>\n      </div>\n   </div>\n\n   <div ng-if="item.type === TYPES.TEXT_LIST" class="item-entity-container">\n      <div class="item-list">\n         <div class="item-list--item" ng-repeat="line in item.list track by $index">\n            <div class="item-list--name">\n               <i class="mdi" ng-class="listField(\'icon\', item, line)" ng-if="line.icon"></i>\n               <span ng-bind="listField(\'title\', item, line)"></span>\n            </div>\n            <div class="item-list--value">\n               <span ng-bind="listField(\'value\', item, line)"></span><span ng-bind="listField(\'unit\', item, line)"></span>\n            </div>\n         </div>\n      </div>\n   </div>\n\n   <div ng-if="item.type === TYPES.INPUT_NUMBER" class="item-entity-container">\n      <div>\n         <div class="item-button -center-right" ng-click="increaseNumber($event, item, entity)">\n            <i class="mdi mdi-plus"></i>\n         </div>\n         <div class="item-button -bottom-right" ng-click="decreaseNumber($event, item, entity)">\n            <i class="mdi mdi-minus"></i>\n         </div>\n      </div>\n\n      <div class="item-entity">\n         <span ng-bind="entityValue(item, entity)" class="item-entity--value"></span>\n         <span ng-if="(_unit = entityUnit(item, entity))" class="item-entity--unit" ng-bind="_unit"></span>\n      </div>\n   </div>\n\n   <div ng-if="item.type === TYPES.INPUT_SELECT" class="item-entity-container">\n      <div ng-if="selectOpened(item)" class="item-select" ng-style="itemSelectStyles(entity, entity.attributes.options)">\n         <div class="item-select--option" ng-repeat="option in entity.attributes.options track by $index" ng-class="{\'-active\': option === entity.state}" ng-click="setSelectOption($event, item, entity, option)">\n            <span ng-bind="option"></span>\n         </div>\n      </div>\n      <div class="item-triangle"></div>\n      <div ng-if="item.icons" class="item-entity">\n         <span class="item-entity--icon mdi" ng-class="entityIcon(item, entity)"></span>\n      </div>\n      <div ng-if="!item.icons" class="item-entity -select">\n         <span class="item-entity--value">\n            <span ng-bind="entityValue(item, entity)"></span>\n         </span>\n         <span ng-if="(_unit = entityUnit(item, entity))" class="item-entity--unit" ng-bind="_unit"></span>\n      </div>\n   </div>\n\n   <div ng-if="item.type === TYPES.INPUT_DATETIME" class="item-entity-container">\n      <div class="item-entity">\n         <span ng-bind="entityValue(item, entity)" class="item-entity--value -datetime"></span>\n      </div>\n   </div>\n\n   <div ng-if="item.type === TYPES.CAMERA" class="item-entity-container -below">\n      <div class="item-camera">\n         <camera item="item" entity="entity" frozen="(!isPopupActive(page) && !isPageActive(page)) || activeCamera || screensaverShown"></camera>\n      </div>\n   </div>\n\n   <div ng-if="item.type === TYPES.CAMERA_STREAM" class="item-entity-container -below">\n      <div class="item-camera">\n         <camera-stream item="item" entity="entity" frozen="(!isPopupActive(page) && !isPageActive(page)) || activeCamera || screensaverShown"></camera-stream>\n      </div>\n   </div>\n\n   <div ng-if="item.type === TYPES.SLIDER && (_c = getSliderConf(item, entity))" class="item-entity-container" ng-class="{\'-slider-bottom\': item.bottom}">\n      \x3c!-- legacy --\x3e\n\n      <div ng-if="item.legacy" class="item-entity">\n         <span ng-bind="getSliderValue(item, entity, _c)" class="item-entity--value"></span>\n         <span ng-if="(_unit = entityUnit(item, entity))" class="item-entity--unit" ng-bind="_unit"></span>\n      </div>\n      <div ng-if="item.legacy" class="item-slider">\n         <input type="range" ng-model="_c.getSetValue" ng-model-options="{ getterSetter: true }" ng-change="sliderChanged(item, entity, _c)" ng-on-touchstart="$event.stopPropagation()" ng-on-touchmove="$event.stopPropagation()" ng-on-pointerdown="$event.stopPropagation()" step="{{ _c.step }}" min="{{ _c.min }}" max="{{ _c.max }}">\n      </div>\n\n      \x3c!-- vertical/horizontal --\x3e\n\n      <div ng-if="!item.legacy && (_c_styles = sliderStyles(page, item))" class="slider-inner" ng-class="{\'slider-inner-direction-column\': item.vertical || (!item.vertical && !item.singleLine),\'slider-inner-direction-row\': !item.vertical && item.singleLine}">\n         <div class="slider-inner-icon" ng-if="item.icon">\n            <span class="item-entity--icon mdi" ng-class="entityIcon(item, entity)"></span>\n         </div>\n\n         <div class="slider-inner-value" ng-style="{\'order\': !item.vertical && item.singleLine ? 1 : 0}">\n            {{ getSliderValue(item, entity, _c) }}<span ng-if="(_unit = entityUnit(item, entity))">{{ _unit }}</span>\n         </div>\n\n         <div class="range-holder" ng-class="{\'-vertical\': item.vertical,\'-horizontal\': !item.vertical}" ng-style="item.vertical ? {height: _c_styles.width, width: _c_styles.height} : {height: _c_styles.height, width: _c_styles.width}">\n            <input type="range" ng-model="_c.getSetValue" ng-model-options="{ getterSetter: true }" ng-change="sliderChanged(item, entity, _c)" ng-on-touchstart="$event.stopPropagation()" ng-on-touchmove="$event.stopPropagation()" ng-on-pointerdown="$event.stopPropagation()" step="{{ _c.step }}" min="{{ _c.min }}" max="{{ _c.max }}" ng-style="item.vertical && _c_styles">\n         </div>\n      </div>\n   </div>\n\n   <div ng-if="item.type === TYPES.IFRAME" class="item-entity-container">\n      <div class="item-iframe">\n         <iframe ng-src="{{ itemField(\'url\', item, entity) }}" iframe-tile="item" frameborder="0"></iframe>\n      </div>\n   </div>\n\n   <div ng-if="item.type === TYPES.WEATHER" class="item-entity-container">\n      <div class="weather">\n         <div class="weather-icon-container">\n            <div class="weather-icon" ng-if="(_icon = getWeatherIcon(item, entity))">\n               <div class="wu" ng-class="\'wu-\' + _icon"></div>\n            </div>\n            <div class="weather-icon-image" ng-if="(_imgStyles = getWeatherImageStyles(item, entity))">\n               <div ng-style="_imgStyles"></div>\n            </div>\n         </div>\n\n         <div class="weather-temperature" ng-if="item.fields.temperature">\n            <span ng-bind="(getWeatherField(\'temperature\', item, entity) | number:1)"></span><span ng-bind="getWeatherField(\'temperatureUnit\', item, entity)"></span>\n         </div>\n\n         <div class="weather-line -items">\n            <span ng-if="item.fields.highTemperature" class="weather-item">\n               <i class="mdi mdi-arrow-collapse-up"></i>\n               <span ng-bind="(getWeatherField(\'highTemperature\', item, entity) | number:1)"></span><span ng-bind=" getWeatherField(\'highTemperatureUnit\', item, entity)"></span>\n            </span>\n         </div>\n\n         <div class="weather-line -items">\n            <span ng-if="item.fields.lowTemperature" class="weather-item">\n               <i class="mdi mdi-arrow-collapse-down"></i>\n               <span ng-bind="(getWeatherField(\'lowTemperature\', item, entity) | number:1)"></span><span ng-bind="getWeatherField(\'lowTemperatureUnit\', item, entity)"></span>\n            </span>\n         </div>\n\n         <div class="weather-line -items" ng-if="effectiveTileSize(page, item).width >= 140">\n            <span ng-if="item.fields.humidity" class="weather-item">\n               <i class="mdi mdi-water"></i>\n               <span ng-bind="(getWeatherField(\'humidity\', item, entity) | number:0)"></span><span ng-bind="getWeatherField(\'humidityUnit\', item, entity)"></span>\n            </span>\n            <span ng-if="item.fields.windSpeed" class="weather-item">\n               <i class="mdi mdi-weather-windy"></i>\n               <span ng-bind="(getWeatherField(\'windSpeed\', item, entity) | number:0)"></span>&nbsp;<span ng-bind="getWeatherField(\'windSpeedUnit\', item, entity)"></span>\n            </span>\n         </div>\n\n         <div class="weather-line -items" ng-if="effectiveTileSize(page, item).width < 140">\n            <span ng-if="item.fields.humidity" class="weather-item">\n               <i class="mdi mdi-water"></i>\n               <span ng-bind="(getWeatherField(\'humidity\', item, entity) | number:0)"></span><span ng-bind="getWeatherField(\'humidityUnit\', item, entity)"></span>\n            </span>\n         </div>\n         <div class="weather-line -items" ng-if="effectiveTileSize(page, item).width < 140">\n            <span ng-if="item.fields.windSpeed" class="weather-item">\n               <i class="mdi mdi-weather-windy"></i>\n               <span ng-bind="(getWeatherField(\'windSpeed\', item, entity) | number:0)"></span>&nbsp;<span ng-bind="getWeatherField(\'windSpeedUnit\', item, entity)"></span>\n            </span>\n         </div>\n\n         <div class="weather-line -items">\n            <span ng-if="item.fields.pressure" class="weather-item">\n               <i class="mdi mdi-gauge"></i>\n               <span ng-bind="(getWeatherField(\'pressure\', item, entity) | number:0)"></span>&nbsp;<span ng-bind="getWeatherField(\'pressureUnit\', item, entity)"></span>\n            </span>\n         </div>\n\n         \x3c!-- DEPRECATED --\x3e\n         <div class="weather-line" ng-if="item.fields.apparentTemperature">\n            Feels like\n            <span ng-bind="(getWeatherField(\'apparentTemperature\', item, entity) | number:1)"></span><span ng-bind="getWeatherField(\'apparentTemperatureUnit\', item, entity)"></span>\n         </div>\n\n         <div class="weather-line" ng-if="item.fields.pollen">\n            Pollen\n            <span ng-bind="getWeatherField(\'pollen\', item, entity)"></span>\n         </div>\n\n         <div class="weather-line" ng-if="item.fields.precipProbability">\n            <span ng-bind="(getWeatherField(\'precipProbability\', item, entity) | number:0)"></span><span ng-bind="getWeatherField(\'precipProbabilityUnit\', item, entity)"></span>\n            chance of rain\n         </div>\n         \x3c!-- ///DEPRECATED --\x3e\n\n         <div class="weather-line" ng-repeat="line in item.fields.list">\n            <span ng-bind="getWeatherLine(line, item, entity)"></span>\n         </div>\n      </div>\n   </div>\n\n   <div ng-if="item.type === TYPES.WEATHER_LIST" class="item-entity-container">\n      <div class="weather-list">\n         <table>\n            <tr class="weather-list-header" ng-hide="item.hideHeader">\n               <th>\n                  <span ng-bind="itemField(\'dateTitle\', item, entity) || \'Date\'"></span>\n               </th>\n               <th class="weather-list-header--icon">\n                  <span ng-bind="itemField(\'iconTitle\', item, entity)"></span>\n               </th>\n               <th class="weather-list-header--primary">\n                  <span ng-bind="itemField(\'primaryTitle\', item, entity) || \'Forecast\'"></span>\n               </th>\n               <th class="weather-list-header--secondary">\n                  <span ng-bind="itemField(\'secondaryTitle\', item, entity)"></span>\n               </th>\n            </tr>\n            <tr ng-repeat="line in item.list track by $index">\n               <td class="weather-list-date">\n                  <div ng-bind="weatherListField(\'date\', line, item, entity) | date: item.dateFormat"></div>\n               </td>\n               <td class="weather-list-icon-container">\n                  <div class="weather-list-icon" ng-if="(_icon = weatherListIcon(line, item, entity))">\n                     <div class="wu" ng-class="\'wu-\' + _icon"></div>\n                  </div>\n                  <div class="weather-list-icon-image" ng-if="(_imgStyles = weatherListImageStyles(line, item, entity))">\n                     <div ng-style="_imgStyles"></div>\n                  </div>\n               </td>\n               <td class="weather-list--primary">\n                  <div ng-bind="weatherListField(\'primary\', line, item, entity)"></div>\n               </td>\n               <td class="weather-list--secondary">\n                  <div ng-bind="weatherListField(\'secondary\', line, item, entity)"></div>\n               </td>\n            </tr>\n         </table>\n      </div>\n   </div>\n\n   <div ng-if="item.type === TYPES.CLIMATE" class="item-entity-container">\n      <div>\n         <div class="item-button -center-right" ng-if="entity.attributes.temperature && entity.state !== \'off\'" ng-click="increaseClimateTemp($event, item, entity)">\n            <i class="mdi mdi-plus"></i>\n         </div>\n         <div class="item-button -bottom-right" ng-if="entity.attributes.temperature && entity.state !== \'off\'" ng-click="decreaseClimateTemp($event, item, entity)">\n            <i class="mdi mdi-minus"></i>\n         </div>\n      </div>\n\n      <div class="item-climate">\n         <div class="item-climate--target">\n            <span ng-bind="climateTarget(item, entity)"></span>\n            <span ng-if="(_unit = entityUnit(item, entity))" class="item-climate--target--unit" ng-bind="_unit"></span>\n            <i class="item-climate--icon mdi" ng-class="entityIcon(item, entity)"></i>\n         </div>\n         <div class="item-climate--mode" ng-if="(_options = getClimateOptions(item, entity))" ng-click="openSelect(item)">\n            <span ng-bind="getClimateCurrentOption(item, entity)"></span>\n         </div>\n      </div>\n      <div ng-if="selectOpened(item)" class="item-select" ng-style="itemSelectStyles(entity, Object.keys(_options))">\n         <div class="item-select--option" ng-repeat="option in _options track by $index" ng-class="{\'-active\': option === lookupClimateOption(item, entity, entity.state)}" ng-click="setClimateOption($event, item, entity, option)">\n            <span ng-bind="option"></span>\n         </div>\n      </div>\n   </div>\n\n   <div ng-if="item.type === TYPES.MEDIA_PLAYER" class="item-entity-container">\n      <div class="media-player-table" ng-class="{\'-has-state\': _state, \'-has-subtitle\': _subtitle}">\n         <table>\n            <tr>\n               <td class="media-player-table--td-main-button">\n                  <div class="media-player--main-button" ng-if="entity.state !== \'off\'">\n                     <span class="mdi mdi-pause" ng-if="supportsFeature(FEATURES.MEDIA_PLAYER.PAUSE, entity) && entity.state === \'playing\'" ng-click="sendPlayer(\'media_pause\', item, entity)"></span>\n\n                     <span class="mdi mdi-stop" ng-if="!supportsFeature(FEATURES.MEDIA_PLAYER.PAUSE, entity) && entity.state === \'playing\'" ng-click="sendPlayer(\'media_stop\', item, entity)"></span>\n\n                     <span class="mdi mdi-play" ng-if="entity.state === \'stopped\' || entity.state === \'paused\' || entity.state === \'idle\'" ng-click="sendPlayer(\'media_play\', item, entity)"></span>\n                  </div>\n               </td>\n               <td colspan="2" class="media-player-table--td-buttons">\n                  <div class="media-player--buttons">\n                     <div class="media-player--button -prev" ng-if="supportsFeature(FEATURES.MEDIA_PLAYER.PREVIOUS_TRACK, entity) && entity.state !== \'off\'" ng-click="sendPlayer(\'media_previous_track\', item, entity)">\n                        <i class="mdi mdi-skip-previous"></i>\n                     </div>\n\n                     <div class="media-player--button -next" ng-if="supportsFeature(FEATURES.MEDIA_PLAYER.NEXT_TRACK, entity) && entity.state !== \'off\'" ng-click="sendPlayer(\'media_next_track\', item, entity)">\n                        <i class="mdi mdi-skip-next"></i>\n                     </div>\n\n                     <div class="media-player--button -power" ng-if="supportsFeature(FEATURES.MEDIA_PLAYER.TURN_ON, entity) && entity.state === \'off\'" ng-click="sendPlayer(\'turn_on\', item, entity)">\n                        <i class="mdi mdi-power"></i>\n                     </div>\n\n                     <div class="media-player--button -power" ng-if="supportsFeature(FEATURES.MEDIA_PLAYER.TURN_OFF, entity) && entity.state !== \'off\'" ng-click="sendPlayer(\'turn_off\', item, entity)">\n                        <i class="mdi mdi-power"></i>\n                     </div>\n                  </div>\n               </td>\n            </tr>\n\n            <tr class="media-player-table--space">\n               <td colspan="3"></td>\n            </tr>\n\n            <tr class="media-player-table--source">\n               <td colspan="3" class="media-player-table--td-source">\n                  <div class="media-player--source" ng-click="openSelect(item)" ng-if="entity.attributes.source_list.length && !item.hideSource">\n                     <span ng-bind="item.textSource || entity.attributes.source || \'Source\'"></span>\n                  </div>\n               </td>\n            </tr>\n\n            <tr ng-if="shouldShowVolumeSlider(entity) && (_c = getVolumeConf(item, entity))">\n               <td colspan="3" class="media-player-table--td-volume">\n                  <div class="media-player--volume">\n                     <input type="range" ng-model="_c.getSetValue" ng-model-options="{ getterSetter: true }" ng-change="volumeChanged(item, entity, _c)" ng-on-touchstart="$event.stopPropagation()" ng-on-touchmove="$event.stopPropagation()" ng-on-pointerdown="$event.stopPropagation()" step="{{ _c.step }}" min="{{ _c.min }}" max="{{ _c.max }}">\n                  </div>\n               </td>\n            </tr>\n\n            <tr ng-if="shouldShowVolumeButtons(entity)">\n               <td colspan="3" class="media-player-table--td-volume-buttons">\n                  <div class="media-player--button -volume_down" ng-click="sendPlayer(\'volume_down\', item, entity)">\n                     <i class="mdi mdi-volume-minus"></i>\n                  </div>\n\n                  <div class="media-player--button -volume_up" ng-click="sendPlayer(\'volume_up\', item, entity)">\n                     <i class="mdi mdi-volume-plus"></i>\n                  </div>\n               </td>\n            </tr>\n\n            <tr>\n               <td colspan="2"></td>\n               <td class="media-player-table--td-mute">\n                  <div ng-if="entity.state !== \'off\' && !item.hideMuteButton">\n                     <div ng-if="supportsFeature(FEATURES.MEDIA_PLAYER.VOLUME_MUTE, entity)">\n                        <div class="media-player--button -mute" ng-if="entity.attributes.is_volume_muted" ng-click="mutePlayer(false, item, entity)">\n                           <i class="mdi mdi-volume-mute"></i>\n                        </div>\n\n                        <div class="media-player--button -mute" ng-if="!entity.attributes.is_volume_muted" ng-click="mutePlayer(true, item, entity)">\n                           <i class="mdi mdi-volume-high"></i>\n                        </div>\n                     </div>\n                  </div>\n               </td>\n            </tr>\n         </table>\n      </div>\n\n      <div ng-if="selectOpened(item)" class="item-select" ng-style="itemSelectStyles(entity, entity.attributes.source_list)">\n         <div class="item-select--option" ng-repeat="option in entity.attributes.source_list track by $index" ng-class="{\'-active\': option === entity.attributes.source}" ng-click="setSourcePlayer($event, item, entity, option)">\n            <span ng-bind="option"></span>\n         </div>\n      </div>\n   </div>\n\n   <div ng-if="item.type === TYPES.GAUGE" class="item-entity-container">\n      <div class="item-gauge">\n         <ng-gauge size="{{ getGaugeField(\'size\', item, entity) }}" type="{{ getGaugeField(\'type\', item, entity) }}" thick="{{ getGaugeField(\'thick\', item, entity) }}" min="getGaugeField(\'min\', item, entity)" max="getGaugeField(\'max\', item, entity)" value="entityValue(item, entity)" cap="{{ getGaugeField(\'cap\', item, entity) }}" label="{{ getGaugeField(\'label\', item, entity) }}" prepend="{{ getGaugeField(\'prepend\', item, entity) }}" foreground-color="{{ getGaugeField(\'foregroundColor\', item, entity) }}" background-color="{{ getGaugeField(\'backgroundColor\', item, entity) }}" append="{{ getGaugeField(\'append\', item, entity) }}" thresholds="getGaugeField(\'thresholds\', item, entity)" label-only="{{ getGaugeField(\'labelOnly\', item, entity) }}" duration="{{ getGaugeField(\'duration\', item, entity) }}" fraction-size="getGaugeField(\'fractionSize\', item, entity)"></ng-gauge>\n      </div>\n   </div>\n\n   <div ng-if="item.type === TYPES.IMAGE" class="item-entity-container">\n      <div class="item-image" ng-style="{\'background-image\': \'url(\' + itemURL(item, entity) + \')\'}"></div>\n   </div>\n\n   <div ng-if="item.type === TYPES.HISTORY && (_h = initTileHistory(item, entity))" class="item-entity-container">\n      <div class="item-history">\n         <div class="item-history-container">\n            <div class="item-history--placeholder" ng-if="_h.isLoading || _h.errorText">\n               <span ng-if="_h.isLoading && !_h.errorText" class="mdi mdi-progress-clock"></span>\n               <span ng-if="_h.errorText">{{ _h.errorText }}</span>\n            </div>\n            <canvas id="item-history--canvas" class="chart chart-line" chart-data="_h.data" chart-dataset-override="_h.datasetOverride" chart-options="_h.options"></canvas>\n         </div>\n         <div class="item-title mock-title" ng-if="entityTitle(item, entity) || entitySubtitle(item, entity)">\n            &nbsp;\n         </div>\n         <div class="item-subtitle mock-title" ng-if="entitySubtitle(item, entity)">&nbsp;</div>\n      </div>\n   </div>\n</div>\n'}}));var hv=kn,fv=je,pv=Ie,gv=Fe,vv=Z,mv=Fn,yv=On,bv=jn("splice"),Sv=Math.max,Ev=Math.min,Tv=9007199254740991,_v="Maximum allowed length exceeded";hv({target:"Array",proto:!0,forced:!bv},{splice:function(t,e){var n,r,i,a,o,s,l=vv(this),u=gv(l.length),c=fv(t,u),d=arguments.length;if(0===d?n=r=0:1===d?(n=0,r=u-c):(n=d-2,r=Ev(Sv(pv(e),0),u-c)),u+n-r>Tv)throw TypeError(_v);for(i=mv(l,r),a=0;a<r;a++)(o=c+a)in l&&yv(i,a,l[o]);if(i.length=r,n<r){for(a=c;a<u-r;a++)s=a+n,(o=a+r)in l?l[s]=l[o]:delete l[s];for(a=u;a>u-r+n;a--)delete l[a-1]}else if(n>r)for(a=u-r;a>c;a--)s=a+n-1,(o=a+r-1)in l?l[s]=l[o]:delete l[s];for(a=0;a<n;a++)l[a+c]=arguments[a+2];return l.length=u-r+n,i}});var xv=Tu.map;kn({target:"Array",proto:!0,forced:!jn("map")},{map:function(t){return xv(this,t,arguments.length>1?arguments[1]:void 0)}}),kn({target:"Array",stat:!0},{isArray:Cn});var wv=_,kv=Ie,Av=Fe,Cv=nu,Dv=Math.min,Lv=[].lastIndexOf,$v=!!Lv&&1/[1].lastIndexOf(1,-0)<0,Ov=Cv("lastIndexOf"),Mv=$v||!Ov?function(t){if($v)return Lv.apply(this,arguments)||0;var e=wv(this),n=Av(e.length),r=n-1;for(arguments.length>1&&(r=Dv(r,kv(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}:Lv;kn({target:"Array",proto:!0,forced:Mv!==[].lastIndexOf},{lastIndexOf:Mv});var Iv=s,Rv=sr,Pv=_,Fv=l.f,Nv=function(t){return function(e){for(var n,r=Pv(e),i=Rv(r),a=i.length,o=0,s=[];a>o;)n=i[o++],Iv&&!Fv.call(r,n)||s.push(t?[n,r[n]]:r[n]);return s}},Uv={entries:Nv(!0),values:Nv(!1)}.entries;kn({target:"Object",stat:!0},{entries:function(t){return Uv(t)}}),kn({target:"Number",stat:!0},{isNaN:function(t){return t!=t}});var Bv=x,jv=li,Vv=s,Hv=i,Gv=yn,Wv=Yt.exports,zv=tt,Yv=v,qv=function(t,e,n){var r,i;return jv&&"function"==typeof(r=e.constructor)&&r!==n&&Bv(i=r.prototype)&&i!==n.prototype&&jv(t,i),t},Kv=j,Xv=yt,Zv=o,Jv=xr,Qv=$e.f,tm=a.f,em=Pt.f,nm=Vu.trim,rm="Number",im=Hv.Number,am=im.prototype,om=Yv(Jv(am))==rm,sm=function(t){if(Kv(t))throw TypeError("Cannot convert a Symbol value to a number");var e,n,r,i,a,o,s,l,u=Xv(t,"number");if("string"==typeof u&&u.length>2)if(43===(e=(u=nm(u)).charCodeAt(0))||45===e){if(88===(n=u.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(o=(a=u.slice(2)).length,s=0;s<o;s++)if((l=a.charCodeAt(s))<48||l>i)return NaN;return parseInt(a,r)}return+u};if(Gv(rm,!im(" 0o1")||!im("0b1")||im("+0x1"))){for(var lm,um=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof um&&(om?Zv((function(){am.valueOf.call(n)})):Yv(n)!=rm)?qv(new im(sm(e)),n,um):sm(e)},cm=Vv?Qv(im):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),dm=0;cm.length>dm;dm++)zv(im,lm=cm[dm])&&!zv(um,lm)&&em(um,lm,tm(im,lm));um.prototype=am,am.constructor=um,Wv(Hv,rm,um)}var hm=Cn,fm=[].reverse,pm=[1,2];kn({target:"Array",proto:!0,forced:String(pm)===String(pm.reverse())},{reverse:function(){return hm(this)&&(this.length=this.length),fm.call(this)}});var gm=Math.floor,vm=function(t,e){var n=t.length,r=gm(n/2);return n<8?mm(t,e):ym(vm(t.slice(0,r),e),vm(t.slice(r),e),e)},mm=function(t,e){for(var n,r,i=t.length,a=1;a<i;){for(r=a,n=t[a];r&&e(t[r-1],n)>0;)t[r]=t[--r];r!==a++&&(t[r]=n)}return t},ym=function(t,e,n){for(var r=t.length,i=e.length,a=0,o=0,s=[];a<r||o<i;)a<r&&o<i?s.push(n(t[a],e[o])<=0?t[a++]:e[o++]):s.push(a<r?t[a++]:e[o++]);return s},bm=vm,Sm=C.match(/firefox\/(\d+)/i),Em=!!Sm&&+Sm[1],Tm=/MSIE|Trident/.test(C),_m=C.match(/AppleWebKit\/(\d+)\./),xm=!!_m&&+_m[1],wm=kn,km=Ma,Am=Z,Cm=Fe,Dm=Yi,Lm=o,$m=bm,Om=nu,Mm=Em,Im=Tm,Rm=R,Pm=xm,Fm=[],Nm=Fm.sort,Um=Lm((function(){Fm.sort(void 0)})),Bm=Lm((function(){Fm.sort(null)})),jm=Om("sort"),Vm=!Lm((function(){if(Rm)return Rm<70;if(!(Mm&&Mm>3)){if(Im)return!0;if(Pm)return Pm<603;var t,e,n,r,i="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)Fm.push({k:e+r,v:n})}for(Fm.sort((function(t,e){return e.v-t.v})),r=0;r<Fm.length;r++)e=Fm[r].k.charAt(0),i.charAt(i.length-1)!==e&&(i+=e);return"DGBEFHACIJK"!==i}}));wm({target:"Array",proto:!0,forced:Um||!Bm||!jm||!Vm},{sort:function(t){void 0!==t&&km(t);var e=Am(this);if(Vm)return void 0===t?Nm.call(e):Nm.call(e,t);var n,r,i=[],a=Cm(e.length);for(r=0;r<a;r++)r in e&&i.push(e[r]);for(n=(i=$m(i,function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:Dm(e)>Dm(n)?1:-1}}(t))).length,r=0;r<n;)e[r]=i[r++];for(;r<a;)delete e[r++];return e}});var Hm=kn,Gm=x,Wm=Cn,zm=je,Ym=Fe,qm=_,Km=On,Xm=ft,Zm=jn("slice"),Jm=Xm("species"),Qm=[].slice,ty=Math.max;Hm({target:"Array",proto:!0,forced:!Zm},{slice:function(t,e){var n,r,i,a=qm(this),o=Ym(a.length),s=zm(t,o),l=zm(void 0===e?o:e,o);if(Wm(a)&&("function"!=typeof(n=a.constructor)||n!==Array&&!Wm(n.prototype)?Gm(n)&&null===(n=n[Jm])&&(n=void 0):n=void 0,n===Array||void 0===n))return Qm.call(a,s,l);for(r=new(void 0===n?Array:n)(ty(l-s,0)),i=0;s<l;s++,i++)s in a&&Km(r,i,a[s]);return r.length=i,r}});var ey={exports:{}};!function(e,n){var r="__lodash_hash_undefined__",i=9007199254740991,a="[object Arguments]",o="[object Function]",s="[object Object]",l=/^\[object .+?Constructor\]$/,u=/^(?:0|[1-9]\d*)$/,c={};c["[object Float32Array]"]=c["[object Float64Array]"]=c["[object Int8Array]"]=c["[object Int16Array]"]=c["[object Int32Array]"]=c["[object Uint8Array]"]=c["[object Uint8ClampedArray]"]=c["[object Uint16Array]"]=c["[object Uint32Array]"]=!0,c[a]=c["[object Array]"]=c["[object ArrayBuffer]"]=c["[object Boolean]"]=c["[object DataView]"]=c["[object Date]"]=c["[object Error]"]=c[o]=c["[object Map]"]=c["[object Number]"]=c[s]=c["[object RegExp]"]=c["[object Set]"]=c["[object String]"]=c["[object WeakMap]"]=!1;var d="object"==typeof t&&t&&t.Object===Object&&t,h="object"==typeof self&&self&&self.Object===Object&&self,f=d||h||Function("return this")(),p=n&&!n.nodeType&&n,g=p&&e&&!e.nodeType&&e,v=g&&g.exports===p,m=v&&d.process,y=function(){try{var t=g&&g.require&&g.require("util").types;return t||m&&m.binding&&m.binding("util")}catch(t){}}(),b=y&&y.isTypedArray;function S(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var E,T,_=Array.prototype,x=Function.prototype,w=Object.prototype,k=f["__core-js_shared__"],A=x.toString,C=w.hasOwnProperty,D=function(){var t=/[^.]+$/.exec(k&&k.keys&&k.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),L=w.toString,$=A.call(Object),O=RegExp("^"+A.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),M=v?f.Buffer:void 0,I=f.Symbol,R=f.Uint8Array,P=M?M.allocUnsafe:void 0,F=(E=Object.getPrototypeOf,T=Object,function(t){return E(T(t))}),N=Object.create,U=w.propertyIsEnumerable,B=_.splice,j=I?I.toStringTag:void 0,V=function(){try{var t=ft(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),H=M?M.isBuffer:void 0,G=Math.max,W=Date.now,z=ft(f,"Map"),Y=ft(Object,"create"),q=function(){function t(){}return function(e){if(!wt(e))return{};if(N)return N(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function K(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function X(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Z(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function J(t){var e=this.__data__=new X(t);this.size=e.size}function Q(t,e){var n=St(t),r=!n&&bt(t),i=!n&&!r&&Tt(t),a=!n&&!r&&!i&&At(t),o=n||r||i||a,s=o?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],l=s.length;for(var u in t)!e&&!C.call(t,u)||o&&("length"==u||i&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||pt(u,l))||s.push(u);return s}function tt(t,e,n){(void 0!==n&&!yt(t[e],n)||void 0===n&&!(e in t))&&rt(t,e,n)}function et(t,e,n){var r=t[e];C.call(t,e)&&yt(r,n)&&(void 0!==n||e in t)||rt(t,e,n)}function nt(t,e){for(var n=t.length;n--;)if(yt(t[n][0],e))return n;return-1}function rt(t,e,n){"__proto__"==e&&V?V(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}K.prototype.clear=function(){this.__data__=Y?Y(null):{},this.size=0},K.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},K.prototype.get=function(t){var e=this.__data__;if(Y){var n=e[t];return n===r?void 0:n}return C.call(e,t)?e[t]:void 0},K.prototype.has=function(t){var e=this.__data__;return Y?void 0!==e[t]:C.call(e,t)},K.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Y&&void 0===e?r:e,this},X.prototype.clear=function(){this.__data__=[],this.size=0},X.prototype.delete=function(t){var e=this.__data__,n=nt(e,t);return!(n<0)&&(n==e.length-1?e.pop():B.call(e,n,1),--this.size,!0)},X.prototype.get=function(t){var e=this.__data__,n=nt(e,t);return n<0?void 0:e[n][1]},X.prototype.has=function(t){return nt(this.__data__,t)>-1},X.prototype.set=function(t,e){var n=this.__data__,r=nt(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Z.prototype.clear=function(){this.size=0,this.__data__={hash:new K,map:new(z||X),string:new K}},Z.prototype.delete=function(t){var e=ht(this,t).delete(t);return this.size-=e?1:0,e},Z.prototype.get=function(t){return ht(this,t).get(t)},Z.prototype.has=function(t){return ht(this,t).has(t)},Z.prototype.set=function(t,e){var n=ht(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},J.prototype.clear=function(){this.__data__=new X,this.size=0},J.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},J.prototype.get=function(t){return this.__data__.get(t)},J.prototype.has=function(t){return this.__data__.has(t)},J.prototype.set=function(t,e){var n=this.__data__;if(n instanceof X){var r=n.__data__;if(!z||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Z(r)}return n.set(t,e),this.size=n.size,this};var it,at=function(t,e,n){for(var r=-1,i=Object(t),a=n(t),o=a.length;o--;){var s=a[it?o:++r];if(!1===e(i[s],s,i))break}return t};function ot(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":j&&j in Object(t)?function(t){var e=C.call(t,j),n=t[j];try{t[j]=void 0;var r=!0}catch(t){}var i=L.call(t);r&&(e?t[j]=n:delete t[j]);return i}(t):function(t){return L.call(t)}(t)}function st(t){return kt(t)&&ot(t)==a}function lt(t){return!(!wt(t)||function(t){return!!D&&D in t}(t))&&(_t(t)?O:l).test(function(t){if(null!=t){try{return A.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function ut(t){if(!wt(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=gt(t),n=[];for(var r in t)("constructor"!=r||!e&&C.call(t,r))&&n.push(r);return n}function ct(t,e,n,r,i){t!==e&&at(e,(function(a,o){if(i||(i=new J),wt(a))!function(t,e,n,r,i,a,o){var l=vt(t,n),u=vt(e,n),c=o.get(u);if(c)return void tt(t,n,c);var d=a?a(l,u,n+"",t,e,o):void 0,h=void 0===d;if(h){var f=St(u),p=!f&&Tt(u),g=!f&&!p&&At(u);d=u,f||p||g?St(l)?d=l:kt(S=l)&&Et(S)?d=function(t,e){var n=-1,r=t.length;e||(e=Array(r));for(;++n<r;)e[n]=t[n];return e}(l):p?(h=!1,d=function(t,e){if(e)return t.slice();var n=t.length,r=P?P(n):new t.constructor(n);return t.copy(r),r}(u,!0)):g?(h=!1,v=u,m=!0?(y=v.buffer,b=new y.constructor(y.byteLength),new R(b).set(new R(y)),b):v.buffer,d=new v.constructor(m,v.byteOffset,v.length)):d=[]:function(t){if(!kt(t)||ot(t)!=s)return!1;var e=F(t);if(null===e)return!0;var n=C.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&A.call(n)==$}(u)||bt(u)?(d=l,bt(l)?d=function(t){return function(t,e,n,r){var i=!n;n||(n={});var a=-1,o=e.length;for(;++a<o;){var s=e[a],l=r?r(n[s],t[s],s,n,t):void 0;void 0===l&&(l=t[s]),i?rt(n,s,l):et(n,s,l)}return n}(t,Ct(t))}(l):wt(l)&&!_t(l)||(d=function(t){return"function"!=typeof t.constructor||gt(t)?{}:q(F(t))}(u))):h=!1}var v,m,y,b;var S;h&&(o.set(u,d),i(d,u,r,a,o),o.delete(u));tt(t,n,d)}(t,e,o,n,ct,r,i);else{var l=r?r(vt(t,o),a,o+"",t,e,i):void 0;void 0===l&&(l=a),tt(t,o,l)}}),Ct)}function dt(t,e){return mt(function(t,e,n){return e=G(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=G(r.length-e,0),o=Array(a);++i<a;)o[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(o),S(t,this,s)}}(t,e,$t),t+"")}function ht(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function ft(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return lt(n)?n:void 0}function pt(t,e){var n=typeof t;return!!(e=null==e?i:e)&&("number"==n||"symbol"!=n&&u.test(t))&&t>-1&&t%1==0&&t<e}function gt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||w)}function vt(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var mt=function(t){var e=0,n=0;return function(){var r=W(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(V?function(t,e){return V(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:$t);function yt(t,e){return t===e||t!=t&&e!=e}var bt=st(function(){return arguments}())?st:function(t){return kt(t)&&C.call(t,"callee")&&!U.call(t,"callee")},St=Array.isArray;function Et(t){return null!=t&&xt(t.length)&&!_t(t)}var Tt=H||function(){return!1};function _t(t){if(!wt(t))return!1;var e=ot(t);return e==o||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function xt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}function wt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function kt(t){return null!=t&&"object"==typeof t}var At=b?function(t){return function(e){return t(e)}}(b):function(t){return kt(t)&&xt(t.length)&&!!c[ot(t)]};function Ct(t){return Et(t)?Q(t,!0):ut(t)}var Dt,Lt=(Dt=function(t,e,n,r){ct(t,e,n,r)},dt((function(t,e){var n=-1,r=e.length,i=r>1?e[r-1]:void 0,a=r>2?e[2]:void 0;for(i=Dt.length>3&&"function"==typeof i?(r--,i):void 0,a&&function(t,e,n){if(!wt(n))return!1;var r=typeof e;return!!("number"==r?Et(n)&&pt(e,n.length):"string"==r&&e in n)&&yt(n[e],t)}(e[0],e[1],a)&&(i=r<3?void 0:i,r=1),t=Object(t);++n<r;){var o=e[n];o&&Dt(t,o,n,i)}return t})));function $t(t){return t}e.exports=Lt}(ey,ey.exports);var ny=ey.exports;function ry(t){var e,n=[],r=pu(t.groups);try{for(r.s();!(e=r.n()).done;){var i=e.value.row||0;n.includes(i)||n.push(i)}}catch(t){r.e(t)}finally{r.f()}return 0===n.length?n.push(0):n.sort(),n}function iy(t){if(Array.isArray(t)){var e,n=pu(t.entries());try{for(n.s();!(e=n.n()).done;){var r=cu(e.value,2),i=r[0],a=r[1];t[i]=ay(a)}}catch(t){n.e(t)}finally{n.f()}return t}}function ay(t){var e,n,r;if(t.__merged_defaults)return t;var i=t;switch(i&&i.type in Qd&&(i=oy({},Qd[i.type],i)),i.type){case Fd.CAMERA:case Fd.CAMERA_STREAM:case Fd.CAMERA_THUMBNAIL:i.type===Fd.CAMERA_THUMBNAIL&&(console.warn("The CAMERA_THUMBNAIL tile is deprecated. Please replace it with the CAMERA tile. Tile: ",i),i.type=Fd.CAMERA),i.fullscreen&&(i.fullscreen=ay(i.fullscreen));break;case Fd.DOOR_ENTRY:null!==(e=i.layout)&&void 0!==e&&e.camera&&(i.layout.camera=ay(i.layout.camera)),null!==(n=i.layout)&&void 0!==n&&n.tiles&&iy(i.layout.tiles);break;case Fd.POPUP:null!==(r=i.popup)&&void 0!==r&&r.items&&iy(i.popup.items)}return i.__merged_defaults=!0,i}function oy(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return ny.apply(void 0,[t].concat(n,[sy]))}function sy(t,e,n){if("classes"===n)return function(n,r){var i=this.parseFieldValue(t,n,r)||[],a=this.parseFieldValue(e,n,r)||[];return(Array.isArray(i)?i:[i]).concat(Array.isArray(a)?a:[a])}}function ly(t){t?alert('Please make sure that you have "'.concat(uy,'.js" file and it is a valid javascript!\nIf you are running TileBoard for the first time, please rename "config.example.js" to "').concat(uy,'.js"')):(window.CONFIG||alert('The "'.concat(uy,'.js" configuration file has loaded but window.CONFIG is not defined!\nPlease make sure that it defines a CONFIG variable with proper configuration.')),window.window.initApp())}ph.controller("Main",["$scope","$timeout","$location","Api","tmhDynamicLocale","$filter","amMoment",function(t,e,n,r,i,a,o){if(window.CONFIG){var s=window.CONFIG,l=(s.locale||"en-us").toLowerCase();if(i.set(l).catch((function(){dh.add(dh.ERROR,"Failed loading locale",'Could not find corresponding file for locale "'.concat(l,'" in the /locales/ directory.'))})).then((function(){o.changeLocale(l)})),s.groupsAlign===Vd.GRID&&[Pd.MOBILE,Pd.WINPHONE].includes(s.customTheme)&&(s.groupsAlign=Vd.HORIZONTALLY),t.pages=function(t){var e,n=pu(t);try{for(n.s();!(e=n.n()).done;){var r,i=pu(e.value.groups);try{for(i.s();!(r=i.n()).done;)iy(r.value.items)}catch(t){i.e(t)}finally{i.f()}}}catch(t){n.e(t)}finally{n.f()}return t}(s.pages),t.hasGridAlignment=s.groupsAlign===Vd.GRID,t.hasGridAlignment){var u,c=pu(t.pages);try{for(c.s();!(u=c.n()).done;){var d=u.value;d.rowIndexes=ry(d)}}catch(t){c.e(t)}finally{c.f()}}t.pagesContainerStyles={},t.TYPES=Fd,t.FEATURES=Bd,t.HEADER_ITEMS=Nd,t.activeSelect=null,t.screensaverShown=!1,t.ready=!1,t.errors=[],t.states={},t.activeDatetime=null,t.datetimeString=null,t.activeCamera=null,t.activePopup=null,t.popupTimeout=null,t.alarmCode=null,t.activeAlarm=null,t.supportsFeature=Ld;var h,f=[],p={},g=null,v={},m=null,y=null,b=pu(t.pages);try{var S=function(){var e,n=h.value,r=pu(n.groups);try{var i=function(){var r=e.value;r.onLayout&&t.$watchCollection((function(){return r.items}),(function(){return r.onLayout(n,r)}))};for(r.s();!(e=r.n()).done;)i()}catch(t){r.e(t)}finally{r.f()}};for(b.s();!(h=b.n()).done;)S()}catch(t){b.e(t)}finally{b.f()}var E=[];document.addEventListener("click",(function(t){var e,n=pu(E);try{for(n.s();!(e=n.n()).done;){var r=cu(e.value,2),i=r[0],a=r[1];if(Math.abs(t.clientX-i)<25&&Math.abs(t.clientY-a)<25){t.stopPropagation(),t.preventDefault();break}}}catch(t){n.e(t)}finally{n.f()}}),!0),k(),window.addEventListener("resize",Cd(k,250)),t.entityClick=function(t,e,n){if(!1!==e.action)return"function"==typeof e.action?I(e.action,[e,n]):void 0},t.entityLongPress=function(n,r,i,a){var o;if(o=[n.changedPointers[0].clientX,n.changedPointers[0].clientY],E.push(o),e(w,500),!1!==i.secondaryAction)return"function"==typeof i.secondaryAction?I(i.secondaryAction,[i,a]):i.history||a&&a.entity_id?t.openPopupHistory(i,a):void 0},t.getBodyClass=function(){if(!g){if(g=[],s.customTheme){var t=s.customTheme;"string"==typeof t&&(t=[t]),t.forEach((function(t){g.push("-theme-"+t)}))}s.entitySize&&g.push("-"+s.entitySize+"-entity");var e=s.menuPosition||jd.LEFT,n=s.groupsAlign||Vd.HORIZONTALLY;g.push("-menu-"+e),g.push("-groups-align-"+n),s.hideScrollbar&&g.push("-hide-scrollbar")}var r=[];return m&&(m.scrolledHorizontally&&r.push("-scrolled-horizontally"),m.scrolledVertically&&r.push("-scrolled-vertically")),g.concat(r)},t.getItemEntity=function(e){return"object"===lu(e.id)?e.id:e.id in t.states?t.states[e.id]:(function(t){var e=t.id+"_not_found";s.ignoreErrors||dh.hasSeenNoteId(e)||dh.addObject({type:dh.WARNING,title:"Entity not found",message:'Entity "'+t.id+'" not found',id:e})}(e),null)},t.getCameraEntityFullscreen=function(e){var n=F("fullscreen.id",e,{});return null===n&&(n=e.id),"object"===lu(n)?n:t.states[n]},t.showPage=function(t){return-1!==f.indexOf(t)},t.hasTrackerCoords=function(t){return!!t.attributes&&(t.attributes.longitude||t.attributes.latitude)},t.slideMapStyles=function(t,e,n,r,i){var a="mapStyles"+r+(t.width||"1")+(t.height||"1");if(!n[a]){var o=t.width||1,l=t.height||1,u=e.tileSize||s.tileSize,c=n.friendly_name||" ";if(!n.longitude&&!n.latitude)return null;var d,h,f,p=n.longitude+","+n.latitude,g=Math.ceil(u*o),v=Math.ceil(u*l+80);if(t.map===Md){var m="round";"home"===i.toLowerCase()?m="home":"office"===i.toLowerCase()&&(m="work"),d="https://static-maps.yandex.ru/1.x/?lang=en-US&ll="+p+"&z="+r+"&l=map&size="+(g=Math.min(g,650))+","+(v=Math.min(v,450))+"&pt="+(p+","+m)}else if(t.map===Id){g=Math.min(g,1280),v=Math.min(v,1280),p=n.longitude+","+n.latitude,f="pin-s-"+(h=c[0].toLowerCase())+"("+n.longitude+","+n.latitude+")";var y="mapbox/streets-v11";if(s.mapboxStyle){var b=/^mapbox:\/\/styles\/(.+)$/.exec(s.mapboxStyle);b.length>1&&(y=b[1])}d="https://api.mapbox.com/styles/v1/"+y+"/static/"+f+"/"+p+","+r+",0/"+g+"x"+v+"@2x",s.mapboxToken&&(d+="?access_token="+s.mapboxToken)}else p=n.latitude+","+n.longitude,h=c[0].toUpperCase(),d="https://maps.googleapis.com/maps/api/staticmap?center="+p+"&zoom="+r+"&size="+g+"x"+v+"&scale=2&maptype=roadmap&markers="+(f=encodeURIComponent("color:gray|label:"+h+"|"+p)),s.googleApiKey&&(d+="&key="+s.googleApiKey);n[a]={backgroundImage:"url('"+d+"')"}}return n[a]},t.clockStyles=function(){return s.clockStyles},t.pageStyles=function(e,n){if(!e.styles){var r={};if(e.bg){var i=N(e.bg,e,{});i&&(r.backgroundImage='url("'+i+'")')}else if(e.bgSuffix){var a=N(e.bgSuffix,e,{});a&&(r.backgroundImage='url("'+Dd(a)+'")')}(s.transition===Rd.ANIMATED||s.transition===Rd.ANIMATED_GPU)&&n>0&&!t.isMenuOnTheLeft&&(r.position="absolute",r.left=100*n+"%",r.top="0"),e.styles=r}return e.styles},t.showPagesMenu=function(){return s.pages.length>1},t.pagesMenuClasses=function(){var t=s.menuPosition;return t||(t=jd.LEFT),"-"+t},t.trackerZoomLevels=function(t,e){return e.zoomLevels||(e.zoomLevels=[9,13],t.zoomLevels&&(e.zoomLevels=t.zoomLevels)),e.zoomLevels},t.trackerSlidesClass=function(e,n){var r=t.trackerZoomLevels(e,n).length;return t.showTrackerBg(e,n)&&r++,"-c"+r},t.trackerBg=function(t){if(!t.trackerBg){var e={};t.attributes.entity_picture&&(e.backgroundImage='url("'+Dd(t.attributes.entity_picture)+'")'),t.trackerBg=e}return t.trackerBg},t.showTrackerBg=function(t,e){return!!e.attributes.entity_picture&&!t.hideEntityPicture},t.groupStyles=function(t,e){if(!t.styles){var n=e.tileSize||s.tileSize,r=e.tileMargin||s.tileMargin;if(!("width"in t)||!("height"in t)){var i=function(t){for(var e=0,n=0,r=0;r<(t.items||[]).length;r++){var i=t.items[r];n=Math.max(n,i.position[1]+(i.height||1)),e=Math.max(e,i.position[0]+(i.width||1))}return{width:e,height:n}}(t);t.width||(t.width=i.width),t.height||(t.height=i.height)}var a={width:n*t.width+r*(t.width-1)+"px",height:n*t.height+r*(t.height-1)+"px"};e.groupMarginCss?a.margin=e.groupMarginCss:t.groupMarginCss?a.margin=t.groupMarginCss:s.groupMarginCss&&(a.margin=s.groupMarginCss),t.styles=a}return t.styles},t.effectiveTileSize=function(t,e){var n=t.tileSize||s.tileSize;return{height:(e.height||1)*n,width:(e.width||1)*n}},t.sliderStyles=function(t,e){return L(e,"_c_slider_styles",(function(){var n,r={};if(e.vertical){var i=e.width||1,a=e.height||1,o=t.tileSize||s.tileSize,l=t.tileMargin||s.tileMargin,u=o*i+l*(i-1),c=o*a+l*(a-1),d=e.icon?0:35,h=e.slider.sliderWidth||Math.max(0,u-30),f=e.slider.sliderHeight||((n=c-100+d)>22?n:0);r.width=f+"px",r.height=h+"px",r.top=f/2-h/2+"px",r.right=h/2-f/2+"px"}else r.width=e.slider.sliderWidth?e.slider.sliderWidth+"px":"80%",r.height=e.slider.sliderHeight?e.slider.sliderHeight+"px":"1rem";return r}))},t.itemStyles=function(t,e,n){var r,i=(e._prevTileSize||t.tileSize||s.tileSize)!==(t.tileSize||s.tileSize);if(!e.styles||i){var a=e.width||1,o=e.height||1,l=e.position,u=t.tileSize||s.tileSize,c=t.tileMargin||s.tileMargin;e._prevTileSize=u;var d={width:u*a+c*(a-1)+"px",height:u*o+c*(o-1)+"px",left:l[0]*u+c*l[0]+"px",top:l[1]*u+c*l[1]+"px"};e.styles=d}if(e.customStyles&&("function"==typeof e.customStyles?r=I(e.customStyles,[e,n]):"object"===lu(e.customStyles)&&(r=e.customStyles),r))for(var h in r)e.styles[h]=r[h];return e.styles},t.itemBgStyles=function(t,e){var n=F("bg",t,e),r=F("bgSuffix",t,e);return{opacity:F("bgOpacity",t,e)||null,backgroundImage:n?'url("'.concat(n,'")'):r?'url("'.concat(Dd(r),'")'):null}},t.itemClasses=function(e,n){var r;e._classes||(e._classes=[]),e._classes.length=0,e._classes.push("-"+e.type),e._classes.push("-"+((r=n.state)&&"string"==typeof r?r.replace(/[^a-z0-9]/gi,"_").toLowerCase():"non")),e.theme?e._classes.push("-th-"+e.theme):e._classes.push("-th-"+e.type);var i,a=F("classes",e,n);a&&(Array.isArray(a)||(a=[a]),(i=e._classes).push.apply(i,du(a)));return e.loading&&e._classes.push("-loading"),t.selectOpened(e)&&e._classes.push("-top-entity"),e.action&&e._classes.push("-clickable"),e._classes},t.entityState=function(t,e){if(!1===t.state)return null;if(void 0!==t.state){if("string"==typeof t.state){var n=B(t.state,e);return null!==t.states&&"object"===lu(t.states)&&t.states[n]||n}return"function"==typeof t.state?I(t.state,[t,e]):t.state}if("function"==typeof t.states)return I(t.states,[t,e]);if(null!==t.states&&"object"===lu(t.states))return t.states[e.state]||e.state;var r=e.attributes?e.attributes.unit_of_measurement:"";return e.state+(r?" "+r:"")},t.entityIcon=function(t,e){var n=N(e.state,t,e);return!n&&t.state&&(n=N(t.state,t,e)),t.icon&&(n=N(t.icon,t,e)),t.icons?"function"==typeof t.icons?I(t.icons,[t,e]):t.icons[n]||null:n},t.entityTitle=function(t,e){return"title"in t?F("title",t,e):e.attributes?e.attributes.friendly_name:null},t.itemField=function(t,e,n){return F(t,e,n)},t.entityUnit=function(t,e){return"unit"in t?F("unit",t,e):e.attributes?e.attributes.unit_of_measurement:null},t.entitySubtitle=function(t,e){return F("subtitle",t,e)},t.entityValue=function(t,e){var n=e.state;return t.value&&(n=F("value",t,e)),"function"==typeof t.filter?I(t.filter,[n,t,e]):n},t.filterNumber=function(t,e){return a("number")(t,e)},t.listField=function(t,e,n){var r=N(n[t],e,n);return"function"==typeof e.filter?I(e.filter,[r,t,e]):r},t.getWeatherField=function(t,e,n){var r=e.fields;return r&&r[t]?N(r[t],e,n):null},t.getWeatherLine=function(t,e,n){return t?N(t,e,n):null},t.getWeatherIcon=function(e,n){var r;if((e.icon||e.icons)&&(r=t.entityIcon(e,n)),r||(r=t.getWeatherField("icon",e,n))&&console.warn("`icon` field inside fields is deprecated for WEATHER tile, please move it to the tile object"),!r)return null;var i=e.icons;return!i&&e.fields.iconMap&&(i=e.fields.iconMap,r&&console.warn("`iconMap` field inside fields is deprecated for WEATHER tile, please move it to the tile object as `icons`")),"function"==typeof i?I(i,[r,e,n]):i&&i[r]||r},t.getWeatherImageStyles=function(t,e){if(!t.iconImage)return null;var n=N(t.iconImage,t,e);return"function"==typeof t.icons&&(n=I(t.icons,[n,t,e])),t.icons&&n in t.icons&&(n=t.icons[n]),n?(t._imgStyles||(t._imgStyles={}),t._imgStyles.backgroundImage='url("'+n+'")',t._imgStyles):null},t.weatherListField=function(t,e,n,r){return e&&e[t]?N(e[t],n,r):null},t.weatherListIcon=function(e,n,r){var i=t.weatherListField("icon",e,n,r);return i?"function"==typeof n.icons?I(n.icons,[i,n,r]):n.icons&&n.icons[i]||i:null},t.weatherListImageStyles=function(e,n,r){var i=t.weatherListField("iconImage",e,n,r);return i?("function"==typeof n.icons&&(i=I(n.icons,[i,n,r])),n.icons&&i in n.icons&&(i=n.icons[i]),i?(e._imgStyles||(e._imgStyles={}),e._imgStyles.backgroundImage='url("'+i+'")',e._imgStyles):null):null},t.slidesStyles=function(t,e){return t.slidesStyles||(t.slidesStyles={"animation-delay":(t.slidesDelay||.8*e)+"s"},"bgOpacity"in t&&(t.slidesStyles.opacity=t.bgOpacity)),t.slidesStyles},t.slideStyles=function(t,e,n){if(!t.slideStyles){var r={};if(t.bg){var i=N(t.bg,e,n);i&&(r.backgroundImage="url("+i+")")}t.slideStyles=r}return t.slideStyles},t.itemSelectStyles=function(t,e){if(!t.itemSelectStyles){var n={};e&&(n.marginTop=-Math.min(17*e.length,180)+"px"),t.itemSelectStyles=n}return t.itemSelectStyles},t.getMainStyles=function(){return v},t.getHeader=function(t){return t?t.header:s.header},t.getSliderConf=function(t,e){return C(t,e,t.slider||{},Yd)},t.getLightSliderConf=function(t,e,n){return C(t,e,n||{},qd)},t.getVolumeConf=function(t,e){return"volume_level"in e.attributes&&C(t,e,{},Kd)},t.getSliderValue=function(t,e,n){var r=n.value;return t.slider.formatValue&&(r=t.slider.formatValue(n)),"function"==typeof t.filter?I(t.filter,[r,t,e]):r},t.getLightSliderValue=function(t,e){return t.formatValue?t.formatValue(e):e.value},t.openLightSliders=function(n,r){if(n.sliders&&n.sliders.length||t.itemField("colorpicker",n,r))return"on"!==r.state?t.toggleSwitch(n,r,(function(){e((function(){"on"===r.state&&t.openLightSliders(n,r)}),0)})):void(n.controlsEnabled||(n.controlsEnabled=!0,e((function(){n._controlsInited=!0}),50)))},t.closeLightSliders=function(t,e,n){return t.preventDefault(),t.stopPropagation(),e.controlsEnabled=!1,e._controlsInited=!1,!1},t.preventClick=function(t){return t.preventDefault(),t.stopPropagation(),!1},t.shouldShowVolumeSlider=function(t){return Ld(Bd.MEDIA_PLAYER.VOLUME_SET,t)&&"volume_level"in t.attributes&&"off"!==t.state},t.shouldShowVolumeButtons=function(t){return(!Ld(Bd.MEDIA_PLAYER.VOLUME_SET,t)||!("volume_level"in t.attributes))&&Ld(Bd.MEDIA_PLAYER.VOLUME_STEP,t)&&"off"!==t.state},t.getGaugeField=function(t,e,n){return F("settings.".concat(t),e,n)},t.itemURL=function(t,e){return"function"==typeof t.url?I(t.url,[t,e]):t.url};var T=Cd((function(t,e,n){var r=n.request,i=n.newValue;if(!r)return;var a={};a[r.field]=i,P(t,r.domain,r.service,a)}),250);t.sliderChanged=function(t,e,n){t._sliderInited&&T(t,e,n)},t.volumeChanged=function(t,e,n){t._sliderInited&&T(t,e,n)},t.lightSliderChanged=function(t,e,n,r){t._controlsInited&&t._sliderInited&&n._sliderInited&&T(t,e,r)},t.toggleSwitch=function(t,e,n){if(t.type!==Fd.LIGHT||!t.controlsEnabled){var r="homeassistant",i=t.id.split(".")[0];-1!==["switch","light","fan"].indexOf(i)&&(r=i);var a="toggle";"off"===e.state?a="turn_on":"on"===e.state&&(a="turn_off"),P(t,r,a,{},n)}},t.dimmerToggle=function(e,n,r){e.action?I(e.action,[e,n,r]):Td.isString(e.id)&&n&&t.toggleSwitch(e,n,r)},t.dimmerAction=function(t,e,n,r){e.preventDefault(),e.stopPropagation();var i="action"+("plus"===t?"Plus":"Minus");return n[i]&&I(n[i],[n,r,e]),!1},t.toggleLock=function(t,e){var n;"locked"===e.state?n="unlock":"unlocked"===e.state&&(n="lock"),P(t,"lock",n,{})},t.toggleVacuum=function(t,e){var n;"off"===e.state?n="turn_on":"on"===e.state?n="turn_off":-1!==["idle","docked","paused"].indexOf(e.state)?n="start":"cleaning"===e.state&&(n="return_to_base"),P(t,"vacuum",n,{})},t.triggerAutomation=function(t,e){P(t,"automation","trigger",{})},t.sendPlayer=function(t,e,n){P(e,"media_player",t,{})},t.mutePlayer=function(t,e,n){P(e,"media_player","volume_mute",{is_volume_muted:t})},t.callScript=function(t,e){P(t,"script","turn_on",{variables:"function"==typeof t.variables?I(t.variables,[t,e]):t.variables||{}})},t.callScene=function(t,e){P(t,"scene","turn_on",{})},t.increaseBrightness=function(e,n,r){if(e.preventDefault(),e.stopPropagation(),"off"===r.state)return!1;if(!("brightness"in r.attributes))return V("No brightness field in object");var i=+r.attributes.brightness+25.5;return i=Math.min(i,255),t.setLightBrightness(n,i),!1},t.decreaseBrightness=function(e,n,r){if(e.preventDefault(),e.stopPropagation(),"off"===r.state)return!1;if(!("brightness"in r.attributes))return V("No brightness field in object");var i=+r.attributes.brightness-25.5;return i=Math.max(i,1),t.setLightBrightness(n,i),!1},t.increaseNumber=function(e,n,r){e.preventDefault(),e.stopPropagation();var i=parseFloat(r.state);return i+=r.attributes.step||1,r.attributes.max&&(i=Math.min(i,r.attributes.max)),t.setInputNumber(n,i),!1},t.decreaseNumber=function(e,n,r){e.preventDefault(),e.stopPropagation();var i=parseFloat(r.state);return i-=r.attributes.step||1,r.attributes.min&&(i=Math.max(i,r.attributes.min)),t.setInputNumber(n,i),!1},t.setLightBrightness=function(t,e){P(t,"light","turn_on",{brightness_pct:10*Math.round(e/255*100/10)})},t.getRGBStringFromArray=function(t){return t?"rgb("+t[0]+","+t[1]+","+t[2]+")":null},t.getRGBArrayFromString=function(t){return t&&0===t.indexOf("rgb")?(e=0===t.indexOf("rgba")?t.substring(t.indexOf("(")+1,t.lastIndexOf(",")).split(","):t.substring(t.indexOf("(")+1,t.indexOf(")")).split(","),[parseInt(e[0]),parseInt(e[1]),parseInt(e[2])]):null;var e},t.setLightColor=function(e,n){var r=t.getRGBArrayFromString(n);r&&P(e,"light","turn_on",{rgb_color:r})},t.$on("colorpicker-colorupdated",(function(e,n){t.setLightColor(n.item,n.color)})),t.setInputNumber=function(t,e){P(t,"input_number","set_value",{value:e})},t.setSelectOption=function(e,n,r,i){return e.preventDefault(),e.stopPropagation(),P(n,"input_select","select_option",{option:i}),t.closeActiveSelect(),!1},t.setSourcePlayer=function(e,n,r,i){return e.preventDefault(),e.stopPropagation(),P(n,"media_player","select_source",{source:i}),t.closeActiveSelect(),!1},t.climateTarget=function(t,e){var n=e.attributes.temperature||[e.attributes.target_temp_low,e.attributes.target_temp_high].join(" - ");return t.filter?t.filter(n):n},t.reverseLookupClimateOption=function(t,e,n){D(t,e);for(var r=0,i=Object.entries(t.climateOptions);r<i.length;r++){var a=cu(i[r],2),o=a[0];if(a[1]===n)return o}return n},t.lookupClimateOption=function(t,e,n){return D(t,e),t.climateOptions[n]||n},t.getClimateOptions=function(t,e){return D(t,e),t.climateOptions},t.getClimateCurrentOption=function(e,n){var r=e.useHvacMode?n.state:n.attributes.preset_mode;return t.lookupClimateOption(e,n,r)},t.setClimateOption=function(e,n,r,i){var a;e.preventDefault(),e.stopPropagation();var o={},s=t.reverseLookupClimateOption(n,r,i);return n.useHvacMode?(a="set_hvac_mode",o.hvac_mode=s):(a="set_preset_mode",o.preset_mode=s),P(n,"climate",a,o),t.closeActiveSelect(),!1},t.increaseClimateTemp=function(e,n,r){e.preventDefault(),e.stopPropagation();var i=parseFloat(r.attributes.temperature);return i+=r.attributes.target_temp_step||1,r.attributes.max_temp&&(i=Math.min(i,r.attributes.max_temp)),t.setClimateTemp(n,i),!1},t.decreaseClimateTemp=function(e,n,r){e.preventDefault(),e.stopPropagation();var i=parseFloat(r.attributes.temperature);return i-=r.attributes.target_temp_step||1,r.attributes.min_temp&&(i=Math.max(i,r.attributes.min_temp)),t.setClimateTemp(n,i),!1},t.setClimateTemp=function(t,e){P(t,"climate","set_temperature",{temperature:e})},t.sendCover=function(t,e,n){P(e,"cover",t,{})},t.toggleCover=function(e,n){var r;"open"===n.state?r="close_cover":"closed"===n.state&&(r="open_cover"),r&&t.sendCover(r,e,n)},t.openFanSpeedSelect=function(e,n){e.preventDefault(),e.stopPropagation(),t.openSelect(n)},t.setFanSpeed=function(e,n,r,i){return e.preventDefault(),e.stopPropagation(),P(n,"fan","set_speed",{speed:i}),t.closeActiveSelect(),!1},t.actionAlarm=function(e,n,r){var i=t.alarmCode,a={};i&&(a.code=i),p[n.id]=Date.now(),P(n,"alarm_control_panel",e,a),t.alarmCode=null},t.openPage=function(r,i){i=i||!1,f=[],m&&(f=[m]),f.push(r),m=r,s.transition===Rd.SIMPLE||e((function(){$(i)}),20),s.rememberLastPage&&n.hash(t.pages.indexOf(r))},t.openCamera=function(e){t.activeCamera=e},t.closeCamera=function(){t.activeCamera=null},t.openDatetime=function(e,n){if(t.activeDatetime=e,n.attributes&&n.attributes.has_date){var r=new Date;t.datetimeString=r.getFullYear()+"",t.datetimeString+=kd(r.getMonth()+1),t.datetimeString+=kd(r.getDate())}},t.closeDatetime=function(){t.activeDatetime=null,t.datetimeString=null},t.openPopup=function(e,n,r){e=ay(e),t.popupTimeout&&(clearTimeout(t.popupTimeout),t.popupTimeout=null),t.activePopup={item:e,entity:n,layout:r||e.popup}},t.closePopup=function(){t.popupTimeout&&(clearTimeout(t.popupTimeout),t.popupTimeout=null),t.activePopup=null},t.getPopupClasses=function(){return t.activePopup&&t.activePopup.layout.classes?N(t.activePopup.layout.classes,t.activePopup.item,t.activePopup.entity):""},t.isPopupActive=function(e){return t.activePopup&&t.activePopup.layout===e},t.initTileHistory=function(e,n){return L(e,"_historyObject",(function(){return function(e,n,i){var a={item:Td.copy(e),config:Td.copy(i),isLoading:!0,errorText:null,watchers:[],deregister:function(){a.watchers.forEach((function(t){t()}))}},o=t.itemField("entity",i,n)||n.entity_id;if(!o)return a.errorText="No entity was specified",a;var s=864e5,l=new Date(Date.now()-(t.itemField("offset",i,n)||s)).toISOString();return r.getHistory(l,o).then((function(e){if(a.isLoading=!1,e)if(0!==e.length){var r=[],l=[],u=[],c={};e.forEach((function(e){var n=e[0],i=e.map((function(t){return{x:new Date(t.last_changed),y:t.state}}));i.push({x:new Date,y:t.states[n.entity_id].state}),r.push(i);var a=n.attributes.friendly_name,o=n.attributes.unit_of_measurement,s=Number.isNaN(parseFloat(i[i.length-1].y))?"category":"linear",d=s+(o?"-"+o:""),h=!1;if(o&&!(o in c)?(c[o]=!0,h=!0):o||(h=!0),h){var f=null;"category"===s&&(f=[],i.forEach((function(t){-1===f.indexOf(t.y)&&f.push(t.y)})),f.sort().reverse(),1===f.length&&(-1!==["on","off"].indexOf(f[0])?f=["on","off"]:(f.push(""),f.unshift("")))),u.push({type:s,labels:f,id:d})}l.push({label:o?a+" / "+o:a,yAxisID:d})}));var d=r.length>1?"nearest":"index";a.data=r,a.datasetOverride=l,a.options=Td.merge({scales:{yAxes:u},tooltips:{mode:d},hover:{mode:d},animation:{duration:0},legend:{display:"string"!=typeof o}},t.itemField("options",i,n));var h=function(){for(var e=new Date(Date.now()-(t.itemField("offset",i,n)||s)),r=0;r<a.data.length;r++)for(var o=!1;!o&&a.data[r].length>0;)a.data[r][0].x<e?a.data[r].shift():o=!0};"string"==typeof o?a.watchers.push(t.$watchCollection((function(){return[t.states[o].state,t.states[o].last_updated]}),(function(t){a.data[0].push({x:new Date,y:t[0]}),h()}))):o.forEach((function(e,n){a.watchers.push(t.$watchCollection((function(){return[t.states[e].state,t.states[e].last_updated]}),(function(t){a.data[n].push({x:new Date,y:t[0]}),h()})))}))}else a.errorText="No history data found";else a.errorText="Failed"})),a}(e,n,e)}))},t.openPopupHistory=function(e,n){var r=L(e=ay(e),"_popupHistory",(function(){return oy({},Xd(e),{classes:F("history.classes",e,n)||[],items:[F("history",e,n)||{}]})}));t.openPopup(e,n,r)},t.openPopupIframe=function(e,n){var r=L(e=ay(e),"_popupIframe",(function(){return oy({},Zd(e),{classes:F("iframeClasses",e,n)||[],items:[{customStyles:F("iframeStyles",e,n)||{}}]})}));t.openPopup(e,n,r)},t.openDoorEntry=function(n,r){var i=L(n=ay(n),"_popupDoorEntry",(function(){return oy({},{classes:["-popup-fullsize"],styles:{},items:[{state:!1,title:!1,position:[0,0],action:!1,secondaryAction:!1,classes:["-item-fullsize","-item-non-clickable","-item-transparent"],customStyles:{width:null,height:null,top:null,left:null}}]},{items:[F("layout.camera",n,r)||{}].concat(du(F("layout.tiles",n,r)||[]))},F("layout.page",n,r)||{})}));t.openPopup(n,r,i),s.doorEntryTimeout&&(t.popupTimeout=e((function(){t.closePopup()}),1e3*s.doorEntryTimeout))},t.openAlarm=function(e){t.activeAlarm=e,t.alarmCode=null},t.closeAlarm=function(){t.activeAlarm=null,t.alarmCode=null},t.getCameraList=function(){if(y)return y;var e=[];return t.pages.forEach((function(t){(t.groups||[]).forEach((function(t){(t.items||[]).forEach((function(t){[Fd.CAMERA,Fd.CAMERA_STREAM].includes(t.type)&&!t.hideFromList&&e.push(t)}))}))})),y=e,e},t.isPageActive=function(t){return m===t},t.shouldDrawPage=function(e){return s.transition!==Rd.SIMPLE||t.isPageActive(e)},t.isHidden=function(t,e){return"hidden"in t&&("function"==typeof t.hidden?I(t.hidden,[t,e]):t.hidden)},t.isMenuOnTheLeft=s.menuPosition===jd.LEFT;var _=!1;t.onPageScroll=function(){return _=!0,!0},t.isPanEnabled=function(e,n){if(!t.activeCamera&&!t.activePopup)return!n||"touch"!==n.pointerType||(n.isFirst&&(_=!1),!_)},t.onPagePan=function(e){if(e.eventType&(Th.INPUT_END|Th.INPUT_CANCEL)){if(t.pagesContainerStyles.transition=null,e.eventType===Th.INPUT_CANCEL)return void $()}else t.pagesContainerStyles.transition="none";var n=t.pages.length,r=t.pages.indexOf(m),i=100*-r,a=t.isMenuOnTheLeft?window.innerHeight:window.innerWidth,o=t.isMenuOnTheLeft?e.deltaY:e.deltaX,s=o/a*100,l=i+s;if(e.isFinal){var u=r,c=t.isMenuOnTheLeft?e.velocityY:e.velocityX;if(Math.abs(s)>=50||Math.abs(c)>.5&&c<0==o<0){var d=u+(l<i?1:-1);d>=0&&d<n&&(u=d)}t.openPage(t.pages[u])}else l<=0&&l>=-100*(n-1)&&(t.pagesContainerStyles.transform=O(l+"%"))},t.toggleSelect=function(e){t.selectOpened(e)?t.closeActiveSelect():t.openSelect(e)},t.openSelect=function(e){t.activeSelect=e},t.closeActiveSelect=function(){t.activeSelect=null},t.selectOpened=function(e){return t.activeSelect===e},t.inputAlarm=function(e){t.alarmCode=t.alarmCode||"",t.alarmCode+=e},t.clearAlarm=function(){t.alarmCode=""},t.sendDatetime=function(){if(t.activeDatetimeValid()){var e=t.activeDatetime,n=t.getItemEntity(e),r=t.getActiveDatetimeInput().split(" "),i={};n.attributes.has_date&&(i.date=r[0]),n.attributes.has_time&&(i.time=r[1]||r[0]),P(e,"input_datetime","set_datetime",i)}},t.inputDatetime=function(e){var n=t.getItemEntity(t.activeDatetime);if(n){var r=M(n);r=r.replace(/\W/gi,""),t.datetimeString=t.datetimeString||"",t.datetimeString.length>=r.length||(t.datetimeString+=e)}},t.clearCharDatetime=function(){t.datetimeString&&(t.datetimeString=t.datetimeString.slice(0,t.datetimeString.length-1))},t.getActiveDatetimeInput=function(){var e=M(t.getItemEntity(t.activeDatetime)),n=t.datetimeString||"",r=0;return e.replace(/\w|\W/gi,(function(t,e){return r>=n.length?"":/\W/.test(t)?t:n[r++]}))},t.getActiveDatetimePlaceholder=function(){var e=M(t.getItemEntity(t.activeDatetime)),n=t.getActiveDatetimeInput()||"";return e.slice(n.length)},t.activeDatetimeValid=function(){var e=t.getItemEntity(t.activeDatetime);if(!e)return!1;var n=M(e);return n=n.replace(/\W/gi,""),t.datetimeString=t.datetimeString||"",t.datetimeString.length===n.length};var x=!1;r.onError((function(t){console.error(t),V(t.message)})),r.onReady((function(){r.subscribeEvents("state_changed",(function(t){H("subscribed to state_changed",t)})),r.subscribeEvents("tileboard",(function(t){H("subscribed to tileboard",t)})),r.getStates((function(e){e.success&&(H(e.result),e.result.forEach((function(e){t.states[e.entity_id]=e}))),t.ready=!0,x=!0,I(s.onReady);var r=n.hash();s.rememberLastPage&&t.pages[r]||(r=0),t.openPage(t.pages[r],!0),G()}))})),r.onUnready((function(){x=!1,e((function(){!1===x&&(t.ready=!1)}),1e3)})),r.onMessage((function(e){!function(e){"event"===e.type&&function(e){try{"state_changed"===e.event_type?(H("state change",e.data.entity_id,e.data.new_state),function(e,n){t.states[e]||(t.states[e]=n);for(var r in n)t.states[e][r]=n[r]}(e.data.entity_id,e.data.new_state),function(e,n){!function(e,n){if(e in p){var r=p[e];Date.now()-r<3e3&&(t.closeAlarm(),G())}}(e)}(e.data.entity_id,e.data.new_state)):"tileboard"===e.event_type&&(H("tileboard",e.data),function(t){if(!s.events)return;s.events.forEach((function(e){t.command===e.command&&"function"==typeof e.action&&I(e.action,[t])}))}(e.data))}catch(t){console.error(t)}G()}(e.event)}(e)})),Td.element(window).on("view:updated",(function(){G()})),t.$watchGroup(["activePage.scrolledVertically","activePage.scrolledHorizontally"],G),window.openPage=function(e){t.openPage(e),G()},window.setScreensaverShown=function(e){t.screensaverShown=e,G()},!1!==s.pingConnection&&(setInterval(W,5e3),window.addEventListener("focus",(function(){W()})))}function w(){E.splice(0,1)}function k(){var t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(t,"px"))}function A(t){return isNaN(+t)?null:+t}function C(t,n,r,i){var a="_c_slider_"+(r.field||i.field);return L(t,a,(function(){var a,o,s,l;e((function(){t._sliderInited=!0}),50),e((function(){r._sliderInited=!0}),100);var u=n.attributes||{},c={min:null!==(a=null!==(o=r.min)&&void 0!==o?o:u.min)&&void 0!==a?a:i.min,max:null!==(s=null!==(l=r.max)&&void 0!==l?l:u.max)&&void 0!==s?s:i.max,step:r.step||u.step||i.step,request:r.request||i.request,curValue:void 0,oldValue:void 0,newValue:void 0,value:void 0,getSetValue:function(t){if(arguments.length)c.newValue=t,c.value=t;else{var e,a,o,s,l,u,d,h,f=n.attributes,p=n.state;c.curValue=null!==(e=null!==(a=null!==(o=null!==(s=null!==(l=null!==(u=null!==(d=null!==(h=A(+f[r.field]))&&void 0!==h?h:A(+f[i.field]))&&void 0!==d?d:A(+p))&&void 0!==u?u:r.value)&&void 0!==l?l:i.value)&&void 0!==s?s:r.min)&&void 0!==o?o:f.min)&&void 0!==a?a:i.min)&&void 0!==e?e:0,c.oldValue!==c.curValue&&(c.oldValue=c.curValue,c.value=c.curValue)}return c.value}};return c}))}function D(t,e){if(void 0===t.climateOptions){var n,r={},i=pu(t.useHvacMode?e.attributes.hvac_modes:e.attributes.preset_modes);try{for(i.s();!(n=i.n()).done;){var a=n.value;null!==t.states&&"object"===lu(t.states)?r[a]=t.states[a]||a:r[a]=a}}catch(t){i.e(t)}finally{i.f()}t.climateOptions=r}}function L(t,e,n){return t[e]||(t[e]="function"==typeof n?n():n),t[e]}function $(n){var r="-"+100*t.pages.indexOf(m)+"%";t.pagesContainerStyles.transform=O(r),n&&(t.pagesContainerStyles.transition="none",e((function(){t.pagesContainerStyles.transition=null}),50))}function O(e){return s.transition===Rd.ANIMATED_GPU?"translate3d("+(t.isMenuOnTheLeft?[0,e,0]:[e,0,0]).join(",")+")":s.transition===Rd.ANIMATED?"translate("+(t.isMenuOnTheLeft?[0,e]:[e,0]).join(",")+")":void 0}function M(t){var e=[];return t&&t.attributes?(t.attributes.has_date&&e.push("YYYY-MM-DD"),t.attributes.has_time&&e.push("hh:mm"),e.join(" ")):null}function I(e,n){return"function"!=typeof e?e:e.apply(function(){return{states:t.states,$scope:t,parseFieldValue:N.bind(this),api:r,apiRequest:R.bind(this)}}(),n||[])}function R(t,e){r.send(t,(function(t){G(),e&&e(t)}))}function P(t,e,n,i,a){if(!t.loading){t.loading=!0;var o=Td.extend({entity_id:t.id},i);r.callService(e,n,o,(function(e){t.loading=!1,G(),a&&a(e)}))}}function F(t,e,n){var r=e;return t.split(".").forEach((function(t){r="object"===lu(r)?r[t]:void 0})),N(r,e,n)}function N(t,e,n){return t?"function"==typeof t?I(t,[e,n]):"string"==typeof t?B(t,n):t:null}function U(e,n){return"@"===e[0]?j(n,e.slice(1)):"&"===e[0]?function(e){var n=e.split(".");if(n.length<3)return;return j(t.states[n.slice(0,2).join(".")]||null,n.slice(2).join("."))}(e.slice(1)):e}function B(t,e){return t.replace(/([&@][\w\d._]+)/gi,(function(n,r,i){if("&"===n[0]&&n.split(".").length<3)return n;var a=U(n,e);return void 0===a?n===t?"":n:null===a?"":a}))}function j(t,e){var n=t;return e.split(".").forEach((function(t){n="object"===lu(n)&&n?n[t]:void 0})),n}function V(t){s.ignoreErrors||dh.addObject({type:dh.ERROR,title:"Error",message:t,lifetime:10})}function H(){s.debug&&console.log.apply(console,[].slice.call(arguments))}function G(){t.$$phase||t.$apply()}function W(){if(t.ready&&!1!==x){var n=!1;r.sendPing((function(t){"id"in t&&(n=!0)})),e((function(){if(!n){x=!1;var t=dh.addObject({type:dh.WARNING,title:"Ping unsuccessful",message:"Trying to reconnect"});r.forceReconnect();var e=r.onReady((function(){e(),t&&t.remove(),dh.addObject({type:dh.SUCCESS,title:"Reconnection",message:"Reconnection successful",lifetime:1})}))}}),3e3)}}}]),ph.controller("Noty",["$scope",function(t){var e=null;t.getNoties=function(){return dh.noties},t.clearAll=function(){dh.removeAll()},t.getNotiesClasses=function(){if(!e){e=[];var t=Hd.RIGHT;window.CONFIG&&window.CONFIG.notiesPosition&&(t=window.CONFIG.notiesPosition),e.push("-"+t)}return e},dh.onUpdate((function(){t.$$phase||t.$digest()}))}]),ph.controller("Screensaver",["$scope",function(t){if(window.CONFIG){var e=Td.element(window),n=Date.now(),r=window.CONFIG.screensaver||null;if(r&&r.timeout){var i=0,a=r.slidesTimeout||1;t.now=new Date,t.isShown=!1,t.conf=r,t.slides=r.slides,t.getSlideClasses=function(e,n){n._classes||(n._classes=[]);var r=i===e+1||t.slides.length===e+1&&!i;return n._classes.length=0,i===e&&n._classes.push("-active"),r&&n._classes.push("-prev"),n._classes},t.hideScreensaver=function(){o(!1)},t.getSlideStyle=function(t){return t._styles||(t._styles={backgroundImage:"url("+t.bg+")"},t.styles&&(t._styles=wd(t._styles,t.styles))),t._styles},setInterval((function(){var e=Date.now()-n,i=r.timeout<e/1e3;i===t.isShown||t.activeCamera||o(i)}),1e3),setInterval((function(){(i+=1)>=t.slides.length&&(i=0),t.isShown&&(t.now=new Date,t.$$phase||t.$digest())}),1e3*a),window.showScreensaver=function(){setTimeout((function(){n=0,o(!0)}),100)},window.hideScreensaver=function(){setTimeout((function(){n=Date.now(),o(!1)}),100)},e.bind("click keypress touchstart focus",(function(){n=Date.now()}))}}function o(e){t.isShown=e,window.setScreensaverShown&&window.setScreensaverShown(e),t.$$phase||t.$digest()}}]);var uy=new URL(document.location.href).searchParams.get("config")||"config",cy=document.createElement("script");cy.src="./".concat(uy,".js?r=").concat(Date.now()),cy.onload=function(){return ly()},cy.onerror=function(t){return ly(t)},document.head.appendChild(cy)}();
//# sourceMappingURL=app-ac55b6b9.js.map
